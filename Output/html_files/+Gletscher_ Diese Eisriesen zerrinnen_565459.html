<!doctype html><html lang="de">
<head>
<title>Gletscher: Diese Eisriesen zerrinnen - DER SPIEGEL</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes">
<meta name="MSSmartTagsPreventParsing" content="true">
<meta http-equiv="imagetoolbar" content="no">
<meta name="referrer" content="origin-when-cross-origin">
<meta name="apple-itunes-app" content="app-id=424881832">
<link rel="manifest" href="https://www.spiegel.de/public/spon/json/manifest.json">
<meta name="theme-color" content="#e64415" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#D03D12" media="(prefers-color-scheme: dark)">
<meta name="google-site-verification" content="lwpSnwoyvMkHS9nHmLBZuYOashAHfooOHSHeA_KS7ek">
<meta name="notdm" content="true">
<meta name="robots" content="index, follow, noarchive, noodp, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="Googlebot-News" content="index, follow">
<meta name="copyright" content="DER SPIEGEL, Hamburg, Germany">
<meta name="email" content="spiegel_online@spiegel.de">
<meta name="author" content="Merlin Menze, Max Heber, DER SPIEGEL">
<meta name="date" content="2025-03-27T14:54:00+01:00">
<meta name="last-modified" content="2025-03-27T14:54:00+01:00">
<meta name="locale" content="de_DE">
<meta name="description" content="Gletscher sind mächtig, doch verwundbar: Sie schwinden immer schneller, schon jetzt sind mehr als 9000 Milliarden Tonnen Eis verloren. Was die Folgen sind – und was Hoffnung macht.">
<meta name="news_keywords" content="Wissenschaft, Gletscher, Daten und Visualisierungen, Klimakrise">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@derspiegel">
<meta name="twitter:title" content="(S+) Gletscher: Diese Eisriesen zerrinnen">
<meta name="twitter:widgets:theme" :content="$store.MediaQuery.colorScheme">
<meta name="twitter:creator" content="@derspiegel">
<meta name="twitter:image" content="https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w1200_r2_fpx54.53_fpy54.97.png">
<meta property="og:title" content="(S+) Gletscher: Diese Eisriesen zerrinnen">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a">
<meta property="og:image" content="https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w1200_r1.778_fpx54.53_fpy54.97.png">
<meta property="og:description" content="Gletscher sind mächtig, doch verwundbar: Sie schwinden immer schneller, schon jetzt sind mehr als 9000 Milliarden Tonnen Eis verloren. Was die Folgen sind – und was Hoffnung macht.">
<script type="application/ld+json">
[{"@context":"http://schema.org","@type":"NewsArticle","articleSection":"Wissenschaft","author":[{"@type":"Person","name":"Max Heber"},{"@type":"Person","name":"Merlin Menze"}],"dateCreated":"2025-03-27T14:54:00+01:00","dateModified":"2025-03-27T14:54:00+01:00","datePublished":"2025-03-27T14:54:00+01:00","headline":"Beispielloses Gletscherschmelzen: Diese Eisriesen zerrinnen","image":["https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w1200_r1.778_fpx54.53_fpy54.97.png","https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w1200_r1.33_fpx54.53_fpy54.97.png","https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w1200_r1_fpx54.53_fpy54.97.png"],"isAccessibleForFree":false,"keywords":["Gletscher","Daten und Visualisierungen","Klimakrise"],"mainEntityOfPage":"https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","name":"a-5c889858-7313-4254-9f4a-dc0d3ab8587a","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://cdn.prod.www.spiegel.de/public/spon/images/logos/der-spiegel-h60.png"},"name":"DER SPIEGEL"},"thumbnailUrl":["https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w288_r1.778_fpx54.53_fpy54.97.png","https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w288_r1.33_fpx54.53_fpy54.97.png","https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w288_r1_fpx54.53_fpy54.97.png"],"url":"https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":{"@id":"https://www.spiegel.de/","@type":"WebPage","name":"Startseite"},"position":1},{"@type":"ListItem","item":{"@id":"https://www.spiegel.de/wissenschaft/","@type":"WebPage","name":"Wissenschaft"},"position":2},{"@type":"ListItem","item":{"@id":"https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","image":"https://cdn.prod.www.spiegel.de/images/50afc426-56c0-4555-9675-2064cf7e35f2_w1200_r1.778_fpx54.53_fpy54.97.png","name":"Gletscher: Diese Eisriesen zerrinnen"},"position":3}]}]
</script>
<link rel="preconnect" href="https://cdn.prod.www.spiegel.de">
<link rel="dns-prefetch" href="https://cdn.prod.www.spiegel.de">
<link rel="preconnect" href="https://sp-spiegel-de.spiegel.de">
<link rel="dns-prefetch" href="https://sp-spiegel-de.spiegel.de">
<link rel="shortcut icon" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/favicon.ico" type="image/ico">
<link rel="apple-touch-icon" sizes="57x57" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://cdn.prod.www.spiegel.de/public/spon/images/icons/touch-icon180.png">
<link rel="canonical" href="https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a">
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/spon/generated/css/styles.bc4c98e16c9ea728caa5.css" as="style">
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/generated/js/commons.69599ab51851318f6930.js" as="script">
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/generated/js/header.60544321707142ecd7dd.js" as="script">
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/generated/js/vendors.f1c4f8bff0ebc606b86f.js" as="script">
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/generated/js/index.f9ed19ce4e1f705b9cdd.js" as="script">
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSlab4UICd-ExtraBold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Italic.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Bold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-BoldItalic.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifDisplayUI-BoldItalic.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Bold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4-6SemiBold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="alternate" type="application/rss+xml" title="DER SPIEGEL | RSS Schlagzeilen" href="https://www.spiegel.de/schlagzeilen/index.rss">
<link rel="alternate" type="application/rss+xml" title="DER SPIEGEL RSS Wissenschaft" href="https://www.spiegel.de/wissenschaft/index.rss">
<link rel="alternate" type="application/rss+xml" title="DER SPIEGEL RSS Wissenschaft - Gletscher" href="https://www.spiegel.de/thema/gletscher/index.rss">
<link rel="alternate" type="application/rss+xml" title="DER SPIEGEL RSS Wissenschaft - Daten und Visualisierungen" href="https://www.spiegel.de/thema/daten-und-visualisierungen/index.rss">
<link rel="alternate" type="application/rss+xml" title="DER SPIEGEL RSS Wissenschaft - Klimakrise" href="https://www.spiegel.de/thema/klimawandel/index.rss">
<style>html {
    --polygon-app-collapsible-header-height: 0px;
    --polygon-app-bottombar-height: 0px;
    --polygon-audioplayer-height: 0px;
    --polygon-featurebar-height: 0px;
    --polygon-headerbar-height: 0px;
    --polygon-max-headerbar-height: 0px;
    --polygon-navigation-height: 0px;
    --polygon-breakingnews-height: 0px;
    --polygon-block-title-height: 0px;
    --polygon-ad-sticky-offset: 0px;
    --polygon-smallest-viewport-height: 100vh;
}

@supports (height: 100svh) {
    html {
        --polygon-smallest-viewport-height: 100svh;
    }
}

[data-is-first-child-hidden]:first-child {
    display: none;
}

html.is-app {
    --polygon-app-bottombar-height: 53px;
}
html.is-app.has-bottom-sheet {
    --polygon-app-bottombar-height: 93px;
}
html.audio-player-open [data-audioplayer-height] {
    --polygon-audioplayer-height: 68px;
}
html:not(.is-app) [data-featurebar-height] {
    --polygon-featurebar-height: 60px;
}

html:not(.is-app) {
    --polygon-navigation-height: 56px;
}
html.has-breaking-news {
    --polygon-breakingnews-height: 52px;
}

[data-block-el*="title"] ~ DIV {
    --polygon-block-title-height: 50px;
}

html.is-app.is-android.article:not(.is-issue-context) {
    --polygon-app-collapsible-header-height: 53px;
}

[data-sticky-ad-offset] {
    top: calc(var(--polygon-headerbar-height, 0px) + var(--polygon-featurebar-height, 0px) + var(--polygon-block-title-height, 0px));
}

html.overlay-open body {
    overflow: hidden !important;
}

html.is-logged-in [data-logged-in-hidden],
html.is-logged-in [data-logged-in-hidden] + .border-separator {
    display: none;
}

html:not(.is-logged-in) [data-not-logged-in-hidden],
html:not(.is-logged-in) [data-not-logged-in-hidden] + .border-separator {
    display: none;
}

html.is-mobile [data-mobile-hidden] {
    display: none;
}

html.is-tablet [data-tablet-hidden] {
    display: none;
}

html:not(.is-mobile) [data-not-mobile-hidden] {
    display: none;
}

html.is-app [data-app-hidden] {
    display: none;
}

html:not(.is-app) [data-not-app-hidden] {
    display: none;
}

html.is-unsupported-offline-issue [data-is-unsupported-offline-issue-hidden] {
    display: none;
}

html.is-unsupported-audio-playlist [data-is-unsupported-audio-playlist-hidden] {
    display: none;
}

html.is-unsupported-app-navigation [data-is-unsupported-app-navigation-hidden] {
    display: none;
}

html.is-app:not(.is-unsupported-app-navigation) [data-is-supported-app-navigation-hidden] {
    display: none;
}

html.is-unsupported-subscription-plans [data-is-unsupported-subscription-plans-hidden] {
    display: none;
}

html:not(.is-ios) [data-not-ios-hidden] {
    display: none;
}

html.is-ios [data-ios-hidden] {
    display: none;
}

html.is-android [data-android-hidden] {
    display: none;
}

html.is-app.is-ios [data-ios-app-hidden] {
    display: none;
}

html:not(.is-android) [data-not-android-hidden] {
    display: none;
}

html.is-app body>[id^="sp_message_container"] {
    overflow: visible !important;
    height: calc(100vh - 56px) !important;
}
html.is-app body>[id^="sp_message_container"]::after {
    content: "";
    position: absolute;
    width: 100%; height: 56px;
    background: rgb(0,0,0);
    opacity: 0.65;
}

[data-anchor-offset]::before {
    content: "";
    display: block;
    margin-top: calc((var(--polygon-headerbar-height, 0px) + var(--polygon-featurebar-height, 0px)) * -1);
    height: calc(var(--polygon-headerbar-height, 0px) + var(--polygon-featurebar-height, 0px));
}

html.is-app {
    -webkit-tap-highlight-color: transparent;
}

html:not(.is-issue-context) [data-not-issue-context-hidden] {
    display: none;
}
html.is-issue-context [data-issue-context-hidden] {
    display: none;
}
html.is-app.article.is-issue-context [data-app-article-issue-context-hidden] {
    display: none;
}

html.hide-conditional [data-contains-flags*="conditional"] [data-flag-name*="conditional"],
html.hide-conditional [data-conditional-only] {
    display: none;
}

html.has-breaking-news [data-has-breaking-news-hidden] {
    display: none;
}

html.has-paid-access [data-has-paid-access-hidden] {
    display: none;
}

html.has-noads-access [data-has-noads-access-hidden] {
    display: none;
}

html:not(.has-paid-access) [data-has-no-paid-access-hidden] {
    display: none;
}

html:not(.is-gift-article) [data-not-gift-article-hidden] {
    display: none;
}

html:not(.has-first-paint-overlay) [data-not-first-paint-overlay-hidden] {
    display: none;
}

a > svg:first-of-type:last-of-type {
    pointer-events: none;
}

html [data-area^="block>topic"] [data-is-inside-topic-block-hidden] {
    display: none;
}

[data-not-loaded-w-full]:not(.loaded) {
    width: 100%;
}
[data-not-loaded-hidden]:not(.loaded) {
    display: none;
}
[data-peer].loaded ~ [data-peer-loaded-hidden],
iframe.peer ~ [data-peer-loaded-hidden] {
    display: none;
}
[data-peer]:not(.loaded) ~ [data-peer-not-loaded-hidden] {
    display: none;
}

[x-cloak] {
    display: none !important;
}

@media (max-width: 719px) {
    html.audio-player-open [data-audioplayer-height] {
        --polygon-audioplayer-height: 60px;
    }
    html:not(.is-app) [data-featurebar-height] {
        --polygon-featurebar-height: 53px;
    }
    html:not(.is-app) {
        --polygon-navigation-height: 88px;
    }
    html.has-breaking-news {
        --polygon-breakingnews-height: 40px;
    }
    .sm\:sticky [data-advertisement] .teads-inread,
    .RichText .sm\:sticky .teads-inread,
    .sm\:sticky [data-advertisement] .ob-smartfeed-wrapper,
    .RichText .sm\:sticky .ob-smartfeed-wrapper {
        margin-bottom: 0px !important;
    }
}

@media (min-width: 720px) and (max-width: 1019px) {
    html:not(.is-app) {
        --polygon-navigation-height: 112px;
    }
    html.has-breaking-news {
        --polygon-breakingnews-height: 52px;
    }
}
                html:not(.no-header) [data-headerbar-height],
html:not(.no-header) [data-sticky-ad-offset],
html:not(.no-header) [data-anchor-offset] {
    --polygon-headerbar-height: 80px;
    --polygon-max-headerbar-height: 80px;
}
html:not(.no-header).is-headerbar-collapsed [data-headerbar-height],
html:not(.no-header).is-headerbar-collapsed [data-sticky-ad-offset],
html:not(.no-header).is-headerbar-collapsed [data-anchor-offset] {
    --polygon-headerbar-height: 48px;
}

html.Spplus [data-has-spplus-hidden],
html:not(.Spplus):not(.is-gift-article):not(.has-metered-access) [data-has-spplus-visible] {
    display: none;
}

html.Spmetered [data-has-spmetered-hidden],
html:not(.Spmetered):not(.is-gift-article) [data-has-spmetered-visible] {
    display: none;
}

@media (max-width: 719px) {
    html:not(.no-header) [data-headerbar-height],
    html:not(.no-header).is-headerbar-collapsed [data-headerbar-height],
    html:not(.no-header) [data-sticky-ad-offset],
    html:not(.no-header).is-headerbar-collapsed [data-sticky-ad-offset],
    html:not(.no-header) [data-anchor-offset],
    html:not(.no-header).is-headerbar-collapsed [data-anchor-offset] {
        --polygon-headerbar-height: 48px;
        --polygon-max-headerbar-height: 48px;
    }
}@font-face {font-family: 'SpiegelSlabCdUI';font-weight: 800;font-display: swap;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSlab4UICd-ExtraBold.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSlab4UICd-ExtraBold.woff") format('woff');}@font-face {font-family: 'SpiegelSerifUI';font-weight: 400;font-display: swap;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Regular.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Regular.woff") format('woff');}@font-face {font-family: 'SpiegelSerifUI';font-weight: 400;font-display: swap;font-style: italic;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Italic.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Italic.woff") format('woff');}@font-face {font-family: 'SpiegelSerifUI';font-weight: 700;font-display: swap;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Bold.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-Bold.woff") format('woff');}@font-face {font-family: 'SpiegelSerifUI';font-weight: 700;font-display: swap;font-style: italic;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-BoldItalic.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifTextUI-BoldItalic.woff") format('woff');}@font-face {font-family: 'SpiegelSerifDisplayUI';font-weight: 700;font-display: swap;font-style: italic;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifDisplayUI-BoldItalic.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSerifDisplayUI-BoldItalic.woff") format('woff');}@font-face {font-family: 'SpiegelSansUI';font-weight: 400;font-display: swap;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Regular.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Regular.woff") format('woff');}@font-face {font-family: 'SpiegelSansUI';font-weight: 700;font-display: swap;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Bold.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Bold.woff") format('woff');}@font-face {font-family: 'SpiegelSans';font-weight: 600;font-display: swap;src: url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4-6SemiBold.woff2") format('woff2'),url("https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4-6SemiBold.woff") format('woff');}:root .color-mmo {background-color: #1b43a4;}@media (prefers-color-scheme: dark) {:root .color-mmo {background-color: #346BF1;}}.flag-button.color-mmo {color: #FFFFFF;}.flag-button.color-mmo {background-color: #1b43a4;}a.flag-button.color-mmo:hover,button.flag-button.color-mmo:hover {background-color: #163683;}a.flag-button.color-mmo:focus,button.flag-button.color-mmo:focus {background-color: #0e2252;}@media (prefers-color-scheme: dark) {.flag-button.color-mmo {color: #FFFFFF;}.flag-button.color-mmo {background-color: #346BF1;}a.flag-button.color-mmo:hover,button.flag-button.color-mmo:hover {background-color: #163683;}a.flag-button.color-mmo:focus,button.flag-button.color-mmo:focus {background-color: #0e2252;}}:root .color-elf {background-color: #3C8771;}@media (prefers-color-scheme: dark) {:root .color-elf {background-color: #449869;}}.flag-button.color-elf {color: #000000;}.flag-button.color-elf {background-color: #FFFFFF;}a.flag-button.color-elf:hover,button.flag-button.color-elf:hover {background-color: #E9E5E2;}a.flag-button.color-elf:focus,button.flag-button.color-elf:focus {background-color: #FFFFFF;}</style>
<link rel="stylesheet" href="https://cdn.prod.www.spiegel.de/public/spon/generated/css/styles.bc4c98e16c9ea728caa5.css">
<script type="application/settings+json">{"general":{"breakpoints":{"lg":{"min":1020},"md":{"max":1019,"min":720},"sm":{"max":719}},"cacheControl":{"breakingnews":{"sessionStorageMaxAge":900}},"consent":{"disabled":false,"globallyDisabled":false,"minUpdatedAt":1626213600,"utiqDisabled":false},"cookieDomains":["www.spiegel.de",".www.spiegel.de",".spiegel.de","abo.spiegel.de","sportdaten.spiegel.de","lotto.spiegel.de","akademie.spiegel.de","ed.spiegel.de"],"disableAdobeLaunch":false,"disableBookmarks":false,"disableBreakingnews":false,"disableSourcepoint":false,"domain":"spon","noAds":true,"noContentAds":true,"secondLevelDomain":"spiegel","subscriptions":{"metered":"Spmetered","noads":"Sppur","paid":["Spplus"]},"text":{"authorDetailsSuffix":{"removeWhitespaceBeforeCharacters":[",",".",":",";"]}},"topLevelDomain":"de","urls":{"assetsBasePath":"https://cdn.prod.www.spiegel.de","backofficeBaseUrl":"https://gruppenkonto.spiegel.de","base":"https://www.spiegel.de","offers":{"Spmetered":"https://abo.spiegel.de/?requestAccessToken=true\u0026targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","Spplus":"https://abo.spiegel.de/microsites/pl/probemonat1w4/?requestAccessToken=true\u0026targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","Sppur":"https://abo.spiegel.de/werbefrei-lesen?requestAccessToken=true\u0026targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","antiquariat":"https://www.spiegel-antiquariat.de/?utm_campaign=spon\u0026utm_medium=text\u0026utm_source=sponarchiv","noads":"https://abo.spiegel.de/werbefrei-lesen?requestAccessToken=true\u0026targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","paid":"https://abo.spiegel.de/digital-abos?requestAccessToken=true\u0026targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a"},"pages":{"adfreeOffer":"https://www.spiegel.de/adfree-offer","affiliateLinksFAQ":"https://www.spiegel.de/extra/affiliate-links-auf-spiegel-online-fragen-und-antworten-a-1245589.html","agb":"https://www.spiegel.de/agb","articleGiftInformations":"https://www.spiegel.de/artikel-verschenken","datenschutz":"https://www.spiegel.de/datenschutz-spiegel","datenschutzEN":"https://www.spiegel.de/how-we-deal-with-your-data","impressum":"https://www.spiegel.de/impressum","kontakt":"https://www.spiegel.de/kontakt","nutzungsbedingungen":"https://www.spiegel.de/nutzungsbedingungen","nutzungsbedingungenEN":"https://www.spiegel.de/extra/general-terms-and-conditions-a-1254190.html","problemeMitCookies":"https://www.spiegel.de/probleme-mit-cookies","services":"https://www.spiegel.de/services","sponsoredSiteInfo":"https://www.spiegel.de/sponsored-site-info","webstoriesBaseUrl":"https://cdn.prod.www.spiegel.de/stories/"},"search":"https://www.spiegel.de/suche/","user":{"account":"https://gruppenkonto.spiegel.de/meinkonto/uebersicht.html","login":"https://gruppenkonto.spiegel.de/authenticate?requestAccessToken=true\u0026targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","logout":"https://gruppenkonto.spiegel.de/abmelden.html?targetUrl=https%3A%2F%2Fwww.spiegel.de%2F","register":"https://gruppenkonto.spiegel.de/registrieren.html?requestAccessToken=true\u0026targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a"}},"warden":{"baseUrl":"https://prod.warden.spiegel.de/","enabled":true}}
,"app":{"disabledLinks":{"android":["abo.spiegel.de/de/c/spiegel-plus"],"ios":["abo.spiegel.de/de/c/spiegel-plus"]},"minOSVersions":{"android":{"general":{"build":0,"major":5,"minor":0},"nativeAudioPlayer":{"build":0,"major":0,"minor":0}},"ios":{"general":{"build":0,"major":13,"minor":0},"nativeAudioPlayer":{"build":0,"major":13,"minor":0}}},"minVersions":{"android":{"appNavigation":197,"audioPlaylist":169,"consent":158,"formattedPrice":206,"general":158,"nativeAudioPlayer":160,"offlineIssue":166,"subscriptionPlans":203},"ios":{"appNavigation":174,"audioPlaylist":151,"consent":142,"general":0,"nativeAudioPlayer":144,"offlineIssue":147,"subscriptionPlans":0}},"pageContext":{"bottomSheet":{"isEnabled":false},"collection":"article","documentId":"5c889858-7313-4254-9f4a-dc0d3ab8587a","headerTitle":"default","isAudioEnabled":false,"isAudioPlaylistEnabled":false,"isBookmarkEnabled":true,"isCommentsEnabled":false,"isGiftArticleEnabled":false,"isLogoEnabled":true,"isOfflineLibraryEnabled":false,"isSharingEnabled":true,"isTocEnabled":false,"push":{"isPushBarEnabled":false,"name":"","subscription":""},"route":"article","socialMediaTitle":"(S+) Beispielloses Gletscherschmelzen: Diese Eisriesen zerrinnen","url":"https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a"},"products":{"android":{"Spplus":[{"basePlanId":"p1m","id":"sp_iap_subscription_03","isSubscription":true,"minVersion":0,"plan":"default"}],"Sppur":[{"basePlanId":"p1m","id":"spiegel_no_ads_monthly","isSubscription":true,"minVersion":0,"plan":"default"}]},"ios":{"Spplus":[{"id":"SpiegelPlusMonthly","isSubscription":true,"minVersion":0,"plan":"default"},{"id":"SpiegelPlusMonthlyIVW","isSubscription":true,"minVersion":148,"plan":"default"}],"Sppur":[{"id":"SpiegelAdFreeMonthly","isSubscription":true,"minVersion":0,"plan":"default"}]}},"storeUrl":{"android":"https://play.google.com/store/apps/details?id=de.spiegel.android.app.spon","ios":"https://apps.apple.com/de/app/spiegel-online-nachrichten/id424881832"}}
,"page":{"attributes":{"channel_slug":"wissenschaft","is_consent_required":true,"subchannel_slug":"wissenschaft"},"category":{"route":"article"},"info":{"canonical_url":"https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a","domain":"spon","id":"5c889858-7313-4254-9f4a-dc0d3ab8587a","language":"de","title":"Gletscher: Diese Eisriesen zerrinnen"}}
,"external":{}
,"editorial":{"attributes":{"article_audio_type":"tts","has_affiliate":false,"has_article_audio":true,"has_audio_embed":false,"has_author":true,"has_gallery":false,"has_noAds":true,"has_noContentAds":true,"has_video":false,"is_breaking":false,"is_evergreen":false,"is_exclusive":false,"is_listExcluded":false,"is_noted":false,"magazine":""},"author":{"abbreviation":"","departments":["Wissenschaft","Daten \u0026 Visualisierungen"],"names":["Max Heber","Merlin Menze"]},"category":{"genre":"analyse","style":"fullsize","type":"news"},"info":{"article_id":"5c889858-7313-4254-9f4a-dc0d3ab8587a","channel":"Wissenschaft","date_modified":"2025-03-27T14:54:00+01:00","date_published":"2025-03-27T14:54:00+01:00","header_image_id":"50afc426-56c0-4555-9675-2064cf7e35f2","headline":"Beispielloses Gletscherschmelzen: Diese Eisriesen zerrinnen","headline_social":"Gletscher: Diese Eisriesen zerrinnen","intro":"Gletscher sind mächtig, doch verwundbar: Sie schwinden immer schneller, schon jetzt sind mehr als 9000 Milliarden Tonnen Eis verloren. Was die Folgen sind – und was Hoffnung macht.","subchannel":"default","topics":["Gletscher","Daten und Visualisierungen","Klimakrise"]}}
,"paywall":{"attributes":{"is_active":true},"category":{"subscriptions":["Spplus"],"type":"paid"},"info":{"position":0}}
,"video":{}
,"issue":{}
,"thirdparty":"eyJkZXBvdCI6eyJhcGlVcmwiOiJodHRwczovL3d3dy5zcGllZ2VsLmRlL3NlcnZpY2VzL2RlcG90L2FwaS92MSJ9LCJnaWZ0Ijp7ImFwaVVybCI6Imh0dHBzOi8vd3d3LnNwaWVnZWwuZGUvZ2lmdCJ9LCJqc1NvdXJjZXMiOnsiYWxsZXNwbHVzIjoiaHR0cHM6Ly9hcHAuYWxsZXMucGx1cy9ib290c3RyYXAuanMiLCJnb29nbGVJbWFWYW5zQWRhcHRlciI6Imh0dHBzOi8vc3RhdGljLmFkc2FmZXByb3RlY3RlZC5jb20vdmFucy1hZGFwdGVyLWdvb2dsZS1pbWEuanMiLCJoYW1tZXJqcyI6Imh0dHBzOi8vY2RuLnByb2Qud3d3LnNwaWVnZWwuZGUvcHVibGljL3NoYXJlZC9nZW5lcmF0ZWQvM3JkcGFydHkvanMvaGFtbWVyLjg1MzQyMTQ3ZmJhNTcwMzBlMDQwLmpzIiwibG9nb3JhLWRlYmF0IjoiaHR0cHM6Ly9jZG4ubG9nb3JhLmNvbS9kZWJhdC5qcyIsInNvdXJjZXBvaW50X2RlZmF1bHQiOiJodHRwczovL3NwLXNwaWVnZWwtZGUuc3BpZWdlbC5kZS91bmlmaWVkL3dyYXBwZXJNZXNzYWdpbmdXaXRob3V0RGV0ZWN0aW9uLmpzIiwic291cmNlcG9pbnRfbm9hZHMiOiJodHRwczovL3NwLXNwaWVnZWwtZGUuc3BpZWdlbC5kZS91bmlmaWVkL3dyYXBwZXJNZXNzYWdpbmdXaXRob3V0RGV0ZWN0aW9uLmpzIiwidHdlZXRuYWNsIjoiaHR0cHM6Ly9jZG4ucHJvZC53d3cuc3BpZWdlbC5kZS9wdWJsaWMvc2hhcmVkL2dlbmVyYXRlZC8zcmRwYXJ0eS9qcy9uYWNsLWZhc3QubWluLjg1YmEyMTdhODI5Yjg2Y2U3NjRkLmpzIn0sImp3cGxheWVyIjp7ImFkQ29uZmlnSWQiOiJubTlBc1RISCIsImFwaVVybCI6Imh0dHBzOi8vY2RuLmp3cGxheWVyLmNvbSIsImNvbmZpZyI6eyJhZHZlcnRpc2luZyI6eyJhZG1lc3NhZ2UiOiJEaWUgV2VyYnVuZyBlbmRldCBpbiB4eCBTZWt1bmRlbiIsImFkc2NoZWR1bGVpZCI6IkZzN1FEYnpuIiwiYXV0b3BsYXlhZHNtdXRlZCI6ZmFsc2UsImN1ZXRleHQiOiJXZXJidW5nIiwiZW5hYmxlUFBTIjpmYWxzZSwiZW5kc3RhdGUiOiJzdXNwZW5kZWQiLCJvdXRzdHJlYW0iOmZhbHNlLCJwcmVsb2FkQWRzIjpmYWxzZSwic2tpcG1lc3NhZ2UiOiJTa2lwIGFkIGluIHh4IHNlY29uZHMiLCJ2cGFpZGNvbnRyb2xzIjp0cnVlfSwiYXNwZWN0cmF0aW8iOiIxNjo5IiwiYXV0b1BhdXNlIjp7InZpZXdhYmlsaXR5Ijp0cnVlfSwiYXV0b3N0YXJ0IjpmYWxzZSwiY2FzdCI6e30sImNvbnRyb2xzIjp0cnVlLCJkaXNwbGF5SGVhZGluZyI6ZmFsc2UsImRpc3BsYXlkZXNjcmlwdGlvbiI6ZmFsc2UsImRpc3BsYXl0aXRsZSI6dHJ1ZSwiZmxvYXRpbmciOnsibW9kZSI6Im5vdFZpc2libGUifSwiZ2VuZXJhdGVTRU9NZXRhZGF0YSI6ZmFsc2UsImhlaWdodCI6MjcwLCJpbmNsdWRlX2NvbXBhdGliaWxpdHlfc2NyaXB0IjpmYWxzZSwiaW50ZXJhY3RpdmUiOmZhbHNlLCJpbnRsIjp7ImVuIjp7ImFkdmVydGlzaW5nIjp7ImFkbWVzc2FnZSI6IiIsImN1ZXRleHQiOiIgIiwic2tpcG1lc3NhZ2UiOiIifSwicmVsYXRlZCI6eyJhdXRvcGxheW1lc3NhZ2UiOiIiLCJoZWFkaW5nIjoiTW9yZSBWaWRlb3MifX19LCJsb2NhbGl6YXRpb24iOnsicmVsYXRlZCI6IldlaXRlcmUgVmlkZW9zIn0sIm11dGUiOmZhbHNlLCJwaXBJY29uIjoiZW5hYmxlZCIsInBsYXliYWNrUmF0ZUNvbnRyb2xzIjp0cnVlLCJwcmVsb2FkIjoibm9uZSIsInJlbGF0ZWQiOnsiYXV0b3BsYXltZXNzYWdlIjoiTsOkY2hzdGVzIFZpZGVvIiwiYXV0b3BsYXl0aW1lciI6MCwiZGlzcGxheU1vZGUiOiJzaGVsZiIsIm9uY2xpY2siOiJwbGF5Iiwib25jb21wbGV0ZSI6ImF1dG9wbGF5In0sInJlcGVhdCI6ZmFsc2UsInN0cmV0Y2hpbmciOiJ1bmlmb3JtIiwid2lkdGgiOiIxMDAlIn0sImxpY2Vuc2VLZXkiOiIyK2Z5WjJNdm03Q1NvSjdNUE85R2dCS2I2RnhoYmlUMDIwbHp1TVlidXlnTWIwQTYiLCJzaXRlSWQiOiJUVTNnOGZnVSJ9LCJvbW55Ijp7ImFwaVVybCI6Imh0dHBzOi8vb21ueS5mbS9hcGkiLCJvcmdJZCI6IjVhYzFlOTUwLTQ1YzctNGViNy04N2MwLWFhMGYwMTg0NDFiOCIsInByb2dyYW1zIjp7IjAwOGYwMDRiLTA1NWUtNGUwYy05ZmQwLWFiYzAwMGZmYjA0YSI6eyJuYW1lIjoiU2FzY2hhIExvYm8iLCJwbGF5bGlzdElkIjoiM2I5M2JjM2YtNTJjYi00YTNiLTkxZWYtYWJjMDAwZmZiMDUzIn0sIjBkMTU2YjBjLTI4MTgtNDViZC1hNDIzLWFiYzAwMTBlZTFlZCI6eyJuYW1lIjoiVGVhbS1BIC0gZGVyIGVocmxpY2hlIEbDvGhydW5nc3BvZGNhc3QiLCJwbGF5bGlzdElkIjoiYjhhMzY1MzMtNThkNS00NzA0LWIyNTAtYWJjMDAxMGVlMWY3In0sIjBlYTU1OWEzLTU2NDgtNGE5MC1iZWNjLWFkYmYwMGI4NjA1ZSI6eyJuYW1lIjoiSW5zaWRlIEF1c3RyaWEiLCJwbGF5bGlzdElkIjoiMjJiZGFiZDUtMDBhNC00OGE0LTg2MjItYWRiZjAwYmE0MzM2In0sIjJhMzE2NzI1LWQ5MzUtNDM3YS04NDlhLWFmY2QwMTA4MGMwZCI6eyJuYW1lIjoiRmlyZXdhbGwiLCJwbGF5bGlzdElkIjoiOGU3NTI2NjEtZTQxYy00ZDlmLWJhNmYtYWZjZDAxMTA2OGUzIn0sIjMxNzA0NGMzLTdiNTYtNGQzMy1iNGNmLWFiYzAwMGZmYjA3YSI6eyJuYW1lIjoiU1BJRUdFTCBMaXZlIiwicGxheWxpc3RJZCI6IjZlYmE4MzhkLWRjZjktNGI4Yy1hYTViLWFiYzAwMGZmYjA3ZCJ9LCIzNGZiZGI4My0yMjYzLTQ0YjMtODhhMi1hZjJjMDBkZmM2OGIiOnsibmFtZSI6IkF1c3ZlcmthdWZ0IiwicGxheWxpc3RJZCI6IiJ9LCI0NTRmMjdhMC1mMWIxLTRkN2EtOTliZC1hYmMwMDBmZmIwMmUiOnsibmFtZSI6IkFjaHQgTWlsbGlhcmRlbiIsInBsYXlsaXN0SWQiOiI5ZWRjOGE4My1lMTkxLTRiYzctODU3NS1hYmMwMDBmZmIwMzIifSwiNGFjYjc5ZTYtNTU1Ni00YjJkLTg1M2UtYWQzYzAwZTJkZGI4Ijp7Im5hbWUiOiJTUElFR0VMIEdlc2NoaWNodGUiLCJwbGF5bGlzdElkIjoiN2FhM2ZmOTItYTM1My00MjE2LTllYjktYWQ0MjAwZDNmOTFhIn0sIjVmMDA4NzMyLTBlNmQtNDFhZC1hYjVjLWFkM2MwMGU2MmZmNyI6eyJuYW1lIjoiU1BJRUdFTCBDb2FjaGluZyIsInBsYXlsaXN0SWQiOiI4ZGUwZDg1Zi0yMGEwLTQzZDItOTllMi1hZTUyMDBiNTMwMDcifSwiNjhlZGRkOGItZTAyMi00MWFiLTk3MTctYWQzYzAwZTg2YmQ0Ijp7Im5hbWUiOiJFaW5mYWNoIG1laHIgd2lzc2VuIiwicGxheWxpc3RJZCI6ImE4M2M4OWFiLTgyZjQtNDMyOS1hNGFmLWFlNTEwMGU3MGMzYiJ9LCI2OTdmZjU3ZC1lMTZhLTQ4ZDYtOWFiMS1iMGE3MDBmYzhkY2YiOnsibmFtZSI6IkF1Z3N0ZWluIEVpbmh1bmRlcnQiLCJwbGF5bGlzdElkIjoiIn0sIjZiN2Y0NjNlLTcxMWMtNGQyZi04YzRhLWFjNGIwMGMyNGIyYSI6eyJuYW1lIjoiR2FtZSBDaGFuZ2VyIiwicGxheWxpc3RJZCI6Ijk5YTBiNjBjLTI1ZmYtNDY5MC1iNTE4LWFjNGIwMGM0ZTJlMyJ9LCI3MTA4YmVjNC03YzAzLTRkNGEtODE0Ny1hZGZkMDBjODgyYzQiOnsibmFtZSI6IkltIFZlcmjDtnIiLCJwbGF5bGlzdElkIjoiNzk1MzIyYzktMGJjMS00NjczLWEzN2EtYWRmZDAwY2JmNDc2In0sIjc4MDI2ZWQ0LWE1MzYtNGY5ZS1iNzQxLWIxMmQwMGM4M2RjNyI6eyJuYW1lIjoiTkRBIiwicGxheWxpc3RJZCI6IjNmZDUzZWMwLWFlMTctNDI2NC04ZGRjLWIxMmQwMGM5ZTljMiJ9LCI3ZTAwYzBmZS03ZmExLTQwZGUtYmY4My1hYTI0MDBkY2Y4YjAiOnsibmFtZSI6Im1hbmFnZXIgbWFnYXppbiAtIERlciBQb2RjYXN0IiwicGxheWxpc3RJZCI6IjQ5NzhhNjM4LWE0ZmEtNDg1Yy04NzFhLWFhMjQwMGUxYTI1NCJ9LCI3ZjBjY2YwZS01ZTU5LTQ2YmUtOTlkYS1hZGZkMDBjZDg5N2IiOnsibmFtZSI6IkRlciBUYWciLCJwbGF5bGlzdElkIjoiNTgwMTAwNDgtZTU5NC00ODMzLWJhMDQtYWRmZDAwY2UzYTEzIn0sIjdmMjA5ZGQ2LTkxOGEtNGFjNy05ZTdlLWFlZjYwMGRhYzdjNSI6eyJuYW1lIjoiRWluIHLDpHRzZWxoYWZ0ZXIgUGF0aWVudCIsInBsYXlsaXN0SWQiOiIifSwiN2ZkNDZhMDctZjczZi00ZmFjLWJmNWMtYWJjMDAwZmZiMDZiIjp7Im5hbWUiOiJVbmQgd2FzIG1hY2hzdCBkdT8iLCJwbGF5bGlzdElkIjoiMWU4OTE0YzItZGIwMC00NTRjLTk5OTctYWJjMDAwZmZiMDZmIn0sIjgxMGE5ZjRkLTZlMDEtNDZjZi1hZTNiLWFkOGQwMDlhYWI4ZCI6eyJuYW1lIjoiV28gd2Fyc3QgRHU/IiwicGxheWxpc3RJZCI6IiJ9LCI4OTVhOWYwYi02ZDg3LTRkMjAtYWFiYS1hYmMwMDBmZmIwODciOnsibmFtZSI6IlNtYXJ0ZXIgbGViZW4iLCJwbGF5bGlzdElkIjoiOTEzZWE3ZmMtZTBjNi00YmE4LTgzNjAtYWJjMDAwZmZiMDhjIn0sIjhjYTRjYTNiLTg0MTktNGRiNS1hMzcxLWFjYmUwMTE1NjA5NCI6eyJuYW1lIjoiUG9kY2FzdCBLw7xuc3RsaWNoZSBJbnRlbGxpZ2VueiIsInBsYXlsaXN0SWQiOiI4ODA2OGJiOS1lYmVmLTRiZjQtODIwNS1hY2JlMDExYzE3M2UifSwiYTU3YWMzNGUtYjlmMi00ZTIzLWEwNTktYWUyMDAwYTBhOTllIjp7Im5hbWUiOiJEZXV0c2NobGFuZHMgZGlnaXRhbGUgSG9mZm51bmdzdHLDpGdlciIsInBsYXlsaXN0SWQiOiJiNTQ5MTE1Mi01M2NhLTQ3MmItYmY5ZS1hZTIwMDBhMzQ0OWQifSwiYTdiNzdhMWItMGMwZS00MGU4LWFiZDAtYWJlNDAxMmMxOWJkIjp7Im5hbWUiOiJEYXMgQmVzdGUgenVtIEjDtnJlbiIsInBsYXlCdXR0b25MYWJlbCI6IkFydGlrZWwgYW5ow7ZyZW4iLCJwbGF5bGlzdElkIjoiIiwicmVwbGF5QnV0dG9uTGFiZWwiOiJBcnRpa2VsIGVybmV1dCBhbmjDtnJlbiJ9LCJhZmU1MTFkOC1lNjg5LTQ1OWMtOTgyNS1hYjk4MDA5MTkzY2IiOnsibmFtZSI6IkRFUiBTUElFR0VMIiwicGxheUJ1dHRvbkxhYmVsIjoiQXJ0aWtlbCBhbmjDtnJlbiIsInBsYXlsaXN0SWQiOiIiLCJyZXBsYXlCdXR0b25MYWJlbCI6IkFydGlrZWwgZXJuZXV0IGFuaMO2cmVuIn0sImJiMTdjYTI3LTUxZjQtNDM0OS1iYzFlLWFiYzAwMTAyYzk3NSI6eyJuYW1lIjoiU1BJRUdFTCBMYWdlIiwicGxheWxpc3RJZCI6IjRjMThlMDcyLTI0ZDItNGQ2MC05YTQyLWFiYzAwMTAyYzk3ZSJ9LCJjMGQ5ZWNkMi04MTc1LTQwOTItODJiNi1hYmMwMDBmZmIwNDAiOnsibmFtZSI6Ik5ldHp0ZWlsIiwicGxheWxpc3RJZCI6ImUwMThiOGYzLWFmM2ItNGRiNS1hZjI3LWFiYzAwMGZmYjA0MCJ9LCJjZTliNzk0YS0xZGVlLTRmMmQtYThiZS1hZDNjMDBlZWUyN2QiOnsibmFtZSI6IktsaW1hYmVyaWNodCIsInBsYXlsaXN0SWQiOiI0MjIyOTQyYi03ZTliLTRlZTItYjllOC1hZDNjMDBmMWYwMTkifSwiZDA0MWY4ZjAtY2FjOS00MTUwLWFhYmYtYWJjMDAwZmZiMDEyIjp7Im5hbWUiOiJTdGltbWVuZmFuZyIsInBsYXlsaXN0SWQiOiI5NGEyMmI1Ni03Yzg5LTQ1YmYtOGU4NC1hYmMwMDBmZmIwMTYifSwiZDliZTk3MmItZjY0Ny00M2YyLWEzYjItYWZhMTAwYzQxZjRhIjp7Im5hbWUiOiJNb3Jlbm8rMSIsInBsYXlsaXN0SWQiOiI0NWYwOTAyNy1iOTJmLTQxOTMtOGMwNi1hZmExMDBlNzgxN2IifSwiZGU4YWY4YmEtY2VlZi00MjlhLWEwYjQtYWJhZjAwYjI4YWNjIjp7Im5hbWUiOiJEcmVpIFbDpHRlciIsInBsYXlsaXN0SWQiOiI2YTRjMTc4Yy00YmRmLTQ2N2UtOGIwOC1hYmFmMDBiMjhhZDEifSwiZGY2ODMwNmYtOTNiOC00NjhjLTk0NzAtYjBmOTAwYWUyOGU5Ijp7Im5hbWUiOiIxMUZSRVVOREUiLCJwbGF5QnV0dG9uTGFiZWwiOiJBcnRpa2VsIGFuaMO2cmVuIiwicGxheWxpc3RJZCI6IiIsInJlcGxheUJ1dHRvbkxhYmVsIjoiQXJ0aWtlbCBlcm5ldXQgYW5ow7ZyZW4ifSwiZTQ1ZjczOWMtYzI1Yy00N2I5LTk1MjktYjE3MDAwOTMzYTVjIjp7Im5hbWUiOiJTaG9ydGN1dCIsInBsYXlsaXN0SWQiOiI3ZGRmMDE4ZC1hMmY1LTQ3ZjQtODIxNi1iMTcwMDA5NWU0ZmMifSwiZWRlM2VmYjctYjI0MS00ZTEyLWE4NWYtYWMzNzAwYTE4NmEzIjp7Im5hbWUiOiJTYWdlbiwgd2FzIGlzdC4gRGVyIFNQSUVHRUwtUG9kY2FzdCIsInBsYXlsaXN0SWQiOiIifSwiZjlkMzc2MzctMDY1YS00YzU1LWEyMTItYWNkZDAwYzRhMmYwIjp7Im5hbWUiOiJTUElFR0VMIERhaWx5IiwicGxheWxpc3RJZCI6IiJ9LCJmZmUyNmE3Yi01NjhiLTQxNTMtODBhYi1hZmFmMDBkMmY3YzQiOnsibmFtZSI6IlNwaXR6ZW5nZXNwcsOkY2giLCJwbGF5bGlzdElkIjoiOGEyZDIzZWEtMDMxZS00MzQ4LWE5ZGItYWZhZjAwZDg5NjM3In19fSwicmVjbyI6eyJhcGlVcmwiOiJodHRwczovL3Byb2QucmVjby5zcGllZ2VsLmRlIn0sInNpdGVzZWFyY2giOnsiYXBpVXJsIjoiaHR0cHM6Ly93d3cuc3BpZWdlbC5kZS9zZXJ2aWNlcy9zaXRlc2VhcmNoIn0sInNvdXJjZXBvaW50Ijp7ImRlZmF1bHQiOnsiYWNjb3VudElkIjozMzEsImJhc2VFbmRwb2ludCI6Imh0dHBzOi8vc3Atc3BpZWdlbC1kZS5zcGllZ2VsLmRlIiwiY2FtcGFpZ25FbnYiOiJwcm9kIiwicHJpdmFjeU1hbmFnZXJJZCI6ODA2NTY1LCJwcm9wZXJ0eUhyZWYiOiJodHRwczovL3NwaWVnZWwtYWRzIiwicHJvcGVydHlJZCI6MzEyNTYsInB1cnBvc2VJZHMiOnsicmVjb21tZW5kYXRpb25zIjoiNjU1ZjFhYjQ3MTI5YTAwNTk1ZjMxYTY1IiwidGhpcmRwYXJ0eSI6IjY1NWYxYWI0NzEyOWEwMDU5NWYzMWE1ZSJ9LCJzaXRlSWQiOjMxMjU2fSwibm9hZHMiOnsiYWNjb3VudElkIjozMzEsImJhc2VFbmRwb2ludCI6Imh0dHBzOi8vc3Atc3BpZWdlbC1kZS5zcGllZ2VsLmRlIiwiY2FtcGFpZ25FbnYiOiJwcm9kIiwicHJpdmFjeU1hbmFnZXJJZCI6ODM5OTg0LCJwcm9wZXJ0eUhyZWYiOiJodHRwczovL3NwaWVnZWwtbm9hZHMiLCJwcm9wZXJ0eUlkIjozMTgzNiwicHVycG9zZUlkcyI6eyJyZWNvbW1lbmRhdGlvbnMiOiI2NGJmOWNjNmI0YTY3YzA1MzVmNjYyMWYiLCJ0aGlyZHBhcnR5IjoiNjRiZjljYzZiNGE2N2MwNTM1ZjY2MjBjIn0sInNpdGVJZCI6MzE4MzZ9fSwidGlja2Fyb28iOnsiYXBpVXJsIjoiaHR0cHM6Ly9jZG4udGlja2Fyb28uY29tIiwiY2xpZW50SWQiOiI2MGFmOWFhYjQyYTgxZGUyMDcxMjg2NGEifX0=","translations":{"bookmarkButton":{"labelAdd":"Zur Merkliste hinzufügen","labelDelete":"Aus Merkliste entfernen"},"confirmationLayer":{"deleteAllBookmarks":{"cancelButtonLabel":"Abbrechen","confirmButtonLabel":"Artikel entfernen","description":"Möchten Sie wirklich alle Artikel aus Ihrer Merkliste löschen? Diese Aktion kann nicht rückgängig gemacht werden.","headline":"Alle Artikel entfernen?"}},"loginLayer":{"bookmarks":{"text":"Speichern Sie Ihre Lieblingsartikel in der persönlichen Merkliste, um sie später zu lesen und einfach wiederzufinden.","title":"Artikel-Merkliste"},"history":{"text":"Finden Sie Ihre zehn zuletzt gelesenen Artikel schnell und unkompliziert wieder.","title":"Gelesene Artikel"},"newsletter":{"text":"Melden Sie sich in Ihrem persönlichen SPIEGEL-Konto an, um Ihre Newsletter zu verwalten.","title":"Newsletter"},"offlinelibrary":{"text":"Speichern Sie Magazin-Ausgaben in Ihrer Offline-Bibliothek. Lesen Sie den SPIEGEL jederzeit – auch offline und als PDF.","title":"Gespeicherte Magazine"},"playlist":{"text":"Speichern Sie Ihre Audioinhalte in Ihrer Playlist, um sie später zu hören oder offline abzuspielen. Zusätzlich können Sie Ihre Playlist über alle Geräte mit der SPIEGEL-App synchronisieren, auf denen Sie mit Ihrem Konto angemeldet sind.","title":"Audio-Playlist"}},"notification":{"addBookmarkFailure":{"description":"Beim Speichern des Artikels ist ein Fehler aufgetreten. \u003ca href=\"#\" data-notification-el=\"trigger\"\u003eErneut versuchen\u003c/a\u003e","headline":"Fehler"},"addBookmarkSuccess":{"description":"Ihr Artikel wurde gespeichert. \u003ca href=\"https://www.spiegel.de/fuermich/merkliste\"\u003eZur Merkliste\u003c/a\u003e","headline":"Zur Merkliste hinzugefügt"},"addDocumentAudioToPlaylistFailure":{"description":"Clip konnte nicht zur Playlist hinzugefügt werden. Bitte versuchen Sie es erneut oder starten Sie die App neu.","headline":"Fehler beim Hinzufügen zur Playlist"},"copyGiftArticleLinkFailure":{"description":"Beim Kopieren des Artikel-Links ist ein Fehler aufgetreten. \u003ca href=\"#\" data-notification-el=\"trigger\"\u003eErneut versuchen\u003c/a\u003e","headline":"Fehler"},"copyGiftArticleLinkSuccess":{"description":"Der Artikel-Link wurde erfolgreich in Ihrer Zwischenablage gespeichert.","headline":"Link kopiert"},"deleteAllBookmarksFailure":{"description":"Beim Löschen der Artikel ist ein Fehler aufgetreten. \u003ca href=\"#\" data-notification-el=\"trigger\"\u003eErneut versuchen\u003c/a\u003e","headline":"Fehler"},"deleteAllBookmarksSuccess":{"description":"Ihre Artikel wurden aus der Merkliste gelöscht.","headline":"Aus Merkliste entfernt"},"deleteBookmarkFailure":{"description":"Beim Löschen des Artikels ist ein Fehler aufgetreten. \u003ca href=\"#\" data-notification-el=\"trigger\"\u003eErneut versuchen\u003c/a\u003e","headline":"Fehler"},"deleteBookmarkSuccess":{"description":"Ihr Artikel wurde aus der \u003ca href=\"https://www.spiegel.de/fuermich/merkliste\"\u003eMerkliste\u003c/a\u003e gelöscht.","headline":"Aus Merkliste entfernt"},"deleteCookiesSuccess":{"headline":"Cookies wurden erfolgreich gelöscht"},"rejectConsentFailure":{"description":"Leider konnten wir Ihre Zustimmung nicht widerrufen. Bitte versuchen Sie es über die Einstellungen.","headline":"Fehler beim Widerruf Ihrer Zustimmung"},"rejectConsentSuccess":{"headline":"Zustimmung erfolgreich widerrufen"}}}
}</script>
<script>"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var t=function(){var t,e,o=[],n=window,r=n;for(;r;){try{if(r.frames.__tcfapiLocator){t=r;break}}catch(t){}if(r===n.top)break;r=r.parent}t||(!function t(){var e=n.document,o=!!n.frames.__tcfapiLocator;if(!o)if(e.body){var r=e.createElement("iframe");r.style.cssText="display:none",r.name="__tcfapiLocator",e.body.appendChild(r)}else setTimeout(t,5);return!o}(),n.__tcfapi=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return o;"setGdprApplies"===n[0]?n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof n[2]&&n[2]("set",!0)):"ping"===n[0]?"function"==typeof n[2]&&n[2]({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"}):o.push(n)},n.addEventListener("message",(function(t){var e="string"==typeof t.data,o={};if(e)try{o=JSON.parse(t.data)}catch(t){}else o=t.data;var n="object"===_typeof(o)&&null!==o?o.__tcfapiCall:null;n&&window.__tcfapi(n.command,n.version,(function(o,r){var a={__tcfapiReturn:{returnValue:o,success:r,callId:n.callId}};t&&t.source&&t.source.postMessage&&t.source.postMessage(e?JSON.stringify(a):a,"*")}),n.parameter)}),!1))};"undefined"!=typeof module?module.exports=t:t()}();</script>
<script>var isSystemSupported = (function() {var crawlerUserAgents = ['APIs-Google','Mediapartners-Google','AdsBot-Google-Mobile','AdsBot-Google','Googlebot-Image','Googlebot-News','Googlebot-Video','Googlebot\\/','AdsBot-Google-Mobile-Apps','Google (\\+https:\\/\\/developers.google.com\\/+\\/web\\/snippet\\/)','Google-AMPHTML','Facebot','facebookexternalhit','Twitterbot','PocketParser','bingbot','msnbot','msnbot-media','AdldxBot','BingPreview\\/','DuckDuckBot','Pinterest','Pinterestbot','ToutiaoSpider','upday.com','XING-contenttabreceiver','xing.com','Qwant-News','qwant.com','Qwantify','Yahoo! Slurp','FlipboardProxy','YandexBot','Feedly','LinkedInBot','Applebot','NextCloud','ia_archiver','outbrain','Sogou','exabot','Baiduspider','Baidu-YunGuanCe','ScopeContentAG-HTTP-Client www.thescope.com\\/0.1','archive.org_bot','Chrome-Lighthouse','Panoo',];var crawlerRegex = RegExp(crawlerUserAgents.join('|'));var isCrawler = crawlerRegex.test(window.navigator.userAgent);if (isCrawler) {return true;}if (!window.CSS || !window.CSS.supports('color', 'var(--primary)')) {return false;}try {new Function('const obj = {}; obj?.foo;');} catch(error) {return false;}var isAndroid = /Android/i.test(window.navigator.userAgent);if (isAndroid) {var isOSSupported = true;var version = {major: undefined,minor: undefined,build: undefined,};var ua = navigator.userAgent.toLowerCase();var match = ua.match(/android\s(\d+).?(\d+)?.?(\d+)?/);if (match) {version.major = match[1] ? parseInt(match[1], 10) : undefined;version.minor = match[2] ? parseInt(match[2], 10) : undefined;version.build = match[3] ? parseInt(match[3], 10) : undefined;}var minVersion = {major: 7,minor: 1,build: 1,};isOSSupported = version.major >= minVersion.major;if (version.major === minVersion.major) {isOSSupported = version.minor >= minVersion.minor;}if (version.major === minVersion.major && version.minor === minVersion.minor) {isOSSupported = version.build >= minVersion.build;}if (!isOSSupported && typeof version.major !== 'undefined') {var xhr = new XMLHttpRequest();try {xhr.open('GET', 'https://cdn.prod.www.spiegel.de/ping', false);xhr.send();return true;} catch(error) {return false;}}}return true;})();if (!isSystemSupported) {window.location.replace('https://www.spiegel.de/system-update');}</script>
<script src="https://cdn.prod.www.spiegel.de/public/shared/generated/js/commons.69599ab51851318f6930.js"></script>
<script src="https://cdn.prod.www.spiegel.de/public/shared/generated/js/header.60544321707142ecd7dd.js"></script>
<script>!function(e,a,n,t){if (a) return;var i=e.head;if(i){var o=e.createElement("style");o.id="alloy-prehiding",o.innerText=n,i.appendChild(o),setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o)},t)}}(document, document.location.href.indexOf("adobe_authoring_enabled") !== -1, "[data-target-hide] { opacity: 0 !important }", 1000);</script>
</head>
<body class="bg-shade-lightest dark:bg-black text-black dark:text-shade-lightest relative min-w-sm leading-normal static antialiased lining-nums lg:overflow-x-hidden lg:overflow-y-scroll" data-area="article">
<div data-headerbar-height class="flex justify-end relative" style="top: var(--polygon-max-headerbar-height, 0);">
<span class="relative w-full relative">
<a href="#Inhalt" title="Zum Inhalt springen" class="absolute inline-block rounded z-overlay bg-white dark:bg-dm-shade-darkest font-bold font-sansUI text-primary-darker dark:text-shade-lightest text-s sm:mr-8 md:mr-24 lg:mr-24 sm:mt-8 md:mt-12 lg:mt-12 right-0 p-0 border-0 h-px w-px overflow-hidden pointer-events-none opacity-none focus:px-12 focus:py-8 focus:h-auto focus:w-auto focus:overflow-auto focus:pointer-events-auto focus:opacity-full">
Zum Inhalt springen
</a>
</span>
</div>
<header role="banner" class="sticky top-0 -mt-8 z-30 pointer-events-none">
<div data-app-hidden>
<div class="relative z-max" data-area="header-bar">
<div class="bg-primary-base dark:bg-dm-primary-base top-0 w-full z-10 pointer-events-auto h-80 sm:h-48 transition-height duration-200 ease-linear" id="header-bar" x-data="{isInTopArea: true,isInOverlay: false,get isCollapsed() {return !this.isInTopArea && !this.isInOverlay;},}" x-init="isInTopArea = typeof $store.isInTopArea === 'undefined' || $store.isInTopArea;" x-subscribe.toparea_enter="isInTopArea = true" x-subscribe.toparea_leave="isInTopArea = false" x-subscribe.overlay_handler_active_overlay_changed="isInOverlay = !!$payload[0] && $payload[0].expandHeader" x-effect="document.documentElement.classList.toggle('is-headerbar-collapsed', isCollapsed)" :class="{'lg:shadow lg:h-48 md:shadow md:h-48 iqdsticky': isCollapsed,}" x-lazyload>
<div class="bg-primary-base dark:bg-dm-primary-base md:overflow-hidden lg:overflow-hidden">
<div class="mx-auto flex items-center h-80 transition-height duration-200 ease-linear lg:px-32 lg:py-20 lg:max-w-lg md:px-24 md:py-20 sm:pb-12 sm:pl-16 sm:pr-12 sm:pt-12 sm:h-48" :class="{'lg:h-48 md:h-48': isCollapsed,}">
<span class="flex flex-auto justify-between items-center md:order-1 lg:order-1 overflow-hidden text-white transition-transform duration-300 ease-out origin-left-center" :class="{'lg:translate-x-40 lg:scale-70 md:translate-x-40 md:scale-70': isCollapsed,}">
<span class="shrink-0">
<a href="https://www.spiegel.de/" target="_self" title="DER SPIEGEL" aria-label="DER SPIEGEL">
<span class="hidden">DER SPIEGEL</span>
<span class="block lg:hidden md:hidden leading-none"><svg id="spon-spiegel-mobile" width="74" height="15" viewBox="0 0 74 15" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="spiegel-mobile-5f324017-be13-4b6b-a690-4729d6e64cf1" clip-path="url(#clip0-5f324017-be13-4b6b-a690-4729d6e64cf1)">
        <g id="der-spiegel-tablet-desktop-5f324017-be13-4b6b-a690-4729d6e64cf1">
            <g id="logo-5f324017-be13-4b6b-a690-4729d6e64cf1" fill="#fff">
                <path d="M-36.635 12.5v-10h3.212v10h-3.212zm6.123.9V1.6c0-.9-.803-1.6-1.606-1.6h-8.632v2.5h1.205v10h-1.205V15h8.733c.803 0 1.505-.7 1.505-1.6zM-21.478 9.7v2.8h-3.413V8.4h4.517V5.9h-4.517V2.5h3.413v2.1h2.81V0h-10.238v2.5h1.104v10h-1.104V15h10.238V9.7h-2.81zM-13.047 5.9V2.5h3.313v3.4h-3.313zm6.324 6.6V8.9c0-.9-.703-1.6-1.606-1.6.903 0 1.606-.7 1.606-1.6v-4c0-.8-.703-1.6-1.506-1.6h-8.933v2.5h1.305v10h-1.305V15h5.32v-2.5h-1.104V8.4h3.312v4.1h-1.205V15h5.22v-2.5h-1.104zM14.656 5.9V2.5h3.413v3.4h-3.413zm6.324.9V1.6c0-.9-.703-1.6-1.606-1.6H10.54v2.5h1.204v10h-1.204V15h5.22v-2.5h-1.105V8.4h4.718c.903 0 1.606-.7 1.606-1.6zM26.099 12.5v-10h1.204V0h-5.22v2.5h1.205v10h-1.204V15h5.22v-2.5h-1.205zM36.036 9.7v2.8h-3.413V8.4h4.517V5.9h-4.517V2.5h3.413v2.1h2.91V0H28.608v2.5h1.104v10h-1.104V15h10.338V9.7h-2.91zM44.266 5.9v2.5h2.309v4.1h-3.413v-10h3.413v2.1h3.011v-3c0-.9-.703-1.6-1.606-1.6h-6.022c-.402 0-.803.2-1.004.4-.301.3-.602.7-.602 1.2v11.8c0 .5.2.9.602 1.2.301.3.703.4 1.104.4h7.528V5.9h-5.32zM58.419 9.7v2.8h-3.413V8.4h4.517V5.9h-4.517V2.5h3.413v2.1h2.91V0H50.992v2.5h1.104v10h-1.104V15H61.33V9.7h-2.911zM70.163 9.7v2.8H66.85v-10h1.204V0h-5.32v2.5h1.205v10h-1.205V15h10.339V9.7h-2.911zM9.236 13.49V5.94H3.013V2.517h3.312V4.63h3.011V1.61C9.336.644 8.433 0 7.53 0H1.608C.704 0 .002.705.002 1.61v6.846h6.223v4.128H2.913V9.765H.002v3.624C.002 14.295.704 15 1.608 15H7.53c.923 0 1.706-.604 1.706-1.51z"/>
            </g>
        </g>
    </g>
    <defs>
        <clipPath id="clip0-5f324017-be13-4b6b-a690-4729d6e64cf1">
            <path fill="#fff" d="M0 0h74v15H0z"/>
        </clipPath>
    </defs>
</svg>
</span>
<span class="block leading-none sm:hidden"><svg id="spon-spiegel-tablet-desktop" width="113" height="23" viewBox="0 0 113 23" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M22.956 9.047V3.833h5.233v5.214h-5.233zm9.696 1.38V2.453C32.652 1.073 31.575 0 30.19 0H16.646v3.833h1.847v15.334h-1.847V23h8.003v-3.833h-1.693V12.88h7.234c1.385 0 2.462-1.073 2.462-2.453zM40.501 19.167V3.833h1.847V0h-8.003v3.833h1.847v15.334h-1.847V23h8.003v-3.833h-1.847zM55.738 14.873v4.294h-5.233V12.88h6.926V9.047h-6.926V3.833h5.233v3.22h4.463V0H44.35v3.833h1.693v15.334h-1.693V23h15.852v-8.127h-4.463zM68.358 9.047v3.833h3.54v6.287h-5.233V3.833h5.233v3.22h4.617v-4.6c0-1.38-1.077-2.453-2.462-2.453h-9.234c-.616 0-1.232.307-1.54.613-.461.46-.923 1.074-.923 1.84v18.094c0 .766.308 1.38.923 1.84.462.46 1.078.613 1.693.613h11.543V9.047h-8.157zM90.059 14.873v4.294h-5.233V12.88h6.926V9.047h-6.926V3.833h5.233v3.22h4.463V0H78.67v3.833h1.693v15.334H78.67V23h15.852v-8.127h-4.463zM108.066 14.873v4.294h-5.078V3.833h1.846V0h-8.157v3.833h1.847v15.334h-1.847V23h15.853v-8.127h-4.464zM14.645 20.685V9.107H5.103V3.86h5.079v3.242h4.617V2.47C14.8.988 13.414 0 12.03 0h-9.08C1.562 0 .485 1.08.485 2.47v10.496h9.542v6.33H4.95v-4.323H.486v5.557c0 1.39 1.077 2.47 2.462 2.47h9.08c1.417 0 2.617-.926 2.617-2.315z" fill="#fff"/>
</svg>
</span>
</a>
</span>
<a href="https://www.spiegel.de/wissenschaft/" target="_self" title="Wissenschaft" class="relative mr-auto ml-4 mt-2 text-white overflow-hidden pr-16 font-sans text-3xl ml-6 sm:overflow-x-auto sm:text-l sm:leading-normal sm:ml-4 tracking-wide whitespace-nowrap">
Wissenschaft
</a>
<div class="relative lg:h-56 md:h-56 sm:h-40 focus:outline-none">
<div class="z-10 absolute right-0 bottom-0 lg:h-56 md:h-56 sm:h-40">
<div class="flex items-center">
<span class="bg-gradient-to-l from-primary-base dark:from-dm-primary-base w-24 lg:h-56 md:h-56 sm:h-40"></span>
</div>
</div>
</div>
</span>
<div class="flex items-center justify-end flex-auto md:order-2 lg:order-2 ml-6 transition-fade duration-300 ease-out" :class="{'lg:invisible lg:opacity-none md:invisible md:opacity-none': isCollapsed,}">
<a href="https://abo.spiegel.de/?b=SPOHNAVABO&requestAccessToken=true&sara_icid=disp_upd_JoH8Ct4kity9Jf0fVyMMOEmHGDQgM9&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" title="Abonnement" class="font-bold bg-primary-base dark:bg-dm-primary-base inline-block text-white font-sansUI py-12 text-s sm:mr-24" target="_blank">
<span class="sm:hidden border-b">Abonnement</span>
<span class="lg:hidden md:hidden border-b">Abo</span>
</a>
<span class="sm:hidden ml-24">
<a href="https://gruppenkonto.spiegel.de/authenticate?requestAccessToken=true&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" class="inline-flex items-center font-bold font-sansUI rounded text-primary-base bg-white hover:text-primary-dark focus:text-primary-darker dark:text-primary-base px-16 min-h-44 gap-8" title="Jetzt anmelden" data-sara-link="gruppenkonto" data-logged-in-hidden>
<span data-label class="text-s leading-18">Anmelden</span>
<span class="leading-none"><svg id="spon-chevron-right-f-s" class="stroke-current" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="s-chevron-right-f-0908bc97-15da-467e-b121-0e0717d49c88">
        <g id="s-chevron-right-0908bc97-15da-467e-b121-0e0717d49c88">
            <path id="vector-0908bc97-15da-467e-b121-0e0717d49c88" d="M4.333 2.667L7.667 6 4.333 9.333" stroke-width="1.5" stroke-linecap="round"/>
        </g>
    </g>
</svg>
</span>
</a>
</span>
<a href="https://www.spiegel.de/fuermich/" class="ml-24 bg-white h-40 inline-flex items-center justify-center rounded-circle w-40 md:hidden sm:hidden text-primary-base dark:text-dm-primary-base hover:opacity-distinct" data-not-logged-in-hidden title="Für Mich"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path class="stroke-current" d="M8.05 8.5C8.05 6.29213 9.79213 4.55 12 4.55C14.2079 4.55 15.95 6.29213 15.95 8.5C15.95 10.7079 14.2079 12.45 12 12.45C9.79213 12.45 8.05 10.7079 8.05 8.5Z" stroke-width="1.1"/>
    <mask id="a-f07d1684-4058-4ab7-b511-6f5a88ace941" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M8 16.1H16C18.1539 16.1 19.9 17.8461 19.9 20H21C21 17.2386 18.7614 15 16 15H8C5.23858 15 3 17.2386 3 20H4.1C4.1 17.8461 5.84609 16.1 8 16.1Z"/>
    </mask>
    <path class="fill-current" mask="url(#a-f07d1684-4058-4ab7-b511-6f5a88ace941)" d="M19.9 20H18.6V21.3H19.9V20ZM21 20V21.3H22.3V20H21ZM3 20H1.7V21.3H3V20ZM4.1 20V21.3H5.4V20H4.1ZM16 14.8H8V17.4H16V14.8ZM21.2 20C21.2 17.1281 18.8719 14.8 16 14.8V17.4C17.4359 17.4 18.6 18.5641 18.6 20H21.2ZM19.9 21.3H21V18.7H19.9V21.3ZM16 16.3C18.0435 16.3 19.7 17.9565 19.7 20H22.3C22.3 16.5206 19.4794 13.7 16 13.7V16.3ZM16 13.7H8V16.3H16V13.7ZM4.3 20C4.3 17.9565 5.95655 16.3 8 16.3V13.7C4.52061 13.7 1.7 16.5206 1.7 20H4.3ZM3 21.3H4.1V18.7H3V21.3ZM8 14.8C5.12812 14.8 2.8 17.1281 2.8 20H5.4C5.4 18.5641 6.56406 17.4 8 17.4V14.8Z"/>
</svg>
</a>
</div>
<button class="text-white dark:text-shade-lightest leading-none outline-focus transition-fade duration-300 ease-out lg:absolute lg:h-full lg:top-0 lg:invisible lg:opacity-none lg:-ml-4 md:absolute md:h-full md:top-0 md:invisible md:opacity-none md:-ml-4" @click="setTimeout(() => $publish('OPEN_MENU_DRAWER'), 0)" data-sara-click-el="button" :class="{'lg:opacity-none lg:invisible md:opacity-none md:invisible': !isCollapsed,}">
<span class="sr-only">Menü öffnen</span><svg id="spon-menu-l" class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-menu-a22bfece-f258-4488-b168-6029bbd7dd03" stroke-width="1.3" stroke-linecap="round">
        <path id="line-a22bfece-f258-4488-b168-6029bbd7dd03" d="M19.35 6.65H4.65"/>
        <path id="line_2-a22bfece-f258-4488-b168-6029bbd7dd03" d="M19.35 11.65H4.65"/>
        <path id="line_3-a22bfece-f258-4488-b168-6029bbd7dd03" d="M19.35 16.65H4.65"/>
    </g>
</svg>
</button>
</div>
</div>
</div>
<div class="absolute left-0 right-0 pointer-events-auto" data-notification-el="container" data-notification-position="default"></div>
</div>
</div>
</header>
<nav role="navigation" class="z-10 mt-8">
<div data-app-hidden>
<div class="w-full border-b border-shade-lighter dark:border-black bg-white dark:bg-dm-shade-darkest shadow" data-area="tab-bar">
<ul class="flex items-center justify-around lg:hidden md:h-56 sm:h-48 mx-auto">
<li data-target-hide>
<a href="https://www.spiegel.de/" target="_self" title="News" aria-label="News" class="inline-flex md:p-12 sm:p-8 text-black dark:text-shade-lightest"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M4.5 10.5v9h6v-3a1 1 0 011-1h1a1 1 0 011 1v3h6v-9l-7.5-7-7.5 7z" class="stroke-current" stroke-width="1.1"/>
</svg>
<span class="hidden">News</span>
</a>
</li>
<li data-target-hide>
<a href="https://www.spiegel.de/schlagzeilen/" target="_self" title="Ticker" aria-label="Ticker" class="inline-flex md:p-12 sm:p-8 text-black dark:text-shade-lightest"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <circle cx="12" cy="12" r="8.5" class="stroke-current"/>
    <path d="M11.5 7.5v5h4" class="stroke-current" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
<span class="hidden">Ticker</span>
</a>
</li>
<li data-target-hide>
<a href="https://www.spiegel.de/spiegel/" target="_self" title="Magazin" aria-label="Magazin" class="inline-flex md:p-12 sm:p-8 text-black dark:text-shade-lightest"><svg class="fill-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M9 10.444v4.326h4.214v2.624h-2.357V15.62H9v2.269c0 .638.357 1.135 1.214 1.135h3.5c.857 0 1.286-.426 1.286-1.206v-4.751h-4.214v-2.27h2.357v1.419H15v-1.915c0-.709-.429-1.135-1.071-1.135h-3.643C9.357 9.167 9 9.735 9 10.444z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M16.342 1.031L4.345 5.024l-.009.003A.483.483 0 004 5.525V22.5a.5.5 0 00.5.5h15a.5.5 0 00.5-.5v-17a.5.5 0 00-.5-.5H17V1.506a.5.5 0 00-.658-.475zM16 2.2L7.585 5H16V2.2zM5 22V6h14v16H5z"/>
</svg>
<span class="hidden">Magazin</span>
</a>
</li>
<li data-target-hide>
<a href="https://www.spiegel.de/audio/" target="_self" title="Audio" aria-label="Audio" class="inline-flex md:p-12 sm:p-8 text-black dark:text-shade-lightest"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M20.001 12.371c0-4.623-3.582-8.371-8-8.371s-8 3.748-8 8.371" class="stroke-current" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M7.106 15.911v4.606a4.605 4.605 0 110-9.211v4.605zm9.789 0v4.606a4.605 4.605 0 100-9.211v4.605z" class="stroke-current" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
<span class="hidden">Audio</span>
</a>
</li>
<li data-target-hide>
<a href="https://www.spiegel.de/fuermich/" target="_self" title="Account" aria-label="Account" class="inline-flex md:p-12 sm:p-8 text-black dark:text-shade-lightest"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path class="stroke-current" d="M8.05 8.5C8.05 6.29213 9.79213 4.55 12 4.55C14.2079 4.55 15.95 6.29213 15.95 8.5C15.95 10.7079 14.2079 12.45 12 12.45C9.79213 12.45 8.05 10.7079 8.05 8.5Z" stroke-width="1.1"/>
    <mask id="a-9121d6fd-c530-487c-9c7b-1d75d344d057" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M8 16.1H16C18.1539 16.1 19.9 17.8461 19.9 20H21C21 17.2386 18.7614 15 16 15H8C5.23858 15 3 17.2386 3 20H4.1C4.1 17.8461 5.84609 16.1 8 16.1Z"/>
    </mask>
    <path class="fill-current" mask="url(#a-9121d6fd-c530-487c-9c7b-1d75d344d057)" d="M19.9 20H18.6V21.3H19.9V20ZM21 20V21.3H22.3V20H21ZM3 20H1.7V21.3H3V20ZM4.1 20V21.3H5.4V20H4.1ZM16 14.8H8V17.4H16V14.8ZM21.2 20C21.2 17.1281 18.8719 14.8 16 14.8V17.4C17.4359 17.4 18.6 18.5641 18.6 20H21.2ZM19.9 21.3H21V18.7H19.9V21.3ZM16 16.3C18.0435 16.3 19.7 17.9565 19.7 20H22.3C22.3 16.5206 19.4794 13.7 16 13.7V16.3ZM16 13.7H8V16.3H16V13.7ZM4.3 20C4.3 17.9565 5.95655 16.3 8 16.3V13.7C4.52061 13.7 1.7 16.5206 1.7 20H4.3ZM3 21.3H4.1V18.7H3V21.3ZM8 14.8C5.12812 14.8 2.8 17.1281 2.8 20H5.4C5.4 18.5641 6.56406 17.4 8 17.4V14.8Z"/>
</svg>
<span class="hidden">Account</span>
</a>
</li>
</ul>
</div>
</div>
<span class="sm:hidden" data-app-hidden x-data x-intersect:enter.margin.-48px.0.0.0="$store.isInTopArea = true; $publish('TOPAREA_ENTER');" x-intersect:leave.margin.-48px.0.0.0="$store.isInTopArea = false; $publish('TOPAREA_LEAVE');" x-init="Alpine.store('isInTopArea', true)"></span>
<div class="z-10 relative bg-white dark:bg-dm-shade-darkest w-full shadow font-sans" x-data x-init="document.fonts.ready.then(() => $swiper.update())" x-swiper="{freeMode: true,roundLengths: false,slidesPerView: 'auto',watchOverflow: true,}" @swiper-init="$swiper.slideTo($swiper.slides.length - 1, 500, false)" data-area="nav-bar" data-app-hidden x-lazyload>
<div class="bg-white dark:bg-dm-shade-darkest">
<div class="lg:max-w-lg mx-auto font-sansUI flex items-center lg:h-56 md:h-56 sm:h-40 lg:pl-12 lg:pr-16 md:pl-4 md:pr-8">
<div class="h-full sm:hidden" data-app-hidden>
<button class="flex items-center h-full text-black dark:text-shade-lightest text-black dark:text-shade-lightest leading-none text-s px-16 outline-focus" @click="$publish('OPEN_MENU_DRAWER')" data-sara-click-el="button">
<span><svg width="24" height="24"><use xlink:href="#spon-menu-l"/></svg>
</span>
<span class="ml-8 leading-18 border-b border-transparent">Menü</span>
</button>
</div>
<div class="sm:hidden h-full lg:py-16 md:py-16 sm:py-8" data-app-hidden>
<div class="border-separator-r w-px h-full"></div>
</div>
<div class="polygon-swiper-button-prev relative lg:h-56 md:h-56 sm:h-40 focus:outline-none hidden select-none">
<div class="z-10 absolute left-0 bottom-0 lg:h-56 md:h-56 sm:h-40">
<div class="flex items-center">
<span class="md:hidden sm:hidden bg-white dark:bg-dm-shade-darkest w-48 py-18 text-center cursor-pointer"><svg id="spon-chevron-left-f-s" class="stroke-current" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="s-chevron-left-f-0b63d249-5361-4f3e-bea8-afd8d5ffa6f6">
        <g id="s-chevron-right-f-0b63d249-5361-4f3e-bea8-afd8d5ffa6f6">
            <g id="s-chevron-right-0b63d249-5361-4f3e-bea8-afd8d5ffa6f6">
                <path id="vector-0b63d249-5361-4f3e-bea8-afd8d5ffa6f6" d="M7.667 9.333L4.333 6l3.334-3.333" stroke-width="1.5" stroke-linecap="round"/>
            </g>
        </g>
    </g>
</svg>
</span>
<span class="bg-gradient-to-r from-white dark:from-dm-shade-darkest w-24 lg:h-56 md:h-56 sm:h-40"></span>
</div>
</div>
</div>
<nav role="navigation" class="polygon-swiper relative overflow-hidden h-full bottom-negative flex grow">
<ul class="polygon-swiper-wrapper flex items-center lg:h-56 md:h-56 sm:h-40 relative bottom-px leading-18">
<li class="polygon-swiper-slide flex items-center h-full">
<a href="https://www.spiegel.de/" target="_self" title="Startseite" class="focus:border-black dark:focus:border-white hover:border-shade-light border-transparent inline-flex items-center text-black dark:text-shade-lightest text-s h-full pl-16 px-4">
<span class="border-b whitespace-nowrap border-inherit">
Startseite
</span>
<span class="leading-none ml-8"><svg id="spon-chevron-right-m" class="stroke-current" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="m-chevron-right-589732d2-7663-4f1b-8aac-226d870725fa">
        <path id="vector-589732d2-7663-4f1b-8aac-226d870725fa" d="M6 4l4 4-4 4" stroke-linecap="round"/>
    </g>
</svg>
</span>
</a>
</li>
<li class="polygon-swiper-slide flex items-center h-full">
<a href="https://www.spiegel.de/wissenschaft/" target="_self" title="Wissenschaft" class="focus:border-black dark:focus:border-white hover:border-shade-light border-transparent inline-flex items-center text-black dark:text-shade-lightest text-s h-full px-4">
<span class="border-b whitespace-nowrap border-inherit">
Wissenschaft
</span>
<span class="leading-none ml-8"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-m"/></svg>
</span>
</a>
</li>
<li class="polygon-swiper-slide flex items-center h-full">
<a href="https://www.spiegel.de/thema/gletscher/" target="_self" title="Gletscher" class="focus:border-black dark:focus:border-white hover:border-shade-light border-transparent inline-flex items-center text-black dark:text-shade-lightest text-s h-full px-4">
<span class="border-b whitespace-nowrap border-inherit">
Gletscher
</span>
<span class="leading-none ml-8"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-m"/></svg>
</span>
</a>
</li>
<li class="polygon-swiper-slide flex items-center h-full">
<h1 class="font-normal whitespace-nowrap inline-block text-black dark:text-shade-lightest text-s pl-4 pr-16 pb-px">
Gletscher: Diese Eisriesen zerrinnen
</h1>
</li>
</ul>
</nav>
<div class="polygon-swiper-button-next relative lg:h-56 md:h-56 sm:h-40 focus:outline-none select-none hidden">
<div class="z-10 absolute right-0 bottom-0 lg:h-56 md:h-56 sm:h-40">
<div class="flex items-center">
<span class="bg-gradient-to-l from-white dark:from-dm-shade-darkest w-24 lg:h-56 md:h-56 sm:h-40"></span>
<span class="md:hidden sm:hidden bg-white dark:bg-dm-shade-darkest w-48 text-center cursor-pointer py-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-m"/></svg>
</span>
</div>
</div>
</div>
<div class="sm:hidden h-full lg:py-16 md:py-16 sm:py-8" data-app-hidden>
<div class="border-separator-r w-px h-full"></div>
</div>
<div class="relative sm:hidden flex-none transition-all duration-300 ease-in-out w-56 h-40" data-app-hidden x-data="{isOpen: false,open() {this.isOpen = true;$focus($refs.input);setTimeout(() => $swiper.update(), 300);},close() {this.isOpen = false;setTimeout(() => $swiper.update(), 300);}}" @keyup.escape="if (!$event.defaultPrevented) {$event.preventDefault();close();$focus($refs.toggle);}" @mousedown.outside="close()" :class="{'lg:w-4/12': isOpen,'md:w-5/12': isOpen,}">
<form action="https://www.spiegel.de/suche/" role="search" x-show="isOpen" x-transition.duration.300ms.opacity x-cloak>
<div class="inline-flex flex-col ml-16 pr-20 w-full">
<div class="group relative flex flex-col">
<input id="search-input-field" name="suchbegriff" placeholder="spiegel.de durchsuchen ..." x-ref="input" class="peer appearance-none rounded placeholder-shade-base dark:disabled:placeholder-shade-dark outline-focus disabled:cursor-not-allowed pl-12 pr-48 h-40 font-sansUI leading-normal text-black dark:text-shade-lightest text-s bg-white dark:bg-shade-darkest dark:disabled:bg-dm-shade-darkest read-only:bg-shade-lightest dark:read-only:bg-black border border-shade-base hover:border-black disabled:border-shade-lighter read-only:border-shade-lighter dark:read-only:border-shade-dark dark:border-shade-light dark:hover:border-shade-lightest dark:disabled:border-shade-dark autofill:transition-colors autofill:duration-max">
<span class="absolute top-0 bottom-0 right-0 pr-12 pointer-events-none flex items-center text-shade-darker dark:text-shade-lightest group-hover:text-shade-darkest dark:group-hover:text-shade-lightest peer-disabled:text-shade-base dark:peer-disabled:text-shade-dark" data-input-el="icon"><svg id="spon-search-l" class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-search-58d8cad5-688a-4699-937d-b062c66b126f">
        <g id="group-58d8cad5-688a-4699-937d-b062c66b126f" stroke-width="1.3">
            <circle id="ellipse-58d8cad5-688a-4699-937d-b062c66b126f" cx="10" cy="11" r="5.35"/>
            <path id="vector-58d8cad5-688a-4699-937d-b062c66b126f" d="M14 15l4.5 4.5" stroke-linecap="round"/>
        </g>
    </g>
</svg>
</span>
</div>
</div>
<button class="absolute top-0 right-4 bottom-0 w-48" title="Suche starten" data-sara-click-el="button" x-show="isOpen">
<span class="sr-only">Suche starten</span>
</button>
</form>
<button class="absolute top-0 bottom-0 right-0 focus-outline flex items-center text-black dark:text-shade-lightest text-s px-16" data-sara-click-el="button" x-ref="toggle" x-show="!isOpen" x-transition.duration.300ms.opacity @click="open()">
<span class="sr-only">Suche öffnen</span><svg width="24" height="24"><use xlink:href="#spon-search-l"/></svg>
</button>
</div>
</div>
</div>
</div>
<div class="hidden"><svg id="spon-chevron-right-f-m" class="stroke-current" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="m-chevron-right-f-d3fb6f7c-8218-4bbe-9378-be241b8bbb24">
        <g id="m-chevron-right-d3fb6f7c-8218-4bbe-9378-be241b8bbb24">
            <path id="vector-d3fb6f7c-8218-4bbe-9378-be241b8bbb24" d="M6 4l4 4-4 4" stroke-width="1.8" stroke-linecap="round"/>
        </g>
    </g>
</svg>
</div>
<section aria-label="Eilmeldungen" class="hidden relative z-20" data-breakingnews>
<div class="absolute z-0 top-8 right-0 bottom-0 left-0 shadow"></div>
<ul class="relative z-10 bg-attention" data-area="breaking-bar" data-breakingnews-el="list"></ul>
<template id="prototype-breaking-news-default">
<li class="w-full">
<div class="sm:max-w-sm md:max-w-md md:mx-auto sm:mx-auto">
<a data-proto-href="__proto_url__" title="__proto_headline__" class="text-black flex font-sansUI items-center justify-between lg:max-w-lg lg:px-32 lg:py-16 md:max-w-md md:px-24 md:py-16 mx-auto sm:max-w-sm sm:px-16 sm:py-12">
<span class="lg:text-base md:text-base sm:text-s font-bold">
<span class="uppercase pr-4">EILMELDUNG</span> —
<span class="pl-4">__proto_headline__</span>
</span>
<span class="leading-none sm:hidden shrink-0 ml-8" aria-hidden="true"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
<span class="leading-none lg:hidden md:hidden shrink-0 ml-8" aria-hidden="true"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</a>
</div>
</li>
</template>
<template id="prototype-breaking-news-textonly">
<li class="w-full">
<div class="sm:max-w-sm md:max-w-md md:mx-auto sm:mx-auto">
<span class="text-black flex font-sansUI items-center justify-between lg:max-w-lg lg:px-32 lg:py-16 md:max-w-md md:px-24 md:py-16 mx-auto sm:max-w-sm sm:px-16 sm:py-12">
<span class="lg:text-base md:text-base sm:text-s font-bold">
<span class="uppercase pr-4">EILMELDUNG</span> —
<span class="pl-4">__proto_headline__</span>
</span>
</span>
</div>
</li>
</template>
</section>
</nav>
<script>if (typeof(Event) === 'function') {window.dispatchEvent(new Event('POLYGON_DOM_HEADER_READY'));}</script>
<header data-area="intro">
<div class="relative z-0 w-full min-h-480 flex flex-col" data-headerbar-height>
<div class="lg:h-16 md:h-16 sm:h-8 w-full"></div>
<div class="grow w-full relative overflow-hidden">
<div class="bg-white dark:bg-dm-shade-darkest">
<div class="w-full h-full">
<div class="w-full h-full" data-area="fullsize_element>html-embed">
<div class="w-full h-full">
<div class="w-full h-full">
<div class="graphics-svelte-wrap" data-type="svelte-app" data-params="{&#34;checkGifted&#34;:&#34;true&#34;,&#34;introLoop&#34;:&#34;true&#34;,&#34;isOpener&#34;:&#34;true&#34;,&#34;isPay&#34;:&#34;true&#34;,&#34;showArticleTitle&#34;:&#34;true&#34;}" data-url="https://www.spiegel.de/assets/data/3f501016-4773-4c0d-8739-da8bef9c8bcf.json"><style>div.svelte-7l9aig.svelte-7l9aig{font-family:system-ui,monospace;position:fixed;z-index:9999999;font-size:11px;top:var(--debug-top);left:var(--debug-left);padding:3px 5px 2px;text-align:left;color:#90ee90;background:#000;opacity:.7;display:flex}div.gone.svelte-7l9aig.svelte-7l9aig{display:none}div.svelte-7l9aig p.svelte-7l9aig{margin:0;padding:0;font-weight:400}.size-detector.svelte-69kfeg{position:relative;width:100%;height:100%;overflow:hidden}img.svelte-18wi50f.svelte-18wi50f{width:100%;background-color:#f1efed}div.credit.svelte-18wi50f.svelte-18wi50f{line-height:12px;display:block;position:absolute;top:8px;right:8px;text-align:right}div.credit.svelte-18wi50f span.svelte-18wi50f{display:inline;color:#f1efed;font-family:SpiegelSansUI,system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-style:normal;font-weight:400;margin-left:.25rem;font-size:.75rem;text-shadow:0 0 8px #000;opacity:.7}div.captionBU.svelte-18wi50f.svelte-18wi50f{margin:.5rem 0 0;color:#807e7c;font-family:SpiegelSansUI,system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-style:normal;font-weight:400;font-size:.875rem;line-height:1.26}iframe.svelte-1gcduqx{width:100%;border:0 solid;display:block;min-height:111px;overflow:hidden}div.svelte-1gcduqx{line-height:12px;display:block;text-align:left;width:100%;overflow:hidden;margin-top:-6px;margin-bottom:16px}.articleTitle.svelte-10qhxhy.svelte-10qhxhy{margin:22vh auto 0;padding:1.5rem 1rem 0 1.5rem;color:var(--int-font-color-default);font-size:1.25rem;border:none;border-radius:8px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none;background:var(--int-background-color-default-rgba-halftransparent);backdrop-filter:brightness(150%) blur(20px);-webkit-backdrop-filter:brightness(150%) blur(20px);width:calc(100% - 72px);max-width:720px;--int-background-color-default-rgba-halftransparent:rgba(255, 255, 255, .4)}@media screen and (prefers-color-scheme:dark){.articleTitle.svelte-10qhxhy.svelte-10qhxhy{--int-background-color-default-rgba-halftransparent:rgba(31, 30, 28, .4)}}.title.svelte-10qhxhy.svelte-10qhxhy{display:flex;flex-direction:column;align-items:center;text-align:center;font-family:SpiegelSansUI,system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-style:normal;font-weight:400;line-height:1.26;color:var(--title-color);margin:0 auto;padding:0 var(--title-h-padding) var(--title-padding-bottom);width:100%;max-width:520px;--title-padding-bottom:1.25rem;--title-h-padding:1rem;--title-color:var(--int-font-color-default);--font-size-h2:1.5rem;--font-size-line:1rem;--font-size-headline:2rem;--font-size-intro:1.125rem}@media (min-width:720px){.title.svelte-10qhxhy.svelte-10qhxhy{--font-size-line:1.125rem;--title-padding-bottom:1.25rem;--title-h-padding:1.5rem;--font-size-intro:1.25rem;width:83.3333333333%}}@media (min-width:720px) and (max-width:1019px){.title.svelte-10qhxhy.svelte-10qhxhy{--font-size-headline:2.25rem;max-width:920px}}@media (min-width:1020px){.title.svelte-10qhxhy.svelte-10qhxhy{--font-size-headline:3rem;max-width:1020px}}h2.svelte-10qhxhy.svelte-10qhxhy{display:flex;flex-direction:column;align-items:center;margin-bottom:1.5rem;font-weight:700;font-size:var(--font-size-h2)}.line.svelte-10qhxhy.svelte-10qhxhy{margin-bottom:.5rem;font-size:1rem}.headline.svelte-10qhxhy.svelte-10qhxhy{font-family:SpiegelSlabCdUI,system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-style:normal;font-weight:800;font-size:var(--font-size-headline);line-height:1.08;margin-bottom:.5rem}.icon.svelte-10qhxhy.svelte-10qhxhy{display:inline-flex;padding-right:.25rem;line-height:0;vertical-align:middle}.icon.svelte-10qhxhy span.svelte-10qhxhy{display:inline-block}.icon.svelte-10qhxhy path.svelte-10qhxhy{fill:#fff}.icon.svelte-10qhxhy rect.svelte-10qhxhy{fill:#e64415}@media screen and (prefers-color-scheme:dark){.icon.svelte-10qhxhy rect.svelte-10qhxhy{fill:#d03d12}}.intro.svelte-10qhxhy.svelte-10qhxhy{font-size:var(--font-size-intro);line-height:1.38}section.svelte-1onh3v1.svelte-1onh3v1{padding-top:calc(50 * var(--dimensionsType));padding-bottom:calc(50 * var(--dimensionsType))}section.svelte-1onh3v1.svelte-1onh3v1:first-of-type{padding-top:calc(77 * var(--dimensionsType))}section.svelte-1onh3v1.svelte-1onh3v1:last-of-type{padding-bottom:calc(80 * var(--dimensionsType))}section.singleSection.svelte-1onh3v1.svelte-1onh3v1{padding-top:calc(50 * var(--dimensionsType));padding-bottom:calc(50 * var(--dimensionsType))}section.svelte-1onh3v1 .caption.svelte-1onh3v1{font-family:SpiegelSerifUI,Constantia,Lucida Bright,Lucidabright,"Lucida Serif",Lucida,"DejaVu Serif","Bitstream Vera Serif","Liberation Serif",Georgia,serif;font-style:normal;font-weight:400;position:relative;box-sizing:border-box;text-align:left;vertical-align:top;box-shadow:0 1px 4px #0000001a;border-radius:1.5px;max-width:84%;left:8%;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#000;margin:0;padding:2rem 1.5rem .5rem;background:#fffffff2}section.svelte-1onh3v1 .caption.svelte-1onh3v1 h1{font-size:22px}@media (prefers-color-scheme:dark){section.svelte-1onh3v1 .caption.svelte-1onh3v1{color:var(--int-font-color-default);background:#2f2d2bf7;border:1px solid #1f1e1c;box-shadow:0 1px 4px #000}}@supports ((-webkit-backdrop-filter:blur(15px)) or (backdrop-filter:blur(15px))){section.svelte-1onh3v1 .caption.svelte-1onh3v1{background:#ffffff73;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px)}@media (prefers-color-scheme:dark){section.svelte-1onh3v1 .caption.svelte-1onh3v1{background:#2f2d2bb3;border:1px solid #464441}}}@media (min-width:1012px){section.svelte-1onh3v1 .caption.svelte-1onh3v1{max-width:664px;left:0;margin-left:auto;margin-right:auto}}@media (max-width:719px){section.svelte-1onh3v1 .caption.svelte-1onh3v1{max-width:calc(100% - 32px);left:16px}}@media (max-width:719px){section.svelte-1onh3v1 .caption.svelte-1onh3v1{padding:1rem 1rem 1px}}section.svelte-1onh3v1 .caption p.svelte-1onh3v1{font-size:1.25rem;margin-bottom:1.5rem;line-height:30px;margin-top:0}@media (max-width:719px){section.svelte-1onh3v1 .caption p.svelte-1onh3v1{font-size:1.125rem;margin-bottom:1rem;line-height:27px}}section.svelte-1onh3v1 .caption.withpic p.svelte-1onh3v1{display:block;margin-bottom:1.5rem;width:100%}section.svelte-1onh3v1 .caption.withpic p.imagep.svelte-1onh3v1{margin-bottom:1.5rem;position:relative}section.rechts.svelte-1onh3v1.svelte-1onh3v1{margin-left:calc(100% - 432px);width:100%;max-width:433px}section.rechts.svelte-1onh3v1 .caption.svelte-1onh3v1{max-width:80%}@media (min-width:996px){section.rechts.svelte-1onh3v1 .caption.svelte-1onh3v1{max-width:80%;left:16px}}@media (max-width:995px){section.rechts.svelte-1onh3v1 .caption.svelte-1onh3v1{max-width:80%;left:16%}}@media (max-width:520px){section.rechts.svelte-1onh3v1.svelte-1onh3v1{margin-left:inherit!important;max-width:inherit!important}section.rechts.svelte-1onh3v1 .caption.svelte-1onh3v1{width:calc(100% - 32px);max-width:calc(100% - 32px);left:16px}}section.links.svelte-1onh3v1.svelte-1onh3v1{margin-left:-20px;max-width:433px}@media (min-width:1012px){section.links.svelte-1onh3v1.svelte-1onh3v1{max-width:433px;margin-left:20px}}@media (max-width:996px){section.links.svelte-1onh3v1.svelte-1onh3v1{max-width:433px}}@media (max-width:719px){section.links.svelte-1onh3v1.svelte-1onh3v1{margin-left:0;max-width:346px}}@media (max-width:520px){section.links.svelte-1onh3v1.svelte-1onh3v1{margin-left:inherit!important;max-width:inherit!important}}@media (min-width:1058px){section.links.isOpener{margin-left:10%!important}}section.fullwidth.svelte-1onh3v1.svelte-1onh3v1{margin-left:0!important;margin-right:0!important;width:100%!important;max-width:100%!important}section.hidden.svelte-1onh3v1.svelte-1onh3v1{opacity:0!important;display:block!important;padding-top:calc(23 * var(--dimensionsType));padding-bottom:calc(23 * var(--dimensionsType))}div.svelte-153jgkf{margin:0;color:var(--int-font-color-default);font-size:.875rem;line-height:1.26}.s.svelte-153jgkf{fill:var(--int-font-color-default)}span.svelte-153jgkf{margin-right:1px;position:relative;top:1px}.text-align.svelte-w7nysz:not(.is-disabled){width:100%;margin:0 auto}.text-align:not(.is-disabled).is-iframe.svelte-w7nysz{max-width:calc(66.6666666667% - 3rem)}@media (max-width:920px){.text-align:not(.is-disabled).is-iframe.svelte-w7nysz{max-width:calc(83.3333333333% - 3rem)}}@media (max-width:520px){.text-align:not(.is-disabled).is-iframe.svelte-w7nysz{max-width:calc(100% - 2rem)}}.text-align:not(.is-disabled).is-embed.svelte-w7nysz{max-width:calc(100% - 2rem)}@media (min-width:720px) and (max-width:1011px){.text-align:not(.is-disabled).is-embed.svelte-w7nysz{max-width:calc(83.3333333333% - 3rem)}}@media (min-width:1012px){.text-align:not(.is-disabled).is-embed.svelte-w7nysz{max-width:calc(66.6666666667% - 3rem)}}.text-align.is-disabled.svelte-w7nysz{display:contents}.loader-path.svelte-169aefs{stroke-dasharray:126;stroke-dashoffset:126;animation:stroke-dashoffset 1.3s linear;stroke:#e64415;stroke-width:.5;stroke-linecap:round}.circular-loader.svelte-169aefs{transform:rotate(-90deg);position:absolute;z-index:999999999;width:150px;height:150px;margin-left:-8px}.loadingAni.svelte-169aefs{justify-content:center!important;align-items:center!important;pointer-events:none}.fill-current.svelte-169aefs{fill:currentColor}.w-full.svelte-169aefs{width:100%}.h-full.svelte-169aefs{height:100%;min-height:250px;max-height:40vh;z-index:99999}.iframe.svelte-169aefs{min-height:86vh!important}.justify-center.svelte-169aefs{justify-content:center}.items-center.svelte-169aefs{align-items:center}.flex.svelte-169aefs{display:flex}.absolute.svelte-169aefs{position:absolute}.dark\:text-dm-primary-base.svelte-169aefs{color:#d03d12}.text-primary-base.svelte-169aefs{color:#e64415}.svelte-169aefs{--tw-shadow:0 0 transparent}svg.svelte-169aefs{display:inline;vertical-align:baseline}.visu.svelte-1g58oa3.svelte-1g58oa3{height:var(--height);text-align:center;transition:opacity .777s ease .5s;opacity:0}.visu.svelte-1g58oa3 canvas.svelte-1g58oa3{width:100%}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3{position:absolute;top:13px;font-size:1.125rem;width:100%;color:var(--headline-font-color,#000);text-shadow:var(--headline-border-color) 2px 0 0,var(--headline-border-color) 1.75517px .958851px 0,var(--headline-border-color) 1.0806px 1.68294px 0,var(--headline-border-color) .141474px 1.99499px 0,var(--headline-border-color) -.832294px 1.81859px 0,var(--headline-border-color) -1.60229px 1.19694px 0,var(--headline-border-color) -1.97998px .28224px 0,var(--headline-border-color) -1.87291px -.701566px 0,var(--headline-border-color) -1.30729px -1.5136px 0,var(--headline-border-color) -.421592px -1.95506px 0,var(--headline-border-color) .567324px -1.91785px 0,var(--headline-border-color) 1.41734px -1.41108px 0,var(--headline-border-color) 1.92034px -.558831px 0}@media screen and (prefers-color-scheme:dark){.visu.svelte-1g58oa3 .headline.svelte-1g58oa3{color:var(--headline-font-color-dark,#fff);text-shadow:var(--headline-border-color-dark) 2px 0 0,var(--headline-border-color-dark) 1.75517px .958851px 0,var(--headline-border-color-dark) 1.0806px 1.68294px 0,var(--headline-border-color-dark) .141474px 1.99499px 0,var(--headline-border-color-dark) -.832294px 1.81859px 0,var(--headline-border-color-dark) -1.60229px 1.19694px 0,var(--headline-border-color-dark) -1.97998px .28224px 0,var(--headline-border-color-dark) -1.87291px -.701566px 0,var(--headline-border-color-dark) -1.30729px -1.5136px 0,var(--headline-border-color-dark) -.421592px -1.95506px 0,var(--headline-border-color-dark) .567324px -1.91785px 0,var(--headline-border-color-dark) 1.41734px -1.41108px 0,var(--headline-border-color-dark) 1.92034px -.558831px 0}}.visu.svelte-1g58oa3 .headline.left.svelte-1g58oa3{text-align:left;padding:0 20px}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend{padding-top:8px;font-size:.875rem;font-weight:400;width:200px;position:relative;color:var(--headline-font-color,#000);text-shadow:var(--headline-border-color) 2px 0 0,var(--headline-border-color) 1.75517px .958851px 0,var(--headline-border-color) 1.0806px 1.68294px 0,var(--headline-border-color) .141474px 1.99499px 0,var(--headline-border-color) -.832294px 1.81859px 0,var(--headline-border-color) -1.60229px 1.19694px 0,var(--headline-border-color) -1.97998px .28224px 0,var(--headline-border-color) -1.87291px -.701566px 0,var(--headline-border-color) -1.30729px -1.5136px 0,var(--headline-border-color) -.421592px -1.95506px 0,var(--headline-border-color) .567324px -1.91785px 0,var(--headline-border-color) 1.41734px -1.41108px 0,var(--headline-border-color) 1.92034px -.558831px 0}@media screen and (prefers-color-scheme:dark){.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend{color:var(--headline-font-color-dark,#fff);text-shadow:var(--headline-border-color-dark) 2px 0 0,var(--headline-border-color-dark) 1.75517px .958851px 0,var(--headline-border-color-dark) 1.0806px 1.68294px 0,var(--headline-border-color-dark) .141474px 1.99499px 0,var(--headline-border-color-dark) -.832294px 1.81859px 0,var(--headline-border-color-dark) -1.60229px 1.19694px 0,var(--headline-border-color-dark) -1.97998px .28224px 0,var(--headline-border-color-dark) -1.87291px -.701566px 0,var(--headline-border-color-dark) -1.30729px -1.5136px 0,var(--headline-border-color-dark) -.421592px -1.95506px 0,var(--headline-border-color-dark) .567324px -1.91785px 0,var(--headline-border-color-dark) 1.41734px -1.41108px 0,var(--headline-border-color-dark) 1.92034px -.558831px 0}}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_label div{position:absolute;width:50px}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_label div:first-child{left:0;text-align:left}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_label div:nth-child(2){left:calc(50% - 25px);text-align:center}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_label div:last-child{right:0;text-align:right}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_lines div{border-left:1px solid var(--headline-font-color,#000);height:10px;width:1px;position:absolute;bottom:10px}@media screen and (prefers-color-scheme:dark){.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_lines div{border-left:1px solid var(--headline-font-color-dark,#fff)}}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_lines div:first-child{left:1px}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_lines div:nth-child(2){left:calc(50% - 1px)}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_lines div:last-child{right:0}.visu.svelte-1g58oa3 .headline.svelte-1g58oa3 .ice_legend .ice_gradient{width:100%;height:10px;background:linear-gradient(90deg,var(--ice-legend-gradient-left) 0,var(--ice-legend-gradient-center) 50%,var(--ice-legend-gradient-right) 100%);position:absolute;bottom:-40px}.visu.svelte-1g58oa3 .planet_labs_logo.svelte-1g58oa3{position:absolute;bottom:10px;left:16px;width:55px}.visu.svelte-1g58oa3 .planet_labs_logo.footer.svelte-1g58oa3{bottom:29px;left:16px;width:55px}.visu.svelte-1g58oa3 .planet_labs_logo svg.svelte-1g58oa3{width:100%;height:25px}.visu.svelte-1g58oa3 .footer.svelte-1g58oa3{position:absolute;bottom:13px;font-size:.75rem;width:100%;color:var(--headline-font-color,#000);text-shadow:var(--headline-border-color) 2px 0 0,var(--headline-border-color) 1.75517px .958851px 0,var(--headline-border-color) 1.0806px 1.68294px 0,var(--headline-border-color) .141474px 1.99499px 0,var(--headline-border-color) -.832294px 1.81859px 0,var(--headline-border-color) -1.60229px 1.19694px 0,var(--headline-border-color) -1.97998px .28224px 0,var(--headline-border-color) -1.87291px -.701566px 0,var(--headline-border-color) -1.30729px -1.5136px 0,var(--headline-border-color) -.421592px -1.95506px 0,var(--headline-border-color) .567324px -1.91785px 0,var(--headline-border-color) 1.41734px -1.41108px 0,var(--headline-border-color) 1.92034px -.558831px 0}@media screen and (prefers-color-scheme:dark){.visu.svelte-1g58oa3 .footer.svelte-1g58oa3{color:var(--headline-font-color-dark,#fff);text-shadow:var(--headline-border-color-dark) 2px 0 0,var(--headline-border-color-dark) 1.75517px .958851px 0,var(--headline-border-color-dark) 1.0806px 1.68294px 0,var(--headline-border-color-dark) .141474px 1.99499px 0,var(--headline-border-color-dark) -.832294px 1.81859px 0,var(--headline-border-color-dark) -1.60229px 1.19694px 0,var(--headline-border-color-dark) -1.97998px .28224px 0,var(--headline-border-color-dark) -1.87291px -.701566px 0,var(--headline-border-color-dark) -1.30729px -1.5136px 0,var(--headline-border-color-dark) -.421592px -1.95506px 0,var(--headline-border-color-dark) .567324px -1.91785px 0,var(--headline-border-color-dark) 1.41734px -1.41108px 0,var(--headline-border-color-dark) 1.92034px -.558831px 0}}.visu.svelte-1g58oa3 .footer.left.svelte-1g58oa3{text-align:left;padding:0 20px}.visu.isReady.svelte-1g58oa3.svelte-1g58oa3{opacity:1}.loader.svelte-1g58oa3.svelte-1g58oa3{position:absolute;left:5%;top:8%;z-index:18;width:90%;height:200px;pointer-events:none}svelte-scroller-outer.svelte-xdbafy{display:block;position:relative}svelte-scroller-background.svelte-xdbafy{display:block;position:relative;width:100%}svelte-scroller-foreground.svelte-xdbafy{display:block;position:relative;z-index:2}svelte-scroller-foreground.svelte-xdbafy:after{content:" ";display:block;clear:both}svelte-scroller-background-container.svelte-xdbafy{display:block;position:absolute;width:100%;max-width:100%;pointer-events:none;will-change:transform}div.svelte-1elmfpt{width:100%;position:absolute;z-index:999999;top:0;left:0;opacity:0;pointer-events:none;height:100vh}.wrapper.svelte-13r1v06.svelte-13r1v06{position:relative;min-height:calc(var(--height) * 1px)}.wrapper.svelte-13r1v06 [slot=background].svelte-13r1v06{font-size:1em;overflow:hidden;position:absolute;width:100%;max-width:100%;left:0}.wrapper.svelte-13r1v06 [slot=foreground].svelte-13r1v06{overflow:hidden}.wrapper.svelte-13r1v06 svelte-scroller-background-container{pointer-events:all}.wrapper.svelte-13r1v06 svelte-scroller-foreground{pointer-events:none}.wrapper.gone.svelte-13r1v06.svelte-13r1v06{visibility:hidden}.background-wrapper.svelte-13r1v06.svelte-13r1v06{display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden}.bottom-fixed.svelte-13r1v06.svelte-13r1v06{position:absolute;left:0;bottom:0}div[data-type=graphics-svelte-app].svelte-12cljkb{font-family:SpiegelSansUI,system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-synthesis:none;text-rendering:optimizeLegibility;scroll-behavior:smooth;font-size:100%;font-weight:400;line-height:1.125;font-feature-settings:"pnum" on,"lnum" on;-webkit-text-size-adjust:100%;-moz-text-size-adjust:none;-ms-text-size-adjust:100%}@font-face{font-family:SpiegelSansUI;font-style:normal;font-weight:400;font-display:swap;src:url(https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Regular.woff2) format("woff2"),url(https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSans4UI-Regular.woff) format("woff")}@font-face{font-family:SpiegelSlabCdUI;font-style:normal;font-weight:800;font-display:swap;src:url(https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSlab4UICd-ExtraBold.woff2) format("woff2"),url(https://cdn.prod.www.spiegel.de/public/shared/fonts/SpiegelSlab4UICd-ExtraBold.woff) format("woff")}div[data-type=graphics-svelte-app].svelte-12cljkb{color-scheme:light dark;color:var(--int-font-color-default);background-color:var(--int-background-color-default)}div[data-type=graphics-svelte-app].svelte-12cljkb{min-width:284px}div[data-type=graphics-svelte-app].svelte-12cljkb{padding-bottom:.125rem;position:relative;min-height:90vh;--int-font-color-default:#000000;--int-font-color-credit:#000000;--int-font-color-gray-base:#BBB9B7;--int-font-color-shade-base:#989694;--int-font-color-shade-darker:#5C5A58;--int-font-color-shade-dark:#807E7C;--int-font-color-shade-light:#BBB9B7;--int-font-color-shade-lightest:#F1EFED;--int-background-color-default:#ffffff;--int-border-color-default:#989694;--int-font-color-link:#E64415;--int-font-color-link-hover:#C12B00;--threejs-tool-label-color:var(--int-font-color-default);--threejs-tool-shadow-color:#ffffff}@media (prefers-color-scheme:dark){div[data-type=graphics-svelte-app].svelte-12cljkb{--int-font-color-default:#F1EFED;--int-font-color-credit:#F1EFED;--int-font-color-gray-base:#807E7C;--int-font-color-shade-darker:#DDDBD9;--int-font-color-shade-dark:#BBB9B7;--int-font-color-shade-light:#807E7C;--int-font-color-shade-lightest:#2F2D2B;--int-background-color-default:#1F1E1C;--int-border-color-default:#BBB9B7;--int-font-color-link:#D03D12;--int-font-color-link-hover:#C12B00}}@media (prefers-color-scheme:dark){div[data-type=graphics-svelte-app].svelte-12cljkb{--threejs-tool-shadow-color:#1F1E1C}}.label{font-family:SpiegelSansUI,system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-style:normal;font-weight:400;font-family:SpiegelSansUI,system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:16px;line-height:16px;opacity:0;text-align:center;color:#000}.label .inner{transform-origin:50% 50%;padding:.4rem .5rem;background:#fffffff2}.label .inner.nobg{background:0 0;padding:0;color:var(--threejs-tool-label-color,#000);text-shadow:var(--threejs-tool-shadow-color) 2px 0 0,var(--threejs-tool-shadow-color) 1.75517px .958851px 0,var(--threejs-tool-shadow-color) 1.0806px 1.68294px 0,var(--threejs-tool-shadow-color) .141474px 1.99499px 0,var(--threejs-tool-shadow-color) -.832294px 1.81859px 0,var(--threejs-tool-shadow-color) -1.60229px 1.19694px 0,var(--threejs-tool-shadow-color) -1.97998px .28224px 0,var(--threejs-tool-shadow-color) -1.87291px -.701566px 0,var(--threejs-tool-shadow-color) -1.30729px -1.5136px 0,var(--threejs-tool-shadow-color) -.421592px -1.95506px 0,var(--threejs-tool-shadow-color) .567324px -1.91785px 0,var(--threejs-tool-shadow-color) 1.41734px -1.41108px 0,var(--threejs-tool-shadow-color) 1.92034px -.558831px 0}@media (prefers-color-scheme:dark){.label .inner.nobg{color:var(--threejs-tool-label-color-dark,#fff);text-shadow:var(--threejs-tool-shadow-color-dark,#000) 2px 0 0,var(--threejs-tool-shadow-color-dark,#000) 1.75517px .958851px 0,var(--threejs-tool-shadow-color-dark,#000) 1.0806px 1.68294px 0,var(--threejs-tool-shadow-color-dark,#000) .141474px 1.99499px 0,var(--threejs-tool-shadow-color-dark,#000) -.832294px 1.81859px 0,var(--threejs-tool-shadow-color-dark,#000) -1.60229px 1.19694px 0,var(--threejs-tool-shadow-color-dark,#000) -1.97998px .28224px 0,var(--threejs-tool-shadow-color-dark,#000) -1.87291px -.701566px 0,var(--threejs-tool-shadow-color-dark,#000) -1.30729px -1.5136px 0,var(--threejs-tool-shadow-color-dark,#000) -.421592px -1.95506px 0,var(--threejs-tool-shadow-color-dark,#000) .567324px -1.91785px 0,var(--threejs-tool-shadow-color-dark,#000) 1.41734px -1.41108px 0,var(--threejs-tool-shadow-color-dark,#000) 1.92034px -.558831px 0}}@media (max-width:666px){.label{font-size:14px;line-height:14px}}.dg.slow{color:#ec7272}.dg.ac{z-index:50!important}#gui{z-index:50!important;margin-top:48px;position:absolute;top:0;right:0;opacity:.8}#gui select{color:#000;background:#fff}#gui ul{font-size:11px}#gui ul li:not(.folder){max-height:25px;line-height:25px}</style><div></div><script>(()=>{var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,o=(t,e)=>{for(var n in e||(e={}))r.call(e,n)&&a(t,n,e[n]);if(i)for(var n of i(e))s.call(e,n)&&a(t,n,e[n]);return t},l=(t,i)=>e(t,n(i)),c=(t,e,n)=>(a(t,"symbol"!=typeof e?e+"":e,n),n);!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const h=function(){let t={};return{add:e=>{t=o(o({},t),e)},get:()=>t}}();function u(){}const d=t=>t;function p(t){return t()}function f(){return Object.create(null)}function m(t){t.forEach(p)}function g(t){return"function"==typeof t}function _(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let v;function y(t,e){return t===e||(v||(v=document.createElement("a")),v.href=e,t===v.href)}function x(t,...e){if(null==t){for(const t of e)t(void 0);return u}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function b(t,e,n){t.$$.on_destroy.push(x(e,n))}function M(t,e,n,i){if(t){const r=S(t,e,n,i);return t[0](r)}}function S(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function w(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|r[i];return t}return e.dirty|r}return e.dirty}function T(t,e,n,i,r,s){if(r){const a=S(e,n,i,s);t.p(a,r)}}function A(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function E(t){return null==t?"":t}function C(t,e,n){return t.set(n),e}function R(t){return t&&g(t.destroy)?t.destroy:u}const P="undefined"!=typeof window;let I=P?()=>window.performance.now():()=>Date.now(),L=P?t=>requestAnimationFrame(t):u;const D=new Set;function N(t){D.forEach((e=>{e.c(t)||(D.delete(e),e.f())})),0!==D.size&&L(N)}function O(t,e){t.appendChild(e)}function U(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function F(t){const e=z("style");return e.textContent="/* empty */",function(t,e){O(t.head||t,e),e.sheet}(U(t),e),e.sheet}function k(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function z(t){return document.createElement(t)}function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function V(t){return document.createTextNode(t)}function G(){return V(" ")}function W(){return V("")}function j(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function X(t,e,n){const i=e.toLowerCase();i in t?t[i]="boolean"==typeof t[i]&&""===n||n:e in t?t[e]="boolean"==typeof t[e]&&""===n||n:j(t,e,n)}function q(t,e){e=""+e,t.data!==e&&(t.data=e)}function Y(t,e,n,i){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function $(t,e,n){t.classList.toggle(e,!!n)}class Z{constructor(t=!1){c(this,"is_svg",!1),c(this,"e"),c(this,"n"),c(this,"t"),c(this,"a"),this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.is_svg?this.e=H(e.nodeName):this.e=z(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)k(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(B)}}const K=new Map;let J,Q=0;function tt(t,e,n,i,r,s,a,o=0){const l=16.666/i;let c="{\n";for(let g=0;g<=1;g+=l){const t=e+(n-e)*s(g);c+=100*g+`%{${a(t,1-t)}}\n`}const h=c+`100% {${a(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${o}`,d=U(t),{stylesheet:p,rules:f}=K.get(d)||function(t,e){const n={stylesheet:F(e),rules:{}};return K.set(t,n),n}(d,t);f[u]||(f[u]=!0,p.insertRule(`@keyframes ${u} ${h}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${u} ${i}ms linear ${r}ms 1 both`,Q+=1,u}function et(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-i.length;r&&(t.style.animation=i.join(", "),Q-=r,Q||L((()=>{Q||(K.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&B(e)})),K.clear())})))}function nt(t){J=t}function it(t){(function(){if(!J)throw new Error("Function called outside component initialization");return J})().$$.on_mount.push(t)}const rt=[],st=[];let at=[];const ot=[],lt=Promise.resolve();let ct=!1;function ht(t){at.push(t)}function ut(t){ot.push(t)}const dt=new Set;let pt,ft=0;function mt(){if(0!==ft)return;const t=J;do{try{for(;ft<rt.length;){const t=rt[ft];ft++,nt(t),gt(t.$$)}}catch(e){throw rt.length=0,ft=0,e}for(nt(null),rt.length=0,ft=0;st.length;)st.pop()();for(let t=0;t<at.length;t+=1){const e=at[t];dt.has(e)||(dt.add(e),e())}at.length=0}while(rt.length);for(;ot.length;)ot.pop()();ct=!1,dt.clear(),nt(t)}function gt(t){if(null!==t.fragment){t.update(),m(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ht)}}function _t(t,e,n){t.dispatchEvent(function(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}(`outro${n}`))}const vt=new Set;let yt;function xt(){yt={r:0,c:[],p:yt}}function bt(){yt.r||m(yt.c),yt=yt.p}function Mt(t,e){t&&t.i&&(vt.delete(t),t.i(e))}function St(t,e,n,i){if(t&&t.o){if(vt.has(t))return;vt.add(t),yt.c.push((()=>{vt.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}else i&&i()}const wt={duration:0};function Tt(t,e,n){const i={direction:"out"};let r,s=e(t,n,i),a=!0;const o=yt;let l;function c(){const{delay:e=0,duration:n=300,easing:i=d,tick:c=u,css:h}=s||wt;h&&(r=tt(t,1,0,n,e,i,h));const p=I()+e,f=p+n;ht((()=>_t(t,0,"start"))),"inert"in t&&(l=t.inert,t.inert=!0),function(t){let e;0===D.size&&L(N),new Promise((n=>{D.add(e={c:t,f:n})}))}((e=>{if(a){if(e>=f)return c(0,1),_t(t,0,"end"),--o.r||m(o.c),!1;if(e>=p){const t=i((e-p)/n);c(1-t,t)}}return a}))}return o.r+=1,g(s)?(pt||(pt=Promise.resolve(),pt.then((()=>{pt=null}))),pt).then((()=>{s=s(i),c()})):c(),{end(e){e&&"inert"in t&&(t.inert=l),e&&s.tick&&s.tick(1,0),a&&(r&&et(t,r),a=!1)}}}function At(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function Et(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Ct(t){t&&t.c()}function Rt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),ht((()=>{const e=t.$$.on_mount.map(p).filter(g);t.$$.on_destroy?t.$$.on_destroy.push(...e):m(e),t.$$.on_mount=[]})),r.forEach(ht)}function Pt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];at.forEach((i=>-1===t.indexOf(i)?e.push(i):n.push(i))),n.forEach((t=>t())),at=e}(n.after_update),m(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function It(t,e){-1===t.$$.dirty[0]&&(rt.push(t),ct||(ct=!0,lt.then(mt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Lt(t,e,n,i,r,s,a=null,o=[-1]){const l=J;nt(t);const c=t.$$={fragment:null,ctx:[],props:s,update:u,not_equal:r,bound:f(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:f(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let h=!1;if(c.ctx=n?n(t,e.props||{},((e,n,...i)=>{const s=i.length?i[0]:n;return c.ctx&&r(c.ctx[e],c.ctx[e]=s)&&(!c.skip_bound&&c.bound[e]&&c.bound[e](s),h&&It(t,e)),n})):[],c.update(),h=!0,m(c.before_update),c.fragment=!!i&&i(c.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);c.fragment&&c.fragment.l(t),t.forEach(B)}else c.fragment&&c.fragment.c();e.intro&&Mt(t.$$.fragment),Rt(t,e.target,e.anchor),mt()}nt(l)}class Dt{constructor(){c(this,"$$"),c(this,"$$set")}$destroy(){Pt(this,1),this.$destroy=u}$on(t,e){if(!g(e))return u;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!function(t){return 0===Object.keys(t).length}(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const Nt=(t,e)=>{Object.entries(e).forEach((([e,n])=>{void 0!==n&&t.style.setProperty(`--${e}`,n)}))},Ot=(t,e)=>(Nt(t,e),{update(e){Nt(t,e)}}),Ut=[];function Ft(t,e){return{subscribe:kt(t,e).subscribe}}function kt(t,e=u){let n;const i=new Set;function r(e){if(_(t,e)&&(t=e,n)){const e=!Ut.length;for(const n of i)n[1](),Ut.push(n,t);if(e){for(let t=0;t<Ut.length;t+=2)Ut[t][0](Ut[t+1]);Ut.length=0}}}function s(e){r(e(t))}return{set:r,update:s,subscribe:function(a,o=u){const l=[a,o];return i.add(l),1===i.size&&(n=e(r,s)||u),a(t),()=>{i.delete(l),0===i.size&&n&&(n(),n=null)}}}}function Bt(t,e,n){const i=!Array.isArray(t),r=i?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Ft(n,((t,n)=>{let a=!1;const o=[];let l=0,c=u;const h=()=>{if(l)return;c();const r=e(i?o[0]:o,t,n);s?t(r):c=g(r)?r:u},d=r.map(((t,e)=>x(t,(t=>{o[e]=t,l&=~(1<<e),a&&h()}),(()=>{l|=1<<e}))));return a=!0,h(),function(){m(d),c(),a=!1}}))}const zt=kt(0),Ht=kt(0),Vt=kt(1),Gt=kt(1),Wt=kt(1);function jt(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Xt&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t}const Xt=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function qt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Yt(t,e){return fetch(t,e).then(qt)}const $t={title:"",subtitle:"",sources:"",embed:!0,debug:!1},Zt=Ft({},(t=>{const e=new URLSearchParams(window.location.search),n=Object.fromEntries(e),i=o(o(o({},$t),jt(n)),jt(h.get()));i.data&&(i.dataUrl=i.data),t(i)}));function Kt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Qt(t){let e,n,i;function r(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<0?r=e+1:s=e}while(r<s)}return r}return 2!==t.length?(e=Kt,n=(e,n)=>Kt(t(e),n),i=(e,n)=>t(e)-n):(e=t===Kt||t===Jt?t:te,n=t,i=t),{left:r,center:function(t,e,n=0,s=t.length){const a=r(t,e,n,s-1);return a>n&&i(t[a-1],e)>-i(t[a],e)?a-1:a},right:function(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<=0?r=e+1:s=e}while(r<s)}return r}}}function te(){return 0}const ee=Qt(Kt).right;Qt((function(t){return null===t?NaN:+t})).center;const ne=Math.sqrt(50),ie=Math.sqrt(10),re=Math.sqrt(2);function se(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=ne?10:s>=ie?5:s>=re?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?se(t,e,2*n):[o,l,c]}function ae(t,e,n){return se(t=+t,e=+e,n=+n)[2]}function oe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function le(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ce(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function he(){}var ue=.7,de=1/ue,pe="\\s*([+-]?\\d+)\\s*",fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ge=/^#([0-9a-f]{3,8})$/,_e=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),ve=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),ye=new RegExp(`^rgba\\(${pe},${pe},${pe},${fe}\\)$`),xe=new RegExp(`^rgba\\(${me},${me},${me},${fe}\\)$`),be=new RegExp(`^hsl\\(${fe},${me},${me}\\)$`),Me=new RegExp(`^hsla\\(${fe},${me},${me},${fe}\\)$`),Se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function we(){return this.rgb().formatHex()}function Te(){return this.rgb().formatRgb()}function Ae(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ge.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ee(e):3===n?new Pe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ce(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ce(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=_e.exec(t))?new Pe(e[1],e[2],e[3],1):(e=ve.exec(t))?new Pe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ye.exec(t))?Ce(e[1],e[2],e[3],e[4]):(e=xe.exec(t))?Ce(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=be.exec(t))?Ue(e[1],e[2]/100,e[3]/100,1):(e=Me.exec(t))?Ue(e[1],e[2]/100,e[3]/100,e[4]):Se.hasOwnProperty(t)?Ee(Se[t]):"transparent"===t?new Pe(NaN,NaN,NaN,0):null}function Ee(t){return new Pe(t>>16&255,t>>8&255,255&t,1)}function Ce(t,e,n,i){return i<=0&&(t=e=n=NaN),new Pe(t,e,n,i)}function Re(t,e,n,i){return 1===arguments.length?function(t){return t instanceof he||(t=Ae(t)),t?new Pe((t=t.rgb()).r,t.g,t.b,t.opacity):new Pe}(t):new Pe(t,e,n,null==i?1:i)}function Pe(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Ie(){return`#${Oe(this.r)}${Oe(this.g)}${Oe(this.b)}`}function Le(){const t=De(this.opacity);return`${1===t?"rgb(":"rgba("}${Ne(this.r)}, ${Ne(this.g)}, ${Ne(this.b)}${1===t?")":`, ${t})`}`}function De(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ne(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Oe(t){return((t=Ne(t))<16?"0":"")+t.toString(16)}function Ue(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ke(t,e,n,i)}function Fe(t){if(t instanceof ke)return new ke(t.h,t.s,t.l,t.opacity);if(t instanceof he||(t=Ae(t)),!t)return new ke;if(t instanceof ke)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new ke(a,o,l,t.opacity)}function ke(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Be(t){return(t=(t||0)%360)<0?t+360:t}function ze(t){return Math.max(0,Math.min(1,t||0))}function He(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}le(he,Ae,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:we,formatHex:we,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Fe(this).formatHsl()},formatRgb:Te,toString:Te}),le(Pe,Re,ce(he,{brighter(t){return t=null==t?de:Math.pow(de,t),new Pe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ue:Math.pow(ue,t),new Pe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pe(Ne(this.r),Ne(this.g),Ne(this.b),De(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ie,formatHex:Ie,formatHex8:function(){return`#${Oe(this.r)}${Oe(this.g)}${Oe(this.b)}${Oe(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Le,toString:Le})),le(ke,(function(t,e,n,i){return 1===arguments.length?Fe(t):new ke(t,e,n,null==i?1:i)}),ce(he,{brighter(t){return t=null==t?de:Math.pow(de,t),new ke(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ue:Math.pow(ue,t),new ke(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Pe(He(t>=240?t-240:t+120,r,i),He(t,r,i),He(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ke(Be(this.h),ze(this.s),ze(this.l),De(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=De(this.opacity);return`${1===t?"hsl(":"hsla("}${Be(this.h)}, ${100*ze(this.s)}%, ${100*ze(this.l)}%${1===t?")":`, ${t})`}`}}));const Ve=t=>()=>t;function Ge(t){return 1==(t=+t)?We:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Ve(isNaN(e)?n:e)}}function We(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ve(isNaN(t)?e:t)}const je=function t(e){var n=Ge(e);function i(t,e){var i=n((t=Re(t)).r,(e=Re(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),a=We(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function Xe(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function qe(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=tn(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=s[n](t);return a}}function Ye(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function $e(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ze(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=tn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var Ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Je=new RegExp(Ke.source,"g");function Qe(t,e){var n,i,r,s=Ke.lastIndex=Je.lastIndex=0,a=-1,o=[],l=[];for(t+="",e+="";(n=Ke.exec(t))&&(i=Je.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:$e(n,i)})),s=Je.lastIndex;return s<e.length&&(r=e.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)o[(n=l[i]).i]=n.x(t);return o.join("")})}function tn(t,e){var n,i=typeof e;return null==e||"boolean"===i?Ve(e):("number"===i?$e:"string"===i?(n=Ae(e))?(e=n,je):Qe:e instanceof Ae?je:e instanceof Date?Ye:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Xe:Array.isArray(e)?qe:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ze:$e)(t,e)}function en(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function nn(t){return+t}var rn=[0,1];function sn(t){return t}function an(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function on(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=an(r,i),s=n(a,s)):(i=an(i,r),s=n(s,a)),function(t){return s(i(t))}}function ln(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=an(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(e){var n=ee(t,e,1,i)-1;return s[n](r[n](e))}}function cn(){var t,e,n,i,r,s,a=rn,o=rn,l=tn,c=sn;function h(){var t=Math.min(a.length,o.length);return c!==sn&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),i=t>2?ln:on,r=s=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),o,l)))(t(c(e)))}return u.invert=function(n){return c(e((s||(s=i(o,a.map(t),$e)))(n)))},u.domain=function(t){return arguments.length?(a=Array.from(t,nn),h()):a.slice()},u.range=function(t){return arguments.length?(o=Array.from(t),h()):o.slice()},u.rangeRound=function(t){return o=Array.from(t),l=en,h()},u.clamp=function(t){return arguments.length?(c=!!t||sn,h()):c!==sn},u.interpolate=function(t){return arguments.length?(l=t,h()):l},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,i){return t=n,e=i,h()}}function hn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function un(t){return(t=hn(Math.abs(t)))?t[1]:NaN}var dn,pn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fn(t){if(!(e=pn.exec(t)))throw new Error("invalid format: "+t);var e;return new mn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function mn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function gn(t,e){var n=hn(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}fn.prototype=mn.prototype,mn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const _n={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gn(100*t,e),r:gn,s:function(t,e){var n=hn(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(dn=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+hn(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vn(t){return t}var yn,xn,bn,Mn=Array.prototype.map,Sn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wn(t){var e=void 0===t.grouping||void 0===t.thousands?vn:function(t,e){return function(n,i){for(var r=n.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}(Mn.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?vn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Mn.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",o=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var c=(t=fn(t)).fill,h=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,m=t.comma,g=t.precision,_=t.trim,v=t.type;"n"===v?(m=!0,v="g"):_n[v]||(void 0===g&&(g=12),_=!0,v="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");var y="$"===d?n:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?i:/[%p]/.test(v)?a:"",b=_n[v],M=/[defgprs%]/.test(v);function S(t){var n,i,a,d=y,S=x;if("c"===v)S=b(t)+S,t="";else{var w=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),g),_&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),w&&0==+t&&"+"!==u&&(w=!1),d=(w?"("===u?u:o:"-"===u||"("===u?"":u)+d,S=("s"===v?Sn[8+dn/3]:"")+S+(w&&"("===u?")":""),M)for(n=-1,i=t.length;++n<i;)if(48>(a=t.charCodeAt(n))||a>57){S=(46===a?r+t.slice(n+1):t.slice(n))+S,t=t.slice(0,n);break}}m&&!p&&(t=e(t,1/0));var T=d.length+t.length+S.length,A=T<f?new Array(f-T+1).join(c):"";switch(m&&p&&(t=e(A+t,A.length?f-S.length:1/0),A=""),h){case"<":t=d+t+S+A;break;case"=":t=d+A+t+S;break;case"^":t=A.slice(0,T=A.length>>1)+d+t+S+A.slice(T);break;default:t=A+d+t+S}return s(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}return{format:c,formatPrefix:function(t,e){var n=c(((t=fn(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(un(e)/3))),r=Math.pow(10,-i),s=Sn[8+i/3];return function(t){return n(r*t)+s}}}}function Tn(t,e,n,i){var r,s=function(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?ae(e,t,n):ae(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}(t,e,n);switch((i=fn(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(un(e)/3)))-un(Math.abs(t)))}(s,a))||(i.precision=r),bn(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,un(e)-un(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-un(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return xn(i)}function An(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const i=e<t,[r,s,a]=i?se(e,t,n):se(t,e,n);if(!(s>=r))return[];const o=s-r+1,l=new Array(o);if(i)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(r+c)/-a;else for(let c=0;c<o;++c)l[c]=(r+c)*a;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Tn(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,s=e(),a=0,o=s.length-1,l=s[a],c=s[o],h=10;for(c<l&&(r=l,l=c,c=r,r=a,a=o,o=r);h-- >0;){if((r=ae(l,c,n))===i)return s[a]=l,s[o]=c,e(s);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return t},t}function En(){var t=cn()(sn,sn);return t.copy=function(){return function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}(t,En())},oe.apply(t,arguments),An(t)}yn=wn({thousands:",",grouping:[3],currency:["$",""]}),xn=yn.format,bn=yn.formatPrefix;const Cn=Ft(!1,(t=>{t(document.documentElement.classList.contains("is-mobile"))})),Rn=Ft(!1,(t=>{t(document.documentElement.classList.contains("is-app"))})),Pn=Ft(!1,(t=>{t(document.documentElement.classList.contains("is-tablet"))}));Ft(!1,(t=>{t(!!navigator.platform.match(/iPhone|iPod|iPad/))})),Bt([Cn,Rn,Pn],(([t,e,n])=>t||e||n));const In=Bt(Zt,(async(t,e)=>{let n=t.dataUrl||t.data;n&&(n.indexOf("review.www.spiegel")>=0&&-1===n.indexOf("?")&&(n+="?d="+(new Date).getTime()),Promise.all([Yt(n)]).then((([t])=>{const n=t.json_output;e({assetData:n})})))}),{}),Ln=Bt([In,Cn,Rn],(([t,e,n])=>{const{assetData:i={}}=t,r=null==i?void 0:i.config;if(r){r.params=JSON.parse(r.params),r.setLoadingPercent=null;let t=r.glb;e&&r.glb_mobil&&(t=r.glb_mobil),n&&r.glb_app&&(t=r.glb_app),r.glb=t,e&&r.hdr.urlMobil&&(r.hdr.url=r.hdr.urlMobil),r.ply&&e&&r.ply.urlMobil&&(r.ply.url=r.ply.urlMobil);const i=r.chapter.length,s=[],a=[];let o=0;for(;o<i;)s.push(o/(i-1)),r.chapter[o].actions&&(r.chapter[o].actions=JSON.parse(r.chapter[o].actions)),a.push(Number(r.chapter[o].time)),o++;if(r.scaleProgress=En().domain(s).range(a),r.video){let t=[];for(o=0;o<r.video.length;)t.push(r.video[o].time_video),o++;r.scaleVideo=En().domain(s).range(t)}if(r.materials)for(o=r.materials.length;o--;)r.materials[o].color=r.materials[o].color.split(",").map((t=>Number(t))),r.materials[o].emissive=r.materials[o].emissive.split(",").map((t=>Number(t)));r.tint&&(r.tint.colorTo=r.tint.colorTo.split(",").map((t=>Number(t))),r.tint.emissiveTo=r.tint.emissiveTo.split(",").map((t=>Number(t))),r.tint.colorFrom=Number(r.tint.colorFrom),r.tint.emissiveFrom=Number(r.tint.emissiveFrom)),r.zeiten=a,r.mode||(r.mode=r.common.mode)}return i}),{}),Dn=kt(0),Nn=kt(0),On=kt(0),Un=kt(0),Fn=Bt([Dn,Nn],(([t,e])=>e<=.002?0:t)),kn=Bt(Ln,(async(t,e)=>{var n;let i=null==(n=null==t?void 0:t.config)?void 0:n.gallery;if(i){const t=await Yt(i),n="w640",r=`https://${i.indexOf("https://review.www.spiegel.de/")>-1?"review.":""}www.spiegel.de/assets/image/[ID]_${n}.jpg`,s=[];t.elements.forEach((t=>{const e=t.image[0].reference||t.image[0],n=e._source||e,i=t.caption?t.caption.replace(/<p[^>]*>/g,""):"";s.push({url:r.replace("[ID]",n.id),title:n.title,credit:n.credit,id:n.id,caption:i})})),e(s)}}),{}),Bn=Bt(Ln,(t=>{var e;return null==(e=null==t?void 0:t.config)?void 0:e.chapter})),zn=Bt(Ln,(t=>[])),Hn=Bt([Ln,kn,zn,Bn],(([t,e,n,i])=>{var r;let s=(null==(r=null==t?void 0:t.config)?void 0:r.chapter)||{};return e.length&&(s=s.map((t=>{let n=!1;const{textboxElement:i}=t;return i&&(n=e.find((t=>t.id===i))),l(o({},t),{image:n})}))),s}),[]),Vn=kt(""),Gn=kt(!1),Wn=kt(!1);function jn(t){let e,n,i,r,s,a,o,l,c,h,d,p,f,m,g,_,v,y,x,b=Math.round(1e3*t[6])/1e3+"",M=Math.round(1e3*t[7])/1e3+"",S=Math.round(1e3*t[8])/1e3+"",w=Math.round(1e3*t[9])/1e3+"";return{c(){e=z("div"),n=z("p"),i=V(t[4]),r=z("br"),s=V("\r\n\t\tindex: "),a=V(t[5]),o=z("br"),l=V("\r\n\t\twidth: "),c=V(b),h=z("br"),d=V("\r\n\t\tvisualHeight: "),p=V(M),f=z("br"),m=V("\r\n\t\tcontentHeight: "),g=V(S),_=z("br"),v=V("\r\n\t\tprogress: "),y=V(w),x=z("br"),j(n,"class","svelte-7l9aig"),j(e,"class","debug svelte-7l9aig"),Y(e,"--debug-top",t[0]),Y(e,"--debug-right",t[1]),Y(e,"--debug-left",t[2]),$(e,"gone",!t[3])},m(t,u){k(t,e,u),O(e,n),O(n,i),O(n,r),O(n,s),O(n,a),O(n,o),O(n,l),O(n,c),O(n,h),O(n,d),O(n,p),O(n,f),O(n,m),O(n,g),O(n,_),O(n,v),O(n,y),O(n,x)},p(t,[n]){16&n&&q(i,t[4]),32&n&&q(a,t[5]),64&n&&b!==(b=Math.round(1e3*t[6])/1e3+"")&&q(c,b),128&n&&M!==(M=Math.round(1e3*t[7])/1e3+"")&&q(p,M),256&n&&S!==(S=Math.round(1e3*t[8])/1e3+"")&&q(g,S),512&n&&w!==(w=Math.round(1e3*t[9])/1e3+"")&&q(y,w),1&n&&Y(e,"--debug-top",t[0]),2&n&&Y(e,"--debug-right",t[1]),4&n&&Y(e,"--debug-left",t[2]),8&n&&$(e,"gone",!t[3])},i:u,o:u,d(t){t&&B(e)}}}function Xn(t,e,n){let i,r,s,a,o,l,c;b(t,Gn,(t=>n(3,i=t))),b(t,Vn,(t=>n(4,r=t))),b(t,Dn,(t=>n(5,s=t))),b(t,zt,(t=>n(6,a=t))),b(t,Ht,(t=>n(7,o=t))),b(t,Wt,(t=>n(8,l=t))),b(t,Nn,(t=>n(9,c=t)));let{posTop:h="142px"}=e,{posRight:u="2px"}=e,{posLeft:d="2px"}=e;return t.$$set=t=>{"posTop"in t&&n(0,h=t.posTop),"posRight"in t&&n(1,u=t.posRight),"posLeft"in t&&n(2,d=t.posLeft)},[h,u,d,i,r,s,a,o,l,c]}class qn extends Dt{constructor(t){super(),Lt(this,t,Xn,jn,_,{posTop:0,posRight:1,posLeft:2})}}var Yn={exports:{}};(Yn.exports={}).forEach=function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}};var $n=Yn.exports,Zn={exports:{}},Kn=Zn.exports={};Kn.isIE=function(t){return(-1!==(e=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==e.indexOf("trident")||-1!==e.indexOf(" edge/"))&&(!t||t===function(){var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");do{e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(n[0]);return t>4?t:undefined}());var e},Kn.isLegacyOpera=function(){return!!window.opera};var Jn=Zn.exports,Qn={exports:{}};(Qn.exports={}).getOption=function(t,e,n){var i=t[e];return null==i&&void 0!==n?n:i};var ti=Qn.exports;function ei(){var t={},e=0,n=0,i=0;return{add:function(r,s){s||(s=r,r=0),r>n?n=r:r<i&&(i=r),t[r]||(t[r]=[]),t[r].push(s),e++},process:function(){for(var e=i;e<=n;e++)for(var r=t[e],s=0;s<r.length;s++){(0,r[s])()}},size:function(){return e}}}var ni="_erd";function ii(t){return t[ni]}var ri={initState:function(t){return t[ni]={},ii(t)},getState:ii,cleanState:function(t){delete t[ni]}},si=Jn,ai=$n.forEach,oi=$n.forEach,li=function(t){var e=t.stateHandler.getState;return{isDetectable:function(t){var n=e(t);return n&&!!n.isDetectable},markAsDetectable:function(t){e(t).isDetectable=!0},isBusy:function(t){return!!e(t).busy},markBusy:function(t,n){e(t).busy=!!n}}},ci=function(t){var e={};function n(n){var i=t.get(n);return void 0===i?[]:e[i]||[]}return{get:n,add:function(n,i){var r=t.get(n);e[r]||(e[r]=[]),e[r].push(i)},removeListener:function(t,e){for(var i=n(t),r=0,s=i.length;r<s;++r)if(i[r]===e){i.splice(r,1);break}},removeAllListeners:function(t){var e=n(t);e&&(e.length=0)}}},hi=function(){var t=1;return{generate:function(){return t++}}},ui=function(t){var e=t.idGenerator,n=t.stateHandler.getState;return{get:function(t){var e=n(t);return e&&void 0!==e.id?e.id:null},set:function(t){var i=n(t);if(!i)throw new Error("setId required the element to have a resize detection state.");var r=e.generate();return i.id=r,r}}},di=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var i=function(t,e){t[e]=function(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var n=0;n<arguments.length;n++)t(arguments[n])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n},pi=Jn,fi=function(t){var e=(t=t||{}).reporter,n=ti.getOption(t,"async",!0),i=ti.getOption(t,"auto",!0);i&&!n&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var r,s=ei(),a=!1;function o(){for(a=!0;s.size();){var t=s;s=ei(),t.process()}a=!1}function l(){r=function(t){return e=t,setTimeout(e,0);var e}(o)}return{add:function(t,e){!a&&i&&n&&0===s.size()&&l(),s.add(t,e)},force:function(t){a||(void 0===t&&(t=n),r&&(!function(t){clearTimeout(t)}(r),r=null),t?l():o())}}},mi=ri,gi=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,i=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function r(t){return i(t).object}return{makeDetectable:function(r,s,a){a||(a=s,s=r,r=null),(r=r||{}).debug,si.isIE(8)?a(s):function(s,a){var o,l,c=(o=["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"],l=t.important?" !important; ":"; ",(o.join(l)+l).trim()),h=!1,u=window.getComputedStyle(s),d=s.offsetWidth,p=s.offsetHeight;function f(){function t(){if("static"===u.position){s.style.setProperty("position","relative",r.important?"important":"");var t=function(t,e,n,i){var s=n[i];"auto"!==s&&"0"!==s.replace(/[^-\d\.]/g,"")&&(t.warn("An element that is positioned static has style."+i+"="+s+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",e),e.style.setProperty(i,"0",r.important?"important":""))};t(e,s,u,"top"),t(e,s,u,"right"),t(e,s,u,"bottom"),t(e,s,u,"left")}}""!==u.position&&(t(),h=!0);var n=document.createElement("object");n.style.cssText=c,n.tabIndex=-1,n.type="text/html",n.setAttribute("aria-hidden","true"),n.onload=function(){h||t(),function t(e,n){if(!e.contentDocument){var r=i(e);return r.checkForObjectDocumentTimeoutId&&window.clearTimeout(r.checkForObjectDocumentTimeoutId),void(r.checkForObjectDocumentTimeoutId=setTimeout((function(){r.checkForObjectDocumentTimeoutId=0,t(e,n)}),100))}n(e.contentDocument)}(this,(function(t){a(s)}))},si.isIE()||(n.data="about:blank"),i(s)&&(s.appendChild(n),i(s).object=n,si.isIE()&&(n.data="about:blank"))}i(s).startSize={width:d,height:p},n?n.add(f):f()}(s,a)},addListener:function(t,e){function n(){e(t)}if(si.isIE(8))i(t).object={proxy:n},t.attachEvent("onresize",n);else{var s=r(t);if(!s)throw new Error("Element is not detectable by this strategy.");s.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(t){if(i(t)){var e=r(t);e&&(si.isIE(8)?t.detachEvent("onresize",e.proxy):t.removeChild(e),i(t).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(t).checkForObjectDocumentTimeoutId),delete i(t).object)}}}},_i=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,i=t.stateHandler.getState;t.stateHandler.hasState;var r=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var s=function(){var t=500,e=500,n=document.createElement("div");n.style.cssText=l(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var i=document.createElement("div");i.style.cssText=l(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),i.appendChild(n),document.body.insertBefore(i,document.body.firstChild);var r=t-i.clientWidth,s=e-i.clientHeight;return document.body.removeChild(i),{width:r,height:s}}(),a="erd_scroll_detection_container";function o(t){!function(t,e,n){function i(n,i){i=i||function(e){t.head.appendChild(e)};var r=t.createElement("style");return r.innerHTML=n,r.id=e,i(r),r}if(!t.getElementById(e)){var r=n+"_animation",s=n+"_animation_active",a="/* Created by the element-resize-detector library. */\n";a+="."+n+" > div::-webkit-scrollbar { "+l(["display: none"])+" }\n\n",a+="."+s+" { "+l(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+r,"animation-name: "+r])+" }\n",a+="@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",i(a+="@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(t,"erd_scroll_detection_scrollbar_style",a)}function l(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function c(t,n,i){if(t.addEventListener)t.addEventListener(n,i);else{if(!t.attachEvent)return e.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+n,i)}}function h(t,n,i){if(t.removeEventListener)t.removeEventListener(n,i);else{if(!t.detachEvent)return e.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+n,i)}}function u(t){return i(t).container.childNodes[0].childNodes[0].childNodes[0]}function d(t){return i(t).container.childNodes[0].childNodes[0].childNodes[1]}return o(window.document),{makeDetectable:function(t,o,h){function p(){if(t.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(r.get(o),"Scroll: "),e.log.apply)e.log.apply(null,n);else for(var i=0;i<n.length;i++)e.log(n[i])}}function f(t){var e=i(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||-1===n.width.indexOf("px")}function m(){var t=window.getComputedStyle(o),e={};return e.position=t.position,e.width=o.offsetWidth,e.height=o.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function g(){if(p("storeStyle invoked."),i(o)){var t=m();i(o).style=t}else p("Aborting because element has been uninstalled")}function _(t,e,n){i(t).lastWidth=e,i(t).lastHeight=n}function v(){return 2*s.width+1}function y(){return 2*s.height+1}function x(t){return t+10+v()}function b(t){return t+10+y()}function M(t,e,n){var i=u(t),r=d(t),s=x(e),a=b(n),o=function(t){return 2*t+v()}(e),l=function(t){return 2*t+y()}(n);i.scrollLeft=s,i.scrollTop=a,r.scrollLeft=o,r.scrollTop=l}function S(){var t=i(o).container;if(!t){(t=document.createElement("div")).className=a,t.style.cssText=l(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(o).container=t,function(t){t.className+=" "+a+"_animation_active"}(t),o.appendChild(t);var e=function(){i(o).onRendered&&i(o).onRendered()};c(t,"animationstart",e),i(o).onAnimationStart=e}return t}function w(){if(p("Injecting elements"),i(o)){!function(){var n=i(o).style;if("static"===n.position){o.style.setProperty("position","relative",t.important?"important":"");var r=function(t,e,n,i){var r=n[i];"auto"!==r&&"0"!==r.replace(/[^-\d\.]/g,"")&&(t.warn("An element that is positioned static has style."+i+"="+r+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",e),e.style[i]=0)};r(e,o,n,"top"),r(e,o,n,"right"),r(e,o,n,"bottom"),r(e,o,n,"left")}}();var n=i(o).container;n||(n=S());var r,h,u,d,f=s.width,m=s.height,g=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),_=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(r=(r=-(1+f))?r+"px":"0"),"top: "+(h=(h=-(1+m))?h+"px":"0"),"right: "+(d=(d=-f)?d+"px":"0"),"bottom: "+(u=(u=-m)?u+"px":"0")])),v=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),y=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),x=l(["position: absolute","left: 0","top: 0"]),b=l(["position: absolute","width: 200%","height: 200%"]),M=document.createElement("div"),w=document.createElement("div"),T=document.createElement("div"),A=document.createElement("div"),E=document.createElement("div"),C=document.createElement("div");M.dir="ltr",M.style.cssText=g,M.className=a,w.className=a,w.style.cssText=_,T.style.cssText=v,A.style.cssText=x,E.style.cssText=y,C.style.cssText=b,T.appendChild(A),E.appendChild(C),w.appendChild(T),w.appendChild(E),M.appendChild(w),n.appendChild(M),c(T,"scroll",R),c(E,"scroll",P),i(o).onExpandScroll=R,i(o).onShrinkScroll=P}else p("Aborting because element has been uninstalled");function R(){var t=i(o);t&&t.onExpand?t.onExpand():p("Aborting expand scroll handler: element has been uninstalled")}function P(){var t=i(o);t&&t.onShrink?t.onShrink():p("Aborting shrink scroll handler: element has been uninstalled")}}function T(){function s(e,n,i){var r=u(e).childNodes[0],s=x(n),a=b(i);r.style.setProperty("width",s+"px",t.important?"important":""),r.style.setProperty("height",a+"px",t.important?"important":"")}function a(a){var c=o.offsetWidth,h=o.offsetHeight,u=c!==i(o).lastWidth||h!==i(o).lastHeight;p("Storing current size",c,h),_(o,c,h),n.add(0,(function(){if(u)if(i(o))if(l()){if(t.debug){var n=o.offsetWidth,a=o.offsetHeight;n===c&&a===h||e.warn(r.get(o),"Scroll: Size changed before updating detector elements.")}s(o,c,h)}else p("Aborting because element container has not been initialized");else p("Aborting because element has been uninstalled")})),n.add(1,(function(){i(o)?l()?M(o,c,h):p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")})),u&&a&&n.add(2,(function(){i(o)?l()?a():p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")}))}function l(){return!!i(o).container}function c(){p("notifyListenersIfNeeded invoked");var t=i(o);return void 0===i(o).lastNotifiedWidth&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height?p("Not notifying: Size is the same as the start size, and there has been no notification yet."):t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight?p("Not notifying: Size already notified"):(p("Current size not notified, notifying..."),t.lastNotifiedWidth=t.lastWidth,t.lastNotifiedHeight=t.lastHeight,void ai(i(o).listeners,(function(t){t(o)})))}function h(){p("Scroll detected."),f(o)?p("Scroll event fired while unrendered. Ignoring..."):a(c)}if(p("registerListenersAndPositionElements invoked."),i(o)){i(o).onRendered=function(){if(p("startanimation triggered."),f(o))p("Ignoring since element is still unrendered...");else{p("Element rendered.");var t=u(o),e=d(o);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(p("Scrollbars out of sync. Updating detector elements..."),a(c))}},i(o).onExpand=h,i(o).onShrink=h;var m=i(o).style;s(o,m.width,m.height)}else p("Aborting because element has been uninstalled")}function A(){if(p("finalizeDomMutation invoked."),i(o)){var t=i(o).style;_(o,t.width,t.height),M(o,t.width,t.height)}else p("Aborting because element has been uninstalled")}function E(){h(o)}function C(){var t;p("Installing..."),i(o).listeners=[],t=m(),i(o).startSize={width:t.width,height:t.height},p("Element start size",i(o).startSize),n.add(0,g),n.add(1,w),n.add(2,T),n.add(3,A),n.add(4,E)}var R,P,I;h||(h=o,o=t,t=null),t=t||{},p("Making detectable..."),I=(P=R=o).getRootNode&&P.getRootNode().contains(P),P!==P.ownerDocument.body&&!P.ownerDocument.body.contains(P)&&!I||null===window.getComputedStyle(R)?(p("Element is detached"),S(),p("Waiting until element is attached..."),i(o).onRendered=function(){p("Element is now attached"),C()}):C()},addListener:function(t,e){if(!i(t).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");i(t).listeners.push(e)},uninstall:function(t){var e=i(t);e&&(e.onExpandScroll&&h(u(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&h(d(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&h(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))},initDocument:o}};function vi(t){return Array.isArray(t)||void 0!==t.length}function yi(t){if(Array.isArray(t))return t;var e=[];return oi(t,(function(t){e.push(t)})),e}function xi(t){return t&&1===t.nodeType}function bi(t,e,n){var i=t[e];return null==i&&void 0!==n?n:i}const Mi=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){var e;if((t=t||{}).idHandler)e={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var n=hi(),i=ui({idGenerator:n,stateHandler:mi});e=i}var r=t.reporter;r||(r=di(!1===r));var s=bi(t,"batchProcessor",fi({reporter:r})),a={};a.callOnAdd=!!bi(t,"callOnAdd",!0),a.debug=!!bi(t,"debug",!1);var o,l=ci(e),c=li({stateHandler:mi}),h=bi(t,"strategy","object"),u=bi(t,"important",!1),d={reporter:r,batchProcessor:s,stateHandler:mi,idHandler:e,important:u};if("scroll"===h&&(pi.isLegacyOpera()?(r.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),h="object"):pi.isIE(9)&&(r.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),h="object")),"scroll"===h)o=_i(d);else{if("object"!==h)throw new Error("Invalid strategy name: "+h);o=gi(d)}var p={};return{listenTo:function(t,n,i){function s(t){var e=l.get(t);oi(e,(function(e){e(t)}))}function h(t,e,n){l.add(e,n),t&&n(e)}if(i||(i=n,n=t,t={}),!n)throw new Error("At least one element required.");if(!i)throw new Error("Listener required.");if(xi(n))n=[n];else{if(!vi(n))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=yi(n)}var d=0,f=bi(t,"callOnAdd",a.callOnAdd),m=bi(t,"onReady",(function(){})),g=bi(t,"debug",a.debug);oi(n,(function(t){mi.getState(t)||(mi.initState(t),e.set(t));var a=e.get(t);if(g&&r.log("Attaching listener to element",a,t),!c.isDetectable(t))return g&&r.log(a,"Not detectable."),c.isBusy(t)?(g&&r.log(a,"System busy making it detectable"),h(f,t,i),p[a]=p[a]||[],void p[a].push((function(){++d===n.length&&m()}))):(g&&r.log(a,"Making detectable..."),c.markBusy(t,!0),o.makeDetectable({debug:g,important:u},t,(function(t){if(g&&r.log(a,"onElementDetectable"),mi.getState(t)){c.markAsDetectable(t),c.markBusy(t,!1),o.addListener(t,s),h(f,t,i);var e=mi.getState(t);if(e&&e.startSize){var l=t.offsetWidth,u=t.offsetHeight;e.startSize.width===l&&e.startSize.height===u||s(t)}p[a]&&oi(p[a],(function(t){t()}))}else g&&r.log(a,"Element uninstalled before being detectable.");delete p[a],++d===n.length&&m()})));g&&r.log(a,"Already detecable, adding listener."),h(f,t,i),d++})),d===n.length&&m()},removeListener:l.removeListener,removeAllListeners:l.removeAllListeners,uninstall:function(t){if(!t)return r.error("At least one element is required.");if(xi(t))t=[t];else{if(!vi(t))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=yi(t)}oi(t,(function(t){l.removeAllListeners(t),o.uninstall(t),mi.cleanState(t)}))},initDocument:function(t){o.initDocument&&o.initDocument(t)}}}));var Si=Mi({strategy:"scroll"});function wi(t,e){Si.listenTo(t,e);var n=e;return{update:function(e){Si.removeListener(t,n),Si.listenTo(t,e),n=e},destroy:function(){Si.removeListener(t,n)}}}function Ti(t){let e,n,i,r;const s=t[5].default,a=M(s,t,t[4],null);return{c(){e=z("div"),a&&a.c(),j(e,"class","size-detector svelte-69kfeg")},m(s,o){k(s,e,o),a&&a.m(e,null),t[6](e),n=!0,i||(r=R(wi.call(null,e,t[1])),i=!0)},p(t,[e]){a&&a.p&&(!n||16&e)&&T(a,s,t,t[4],n?w(s,t[4],e,null):A(t[4]),null)},i(t){n||(Mt(a,t),n=!0)},o(t){St(a,t),n=!1},d(n){n&&B(e),a&&a.d(n),t[6](null),i=!1,r()}}}function Ai(t,e,n){let i,r,{$$slots:s={},$$scope:a}=e,{width:o=0}=e,{height:l=0}=e;function c(){r&&(clearTimeout(i),n(2,({width:o,height:l}=r.getBoundingClientRect()),o,n(3,l)))}function h(){clearTimeout(i),i=setTimeout(c,100)}return it((()=>(setTimeout((()=>{window.dispatchEvent(new Event("resize")),h()}),125),()=>clearTimeout(i)))),t.$$set=t=>{"width"in t&&n(2,o=t.width),"height"in t&&n(3,l=t.height),"$$scope"in t&&n(4,a=t.$$scope)},[r,h,o,l,a,s,function(t){st[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class Ei extends Dt{constructor(t){super(),Lt(this,t,Ai,Ti,_,{width:2,height:3})}}const Ci=kt(!1),Ri=document.cookie,Pi=new window.URLSearchParams(window.location.search),Ii=location.href.indexOf("review.www")>=0||location.href.indexOf("http://localhost:")>=0,Li=Ii&&Pi.has("isPlus"),Di=location.href.indexOf("/services/statamic/cp/render-live-preview?live-preview=")>=0;let Ni=!1;const Oi=(()=>{const t=Ri.split(";").find((t=>{const[e]=t.split("=").map((t=>t.trim()));return"accessInfo"===e}));if(t){const e=t.split("=")[1].trim();return JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")))}})();let Ui=!0===(null==Oi?void 0:Oi.access.Spplus)||Li&&Ii||Di||Ni;const Fi={isPlusSubscriber:Ui};function ki(t){let e,n,i,r,s,a,o=t[0].credit&&Bi(t),l=t[0].caption&&zi(t);return{c(){e=z("img"),i=G(),r=z("div"),o&&o.c(),s=G(),l&&l.c(),a=W(),y(e.src,n=t[0].url)||j(e,"src",n),j(e,"alt",""),j(e,"class","svelte-18wi50f"),j(r,"class","credit svelte-18wi50f")},m(t,n){k(t,e,n),k(t,i,n),k(t,r,n),o&&o.m(r,null),k(t,s,n),l&&l.m(t,n),k(t,a,n)},p(t,i){1&i&&!y(e.src,n=t[0].url)&&j(e,"src",n),t[0].credit?o?o.p(t,i):(o=Bi(t),o.c(),o.m(r,null)):o&&(o.d(1),o=null),t[0].caption?l?l.p(t,i):(l=zi(t),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d(t){t&&(B(e),B(i),B(r),B(s),B(a)),o&&o.d(),l&&l.d(t)}}}function Bi(t){let e,n,i,r,s=t[0].credit+"";return{c(){e=z("span"),n=V(t[1]),i=G(),r=new Z(!1),r.a=null,j(e,"class","svelte-18wi50f")},m(t,a){k(t,e,a),O(e,n),O(e,i),r.m(s,e)},p(t,e){2&e&&q(n,t[1]),1&e&&s!==(s=t[0].credit+"")&&r.p(s)},d(t){t&&B(e)}}}function zi(t){let e,n=t[0].caption+"";return{c(){e=z("div"),j(e,"class","captionBU svelte-18wi50f")},m(t,i){k(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=t[0].caption+"")&&(e.innerHTML=n)},d(t){t&&B(e)}}}function Hi(t){let e,n=t[0]&&t[0].url&&ki(t);return{c(){n&&n.c(),e=W()},m(t,i){n&&n.m(t,i),k(t,e,i)},p(t,[i]){t[0]&&t[0].url?n?n.p(t,i):(n=ki(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:u,o:u,d(t){t&&B(e),n&&n.d(t)}}}function Vi(t,e,n){let{image:i}=e,{textFoto:r="Foto: "}=e;return t.$$set=t=>{"image"in t&&n(0,i=t.image),"textFoto"in t&&n(1,r=t.textFoto)},[i,r]}setTimeout((()=>{var t;(null==(t=h.get())?void 0:t.checkGifted)&&location.href.indexOf("giftToken=")>=0&&(Ni=!0,Ui=!0,Fi.isPlusSubscriber=Ui)}),1);class Gi extends Dt{constructor(t){super(),Lt(this,t,Vi,Hi,_,{image:0,textFoto:1})}}function Wi(t){let e,n,i;return{c(){e=z("div"),n=z("iframe"),j(n,"width","100%"),j(n,"height","100%"),j(n,"scrolling","no"),j(n,"frameborder","0"),y(n.src,i=t[2])||j(n,"src",i),j(n,"class","svelte-1gcduqx"),j(e,"class","svelte-1gcduqx")},m(i,r){k(i,e,r),O(e,n),t[4](n)},p(t,e){4&e&&!y(n.src,i=t[2])&&j(n,"src",i)},d(n){n&&B(e),t[4](null)}}}function ji(t){let e,n=t[0]&&Wi(t);return{c(){n&&n.c(),e=W()},m(t,i){n&&n.m(t,i),k(t,e,i)},p(t,[i]){t[0]?n?n.p(t,i):(n=Wi(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:u,o:u,d(t){t&&B(e),n&&n.d(t)}}}function Xi(t,e,n){let{iframe:i}=e;const r="localhost"===window.location.hostname;let s,a="";const o=t=>{const e=Number(t.data.height);s&&(s&&s.lastHeight&&s.lastHeight===e||t.source===s.contentWindow&&(n(1,s.lastHeight=e,s),n(1,s.style.height="".concat(e.toString(),"px"),s)))};let l;i&&window.addEventListener("message",(t=>{r?t.data.height&&o(t):t.source===s.contentWindow&&t.data.height&&o(t)}));const c=t=>{n(2,a=t[0].intersectionRatio>0?i:"")};return t.$$set=t=>{"iframe"in t&&n(0,i=t.iframe)},t.$$.update=()=>{10&t.$$.dirty&&s&&(l||(n(3,l=new IntersectionObserver(c,{rootMargin:"50px"})),l.observe(s)))},[i,s,a,l,function(t){st[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class qi extends Dt{constructor(t){super(),Lt(this,t,Xi,ji,_,{iframe:0})}}function Yi(t){let e,n,i,r,s,a,o,l,c=t[1]&&function(t){let e;return{c(){e=z("span"),e.textContent=`${t[1]}`,j(e,"class","line svelte-10qhxhy")},m(t,n){k(t,e,n)},p:u,d(t){t&&B(e)}}}(t),h=t[3]&&function(t){let e;return{c(){e=z("span"),e.innerHTML='<span class="svelte-10qhxhy"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true"><g><rect width="20" height="20" rx="1.5" class="svelte-10qhxhy"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M4 10.684V6.295C4 5.575 4.36 5 5.295 5h3.669c.648 0 1.08.432 1.08 1.151v1.943H8.172v-1.44H5.799v2.303h4.244v4.82c0 .791-.431 1.223-1.295 1.223H5.223C4.36 15 4 14.496 4 13.849v-2.302h1.87v1.798h2.375v-2.662H4z" class="svelte-10qhxhy"></path><path d="M13.825 7.8h1.35v2.025H17.2v1.35h-2.025V13.2h-1.35v-2.025H11.8v-1.35h2.025V7.8z" class="svelte-10qhxhy"></path></g></svg></span>',j(e,"class","icon svelte-10qhxhy")},m(t,n){k(t,e,n)},d(t){t&&B(e)}}}(),d=t[0]&&function(t){let e;return{c(){e=z("div"),e.textContent=`${t[0]}`,j(e,"class","intro svelte-10qhxhy")},m(t,n){k(t,e,n)},p:u,d(t){t&&B(e)}}}(t);return{c(){e=z("div"),n=z("div"),i=z("h2"),c&&c.c(),r=G(),s=z("span"),h&&h.c(),a=G(),o=z("span"),o.textContent=`${t[2]}`,l=G(),d&&d.c(),j(s,"class","headline svelte-10qhxhy"),j(i,"class","svelte-10qhxhy"),j(n,"class","title svelte-10qhxhy"),j(e,"class","articleTitle svelte-10qhxhy")},m(t,u){k(t,e,u),O(e,n),O(n,i),c&&c.m(i,null),O(i,r),O(i,s),h&&h.m(s,null),O(s,a),O(s,o),O(n,l),d&&d.m(n,null)},p(t,[e]){t[1]&&c.p(t,e),t[0]&&d.p(t,e)},i:u,o:u,d(t){t&&B(e),c&&c.d(),h&&h.d(),d&&d.d()}}}function $i(t){var e,n,i;const r=(null==(e=[...document.getElementsByTagName("script")])?void 0:e.find((t=>"application/settings+json"===t.type)))||{},s=JSON.parse((null==r?void 0:r.innerHTML)||"{}"),{headline:a,intro:o}=(null==(n=null==s?void 0:s.editorial)?void 0:n.info)||{},{type:l}=(null==(i=null==s?void 0:s.paywall)?void 0:i.category)||{},[c,h]=(null==a?void 0:a.split(":"))||[];return[o,h?c:"",h||c||"",l&&"free"!==l]}class Zi extends Dt{constructor(t){super(),Lt(this,t,$i,Yi,_,{})}}function Ki(t,e,n){const i=t.slice();i[14]=e[n].align,i[15]=e[n].text,i[16]=e[n].image,i[17]=e[n].textboxElement,i[20]=n;const r=i[17]&&i[17].indexOf("https://")>=0;return i[18]=r,i}function Ji(t){let e,n;return e=new Zi({}),{c(){Ct(e.$$.fragment)},m(t,i){Rt(e,t,i),n=!0},i(t){n||(Mt(e.$$.fragment,t),n=!0)},o(t){St(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Qi(t){let e,n,i,r,s,a=t[15]&&tr(t),o=t[16]&&er(t),l=t[18]&&nr(t);return{c(){e=z("div"),n=G(),a&&a.c(),i=G(),o&&o.c(),r=G(),l&&l.c(),j(e,"class","caption svelte-1onh3v1"),j(e,"style",t[2]),$(e,"withpic",t[16])},m(t,c){k(t,e,c),O(e,n),a&&a.m(e,null),O(e,i),o&&o.m(e,null),O(e,r),l&&l.m(e,null),s=!0},p(t,n){t[15]?a?a.p(t,n):(a=tr(t),a.c(),a.m(e,i)):a&&(a.d(1),a=null),t[16]?o?(o.p(t,n),2&n&&Mt(o,1)):(o=er(t),o.c(),Mt(o,1),o.m(e,r)):o&&(xt(),St(o,1,1,(()=>{o=null})),bt()),t[18]?l?(l.p(t,n),2&n&&Mt(l,1)):(l=nr(t),l.c(),Mt(l,1),l.m(e,null)):l&&(xt(),St(l,1,1,(()=>{l=null})),bt()),(!s||4&n)&&j(e,"style",t[2]),(!s||2&n)&&$(e,"withpic",t[16])},i(t){s||(Mt(o),Mt(l),s=!0)},o(t){St(o),St(l),s=!1},d(t){t&&B(e),a&&a.d(),o&&o.d(),l&&l.d()}}}function tr(t){let e,n=t[15]+"";return{c(){e=z("p"),j(e,"style",t[3]),j(e,"class","svelte-1onh3v1")},m(t,i){k(t,e,i),e.innerHTML=n},p(t,i){2&i&&n!==(n=t[15]+"")&&(e.innerHTML=n),8&i&&j(e,"style",t[3])},d(t){t&&B(e)}}}function er(t){let e,n,i;return n=new Gi({props:{image:t[16],textFoto:t[0].textFoto}}),{c(){e=z("p"),Ct(n.$$.fragment),j(e,"class","imagep svelte-1onh3v1")},m(t,r){k(t,e,r),Rt(n,e,null),i=!0},p(t,e){const i={};2&e&&(i.image=t[16]),1&e&&(i.textFoto=t[0].textFoto),n.$set(i)},i(t){i||(Mt(n.$$.fragment,t),i=!0)},o(t){St(n.$$.fragment,t),i=!1},d(t){t&&B(e),Pt(n)}}}function nr(t){let e,n;return e=new qi({props:{iframe:t[17]}}),{c(){Ct(e.$$.fragment)},m(t,i){Rt(e,t,i),n=!0},p(t,n){const i={};2&n&&(i.iframe=t[17]),e.$set(i)},i(t){n||(Mt(e.$$.fragment,t),n=!0)},o(t){St(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function ir(t){let e,n,i,r,s,a,o,l=(t[15]||t[16]||t[18])&&Qi(t);return{c(){e=z("section"),l&&l.c(),n=G(),j(e,"class",i=E(t[14])+" svelte-1onh3v1"),$(e,"isOpener",t[0].isOpener),$(e,"singleSection",t[6])},m(i,c){k(i,e,c),l&&l.m(e,null),O(e,n),s=!0,a||(o=R(r=Ot.call(null,e,t[5])),a=!0)},p(t,a){t[15]||t[16]||t[18]?l?(l.p(t,a),2&a&&Mt(l,1)):(l=Qi(t),l.c(),Mt(l,1),l.m(e,n)):l&&(xt(),St(l,1,1,(()=>{l=null})),bt()),(!s||2&a&&i!==(i=E(t[14])+" svelte-1onh3v1"))&&j(e,"class",i),r&&g(r.update)&&32&a&&r.update.call(null,t[5]),(!s||3&a)&&$(e,"isOpener",t[0].isOpener),(!s||66&a)&&$(e,"singleSection",t[6])},i(t){s||(Mt(l),s=!0)},o(t){St(l),s=!1},d(t){t&&B(e),l&&l.d(),a=!1,o()}}}function rr(t){let e,n,i,r=t[4]&&t[7]&&Ji(),s=Fi.isPlusSubscriber&&function(t){let e,n,i=At(t[1]),r=[];for(let a=0;a<i.length;a+=1)r[a]=ir(Ki(t,i,a));const s=t=>St(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=W()},m(t,i){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,i);k(t,e,i),n=!0},p(t,n){if(111&n){let a;for(i=At(t[1]),a=0;a<i.length;a+=1){const s=Ki(t,i,a);r[a]?(r[a].p(s,n),Mt(r[a],1)):(r[a]=ir(s),r[a].c(),Mt(r[a],1),r[a].m(e.parentNode,e))}for(xt(),a=i.length;a<r.length;a+=1)s(a);bt()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)Mt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)St(r[e]);n=!1},d(t){t&&B(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}(t);return{c(){r&&r.c(),e=G(),s&&s.c(),n=W()},m(t,a){r&&r.m(t,a),k(t,e,a),s&&s.m(t,a),k(t,n,a),i=!0},p(t,[n]){t[4]&&t[7]?r?144&n&&Mt(r,1):(r=Ji(),r.c(),Mt(r,1),r.m(e.parentNode,e)):r&&(xt(),St(r,1,1,(()=>{r=null})),bt()),Fi.isPlusSubscriber&&s.p(t,n)},i(t){i||(Mt(r),Mt(s),i=!0)},o(t){St(r),St(s),i=!1},d(t){t&&(B(e),B(n)),r&&r.d(t),s&&s.d(t)}}}function sr(t,e,n){let i,r,s,a,o,l,c,h,u,d,p,f,m,g;return b(t,zt,(t=>n(12,d=t))),b(t,Zt,(t=>n(0,p=t))),b(t,Ht,(t=>n(13,f=t))),b(t,Hn,(t=>n(1,m=t))),b(t,Ci,(t=>n(7,g=t))),t.$$.update=()=>{2&t.$$.dirty&&n(6,i=1===m.length),8192&t.$$.dirty&&n(5,r={dimensionsType:.01*f+"px"}),1&t.$$.dirty&&n(4,({showArticleTitle:s,textbox_css:a="",textbox_css_mobil:o="",p_css_mobil:l,p_css:c}=p),s,(n(8,a),n(0,p)),(n(9,o),n(0,p)),(n(11,l),n(0,p)),(n(10,c),n(0,p))),7168&t.$$.dirty&&n(3,h=d<720?l:c),4864&t.$$.dirty&&n(2,u=d<720?o:a)},[p,m,u,h,s,r,i,g,a,o,c,l,d,f]}class ar extends Dt{constructor(t){super(),Lt(this,t,sr,rr,_,{})}}function or(t){let e,n,i,r;return{c(){e=z("div"),n=z("span"),n.innerHTML='<svg width="13" height="12" viewBox="0 0 13 12" fill="none"><g transform="translate(0.5, 0.5)"><path class="s svelte-153jgkf" d="M1.15 10.705C0.51 10.705 0 10.205 0 9.55503V7.18503H2.06V8.96503H4.3V6.12503H0.01V1.43503C0.01 0.785034 0.52 0.285034 1.16 0.285034H5.2C5.84 0.285034 6.35 0.785034 6.35 1.43503V3.36503H4.29V2.02503H2.07V4.42503H6.36V9.56503C6.36 10.205 5.86 10.715 5.21 10.715H1.15V10.705Z"></path></g><g transform="translate(10, 4.95)"><rect class="s svelte-153jgkf" width="3.2" height="3.2"></rect></g></svg>',i=G(),r=V(t[0]),j(n,"class","svelte-153jgkf"),j(e,"class","svelte-153jgkf")},m(t,s){k(t,e,s),O(e,n),O(e,i),O(e,r)},p(t,e){1&e&&q(r,t[0])},d(t){t&&B(e)}}}function lr(t){let e,n=t[0]&&!/^\s+$/.test(t[0]),i=n&&or(t);return{c(){i&&i.c(),e=W()},m(t,n){i&&i.m(t,n),k(t,e,n)},p(t,[r]){1&r&&(n=t[0]&&!/^\s+$/.test(t[0])),n?i?i.p(t,r):(i=or(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:u,o:u,d(t){t&&B(e),i&&i.d(t)}}}function cr(t,e,n){let{sources:i}=e;return t.$$set=t=>{"sources"in t&&n(0,i=t.sources)},[i]}class hr extends Dt{constructor(t){super(),Lt(this,t,cr,lr,_,{sources:0})}}function ur(t){let e,n;const i=t[3].default,r=M(i,t,t[2],null);return{c(){e=z("div"),r&&r.c(),j(e,"class","text-align svelte-w7nysz"),$(e,"is-iframe","iframe"===t[0]),$(e,"is-embed","embed"===t[0]),$(e,"is-disabled",t[1])},m(t,i){k(t,e,i),r&&r.m(e,null),n=!0},p(t,[s]){r&&r.p&&(!n||4&s)&&T(r,i,t,t[2],n?w(i,t[2],s,null):A(t[2]),null),(!n||1&s)&&$(e,"is-iframe","iframe"===t[0]),(!n||1&s)&&$(e,"is-embed","embed"===t[0]),(!n||2&s)&&$(e,"is-disabled",t[1])},i(t){n||(Mt(r,t),n=!0)},o(t){St(r,t),n=!1},d(t){t&&B(e),r&&r.d(t)}}}function dr(t,e,n){let{$$slots:i={},$$scope:r}=e,{type:s="iframe"}=e,{disable:a=!1}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"disable"in t&&n(1,a=t.disable),"$$scope"in t&&n(2,r=t.$$scope)},[s,a,r,i]}class pr extends Dt{constructor(t){super(),Lt(this,t,dr,ur,_,{type:0,disable:1})}}function fr(t,{delay:e=0,duration:n=400,easing:i=d}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:t=>"opacity: "+t*r}}function mr(t){let e,n,i,r,s;return{c(){e=z("div"),n=H("svg"),i=H("circle"),r=G(),s=z("span"),s.innerHTML='<svg class="fill-current svelte-169aefs" width="40" height="66" viewBox="0 0 24 30" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true"><path class="fill-current svelte-169aefs" d="M20 29.4V13H6.3V5.4h7.2V10H20V3.4C20 1.5 18.4 0 16.5 0h-13C1.6 0 0 1.6 0 3.5v15h13.5v9H6.3v-6.1H0v8C0 31.3 1.6 33 3.5 33h13c1.9-.2 3.5-1.7 3.5-3.6z"></path></svg>',j(i,"class","loader-path svelte-169aefs"),j(i,"cx","50"),j(i,"cy","50"),j(i,"r","20"),j(i,"fill","none"),Y(i,"stroke-dashoffset",t[1]),j(n,"class","circular-loader svelte-169aefs"),j(n,"viewBox","25 25 50 50"),j(s,"class","text-primary-base dark:text-dm-primary-base svelte-169aefs"),j(e,"class","loadingAni absolute flex h-full items-center justify-center w-full svelte-169aefs"),$(e,"iframe",t[0])},m(t,a){k(t,e,a),O(e,n),O(n,i),O(e,r),O(e,s)},p(t,[n]){2&n&&Y(i,"stroke-dashoffset",t[1]),1&n&&$(e,"iframe",t[0])},i:u,o:u,d(t){t&&B(e)}}}function gr(t,e,n){let{isIframe:i=!1}=e;let r=126;return t.$$set=t=>{"isIframe"in t&&n(0,i=t.isIframe)},[i,r,function(t){n(1,r=126-126*t)}]}class _r extends Dt{constructor(t){super(),Lt(this,t,gr,mr,_,{isIframe:0,setLoadingPercent:2})}get setLoadingPercent(){return this.$$.ctx[2]}}function vr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var xr,br,Mr,Sr,wr,Tr,Ar,Er,Cr,Rr,Pr,Ir={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Lr={duration:.5,overwrite:!1,delay:0},Dr=1e8,Nr=1e-8,Or=2*Math.PI,Ur=Or/4,Fr=0,kr=Math.sqrt,Br=Math.cos,zr=Math.sin,Hr=function(t){return"string"==typeof t},Vr=function(t){return"function"==typeof t},Gr=function(t){return"number"==typeof t},Wr=function(t){return void 0===t},jr=function(t){return"object"==typeof t},Xr=function(t){return!1!==t},qr=function(){return"undefined"!=typeof window},Yr=function(t){return Vr(t)||Hr(t)},$r="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Zr=Array.isArray,Kr=/(?:-?\.?\d|\.)+/gi,Jr=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Qr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ts=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,es=/[+-]=-?[.\d]+/,ns=/[^,'"\[\]\s]+/gi,is=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,rs={},ss={},as=function(t){return(ss=Ns(t,rs))&&Oo},os=function(t,e){return!e&&void 0},ls=function(t,e){return t&&(rs[t]=e)&&ss&&(ss[t]=e)||rs},cs=function(){return 0},hs={suppressEvents:!0,isStart:!0,kill:!1},us={suppressEvents:!0,kill:!1},ds={suppressEvents:!0},ps={},fs=[],ms={},gs={},_s={},vs=30,ys=[],xs="",bs=function(t){var e,n,i=t[0];if(jr(i)||Vr(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=ys.length;n--&&!ys[n].targetTest(i););e=ys[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Ya(t[n],e)))||t.splice(n,1);return t},Ms=function(t){return t._gsap||bs(ua(t))[0]._gsap},Ss=function(t,e,n){return(n=t[e])&&Vr(n)?t[e]():Wr(n)&&t.getAttribute&&t.getAttribute(e)||n},ws=function(t,e){return(t=t.split(",")).forEach(e)||t},Ts=function(t){return Math.round(1e5*t)/1e5||0},As=function(t){return Math.round(1e7*t)/1e7||0},Es=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i},Cs=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Rs=function(){var t,e,n=fs.length,i=fs.slice(0);for(ms={},fs.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Ps=function(t,e,n,i){fs.length&&!br&&Rs(),t.render(e,n,br&&e<0&&(t._initted||t._startAt)),fs.length&&!br&&Rs()},Is=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(ns).length<2?e:Hr(t)?t.trim():t},Ls=function(t){return t},Ds=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Ns=function(t,e){for(var n in e)t[n]=e[n];return t},Os=function t(e,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=jr(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},Us=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},Fs=function(t){var e=t.parent||Sr,n=t.keyframes?function(t){return function(e,n){for(var i in n)i in e||"duration"===i&&t||"ease"===i||(e[i]=n[i])}}(Zr(t.keyframes)):Ds;if(Xr(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},ks=function(t,e,n,i,r){var s,a=t[i];if(r)for(s=e[r];a&&a[r]>s;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t,e},Bs=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,s=e._next;r?r._next=s:t[n]===e&&(t[n]=s),s?s._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},zs=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Hs=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Vs=function(t,e,n,i){return t._startAt&&(br?t._startAt.revert(us):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},Gs=function t(e){return!e||e._ts&&t(e.parent)},Ws=function(t){return t._repeat?js(t._tTime,t=t.duration()+t._rDelay)*t:0},js=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Xs=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},qs=function(t){return t._end=As(t._start+(t._tDur/Math.abs(t._ts||t._rts||Nr)||0))},Ys=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=As(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),qs(t),n._dirty||Hs(n,t)),t},$s=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Xs(t.rawTime(),e),(!e._dur||oa(0,e.totalDuration(),n)-e._tTime>Nr)&&e.render(n,!0)),Hs(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Nr}},Zs=function(t,e,n,i){return e.parent&&zs(e),e._start=As((Gr(n)?n:n||t!==Sr?ra(t,n,e):t._time)+e._delay),e._end=As(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),ks(t,e,"_first","_last",t._sort?"_start":0),ta(e)||(t._recent=e),i||$s(t,e),t._ts<0&&Ys(t,t._tTime),t},Ks=function(t,e){return rs.ScrollTrigger?rs.ScrollTrigger.create(e,t):void 0},Js=function(t,e,n,i,r){return no(t,e,r),t._initted?!n&&t._pt&&!br&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Cr!==Oa.frame?(fs.push(t),t._lazy=[r,i],1):void 0:1},Qs=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},ta=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},ea=function(t,e,n,i){var r=t._repeat,s=As(e)||0,a=t._tTime/t._tDur;return a&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:As(s*(r+1)+t._rDelay*r):s,a>0&&!i&&Ys(t,t._tTime=t._tDur*a),t.parent&&qs(t),n||Hs(t.parent,t),t},na=function(t){return t instanceof Za?Hs(t):ea(t,t._dur)},ia={_start:0,endTime:cs,totalDuration:cs},ra=function t(e,n,i){var r,s,a,o=e.labels,l=e._recent||ia,c=e.duration()>=Dr?l.endTime(!1):e._dur;return Hr(n)&&(isNaN(n)||n in o)?(s=n.charAt(0),a="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(r<0?l:i).totalDuration()/100:1)):r<0?(n in o||(o[n]=c),o[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),a&&i&&(s=s/100*(Zr(i)?i[0]:i).totalDuration()),r>1?t(e,n.substr(0,r-1),i)+s:c+s)):null==n?c:+n},sa=function(t,e,n){var i,r,s=Gr(e[1]),a=(s?2:1)+(t<2?0:1),o=e[a];if(s&&(o.duration=e[1]),o.parent=n,t){for(i=o,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=Xr(r.vars.inherit)&&r.parent;o.immediateRender=Xr(i.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return new oo(e[0],o,e[a+1])},aa=function(t,e){return t||0===t?e(t):e},oa=function(t,e,n){return n<t?t:n>e?e:n},la=function(t,e){return Hr(t)&&(e=is.exec(t))?e[1]:""},ca=[].slice,ha=function(t,e){return t&&jr(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&jr(t[0]))&&!t.nodeType&&t!==wr},ua=function(t,e,n){return Mr&&!e&&Mr.selector?Mr.selector(t):!Hr(t)||n||!Tr&&Ua()?Zr(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var i;return Hr(t)&&!e||ha(t,1)?(i=n).push.apply(i,ua(t)):n.push(t)}))||n}(t,n):ha(t)?ca.call(t,0):t?[t]:[]:ca.call((e||Ar).querySelectorAll(t),0)},da=function(t){return t=ua(t)[0]||os()||{},function(e){var n=t.current||t.nativeElement||t;return ua(e,n.querySelectorAll?n:n===t?os()||Ar.createElement("div"):t)}},pa=function(t){return t.sort((function(){return.5-Math.random()}))},fa=function(t){if(Vr(t))return t;var e=jr(t)?t:{each:t},n=Ga(e.ease),i=e.from||0,r=parseFloat(e.base)||0,s={},a=i>0&&i<1,o=isNaN(i)||a,l=e.axis,c=i,h=i;return Hr(i)?c=h={center:.5,edges:.5,end:1}[i]||0:!a&&o&&(c=i[0],h=i[1]),function(t,a,u){var d,p,f,m,g,_,v,y,x,b=(u||e).length,M=s[b];if(!M){if(!(x="auto"===e.grid?0:(e.grid||[1,Dr])[1])){for(v=-Dr;v<(v=u[x++].getBoundingClientRect().left)&&x<b;);x<b&&x--}for(M=s[b]=[],d=o?Math.min(x,b)*c-.5:i%x,p=x===Dr?0:o?b*h/x-.5:i/x|0,v=0,y=Dr,_=0;_<b;_++)f=_%x-d,m=p-(_/x|0),M[_]=g=l?Math.abs("y"===l?m:f):kr(f*f+m*m),g>v&&(v=g),g<y&&(y=g);"random"===i&&pa(M),M.max=v-y,M.min=y,M.v=b=(parseFloat(e.amount)||parseFloat(e.each)*(x>b?b-1:l?"y"===l?b/x:x:Math.max(x,b/x))||0)*("edges"===i?-1:1),M.b=b<0?r-b:r,M.u=la(e.amount||e.each)||0,n=n&&b<0?Ha(n):n}return b=(M[t]-M.min)/M.max||0,As(M.b+(n?n(b):b)*M.v)+M.u}},ma=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=As(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(Gr(n)?0:la(n))}},ga=function(t,e){var n,i,r=Zr(t);return!r&&jr(t)&&(n=r=t.radius||Dr,t.values?(t=ua(t.values),(i=!Gr(t[0]))&&(n*=n)):t=ma(t.increment)),aa(e,r?Vr(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,s,a=parseFloat(i?e.x:e),o=parseFloat(i?e.y:0),l=Dr,c=0,h=t.length;h--;)(r=i?(r=t[h].x-a)*r+(s=t[h].y-o)*s:Math.abs(t[h]-a))<l&&(l=r,c=h);return c=!n||l<=n?t[c]:e,i||c===e||Gr(e)?c:c+la(e)}:ma(t))},_a=function(t,e,n,i){return aa(Zr(t)?!e:!0===n?!!(n=0):!i,(function(){return Zr(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i}))},va=function(t,e,n){return aa(n,(function(n){return t[~~e(n)]}))},ya=function(t){for(var e,n,i,r,s=0,a="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?ns:Kr),a+=t.substr(s,e-s)+_a(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return a+t.substr(s,t.length-s)},xa=function(t,e,n,i,r){var s=e-t,a=i-n;return aa(r,(function(e){return n+((e-t)/s*a||0)}))},ba=function(t,e,n){var i,r,s,a=t.labels,o=Dr;for(i in a)(r=a[i]-e)<0==!!n&&r&&o>(r=Math.abs(r))&&(s=i,o=r);return s},Ma=function(t,e,n){var i,r,s,a=t.vars,o=a[e],l=Mr,c=t._ctx;if(o)return i=a[e+"Params"],r=a.callbackScope||t,n&&fs.length&&Rs(),c&&(Mr=c),s=i?o.apply(r,i):o.call(r),Mr=l,s},Sa=function(t){return zs(t),t.scrollTrigger&&t.scrollTrigger.kill(!!br),t.progress()<1&&Ma(t,"onInterrupt"),t},wa=[],Ta=function(t){if(t)if(t=!t.name&&t.default||t,qr()||t.headless){var e=t.name,n=Vr(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:cs,render:_o,add:to,kill:yo,modifier:vo,rawVars:0},s={targetTest:0,get:0,getSetter:po,aliases:{},register:0};if(Ua(),t!==i){if(gs[e])return;Ds(i,Ds(Us(t,r),s)),Ns(i.prototype,Ns(r,Us(t,s))),gs[i.prop=e]=i,t.targetTest&&(ys.push(i),ps[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ls(e,i),t.register&&t.register(Oo,i,Mo)}else wa.push(t)},Aa=255,Ea={aqua:[0,Aa,Aa],lime:[0,Aa,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Aa],navy:[0,0,128],white:[Aa,Aa,Aa],olive:[128,128,0],yellow:[Aa,Aa,0],orange:[Aa,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Aa,0,0],pink:[Aa,192,203],cyan:[0,Aa,Aa],transparent:[Aa,Aa,Aa,0]},Ca=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*Aa+.5|0},Ra=function(t,e,n){var i,r,s,a,o,l,c,h,u,d,p=t?Gr(t)?[t>>16,t>>8&Aa,t&Aa]:0:Ea.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ea[t])p=Ea[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&Aa,p&Aa,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&Aa,t&Aa]}else if("hsl"===t.substr(0,3))if(p=d=t.match(Kr),e){if(~t.indexOf("="))return p=t.match(Jr),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,i=2*(l=+p[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=Ca(a+1/3,i,r),p[1]=Ca(a,i,r),p[2]=Ca(a-1/3,i,r);else p=t.match(Kr)||Ea.transparent;p=p.map(Number)}return e&&!d&&(i=p[0]/Aa,r=p[1]/Aa,s=p[2]/Aa,l=((c=Math.max(i,r,s))+(h=Math.min(i,r,s)))/2,c===h?a=o=0:(u=c-h,o=l>.5?u/(2-c-h):u/(c+h),a=c===i?(r-s)/u+(r<s?6:0):c===r?(s-i)/u+2:(i-r)/u+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},Pa=function(t){var e=[],n=[],i=-1;return t.split(La).forEach((function(t){var r=t.match(Qr)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e},Ia=function(t,e,n){var i,r,s,a,o="",l=(t+o).match(La),c=e?"hsla(":"rgba(",h=0;if(!l)return t;if(l=l.map((function(t){return(t=Ra(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(s=Pa(t),(i=n.c).join(o)!==s.c.join(o)))for(a=(r=t.replace(La,"1").split(Qr)).length-1;h<a;h++)o+=r[h]+(~i.indexOf(h)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(a=(r=t.split(La)).length-1;h<a;h++)o+=r[h]+l[h];return o+r[a]},La=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Ea)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Da=/hsl[a]?\(/,Na=function(t){var e,n=t.join(" ");if(La.lastIndex=0,La.test(n))return e=Da.test(n),t[1]=Ia(t[1],e),t[0]=Ia(t[0],e,Pa(t[1])),!0},Oa=function(){var t,e,n,i,r,s,a=Date.now,o=500,l=33,c=a(),h=c,u=1e3/240,d=u,p=[],f=function n(f){var m,g,_,v,y=a()-h,x=!0===f;if((y>o||y<0)&&(c+=y-l),((m=(_=(h+=y)-c)-d)>0||x)&&(v=++i.frame,r=_-1e3*i.time,i.time=_/=1e3,d+=m+(m>=u?4:u-m),g=1),x||(t=e(n)),g)for(s=0;s<p.length;s++)p[s](_,r,v,f)};return i={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(t){return r/(1e3/(t||60))},wake:function(){Er&&(!Tr&&qr()&&(wr=Tr=window,Ar=wr.document||{},rs.gsap=Oo,(wr.gsapVersions||(wr.gsapVersions=[])).push(Oo.version),as(ss||wr.GreenSockGlobals||!wr.gsap&&wr||{}),wa.forEach(Ta)),n="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&i.sleep(),e=n||function(t){return setTimeout(t,d-1e3*i.time+1|0)},Pr=1,f(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(t),Pr=0,e=cs},lagSmoothing:function(t,e){o=t||1/0,l=Math.min(e||33,o)},fps:function(t){u=1e3/(t||240),d=1e3*i.time+u},add:function(t,e,n){var r=e?function(e,n,s,a){t(e,n,s,a),i.remove(r)}:t;return i.remove(t),p[n?"unshift":"push"](r),Ua(),r},remove:function(t,e){~(e=p.indexOf(t))&&p.splice(e,1)&&s>=e&&s--},_listeners:p}}(),Ua=function(){return!Pr&&Oa.wake()},Fa={},ka=/^[\d.\-M][\d.\-,\s]/,Ba=/["']/g,za=function(t){for(var e,n,i,r={},s=t.substr(1,t.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)n=s[o],e=o!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[a]=isNaN(i)?i.replace(Ba,"").trim():+i,a=n.substr(e+1).trim();return r},Ha=function(t){return function(e){return 1-t(1-e)}},Va=function t(e,n){for(var i,r=e._first;r;)r instanceof Za?t(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Ga=function(t,e){return t&&(Vr(t)?t:Fa[t]||function(t){var e=(t+"").split("("),n=Fa[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[za(e[1])]:function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",e);return t.substring(e,~i&&i<n?t.indexOf(")",n+1):n)}(t).split(",").map(Is)):Fa._CE&&ka.test(t)?Fa._CE("",t):n}(t))||e},Wa=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:n,easeInOut:i};return ws(t,(function(t){for(var e in Fa[t]=rs[t]=s,Fa[r=t.toLowerCase()]=n,s)Fa[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Fa[t+"."+e]=s[e]})),s},ja=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Xa=function t(e,n,i){var r=n>=1?n:1,s=(i||(e?.3:.45))/(n<1?n:1),a=s/Or*(Math.asin(1/r)||0),o=function(t){return 1===t?1:r*Math.pow(2,-10*t)*zr((t-a)*s)+1},l="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:ja(o);return s=Or/s,l.config=function(n,i){return t(e,n,i)},l},qa=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:ja(i);return r.config=function(n){return t(e,n)},r};ws("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;Wa(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),Fa.Linear.easeNone=Fa.none=Fa.Linear.easeIn,Wa("Elastic",Xa("in"),Xa("out"),Xa()),function(t,e){var n=1/e,i=2*n,r=2.5*n,s=function(s){return s<n?t*s*s:s<i?t*Math.pow(s-1.5/e,2)+.75:s<r?t*(s-=2.25/e)*s+.9375:t*Math.pow(s-2.625/e,2)+.984375};Wa("Bounce",(function(t){return 1-s(1-t)}),s)}(7.5625,2.75),Wa("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Wa("Circ",(function(t){return-(kr(1-t*t)-1)})),Wa("Sine",(function(t){return 1===t?1:1-Br(t*Ur)})),Wa("Back",qa("in"),qa("out"),qa()),Fa.SteppedEase=Fa.steps=rs.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0,s=1-Nr;return function(t){return((i*oa(0,s,t)|0)+r)*n}}},Lr.ease=Fa["quad.out"],ws("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return xs+=t+","+t+"Params,"}));var Ya=function(t,e){this.id=Fr++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Ss,this.set=e?e.getSetter:po},$a=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ea(this,+t.duration,1,1),this.data=t.data,Mr&&(this._ctx=Mr,Mr.data.push(this)),Pr||Oa.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,ea(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Ua(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ys(this,t),!n._dp||n.parent||$s(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Zs(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Nr||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Ps(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Ws(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Ws(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?js(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return this._rts===-Nr?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?Xs(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-Nr?0:this._rts,this.totalTime(oa(-Math.abs(this._delay),this._tDur,n),!1!==e),qs(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ua(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Nr&&(this._tTime-=Nr)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Zs(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Xr(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xs(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=ds);var e=br;return br=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),br=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,na(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,na(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(ra(this,t),Xr(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Xr(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-Nr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Nr,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-Nr))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(n){var i=Vr(t)?t:Ls,r=function(){var t=e.then;e.then=null,Vr(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){Sa(this)},t}();Ds($a.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Nr,_prom:0,_ps:!1,_rts:1});var Za=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=Xr(e.sortChildren),Sr&&Zs(e.parent||Sr,vr(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&Ks(vr(i),e.scrollTrigger),i}yr(e,t);var n=e.prototype;return n.to=function(t,e,n){return sa(0,arguments,this),this},n.from=function(t,e,n){return sa(1,arguments,this),this},n.fromTo=function(t,e,n,i){return sa(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Fs(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new oo(t,e,ra(this,n),1),this},n.call=function(t,e,n){return Zs(this,oo.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,i,r,s,a){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=a,n.parent=this,new oo(t,n,ra(this,r)),this},n.staggerFrom=function(t,e,n,i,r,s,a){return n.runBackwards=1,Fs(n).immediateRender=Xr(n.immediateRender),this.staggerTo(t,e,n,i,r,s,a)},n.staggerFromTo=function(t,e,n,i,r,s,a,o){return i.startAt=n,Fs(i).immediateRender=Xr(i.immediateRender),this.staggerTo(t,e,i,r,s,a,o)},n.render=function(t,e,n){var i,r,s,a,o,l,c,h,u,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,_=this._dur,v=t<=0?0:As(t),y=this._zTime<0!=t<0&&(this._initted||!_);if(this!==Sr&&v>g&&t>=0&&(v=g),v!==this._tTime||n||y){if(m!==this._time&&_&&(v+=this._time-m,t+=this._time-m),i=v,u=this._start,l=!(h=this._ts),y&&(_||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,o=_+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,n);if(i=As(v%o),v===g?(a=this._repeat,i=_):((a=~~(v/o))&&a===v/o&&(i=_,a--),i>_&&(i=_)),d=js(this._tTime,o),!m&&this._tTime&&d!==a&&this._tTime-d*o-this._dur<=0&&(d=a),p&&1&a&&(i=_-i,f=1),a!==d&&!this._lock){var x=p&&1&d,b=x===(p&&1&a);if(a<d&&(x=!x),m=x?0:v%_?_:v,this._lock=1,this.render(m||(f?0:As(a*o)),e,!_)._lock=0,this._tTime=v,!e&&this.parent&&Ma(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,g=this._tDur,b&&(this._lock=2,m=x?_:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Va(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,As(m),As(i)),c&&(v-=i-(i=c._start))),this._tTime=v,this._time=i,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&i&&!e&&!a&&(Ma(this,"onStart"),this._tTime!==v))return this;if(i>=m&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,s&&(v+=this._zTime=-Nr);break}}r=s}else{r=this._last;for(var M=t<0?t:i;r;){if(s=r._prev,(r._act||M<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(M-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(M-r._start)*r._ts,e,n||br&&(r._initted||r._startAt)),i!==this._time||!this._ts&&!l){c=0,s&&(v+=this._zTime=M?-Nr:Nr);break}}r=s}}if(c&&!e&&(this.pause(),c.render(i>=m?0:-Nr)._zTime=i>=m?1:-1,this._ts))return this._start=u,qs(this),this.render(t,e,n);this._onUpdate&&!e&&Ma(this,"onUpdate",!0),(v===g&&this._tTime>=this.totalDuration()||!v&&m)&&(u!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!_)&&(v===g&&this._ts>0||!v&&this._ts<0)&&zs(this,1),e||t<0&&!m||!v&&!m&&g||(Ma(this,v===g&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(Gr(e)||(e=ra(this,e,t)),!(t instanceof $a)){if(Zr(t))return t.forEach((function(t){return n.add(t,e)})),this;if(Hr(t))return this.addLabel(t,e);if(!Vr(t))return this;t=oo.delayedCall(0,t)}return this!==t?Zs(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-Dr);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof oo?e&&r.push(s):(n&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,n)))),s=s._next;return r},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return Hr(t)?this.removeLabel(t):Vr(t)?this.killTweensOf(t):(Bs(this,t),t===this._recent&&(this._recent=this._last),Hs(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=As(Oa.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=ra(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=oo.delayedCall(0,e||cs,n);return i.data="isPause",this._hasPause=1,Zs(this,i,ra(this,t))},n.removePause=function(t){var e=this._first;for(t=ra(this,t);e;)e._start===t&&"isPause"===e.data&&zs(e),e=e._next},n.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)Ka!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,i=[],r=ua(t),s=this._first,a=Gr(e);s;)s instanceof oo?Cs(s._targets,r)&&(a?(!Ka||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(n=s.getTweensOf(r,e)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(t,e){e=e||{};var n,i=this,r=ra(i,t),s=e,a=s.startAt,o=s.onStart,l=s.onStartParams,c=s.immediateRender,h=oo.to(i,Ds({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale())||Nr,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale());h._dur!==t&&ea(h,t,0,1).render(h._time,!0,!0),n=1}o&&o.apply(h,l||[])}},e));return c?h.render(0):h},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Ds({startAt:{time:ra(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),ba(this,ra(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),ba(this,ra(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Nr)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return Hs(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Hs(this)},n.totalDuration=function(t){var e,n,i,r=0,s=this,a=s._last,o=Dr;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Zs(s,a,n-a._delay,1)._lock=0):o=n,n<0&&a._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-1/0),o=0),a._end>r&&a._ts&&(r=a._end),a=e;ea(s,s===Sr&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(Sr._ts&&(Ps(Sr,Xs(t,Sr)),Cr=Oa.frame),Oa.frame>=vs){vs+=Ir.autoSleep||120;var e=Sr._first;if((!e||!e._ts)&&Ir.autoSleep&&Oa._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Oa.sleep()}}},e}($a);Ds(Za.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ka,Ja,Qa=function(t,e,n,i,r,s,a){var o,l,c,h,u,d,p,f,m=new Mo(this._pt,t,e,0,1,go,null,r),g=0,_=0;for(m.b=n,m.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=ya(i)),s&&(s(f=[n,i],t,e),n=f[0],i=f[1]),l=n.match(ts)||[];o=ts.exec(i);)h=o[0],u=i.substring(g,o.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),h!==l[_++]&&(d=parseFloat(l[_-1])||0,m._pt={_next:m._pt,p:u||1===_?u:",",s:d,c:"="===h.charAt(1)?Es(d,h)-d:parseFloat(h)-d,m:c&&c<4?Math.round:0},g=ts.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=a,(es.test(i)||p)&&(m.e=0),this._pt=m,m},to=function(t,e,n,i,r,s,a,o,l,c){Vr(i)&&(i=i(r||0,t,s));var h,u=t[e],d="get"!==n?n:Vr(u)?l?t[e.indexOf("set")||!Vr(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():u,p=Vr(u)?l?ho:co:lo;if(Hr(i)&&(~i.indexOf("random(")&&(i=ya(i)),"="===i.charAt(1)&&((h=Es(d,i)+(la(d)||0))||0===h)&&(i=h)),!c||d!==i||Ja)return isNaN(d*i)||""===i?Qa.call(this,t,e,d,i,p,o||Ir.stringFilter,l):(h=new Mo(this._pt,t,e,+d||0,i-(d||0),"boolean"==typeof u?mo:fo,0,p),l&&(h.fp=l),a&&h.modifier(a,this,t),this._pt=h)},eo=function(t,e,n,i,r,s){var a,o,l,c;if(gs[t]&&!1!==(a=new gs[t]).init(r,a.rawVars?e[t]:function(t,e,n,i,r){if(Vr(t)&&(t=ro(t,r,e,n,i)),!jr(t)||t.style&&t.nodeType||Zr(t)||$r(t))return Hr(t)?ro(t,r,e,n,i):t;var s,a={};for(s in t)a[s]=ro(t[s],r,e,n,i);return a}(e[t],i,r,s,n),n,i,s)&&(n._pt=o=new Mo(n._pt,r,t,0,1,a.render,a,0,a.priority),n!==Rr))for(l=n._ptLookup[n._targets.indexOf(r)],c=a._props.length;c--;)l[a._props[c]]=o;return a},no=function t(e,n,i){var r,s,a,o,l,c,h,u,d,p,f,m,g,_=e.vars,v=_.ease,y=_.startAt,x=_.immediateRender,b=_.lazy,M=_.onUpdate,S=_.runBackwards,w=_.yoyoEase,T=_.keyframes,A=_.autoRevert,E=e._dur,C=e._startAt,R=e._targets,P=e.parent,I=P&&"nested"===P.data?P.vars.targets:R,L="auto"===e._overwrite&&!xr,D=e.timeline;if(D&&(!T||!v)&&(v="none"),e._ease=Ga(v,Lr.ease),e._yEase=w?Ha(Ga(!0===w?v:w,Lr.ease)):0,w&&e._yoyo&&!e._repeat&&(w=e._yEase,e._yEase=e._ease,e._ease=w),e._from=!D&&!!_.runBackwards,!D||T&&!_.stagger){if(m=(u=R[0]?Ms(R[0]).harness:0)&&_[u.prop],r=Us(_,ps),C&&(C._zTime<0&&C.progress(1),n<0&&S&&x&&!A?C.render(-1,!0):C.revert(S&&E?us:hs),C._lazy=0),y){if(zs(e._startAt=oo.set(R,Ds({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:!C&&Xr(b),startAt:null,delay:0,onUpdate:M&&function(){return Ma(e,"onUpdate")},stagger:0},y))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(br||!x&&!A)&&e._startAt.revert(us),x&&E&&n<=0&&i<=0)return void(n&&(e._zTime=n))}else if(S&&E&&!C)if(n&&(x=!1),a=Ds({overwrite:!1,data:"isFromStart",lazy:x&&!C&&Xr(b),immediateRender:x,stagger:0,parent:P},r),m&&(a[u.prop]=m),zs(e._startAt=oo.set(R,a)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(br?e._startAt.revert(us):e._startAt.render(-1,!0)),e._zTime=n,x){if(!n)return}else t(e._startAt,Nr,Nr);for(e._pt=e._ptCache=0,b=E&&Xr(b)||b&&!E,s=0;s<R.length;s++){if(h=(l=R[s])._gsap||bs(R)[s]._gsap,e._ptLookup[s]=p={},ms[h.id]&&fs.length&&Rs(),f=I===R?s:I.indexOf(l),u&&!1!==(d=new u).init(l,m||r,e,f,I)&&(e._pt=o=new Mo(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){p[t]=o})),d.priority&&(c=1)),!u||m)for(a in r)gs[a]&&(d=eo(a,r,e,f,l,I))?d.priority&&(c=1):p[a]=o=to.call(e,l,a,"get",r[a],f,I,0,_.stringFilter);e._op&&e._op[s]&&e.kill(l,e._op[s]),L&&e._pt&&(Ka=e,Sr.killTweensOf(l,p,e.globalTime(n)),g=!e.parent,Ka=0),e._pt&&b&&(ms[h.id]=1)}c&&bo(e),e._onInit&&e._onInit(e)}e._onUpdate=M,e._initted=(!e._op||e._pt)&&!g,T&&n<=0&&D.render(Dr,!0,!0)},io=function(t,e,n,i){var r,s,a=e.ease||i||"power1.inOut";if(Zr(e))s=n[t]||(n[t]=[]),e.forEach((function(t,n){return s.push({t:n/(e.length-1)*100,v:t,e:a})}));else for(r in e)s=n[r]||(n[r]=[]),"ease"===r||s.push({t:parseFloat(t),v:e[r],e:a})},ro=function(t,e,n,i,r){return Vr(t)?t.call(e,n,i,r):Hr(t)&&~t.indexOf("random(")?ya(t):t},so=xs+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ao={};ws(so+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return ao[t]=1}));var oo=function(t){function e(e,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var a,o,l,c,h,u,d,p,f=(s=t.call(this,r?n:Fs(n))||this).vars,m=f.duration,g=f.delay,_=f.immediateRender,v=f.stagger,y=f.overwrite,x=f.keyframes,b=f.defaults,M=f.scrollTrigger,S=f.yoyoEase,w=n.parent||Sr,T=(Zr(e)||$r(e)?Gr(e[0]):"length"in n)?[e]:ua(e);if(s._targets=T.length?bs(T):os(0,!Ir.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=y,x||v||Yr(m)||Yr(g)){if(n=s.vars,(a=s.timeline=new Za({data:"nested",defaults:b||{},targets:w&&"nested"===w.data?w.vars.targets:T})).kill(),a.parent=a._dp=vr(s),a._start=0,v||Yr(m)||Yr(g)){if(c=T.length,d=v&&fa(v),jr(v))for(h in v)~so.indexOf(h)&&(p||(p={}),p[h]=v[h]);for(o=0;o<c;o++)(l=Us(n,ao)).stagger=0,S&&(l.yoyoEase=S),p&&Ns(l,p),u=T[o],l.duration=+ro(m,vr(s),o,u,T),l.delay=(+ro(g,vr(s),o,u,T)||0)-s._delay,!v&&1===c&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),a.to(u,l,d?d(o,u,T):0),a._ease=Fa.none;a.duration()?m=g=0:s.timeline=0}else if(x){Fs(Ds(a.vars.defaults,{ease:"none"})),a._ease=Ga(x.ease||n.ease||"none");var A,E,C,R=0;if(Zr(x))x.forEach((function(t){return a.to(T,t,">")})),a.duration();else{for(h in l={},x)"ease"===h||"easeEach"===h||io(h,x[h],l,x.easeEach);for(h in l)for(A=l[h].sort((function(t,e){return t.t-e.t})),R=0,o=0;o<A.length;o++)(C={ease:(E=A[o]).e,duration:(E.t-(o?A[o-1].t:0))/100*m})[h]=E.v,a.to(T,C,R),R+=C.duration;a.duration()<m&&a.to({},{duration:m-a.duration()})}}m||s.duration(m=a.duration())}else s.timeline=0;return!0!==y||xr||(Ka=vr(s),Sr.killTweensOf(T),Ka=0),Zs(w,vr(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(_||!m&&!x&&s._start===As(w._time)&&Xr(_)&&Gs(vr(s))&&"nested"!==w.data)&&(s._tTime=-Nr,s.render(Math.max(0,-g)||0)),M&&Ks(vr(s),M),s}yr(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,s,a,o,l,c,h,u,d=this._time,p=this._tDur,f=this._dur,m=t<0,g=t>p-Nr&&!m?p:t<Nr?0:t;if(f){if(g!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m){if(i=g,h=this.timeline,this._repeat){if(a=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*a+t,e,n);if(i=As(g%a),g===p?(s=this._repeat,i=f):((s=~~(g/a))&&s===As(g/a)&&(i=f,s--),i>f&&(i=f)),(l=this._yoyo&&1&s)&&(u=this._yEase,i=f-i),o=js(this._tTime,a),i===d&&!n&&this._initted&&s===o)return this._tTime=g,this;s!==o&&(h&&this._yEase&&Va(h,l),this.vars.repeatRefresh&&!l&&!this._lock&&this._time!==a&&this._initted&&(this._lock=n=1,this.render(As(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(Js(this,m?t:i,n,e,g))return this._tTime=0,this;if(!(d===this._time||n&&this.vars.repeatRefresh&&s!==o))return this;if(f!==this._dur)return this.render(t,e,n)}if(this._tTime=g,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(i/f),this._from&&(this.ratio=c=1-c),i&&!d&&!e&&!s&&(Ma(this,"onStart"),this._tTime!==g))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;h&&h.render(t<0?t:h._dur*h._ease(i/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(m&&Vs(this,t,0,n),Ma(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!e&&this.parent&&Ma(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&Vs(this,t,0,!0),(t||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&zs(this,1),e||m&&!d||!(g||d||l)||(Ma(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,i){var r,s,a,o=t.ratio,l=e<0||!e&&(!t._start&&Qs(t)&&(t._initted||!ta(t))||(t._ts<0||t._dp._ts<0)&&!ta(t))?0:1,c=t._rDelay,h=0;if(c&&t._repeat&&(h=oa(0,t._tDur,e),s=js(h,c),t._yoyo&&1&s&&(l=1-l),s!==js(t._tTime,c)&&(o=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==o||br||i||t._zTime===Nr||!e&&t._zTime){if(!t._initted&&Js(t,e,i,n,h))return;for(a=t._zTime,t._zTime=e||(n?Nr:0),n||(n=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=h,r=t._pt;r;)r.r(l,r.d),r=r._next;e<0&&Vs(t,e,0,!0),t._onUpdate&&!n&&Ma(t,"onUpdate"),h&&t._repeat&&!n&&t.parent&&Ma(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&zs(t,1),n||br||(Ma(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,i,r){Pr||Oa.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||no(this,s),function(t,e,n,i,r,s,a,o){var l,c,h,u,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],h=t._ptLookup,u=t._targets.length;u--;){if((l=h[u][e])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return Ja=1,t.vars[e]="+=0",no(t,a),Ja=0,o?os():1;d.push(l)}for(u=d.length;u--;)(l=(c=d[u])._pt||c).s=!i&&0!==i||r?l.s+(i||0)+s*l.c:i,l.c=n-l.s,c.e&&(c.e=Ts(n)+la(c.e)),c.b&&(c.b=l.s+la(c.b))}(this,t,e,n,i,this._ease(s/this._dur),s,r)?this.resetTo(t,e,n,i,1):(Ys(this,0),this.parent||ks(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Sa(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ka&&!0!==Ka.vars.overwrite)._first||Sa(this),this.parent&&n!==this.timeline.totalDuration()&&ea(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,a,o,l,c,h=this._targets,u=t?ua(t):h,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(h,u))return"all"===e&&(this._pt=0),Sa(this);for(i=this._op=this._op||[],"all"!==e&&(Hr(e)&&(o={},ws(e,(function(t){return o[t]=1})),e=o),e=function(t,e){var n,i,r,s,a=t[0]?Ms(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(i in n=Ns({},e),o)if(i in n)for(r=(s=o[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(h,e)),c=h.length;c--;)if(~u.indexOf(h[c]))for(o in r=d[c],"all"===e?(i[c]=e,a=r,s={}):(s=i[c]=i[c]||{},a=e),a)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||Bs(this,l,"_pt"),delete r[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&p&&Sa(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return sa(1,arguments)},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,e,n){return sa(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return Sr.killTweensOf(t,e,n)},e}($a);Ds(oo.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ws("staggerTo,staggerFrom,staggerFromTo",(function(t){oo[t]=function(){var e=new Za,n=ca.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var lo=function(t,e,n){return t[e]=n},co=function(t,e,n){return t[e](n)},ho=function(t,e,n,i){return t[e](i.fp,n)},uo=function(t,e,n){return t.setAttribute(e,n)},po=function(t,e){return Vr(t[e])?co:Wr(t[e])&&t.setAttribute?uo:lo},fo=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},mo=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},go=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},_o=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},vo=function(t,e,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(t,e,n),s=r},yo=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?Bs(this,i,"_pt"):i.dep||(e=1),i=n;return!e},xo=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},bo=function(t){for(var e,n,i,r,s=t._pt;s;){for(e=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=e}t._pt=i},Mo=function(){function t(t,e,n,i,r,s,a,o,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=s||fo,this.d=a||this,this.set=o||lo,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=xo,this.m=t,this.mt=n,this.tween=e},t}();ws(xs+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return ps[t]=1})),rs.TweenMax=rs.TweenLite=oo,rs.TimelineLite=rs.TimelineMax=Za,Sr=new Za({sortChildren:!1,defaults:Lr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ir.stringFilter=Na;var So=[],wo={},To=[],Ao=0,Eo=0,Co=function(t){return(wo[t]||To).map((function(t){return t()}))},Ro=function(){var t=Date.now(),e=[];t-Ao>2&&(Co("matchMediaInit"),So.forEach((function(t){var n,i,r,s,a=t.queries,o=t.conditions;for(i in a)(n=wr.matchMedia(a[i]).matches)&&(r=1),n!==o[i]&&(o[i]=n,s=1);s&&(t.revert(),r&&e.push(t))})),Co("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),Ao=t,Co("matchMedia"))},Po=function(){function t(t,e){this.selector=e&&da(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Eo++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){Vr(t)&&(n=e,e=t,t=Vr);var i=this,r=function(){var t,r=Mr,s=i.selector;return r&&r!==i&&r.data.push(i),n&&(i.selector=da(n)),Mr=i,t=e.apply(i,arguments),Vr(t)&&i._r.push(t),Mr=r,i.selector=s,i.isReverted=!1,t};return i.last=r,t===Vr?r(i,(function(t){return i.add(null,t)})):t?i[t]=r:r},e.ignore=function(t){var e=Mr;Mr=null,t(this),Mr=e},e.getTweens=function(){var e=[];return this.data.forEach((function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof oo&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,i=n.getTweens(),r=n.data.length;r--;)"isFlip"===(e=n.data[r]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return i.splice(i.indexOf(t),1)})));for(i.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t:t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),r=n.data.length;r--;)(e=n.data[r])instanceof Za?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof oo)&&e.revert&&e.revert(t);n._r.forEach((function(e){return e(t,n)})),n.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var i=So.length;i--;)So[i].id===this.id&&So.splice(i,1)},e.revert=function(t){this.kill(t||{})},t}(),Io=function(){function t(t){this.contexts=[],this.scope=t,Mr&&Mr.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){jr(t)||(t={matches:t});var i,r,s,a=new Po(0,n||this.scope),o=a.conditions={};for(r in Mr&&!a.selector&&(a.selector=Mr.selector),this.contexts.push(a),e=a.add("onMatch",e),a.queries=t,t)"all"===r?s=1:(i=wr.matchMedia(t[r]))&&(So.indexOf(a)<0&&So.push(a),(o[r]=i.matches)&&(s=1),i.addListener?i.addListener(Ro):i.addEventListener("change",Ro));return s&&e(a,(function(t){return a.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),Lo={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return Ta(t)}))},timeline:function(t){return new Za(t)},getTweensOf:function(t,e){return Sr.getTweensOf(t,e)},getProperty:function(t,e,n,i){Hr(t)&&(t=ua(t)[0]);var r=Ms(t||{}).get,s=n?Ls:Is;return"native"===n&&(n=""),t?e?s((gs[e]&&gs[e].get||r)(t,e,n,i)):function(e,n,i){return s((gs[e]&&gs[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if((t=ua(t)).length>1){var i=t.map((function(t){return Oo.quickSetter(t,e,n)})),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var s=gs[e],a=Ms(t),o=a.harness&&(a.harness.aliases||{})[e]||e,l=s?function(e){var i=new s;Rr._pt=0,i.init(t,n?e+n:e,Rr,0,[t]),i.render(1,i),Rr._pt&&_o(1,Rr)}:a.set(t,o);return s?l:function(e){return l(t,o,n?e+n:e,a,1)}},quickTo:function(t,e,n){var i,r=Oo.to(t,Ns(((i={})[e]="+=0.1",i.paused=!0,i),n||{})),s=function(t,n,i){return r.resetTo(e,t,n,i)};return s.tween=r,s},isTweening:function(t){return Sr.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ga(t.ease,Lr.ease)),Os(Lr,t||{})},config:function(t){return Os(Ir,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!gs[t]&&!rs[t]&&os()})),_s[e]=function(t,e,i){return n(ua(t),Ds(e||{},r),i)},s&&(Za.prototype[e]=function(t,n,i){return this.add(_s[e](t,jr(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){Fa[t]=Ga(e)},parseEase:function(t,e){return arguments.length?Ga(t,e):Fa},getById:function(t){return Sr.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new Za(t);for(r.smoothChildTiming=Xr(t.smoothChildTiming),Sr.remove(r),r._dp=0,r._time=r._tTime=Sr._time,n=Sr._first;n;)i=n._next,!e&&!n._dur&&n instanceof oo&&n.vars.onComplete===n._targets[0]||Zs(r,n,n._start-n._delay),n=i;return Zs(Sr,r,0),r},context:function(t,e){return t?new Po(t,e):Mr},matchMedia:function(t){return new Io(t)},matchMediaRefresh:function(){return So.forEach((function(t){var e,n,i=t.conditions;for(n in i)i[n]&&(i[n]=!1,e=1);e&&t.revert()}))||Ro()},addEventListener:function(t,e){var n=wo[t]||(wo[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=wo[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:function t(e,n,i){var r=n-e;return Zr(e)?va(e,t(0,e.length),n):aa(i,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,n,i){var r=n-e,s=2*r;return Zr(e)?va(e,t(0,e.length-1),n):aa(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)}))},distribute:fa,random:_a,snap:ga,normalize:function(t,e,n){return xa(t,e,0,1,n)},getUnit:la,clamp:function(t,e,n){return aa(n,(function(n){return oa(t,e,n)}))},splitColor:Ra,toArray:ua,selector:da,mapRange:xa,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||la(n))}},interpolate:function t(e,n,i,r){var s=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!s){var a,o,l,c,h,u=Hr(e),d={};if(!0===i&&(r=1)&&(i=null),u)e={p:e},n={p:n};else if(Zr(e)&&!Zr(n)){for(l=[],c=e.length,h=c-2,o=1;o<c;o++)l.push(t(e[o-1],e[o]));c--,s=function(t){t*=c;var e=Math.min(h,~~t);return l[e](t-e)},i=n}else r||(e=Ns(Zr(e)?[]:{},e));if(!l){for(a in n)to.call(d,e,a,"get",n[a]);s=function(t){return _o(t,d)||(u?e.p:e)}}}return aa(i,s)},shuffle:pa},install:as,effects:_s,ticker:Oa,updateRoot:Za.updateRoot,plugins:gs,globalTimeline:Sr,core:{PropTween:Mo,globals:ls,Tween:oo,Timeline:Za,Animation:$a,getCache:Ms,_removeLinkedListItem:Bs,reverting:function(){return br},context:function(t){return t&&Mr&&(Mr.data.push(t),t._ctx=Mr),Mr},suppressOverwrites:function(t){return xr=t}}};ws("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Lo[t]=oo[t]})),Oa.add(Za.updateRoot),Rr=Lo.to({},{duration:0});var Do=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},No=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(Hr(n)&&(i={},ws(n,(function(t){return i[t]=1})),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}!function(t,e){var n,i,r,s=t._targets;for(n in e)for(i=s.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=Do(r,n)),r&&r.modifier&&r.modifier(e[n],t,s[i],n))}(t,n)}}}},Oo=Lo.registerPlugin({name:"attr",init:function(t,e,n,i,r){var s,a,o;for(s in this.tween=n,e)o=t.getAttribute(s)||"",(a=this.add(t,"setAttribute",(o||0)+"",e[s],i,r,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(t,e){for(var n=e._pt;n;)br?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},No("roundProps",ma),No("modifiers"),No("snap",ga))||Lo;oo.version=Za.version=Oo.version="3.12.5",Er=1,qr()&&Ua(),Fa.Power0,Fa.Power1,Fa.Power2,Fa.Power3,Fa.Power4,Fa.Linear,Fa.Quad,Fa.Cubic,Fa.Quart,Fa.Quint,Fa.Strong,Fa.Elastic,Fa.Back,Fa.SteppedEase,Fa.Bounce,Fa.Sine,Fa.Expo,Fa.Circ;var Uo,Fo,ko,Bo,zo,Ho,Vo,Go,Wo={},jo=180/Math.PI,Xo=Math.PI/180,qo=Math.atan2,Yo=1e8,$o=/([A-Z])/g,Zo=/(left|right|width|margin|padding|x)/i,Ko=/[\s,\(]\S/,Jo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Qo=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},tl=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},el=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},nl=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},il=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},rl=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},sl=function(t,e,n){return t.style[e]=n},al=function(t,e,n){return t.style.setProperty(e,n)},ol=function(t,e,n){return t._gsap[e]=n},ll=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},cl=function(t,e,n,i,r){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},hl=function(t,e,n,i,r){var s=t._gsap;s[e]=n,s.renderTransform(r,s)},ul="transform",dl=ul+"Origin",pl=function t(e,n){var i=this,r=this.target,s=r.style,a=r._gsap;if(e in Wo&&s){if(this.tfm=this.tfm||{},"transform"===e)return Jo.transform.split(",").forEach((function(e){return t.call(i,e,n)}));if(~(e=Jo[e]||e).indexOf(",")?e.split(",").forEach((function(t){return i.tfm[t]=Il(r,t)})):this.tfm[e]=a.x?a[e]:Il(r,e),e===dl&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(ul)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(dl,n,"")),e=ul}(s||n)&&this.props.push(e,n,s[e])},fl=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},ml=function(){var t,e,n=this.props,i=this.target,r=i.style,s=i._gsap;for(t=0;t<n.length;t+=3)n[t+1]?i[n[t]]=n[t+2]:n[t+2]?r[n[t]]=n[t+2]:r.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace($o,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(t=Vo())&&t.isStart||r[ul]||(fl(r),s.zOrigin&&r[dl]&&(r[dl]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},gl=function(t,e){var n={target:t,props:[],revert:ml,save:pl};return t._gsap||Oo.core.getCache(t),e&&e.split(",").forEach((function(t){return n.save(t)})),n},_l=function(t,e){var n=Fo.createElementNS?Fo.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Fo.createElement(t);return n&&n.style?n:Fo.createElement(t)},vl=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace($o,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,xl(n)||n,1)||""},yl="O,Moz,ms,Ms,Webkit".split(","),xl=function(t,e,n){var i=(e||zo).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(yl[r]+t in i););return r<0?null:(3===r?"ms":r>=0?yl[r]:"")+t},bl=function(){"undefined"!=typeof window&&window.document&&(Uo=window,Fo=Uo.document,ko=Fo.documentElement,zo=_l("div")||{style:{}},_l("div"),ul=xl(ul),dl=ul+"Origin",zo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Go=!!xl("perspective"),Vo=Oo.core.reverting,Bo=1)},Ml=function t(e){var n,i=_l("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(ko.appendChild(i),i.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(o){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),ko.removeChild(i),this.style.cssText=a,n},Sl=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},wl=function(t){var e;try{e=t.getBBox()}catch(n){e=Ml.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Ml||(e=Ml.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Sl(t,["x","cx","x1"])||0,y:+Sl(t,["y","cy","y1"])||0,width:0,height:0}},Tl=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!wl(t))},Al=function(t,e){if(e){var n,i=t.style;e in Wo&&e!==dl&&(e=ul),i.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty("--"===n?e:e.replace($o,"-$1").toLowerCase())):i.removeAttribute(e)}},El=function(t,e,n,i,r,s){var a=new Mo(t._pt,e,n,0,1,s?rl:il);return t._pt=a,a.b=i,a.e=r,t._props.push(n),a},Cl={deg:1,rad:1,turn:1},Rl={grid:1,flex:1},Pl=function t(e,n,i,r){var s,a,o,l,c=parseFloat(i)||0,h=(i+"").trim().substr((c+"").length)||"px",u=zo.style,d=Zo.test(n),p="svg"===e.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===r,_="%"===r;if(r===h||!c||Cl[r]||Cl[h])return c;if("px"!==h&&!g&&(c=t(e,n,i,"px")),l=e.getCTM&&Tl(e),(_||"%"===h)&&(Wo[n]||~n.indexOf("adius")))return s=l?e.getBBox()[d?"width":"height"]:e[f],Ts(_?c/s*m:c/100*s);if(u[d?"width":"height"]=m+(g?h:r),a=~n.indexOf("adius")||"em"===r&&e.appendChild&&!p?e:e.parentNode,l&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Fo&&a.appendChild||(a=Fo.body),(o=a._gsap)&&_&&o.width&&d&&o.time===Oa.time&&!o.uncache)return Ts(c/o.width*m);if(!_||"height"!==n&&"width"!==n)(_||"%"===h)&&!Rl[vl(a,"display")]&&(u.position=vl(e,"position")),a===e&&(u.position="static"),a.appendChild(zo),s=zo[f],a.removeChild(zo),u.position="absolute";else{var v=e.style[n];e.style[n]=m+r,s=e[f],v?e.style[n]=v:Al(e,n)}return d&&_&&((o=Ms(a)).time=Oa.time,o.width=a[f]),Ts(g?s*c/m:s&&c?m/s*c:0)},Il=function(t,e,n,i){var r;return Bo||bl(),e in Jo&&"transform"!==e&&~(e=Jo[e]).indexOf(",")&&(e=e.split(",")[0]),Wo[e]&&"transform"!==e?(r=Gl(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:Wl(vl(t,dl))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=Ul[e]&&Ul[e](t,e,n)||vl(t,e)||Ss(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?Pl(t,e,r,n)+n:r},Ll=function(t,e,n,i){if(!n||"none"===n){var r=xl(e,t,1),s=r&&vl(t,r,1);s&&s!==n?(e=r,n=s):"borderColor"===e&&(n=vl(t,"borderTopColor"))}var a,o,l,c,h,u,d,p,f,m,g,_=new Mo(this._pt,t.style,e,0,1,go),v=0,y=0;if(_.b=n,_.e=i,n+="","auto"===(i+="")&&(u=t.style[e],t.style[e]=i,i=vl(t,e)||i,u?t.style[e]=u:Al(t,e)),Na(a=[n,i]),i=a[1],l=(n=a[0]).match(Qr)||[],(i.match(Qr)||[]).length){for(;o=Qr.exec(i);)d=o[0],f=i.substring(v,o.index),h?h=(h+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(h=1),d!==(u=l[y++]||"")&&(c=parseFloat(u)||0,g=u.substr((c+"").length),"="===d.charAt(1)&&(d=Es(c,d)+g),p=parseFloat(d),m=d.substr((p+"").length),v=Qr.lastIndex-m.length,m||(m=m||Ir.units[e]||g,v===i.length&&(i+=m,_.e+=m)),g!==m&&(c=Pl(t,e,u,m)||0),_._pt={_next:_._pt,p:f||1===y?f:",",s:c,c:p-c,m:h&&h<4||"zIndex"===e?Math.round:0});_.c=v<i.length?i.substring(v,i.length):""}else _.r="display"===e&&"none"===i?rl:il;return es.test(i)&&(_.e=0),this._pt=_,_},Dl={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Nl=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=Dl[n]||n,e[1]=Dl[i]||i,e.join(" ")},Ol=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,s=e.t,a=s.style,o=e.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",i=1;else for(r=(o=o.split(",")).length;--r>-1;)n=o[r],Wo[n]&&(i=1,n="transformOrigin"===n?dl:ul),Al(s,n);i&&(Al(s,ul),l&&(l.svg&&s.removeAttribute("transform"),Gl(s,1),l.uncache=1,fl(a)))}},Ul={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var s=t._pt=new Mo(t._pt,e,n,0,0,Ol);return s.u=i,s.pr=-10,s.tween=r,t._props.push(n),1}}},Fl=[1,0,0,1,0,0],kl={},Bl=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},zl=function(t){var e=vl(t,ul);return Bl(e)?Fl:e.substr(7).match(Jr).map(Ts)},Hl=function(t,e){var n,i,r,s,a=t._gsap||Ms(t),o=t.style,l=zl(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Fl:l:(l!==Fl||t.offsetParent||t===ko||a.svg||(r=o.display,o.display="block",(n=t.parentNode)&&t.offsetParent||(s=1,i=t.nextElementSibling,ko.appendChild(t)),l=zl(t),r?o.display=r:Al(t,"display"),s&&(i?n.insertBefore(t,i):n?n.appendChild(t):ko.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Vl=function(t,e,n,i,r,s){var a,o,l,c=t._gsap,h=r||Hl(t,!0),u=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=h[0],g=h[1],_=h[2],v=h[3],y=h[4],x=h[5],b=e.split(" "),M=parseFloat(b[0])||0,S=parseFloat(b[1])||0;n?h!==Fl&&(o=m*v-g*_)&&(l=M*(-g/o)+S*(m/o)-(m*x-g*y)/o,M=M*(v/o)+S*(-_/o)+(_*x-v*y)/o,S=l):(M=(a=wl(t)).x+(~b[0].indexOf("%")?M/100*a.width:M),S=a.y+(~(b[1]||b[0]).indexOf("%")?S/100*a.height:S)),i||!1!==i&&c.smooth?(y=M-u,x=S-d,c.xOffset=p+(y*m+x*_)-y,c.yOffset=f+(y*g+x*v)-x):c.xOffset=c.yOffset=0,c.xOrigin=M,c.yOrigin=S,c.smooth=!!i,c.origin=e,c.originIsAbsolute=!!n,t.style[dl]="0px 0px",s&&(El(s,c,"xOrigin",u,M),El(s,c,"yOrigin",d,S),El(s,c,"xOffset",p,c.xOffset),El(s,c,"yOffset",f,c.yOffset)),t.setAttribute("data-svg-origin",M+" "+S)},Gl=function(t,e){var n=t._gsap||new Ya(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,s,a,o,l,c,h,u,d,p,f,m,g,_,v,y,x,b,M,S,w,T,A,E,C,R,P,I,L,D,N,O=t.style,U=n.scaleX<0,F="px",k="deg",B=getComputedStyle(t),z=vl(t,dl)||"0";return i=r=s=l=c=h=u=d=p=0,a=o=1,n.svg=!(!t.getCTM||!Tl(t)),B.translate&&("none"===B.translate&&"none"===B.scale&&"none"===B.rotate||(O[ul]=("none"!==B.translate?"translate3d("+(B.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==B.rotate?"rotate("+B.rotate+") ":"")+("none"!==B.scale?"scale("+B.scale.split(" ").join(",")+") ":"")+("none"!==B[ul]?B[ul]:"")),O.scale=O.rotate=O.translate="none"),g=Hl(t,n.svg),n.svg&&(n.uncache?(E=t.getBBox(),z=n.xOrigin-E.x+"px "+(n.yOrigin-E.y)+"px",A=""):A=!e&&t.getAttribute("data-svg-origin"),Vl(t,A||z,!!A||n.originIsAbsolute,!1!==n.smooth,g)),f=n.xOrigin||0,m=n.yOrigin||0,g!==Fl&&(x=g[0],b=g[1],M=g[2],S=g[3],i=w=g[4],r=T=g[5],6===g.length?(a=Math.sqrt(x*x+b*b),o=Math.sqrt(S*S+M*M),l=x||b?qo(b,x)*jo:0,(u=M||S?qo(M,S)*jo+l:0)&&(o*=Math.abs(Math.cos(u*Xo))),n.svg&&(i-=f-(f*x+m*M),r-=m-(f*b+m*S))):(N=g[6],L=g[7],R=g[8],P=g[9],I=g[10],D=g[11],i=g[12],r=g[13],s=g[14],c=(_=qo(N,I))*jo,_&&(A=w*(v=Math.cos(-_))+R*(y=Math.sin(-_)),E=T*v+P*y,C=N*v+I*y,R=w*-y+R*v,P=T*-y+P*v,I=N*-y+I*v,D=L*-y+D*v,w=A,T=E,N=C),h=(_=qo(-M,I))*jo,_&&(v=Math.cos(-_),D=S*(y=Math.sin(-_))+D*v,x=A=x*v-R*y,b=E=b*v-P*y,M=C=M*v-I*y),l=(_=qo(b,x))*jo,_&&(A=x*(v=Math.cos(_))+b*(y=Math.sin(_)),E=w*v+T*y,b=b*v-x*y,T=T*v-w*y,x=A,w=E),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,h=180-h),a=Ts(Math.sqrt(x*x+b*b+M*M)),o=Ts(Math.sqrt(T*T+N*N)),_=qo(w,T),u=Math.abs(_)>2e-4?_*jo:0,p=D?1/(D<0?-D:D):0),n.svg&&(A=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Bl(vl(t,ul)),A&&t.setAttribute("transform",A))),Math.abs(u)>90&&Math.abs(u)<270&&(U?(a*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,u+=u<=0?180:-180)),e=e||n.uncache,n.x=i-((n.xPercent=i&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+F,n.y=r-((n.yPercent=r&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+F,n.z=s+F,n.scaleX=Ts(a),n.scaleY=Ts(o),n.rotation=Ts(l)+k,n.rotationX=Ts(c)+k,n.rotationY=Ts(h)+k,n.skewX=u+k,n.skewY=d+k,n.transformPerspective=p+F,(n.zOrigin=parseFloat(z.split(" ")[2])||!e&&n.zOrigin||0)&&(O[dl]=Wl(z)),n.xOffset=n.yOffset=0,n.force3D=Ir.force3D,n.renderTransform=n.svg?Kl:Go?Zl:Xl,n.uncache=0,n},Wl=function(t){return(t=t.split(" "))[0]+" "+t[1]},jl=function(t,e,n){var i=la(e);return Ts(parseFloat(e)+parseFloat(Pl(t,"x",n+"px",i)))+i},Xl=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Zl(t,e)},ql="0deg",Yl="0px",$l=") ",Zl=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,s=n.x,a=n.y,o=n.z,l=n.rotation,c=n.rotationY,h=n.rotationX,u=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,_=n.target,v=n.zOrigin,y="",x="auto"===g&&t&&1!==t||!0===g;if(v&&(h!==ql||c!==ql)){var b,M=parseFloat(c)*Xo,S=Math.sin(M),w=Math.cos(M);M=parseFloat(h)*Xo,b=Math.cos(M),s=jl(_,s,S*b*-v),a=jl(_,a,-Math.sin(M)*-v),o=jl(_,o,w*b*-v+v)}m!==Yl&&(y+="perspective("+m+$l),(i||r)&&(y+="translate("+i+"%, "+r+"%) "),(x||s!==Yl||a!==Yl||o!==Yl)&&(y+=o!==Yl||x?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+$l),l!==ql&&(y+="rotate("+l+$l),c!==ql&&(y+="rotateY("+c+$l),h!==ql&&(y+="rotateX("+h+$l),u===ql&&d===ql||(y+="skew("+u+", "+d+$l),1===p&&1===f||(y+="scale("+p+", "+f+$l),_.style[ul]=y||"translate(0, 0)"},Kl=function(t,e){var n,i,r,s,a,o=e||this,l=o.xPercent,c=o.yPercent,h=o.x,u=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,_=o.target,v=o.xOrigin,y=o.yOrigin,x=o.xOffset,b=o.yOffset,M=o.forceCSS,S=parseFloat(h),w=parseFloat(u);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Xo,p*=Xo,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=Xo,a=Math.tan(p-f),r*=a=Math.sqrt(1+a*a),s*=a,f&&(a=Math.tan(f),n*=a=Math.sqrt(1+a*a),i*=a)),n=Ts(n),i=Ts(i),r=Ts(r),s=Ts(s)):(n=m,s=g,i=r=0),(S&&!~(h+"").indexOf("px")||w&&!~(u+"").indexOf("px"))&&(S=Pl(_,"x",h,"px"),w=Pl(_,"y",u,"px")),(v||y||x||b)&&(S=Ts(S+v-(v*n+y*r)+x),w=Ts(w+y-(v*i+y*s)+b)),(l||c)&&(a=_.getBBox(),S=Ts(S+l/100*a.width),w=Ts(w+c/100*a.height)),a="matrix("+n+","+i+","+r+","+s+","+S+","+w+")",_.setAttribute("transform",a),M&&(_.style[ul]=a)},Jl=function(t,e,n,i,r){var s,a,o=360,l=Hr(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?jo:1)-i,h=i+c+"deg";return l&&("short"===(s=r.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-o),"cw"===s&&c<0?c=(c+o*Yo)%o-~~(c/o)*o:"ccw"===s&&c>0&&(c=(c-o*Yo)%o-~~(c/o)*o)),t._pt=a=new Mo(t._pt,e,n,i,c,tl),a.e=h,a.u="deg",t._props.push(n),a},Ql=function(t,e){for(var n in e)t[n]=e[n];return t},tc=function(t,e,n){var i,r,s,a,o,l,c,h=Ql({},n._gsap),u=n.style;for(r in h.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),u[ul]=e,i=Gl(n,1),Al(n,ul),n.setAttribute("transform",s)):(s=getComputedStyle(n)[ul],u[ul]=e,i=Gl(n,1),u[ul]=s),Wo)(s=h[r])!==(a=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(o=la(s)!==(c=la(a))?Pl(n,r,s,c):parseFloat(s),l=parseFloat(a),t._pt=new Mo(t._pt,i,r,o,l-o,Qo),t._pt.u=c||0,t._props.push(r));Ql(i,h)};ws("padding,margin,Width,Radius",(function(t,e){var n="Top",i="Right",r="Bottom",s="Left",a=(e<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map((function(n){return e<2?t+n:"border"+n+t}));Ul[e>1?"border"+t:t]=function(t,e,n,i,r){var s,o;if(arguments.length<4)return s=a.map((function(e){return Il(t,e,n)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach((function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,o,r)}}));var ec={name:"css",register:bl,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var s,a,o,l,c,h,u,d,p,f,m,g,_,v,y,x,b=this._props,M=t.style,S=n.vars.startAt;for(u in Bo||bl(),this.styles=this.styles||gl(t),x=this.styles.props,this.tween=n,e)if("autoRound"!==u&&(a=e[u],!gs[u]||!eo(u,e,n,i,t,r)))if(c=typeof a,h=Ul[u],"function"===c&&(c=typeof(a=a.call(n,i,t,r))),"string"===c&&~a.indexOf("random(")&&(a=ya(a)),h)h(this,t,u,a,n)&&(y=1);else if("--"===u.substr(0,2))s=(getComputedStyle(t).getPropertyValue(u)+"").trim(),a+="",La.lastIndex=0,La.test(s)||(d=la(s),p=la(a)),p?d!==p&&(s=Pl(t,u,s,p)+p):d&&(a+=d),this.add(M,"setProperty",s,a,i,r,0,0,u),b.push(u),x.push(u,0,M[u]);else if("undefined"!==c){if(S&&u in S?(s="function"==typeof S[u]?S[u].call(n,i,t,r):S[u],Hr(s)&&~s.indexOf("random(")&&(s=ya(s)),la(s+"")||"auto"===s||(s+=Ir.units[u]||la(Il(t,u))||""),"="===(s+"").charAt(1)&&(s=Il(t,u))):s=Il(t,u),l=parseFloat(s),(f="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),u in Jo&&("autoAlpha"===u&&(1===l&&"hidden"===Il(t,"visibility")&&o&&(l=0),x.push("visibility",0,M.visibility),El(this,M,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==u&&"transform"!==u&&~(u=Jo[u]).indexOf(",")&&(u=u.split(",")[0])),m=u in Wo)if(this.styles.save(u),g||((_=t._gsap).renderTransform&&!e.parseTransform||Gl(t,e.parseTransform),v=!1!==e.smoothOrigin&&_.smooth,(g=this._pt=new Mo(this._pt,M,ul,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===u)this._pt=new Mo(this._pt,_,"scaleY",_.scaleY,(f?Es(_.scaleY,f+o):o)-_.scaleY||0,Qo),this._pt.u=0,b.push("scaleY",u),u+="X";else{if("transformOrigin"===u){x.push(dl,0,M[dl]),a=Nl(a),_.svg?Vl(t,a,0,v,0,this):((p=parseFloat(a.split(" ")[2])||0)!==_.zOrigin&&El(this,_,"zOrigin",_.zOrigin,p),El(this,M,u,Wl(s),Wl(a)));continue}if("svgOrigin"===u){Vl(t,a,1,v,0,this);continue}if(u in kl){Jl(this,_,u,l,f?Es(l,f+a):a);continue}if("smoothOrigin"===u){El(this,_,"smooth",_.smooth,a);continue}if("force3D"===u){_[u]=a;continue}if("transform"===u){tc(this,a,t);continue}}else u in M||(u=xl(u)||u);if(m||(o||0===o)&&(l||0===l)&&!Ko.test(a)&&u in M)o||(o=0),(d=(s+"").substr((l+"").length))!==(p=la(a)||(u in Ir.units?Ir.units[u]:d))&&(l=Pl(t,u,s,p)),this._pt=new Mo(this._pt,m?_:M,u,l,(f?Es(l,f+o):o)-l,m||"px"!==p&&"zIndex"!==u||!1===e.autoRound?Qo:nl),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=s,this._pt.r=el);else if(u in M)Ll.call(this,t,u,s,f?f+a:a);else if(u in t)this.add(t,u,s||t[u],f?f+a:a,i,r);else if("parseTransform"!==u)continue;m||(u in M?x.push(u,0,M[u]):x.push(u,1,s||t[u])),b.push(u)}y&&bo(this)},render:function(t,e){if(e.tween._time||!Vo())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Il,aliases:Jo,getSetter:function(t,e,n){var i=Jo[e];return i&&i.indexOf(",")<0&&(e=i),e in Wo&&e!==dl&&(t._gsap.x||Il(t,"x"))?n&&Ho===n?"scale"===e?ll:ol:(Ho=n||{})&&("scale"===e?cl:hl):t.style&&!Wr(t.style[e])?sl:~e.indexOf("-")?al:po(t,e)},core:{_removeProperty:Al,_getMatrix:Hl}};Oo.utils.checkPrefix=xl,Oo.core.getStyleSaver=gl,function(t,e,n,i){var r=ws(t+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Wo[t]=1}));ws(e,(function(t){Ir.units[t]="deg",kl[t]=1})),Jo[r[13]]=t+","+e,ws("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Jo[e[1]]=r[e[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),ws("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Ir.units[t]="px"})),Oo.registerPlugin(ec);var nc=Oo.registerPlugin(ec)||Oo;nc.core.Tween;const ic="174",rc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ac=1,oc=2,lc=3,cc=0,hc=1,uc=2,dc=100,pc=101,fc=102,mc=200,gc=201,_c=202,vc=203,yc=204,xc=205,bc=206,Mc=207,Sc=208,wc=209,Tc=210,Ac=211,Ec=212,Cc=213,Rc=214,Pc=0,Ic=1,Lc=2,Dc=3,Nc=4,Oc=5,Uc=6,Fc=7,kc=0,Bc=1,zc=2,Hc=0,Vc=1,Gc=2,Wc=3,jc=4,Xc=5,qc=6,Yc=7,$c="attached",Zc="detached",Kc=300,Jc=301,Qc=302,th=303,eh=304,nh=306,ih=1e3,rh=1001,sh=1002,ah=1003,oh=1004,lh=1005,ch=1006,hh=1007,uh=1008,dh=1009,ph=1010,fh=1011,mh=1012,gh=1013,_h=1014,vh=1015,yh=1016,xh=1017,bh=1018,Mh=1020,Sh=35902,wh=1021,Th=1022,Ah=1023,Eh=1024,Ch=1025,Rh=1026,Ph=1027,Ih=1028,Lh=1029,Dh=1030,Nh=1031,Oh=1033,Uh=33776,Fh=33777,kh=33778,Bh=33779,zh=35840,Hh=35841,Vh=35842,Gh=35843,Wh=36196,jh=37492,Xh=37496,qh=37808,Yh=37809,$h=37810,Zh=37811,Kh=37812,Jh=37813,Qh=37814,tu=37815,eu=37816,nu=37817,iu=37818,ru=37819,su=37820,au=37821,ou=36492,lu=36494,cu=36495,hu=36283,uu=36284,du=36285,pu=36286,fu=2300,mu=2301,gu=2302,_u=2400,vu=2401,yu=2402,xu=2500,bu=2501,Mu="",Su="srgb",wu="srgb-linear",Tu="linear",Au="srgb",Eu=7680,Cu=512,Ru=513,Pu=514,Iu=515,Lu=516,Du=517,Nu=518,Ou=519,Uu=35044,Fu="300 es",ku=2e3,Bu=2001;class zu{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return void 0!==n&&(void 0!==n[t]&&-1!==n[t].indexOf(e))}removeEventListener(t,e){const n=this._listeners;if(void 0===n)return;const i=n[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){const e=this._listeners;if(void 0===e)return;const n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,i=e.length;n<i;n++)e[n].call(this,t);t.target=null}}}const Hu=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Vu=1234567;const Gu=Math.PI/180,Wu=180/Math.PI;function ju(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Hu[255&t]+Hu[t>>8&255]+Hu[t>>16&255]+Hu[t>>24&255]+"-"+Hu[255&e]+Hu[e>>8&255]+"-"+Hu[e>>16&15|64]+Hu[e>>24&255]+"-"+Hu[63&n|128]+Hu[n>>8&255]+"-"+Hu[n>>16&255]+Hu[n>>24&255]+Hu[255&i]+Hu[i>>8&255]+Hu[i>>16&255]+Hu[i>>24&255]).toLowerCase()}function Xu(t,e,n){return Math.max(e,Math.min(n,t))}function qu(t,e){return(t%e+e)%e}function Yu(t,e,n){return(1-n)*t+n*e}function $u(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Zu(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const Ku={DEG2RAD:Gu,RAD2DEG:Wu,generateUUID:ju,clamp:Xu,euclideanModulo:qu,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Yu,damp:function(t,e,n,i){return Yu(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(qu(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Vu=t);let e=Vu+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*Gu},radToDeg:function(t){return t*Wu},isPowerOfTwo:function(t){return!(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+i)/2),h=a((e+i)/2),u=s((e-i)/2),d=a((e-i)/2),p=s((i-e)/2),f=a((i-e)/2);switch(r){case"XYX":t.set(o*h,l*u,l*d,o*c);break;case"YZY":t.set(l*d,o*h,l*u,o*c);break;case"ZXZ":t.set(l*u,l*d,o*h,o*c);break;case"XZX":t.set(o*h,l*f,l*p,o*c);break;case"YXY":t.set(l*p,o*h,l*f,o*c);break;case"ZYZ":t.set(l*f,l*p,o*h,o*c)}},normalize:Zu,denormalize:$u};class Ju{constructor(t=0,e=0){Ju.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Xu(this.x,t.x,e.x),this.y=Xu(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Xu(this.x,t,e),this.y=Xu(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Xu(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Xu(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qu{constructor(t,e,n,i,r,s,a,o,l){Qu.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,s,a,o,l)}set(t,e,n,i,r,s,a,o,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],_=i[1],v=i[4],y=i[7],x=i[2],b=i[5],M=i[8];return r[0]=s*f+a*_+o*x,r[3]=s*m+a*v+o*b,r[6]=s*g+a*y+o*M,r[1]=l*f+c*_+h*x,r[4]=l*m+c*v+h*b,r[7]=l*g+c*y+h*M,r[2]=u*f+d*_+p*x,r[5]=u*m+d*v+p*b,r[8]=u*g+d*y+p*M,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8];return e*s*c-e*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=c*s-a*l,u=a*o-c*r,d=l*r-s*o,p=e*h+n*u+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=h*f,t[1]=(i*l-c*n)*f,t[2]=(a*n-i*s)*f,t[3]=u*f,t[4]=(c*e-i*o)*f,t[5]=(i*r-a*e)*f,t[6]=d*f,t[7]=(n*o-l*e)*f,t[8]=(s*e-n*r)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+t,-i*l,i*o,-i*(-l*s+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(td.makeScale(t,e)),this}rotate(t){return this.premultiply(td.makeRotation(-t)),this}translate(t,e){return this.premultiply(td.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const td=new Qu;function ed(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const nd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function id(t,e){return new nd[t](e)}function rd(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function sd(){const t=rd("canvas");return t.style.display="block",t}const ad={};function od(t){t in ad||(ad[t]=!0)}const ld=(new Qu).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),cd=(new Qu).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);const hd=function(){const t={enabled:!0,workingColorSpace:wu,spaces:{},convert:function(t,e,n){return!1!==this.enabled&&e!==n&&e&&n?(this.spaces[e].transfer===Au&&(t.r=ud(t.r),t.g=ud(t.g),t.b=ud(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Au&&(t.r=dd(t.r),t.g=dd(t.g),t.b=dd(t.b)),t):t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===Mu?Tu:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[wu]:{primaries:e,whitePoint:i,transfer:Tu,toXYZ:ld,fromXYZ:cd,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Su},outputColorSpaceConfig:{drawingBufferColorSpace:Su}},[Su]:{primaries:e,whitePoint:i,transfer:Au,toXYZ:ld,fromXYZ:cd,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Su}}}),t}();function ud(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function dd(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let pd;class fd{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===pd&&(pd=rd("canvas")),pd.width=t.width,pd.height=t.height;const n=pd.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=pd}return e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=rd("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*ud(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ud(e[t]/255)):e[t]=ud(e[t]);return{data:e,width:t.width,height:t.height}}return t}}let md=0;class gd{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:md++}),this.uuid=ju(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(_d(i[e].image)):t.push(_d(i[e]))}else t=_d(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function _d(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?fd.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}let vd=0;class yd extends zu{constructor(t=yd.DEFAULT_IMAGE,e=yd.DEFAULT_MAPPING,n=rh,i=rh,r=ch,s=uh,a=Ah,o=dh,l=yd.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vd++}),this.uuid=ju(),this.name="",this.source=new gd(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Ju(0,0),this.repeat=new Ju(1,1),this.center=new Ju(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qu,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Kc)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ih:t.x=t.x-Math.floor(t.x);break;case rh:t.x=t.x<0?0:1;break;case sh:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ih:t.y=t.y-Math.floor(t.y);break;case rh:t.y=t.y<0?0:1;break;case sh:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}yd.DEFAULT_IMAGE=null,yd.DEFAULT_MAPPING=Kc,yd.DEFAULT_ANISOTROPY=1;class xd{constructor(t=0,e=0,n=0,i=1){xd.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,a=.1,o=t.elements,l=o[0],c=o[4],h=o[8],u=o[1],d=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-u)<s&&Math.abs(h-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+u)<a&&Math.abs(h+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(d+1)/2,_=(g+1)/2,v=(c+u)/4,y=(h+f)/4,x=(p+m)/4;return t>o&&t>_?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=v/n,r=y/n):o>_?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=v/i,r=x/i):_<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(_),n=y/r,i=x/r),this.set(n,i,r,e),this}let _=Math.sqrt((m-p)*(m-p)+(h-f)*(h-f)+(u-c)*(u-c));return Math.abs(_)<.001&&(_=1),this.x=(m-p)/_,this.y=(h-f)/_,this.z=(u-c)/_,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Xu(this.x,t.x,e.x),this.y=Xu(this.y,t.y,e.y),this.z=Xu(this.z,t.z,e.z),this.w=Xu(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Xu(this.x,t,e),this.y=Xu(this.y,t,e),this.z=Xu(this.z,t,e),this.w=Xu(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Xu(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bd extends zu{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new xd(0,0,t,e),this.scissorTest=!1,this.viewport=new xd(0,0,t,e);const i={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ch,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new yd(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const s=n.count;for(let a=0;a<s;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=t,this.textures[i].image.height=e,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const n=Object.assign({},t.textures[e].image);this.textures[e].source=new gd(n)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Md extends bd{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class Sd extends yd{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=ah,this.minFilter=ah,this.wrapR=rh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class wd extends yd{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=ah,this.minFilter=ah,this.wrapR=rh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Td{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3];const u=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(0===a)return t[e+0]=o,t[e+1]=l,t[e+2]=c,void(t[e+3]=h);if(1===a)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(h!==f||o!==u||l!==d||c!==p){let t=1-a;const e=o*u+l*d+c*p+h*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*t+u*r,l=l*t+d*r,c=c*t+p*r,h=h*t+f*r,t===1-a){const t=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=t,l*=t,c*=t,h*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],h=r[s],u=r[s+1],d=r[s+2],p=r[s+3];return t[e]=a*p+c*h+o*d-l*u,t[e+1]=o*p+c*u+l*h-a*d,t[e+2]=l*p+c*d+a*u-o*h,t[e+3]=c*p-a*h-o*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,i=t._y,r=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),h=a(r/2),u=o(n/2),d=o(i/2),p=o(r/2);switch(s){case"XYZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"YXZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"ZXY":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"ZYX":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"YZX":this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p;break;case"XZY":this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],a=e[5],o=e[9],l=e[2],c=e[6],h=e[10],u=n+a+h;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-o)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>a&&n>h){const t=2*Math.sqrt(1+n-a-h);this._w=(c-o)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(a>h){const t=2*Math.sqrt(1+a-n-h);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+h-n-a);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Xu(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,a=e._x,o=e._y,l=e._z,c=e._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),h=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=s*h+this._w*u,this._x=n*h+this._x*u,this._y=i*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(t),i*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ad{constructor(t=0,e=0,n=0){Ad.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Cd.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Cd.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,a=t.z,o=t.w,l=2*(s*i-a*n),c=2*(a*e-r*i),h=2*(r*n-s*e);return this.x=e+o*l+s*h-a*c,this.y=n+o*c+a*l-r*h,this.z=i+o*h+r*c-s*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Xu(this.x,t.x,e.x),this.y=Xu(this.y,t.y,e.y),this.z=Xu(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Xu(this.x,t,e),this.y=Xu(this.y,t,e),this.z=Xu(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Xu(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Ed.copy(this).projectOnVector(t),this.sub(Ed)}reflect(t){return this.sub(Ed.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Xu(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ed=new Ad,Cd=new Td;class Rd{constructor(t=new Ad(1/0,1/0,1/0),e=new Ad(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Id.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Id.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Id.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===e&&void 0!==i&&!0!==t.isInstancedMesh)for(let e=0,n=i.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,Id):Id.fromBufferAttribute(i,e),Id.applyMatrix4(t.matrixWorld),this.expandByPoint(Id);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Ld.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Ld.copy(n.boundingBox)),Ld.applyMatrix4(t.matrixWorld),this.union(Ld)}const i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Id),Id.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Bd),zd.subVectors(this.max,Bd),Dd.subVectors(t.a,Bd),Nd.subVectors(t.b,Bd),Od.subVectors(t.c,Bd),Ud.subVectors(Nd,Dd),Fd.subVectors(Od,Nd),kd.subVectors(Dd,Od);let e=[0,-Ud.z,Ud.y,0,-Fd.z,Fd.y,0,-kd.z,kd.y,Ud.z,0,-Ud.x,Fd.z,0,-Fd.x,kd.z,0,-kd.x,-Ud.y,Ud.x,0,-Fd.y,Fd.x,0,-kd.y,kd.x,0];return!!Gd(e,Dd,Nd,Od,zd)&&(e=[1,0,0,0,1,0,0,0,1],!!Gd(e,Dd,Nd,Od,zd)&&(Hd.crossVectors(Ud,Fd),e=[Hd.x,Hd.y,Hd.z],Gd(e,Dd,Nd,Od,zd)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Id).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Id).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Pd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Pd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Pd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Pd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Pd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Pd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Pd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Pd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Pd)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Pd=[new Ad,new Ad,new Ad,new Ad,new Ad,new Ad,new Ad,new Ad],Id=new Ad,Ld=new Rd,Dd=new Ad,Nd=new Ad,Od=new Ad,Ud=new Ad,Fd=new Ad,kd=new Ad,Bd=new Ad,zd=new Ad,Hd=new Ad,Vd=new Ad;function Gd(t,e,n,i,r){for(let s=0,a=t.length-3;s<=a;s+=3){Vd.fromArray(t,s);const a=r.x*Math.abs(Vd.x)+r.y*Math.abs(Vd.y)+r.z*Math.abs(Vd.z),o=e.dot(Vd),l=n.dot(Vd),c=i.dot(Vd);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const Wd=new Rd,jd=new Ad,Xd=new Ad;class qd{constructor(t=new Ad,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Wd.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;jd.subVectors(t,this.center);const e=jd.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(jd,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Xd.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(jd.copy(t.center).add(Xd)),this.expandByPoint(jd.copy(t.center).sub(Xd))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Yd=new Ad,$d=new Ad,Zd=new Ad,Kd=new Ad,Jd=new Ad,Qd=new Ad,tp=new Ad;class ep{constructor(t=new Ad,e=new Ad(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Yd)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Yd.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Yd.copy(this.origin).addScaledVector(this.direction,e),Yd.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){$d.copy(t).add(e).multiplyScalar(.5),Zd.copy(e).sub(t).normalize(),Kd.copy(this.origin).sub($d);const r=.5*t.distanceTo(e),s=-this.direction.dot(Zd),a=Kd.dot(this.direction),o=-Kd.dot(Zd),l=Kd.lengthSq(),c=Math.abs(1-s*s);let h,u,d,p;if(c>0)if(h=s*o-a,u=s*a-o,p=r*c,h>=0)if(u>=-p)if(u<=p){const t=1/c;h*=t,u*=t,d=h*(h+s*u+2*a)+u*(s*h+u+2*o)+l}else u=r,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u=-r,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u<=-p?(h=Math.max(0,-(-s*r+a)),u=h>0?-r:Math.min(Math.max(-r,-o),r),d=-h*h+u*(u+2*o)+l):u<=p?(h=0,u=Math.min(Math.max(-r,-o),r),d=u*(u+2*o)+l):(h=Math.max(0,-(s*r+a)),u=h>0?r:Math.min(Math.max(-r,-o),r),d=-h*h+u*(u+2*o)+l);else u=s>0?-r:r,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy($d).addScaledVector(Zd,u),d}intersectSphere(t,e){Yd.subVectors(t.center,this.origin);const n=Yd.dot(this.direction),i=Yd.dot(Yd)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),h>=0?(a=(t.min.z-u.z)*h,o=(t.max.z-u.z)*h):(a=(t.max.z-u.z)*h,o=(t.min.z-u.z)*h),n>o||a>i?null:((a>n||n!=n)&&(n=a),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,Yd)}intersectTriangle(t,e,n,i,r){Jd.subVectors(e,t),Qd.subVectors(n,t),tp.crossVectors(Jd,Qd);let s,a=this.direction.dot(tp);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}Kd.subVectors(this.origin,t);const o=s*this.direction.dot(Qd.crossVectors(Kd,Qd));if(o<0)return null;const l=s*this.direction.dot(Jd.cross(Kd));if(l<0)return null;if(o+l>a)return null;const c=-s*Kd.dot(tp);return c<0?null:this.at(c/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class np{constructor(t,e,n,i,r,s,a,o,l,c,h,u,d,p,f,m){np.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,s,a,o,l,c,h,u,d,p,f,m)}set(t,e,n,i,r,s,a,o,l,c,h,u,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new np).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/ip.setFromMatrixColumn(t,0).length(),r=1/ip.setFromMatrixColumn(t,1).length(),s=1/ip.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){const t=s*c,n=s*h,i=a*c,r=a*h;e[0]=o*c,e[4]=-o*h,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*o,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*o}else if("YXZ"===t.order){const t=o*c,n=o*h,i=l*c,r=l*h;e[0]=t+r*a,e[4]=i*a-n,e[8]=s*l,e[1]=s*h,e[5]=s*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*c,n=o*h,i=l*c,r=l*h;e[0]=t-r*a,e[4]=-s*h,e[8]=i+n*a,e[1]=n+i*a,e[5]=s*c,e[9]=r-t*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*c,n=s*h,i=a*c,r=a*h;e[0]=o*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=o*h,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,n=s*l,i=a*o,r=a*l;e[0]=o*c,e[4]=r-t*h,e[8]=i*h+n,e[1]=h,e[5]=s*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*h+i,e[10]=t-r*h}else if("XZY"===t.order){const t=s*o,n=s*l,i=a*o,r=a*l;e[0]=o*c,e[4]=-h,e[8]=l*c,e[1]=t*h+r,e[5]=s*c,e[9]=n*h-i,e[2]=i*h-n,e[6]=a*c,e[10]=r*h+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(sp,t,ap)}lookAt(t,e,n){const i=this.elements;return cp.subVectors(t,e),0===cp.lengthSq()&&(cp.z=1),cp.normalize(),op.crossVectors(n,cp),0===op.lengthSq()&&(1===Math.abs(n.z)?cp.x+=1e-4:cp.z+=1e-4,cp.normalize(),op.crossVectors(n,cp)),op.normalize(),lp.crossVectors(cp,op),i[0]=op.x,i[4]=lp.x,i[8]=cp.x,i[1]=op.y,i[5]=lp.y,i[9]=cp.y,i[2]=op.z,i[6]=lp.z,i[10]=cp.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],_=n[3],v=n[7],y=n[11],x=n[15],b=i[0],M=i[4],S=i[8],w=i[12],T=i[1],A=i[5],E=i[9],C=i[13],R=i[2],P=i[6],I=i[10],L=i[14],D=i[3],N=i[7],O=i[11],U=i[15];return r[0]=s*b+a*T+o*R+l*D,r[4]=s*M+a*A+o*P+l*N,r[8]=s*S+a*E+o*I+l*O,r[12]=s*w+a*C+o*L+l*U,r[1]=c*b+h*T+u*R+d*D,r[5]=c*M+h*A+u*P+d*N,r[9]=c*S+h*E+u*I+d*O,r[13]=c*w+h*C+u*L+d*U,r[2]=p*b+f*T+m*R+g*D,r[6]=p*M+f*A+m*P+g*N,r[10]=p*S+f*E+m*I+g*O,r[14]=p*w+f*C+m*L+g*U,r[3]=_*b+v*T+y*R+x*D,r[7]=_*M+v*A+y*P+x*N,r[11]=_*S+v*E+y*I+x*O,r[15]=_*w+v*C+y*L+x*U,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*o*h-i*l*h-r*a*u+n*l*u+i*a*d-n*o*d)+t[7]*(+e*o*d-e*l*u+r*s*u-i*s*d+i*l*c-r*o*c)+t[11]*(+e*l*h-e*a*d-r*s*h+n*s*d+r*a*c-n*l*c)+t[15]*(-i*a*c-e*o*h+e*a*u+i*s*h-n*s*u+n*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],u=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],_=h*m*l-f*u*l+f*o*d-a*m*d-h*o*g+a*u*g,v=p*u*l-c*m*l-p*o*d+s*m*d+c*o*g-s*u*g,y=c*f*l-p*h*l+p*a*d-s*f*d-c*a*g+s*h*g,x=p*h*o-c*f*o-p*a*u+s*f*u+c*a*m-s*h*m,b=e*_+n*v+i*y+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/b;return t[0]=_*M,t[1]=(f*u*r-h*m*r-f*i*d+n*m*d+h*i*g-n*u*g)*M,t[2]=(a*m*r-f*o*r+f*i*l-n*m*l-a*i*g+n*o*g)*M,t[3]=(h*o*r-a*u*r-h*i*l+n*u*l+a*i*d-n*o*d)*M,t[4]=v*M,t[5]=(c*m*r-p*u*r+p*i*d-e*m*d-c*i*g+e*u*g)*M,t[6]=(p*o*r-s*m*r-p*i*l+e*m*l+s*i*g-e*o*g)*M,t[7]=(s*u*r-c*o*r+c*i*l-e*u*l-s*i*d+e*o*d)*M,t[8]=y*M,t[9]=(p*h*r-c*f*r-p*n*d+e*f*d+c*n*g-e*h*g)*M,t[10]=(s*f*r-p*a*r+p*n*l-e*f*l-s*n*g+e*a*g)*M,t[11]=(c*a*r-s*h*r-c*n*l+e*h*l+s*n*d-e*a*d)*M,t[12]=x*M,t[13]=(c*f*i-p*h*i+p*n*u-e*f*u-c*n*m+e*h*m)*M,t[14]=(p*a*i-s*f*i-p*n*o+e*f*o+s*n*m-e*a*m)*M,t[15]=(s*h*i-c*a*i+c*n*o-e*h*o-s*n*u+e*a*u)*M,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,a=t.y,o=t.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,a=e._z,o=e._w,l=r+r,c=s+s,h=a+a,u=r*l,d=r*c,p=r*h,f=s*c,m=s*h,g=a*h,_=o*l,v=o*c,y=o*h,x=n.x,b=n.y,M=n.z;return i[0]=(1-(f+g))*x,i[1]=(d+y)*x,i[2]=(p-v)*x,i[3]=0,i[4]=(d-y)*b,i[5]=(1-(u+g))*b,i[6]=(m+_)*b,i[7]=0,i[8]=(p+v)*M,i[9]=(m-_)*M,i[10]=(1-(u+f))*M,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=ip.set(i[0],i[1],i[2]).length();const s=ip.set(i[4],i[5],i[6]).length(),a=ip.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],rp.copy(this);const o=1/r,l=1/s,c=1/a;return rp.elements[0]*=o,rp.elements[1]*=o,rp.elements[2]*=o,rp.elements[4]*=l,rp.elements[5]*=l,rp.elements[6]*=l,rp.elements[8]*=c,rp.elements[9]*=c,rp.elements[10]*=c,e.setFromRotationMatrix(rp),n.x=r,n.y=s,n.z=a,this}makePerspective(t,e,n,i,r,s,a=ku){const o=this.elements,l=2*r/(e-t),c=2*r/(n-i),h=(e+t)/(e-t),u=(n+i)/(n-i);let d,p;if(a===ku)d=-(s+r)/(s-r),p=-2*s*r/(s-r);else{if(a!==Bu)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-s/(s-r),p=-s*r/(s-r)}return o[0]=l,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s,a=ku){const o=this.elements,l=1/(e-t),c=1/(n-i),h=1/(s-r),u=(e+t)*l,d=(n+i)*c;let p,f;if(a===ku)p=(s+r)*h,f=-2*h;else{if(a!==Bu)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=r*h,f=-1*h}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=f,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const ip=new Ad,rp=new np,sp=new Ad(0,0,0),ap=new Ad(1,1,1),op=new Ad,lp=new Ad,cp=new Ad,hp=new np,up=new Td;class dp{constructor(t=0,e=0,n=0,i=dp.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],h=i[2],u=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(Xu(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Xu(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(Xu(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-Xu(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Xu(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Xu(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return hp.makeRotationFromQuaternion(t),this.setFromRotationMatrix(hp,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return up.setFromEuler(this),this.setFromQuaternion(up,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}dp.DEFAULT_ORDER="XYZ";class pp{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let fp=0;const mp=new Ad,gp=new Td,_p=new np,vp=new Ad,yp=new Ad,xp=new Ad,bp=new Td,Mp=new Ad(1,0,0),Sp=new Ad(0,1,0),wp=new Ad(0,0,1),Tp={type:"added"},Ap={type:"removed"},Ep={type:"childadded",child:null},Cp={type:"childremoved",child:null};class Rp extends zu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fp++}),this.uuid=ju(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rp.DEFAULT_UP.clone();const t=new Ad,e=new dp,n=new Td,i=new Ad(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new np},normalMatrix:{value:new Qu}}),this.matrix=new np,this.matrixWorld=new np,this.matrixAutoUpdate=Rp.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Rp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return gp.setFromAxisAngle(t,e),this.quaternion.multiply(gp),this}rotateOnWorldAxis(t,e){return gp.setFromAxisAngle(t,e),this.quaternion.premultiply(gp),this}rotateX(t){return this.rotateOnAxis(Mp,t)}rotateY(t){return this.rotateOnAxis(Sp,t)}rotateZ(t){return this.rotateOnAxis(wp,t)}translateOnAxis(t,e){return mp.copy(t).applyQuaternion(this.quaternion),this.position.add(mp.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Mp,t)}translateY(t){return this.translateOnAxis(Sp,t)}translateZ(t){return this.translateOnAxis(wp,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(_p.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?vp.copy(t):vp.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),yp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_p.lookAt(yp,vp,this.up):_p.lookAt(vp,yp,this.up),this.quaternion.setFromRotationMatrix(_p),i&&(_p.extractRotation(i.matrixWorld),gp.setFromRotationMatrix(_p),this.quaternion.premultiply(gp.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this||t&&t.isObject3D&&(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Tp),Ep.child=t,this.dispatchEvent(Ep),Ep.child=null),this}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Ap),Cp.child=t,this.dispatchEvent(Cp),Cp.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),_p.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),_p.multiply(t.parent.matrixWorld)),t.applyMatrix4(_p),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Tp),Ep.child=t,this.dispatchEvent(Ep),Ep.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yp,t,xp),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yp,bp,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++){e[n].updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){t[e].updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map((t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}))),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),a=s(t.images),o=s(t.shapes),l=s(t.skeletons),c=s(t.animations),h=s(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),h.length>0&&(n.nodes=h)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}Rp.DEFAULT_UP=new Ad(0,1,0),Rp.DEFAULT_MATRIX_AUTO_UPDATE=!0,Rp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Pp=new Ad,Ip=new Ad,Lp=new Ad,Dp=new Ad,Np=new Ad,Op=new Ad,Up=new Ad,Fp=new Ad,kp=new Ad,Bp=new Ad,zp=new xd,Hp=new xd,Vp=new xd;class Gp{constructor(t=new Ad,e=new Ad,n=new Ad){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Pp.subVectors(t,e),i.cross(Pp);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Pp.subVectors(i,e),Ip.subVectors(n,e),Lp.subVectors(t,e);const s=Pp.dot(Pp),a=Pp.dot(Ip),o=Pp.dot(Lp),l=Ip.dot(Ip),c=Ip.dot(Lp),h=s*l-a*a;if(0===h)return r.set(0,0,0),null;const u=1/h,d=(l*o-a*c)*u,p=(s*c-a*o)*u;return r.set(1-d-p,p,d)}static containsPoint(t,e,n,i){return null!==this.getBarycoord(t,e,n,i,Dp)&&(Dp.x>=0&&Dp.y>=0&&Dp.x+Dp.y<=1)}static getInterpolation(t,e,n,i,r,s,a,o){return null===this.getBarycoord(t,e,n,i,Dp)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,Dp.x),o.addScaledVector(s,Dp.y),o.addScaledVector(a,Dp.z),o)}static getInterpolatedAttribute(t,e,n,i,r,s){return zp.setScalar(0),Hp.setScalar(0),Vp.setScalar(0),zp.fromBufferAttribute(t,e),Hp.fromBufferAttribute(t,n),Vp.fromBufferAttribute(t,i),s.setScalar(0),s.addScaledVector(zp,r.x),s.addScaledVector(Hp,r.y),s.addScaledVector(Vp,r.z),s}static isFrontFacing(t,e,n,i){return Pp.subVectors(n,e),Ip.subVectors(t,e),Pp.cross(Ip).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Pp.subVectors(this.c,this.b),Ip.subVectors(this.a,this.b),.5*Pp.cross(Ip).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Gp.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Gp.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,i,r){return Gp.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Gp.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Gp.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,a;Np.subVectors(i,n),Op.subVectors(r,n),Fp.subVectors(t,n);const o=Np.dot(Fp),l=Op.dot(Fp);if(o<=0&&l<=0)return e.copy(n);kp.subVectors(t,i);const c=Np.dot(kp),h=Op.dot(kp);if(c>=0&&h<=c)return e.copy(i);const u=o*h-c*l;if(u<=0&&o>=0&&c<=0)return s=o/(o-c),e.copy(n).addScaledVector(Np,s);Bp.subVectors(t,r);const d=Np.dot(Bp),p=Op.dot(Bp);if(p>=0&&d<=p)return e.copy(r);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(n).addScaledVector(Op,a);const m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return Up.subVectors(r,i),a=(h-c)/(h-c+(d-p)),e.copy(i).addScaledVector(Up,a);const g=1/(m+f+u);return s=f*g,a=u*g,e.copy(n).addScaledVector(Np,s).addScaledVector(Op,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Wp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},jp={h:0,s:0,l:0},Xp={h:0,s:0,l:0};function qp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}let Yp=class{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Su){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,hd.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=hd.workingColorSpace){return this.r=t,this.g=e,this.b=n,hd.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=hd.workingColorSpace){if(t=qu(t,1),e=Xu(e,0,1),n=Xu(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=qp(r,i,t+1/3),this.g=qp(r,i,t),this.b=qp(r,i,t-1/3)}return hd.toWorkingColorSpace(this,i),this}setStyle(t,e=Su){function n(t){void 0!==t&&parseFloat(t)}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let t;const r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(t[4]),this.setRGB(Math.min(255,parseInt(t[1],10))/255,Math.min(255,parseInt(t[2],10))/255,Math.min(255,parseInt(t[3],10))/255,e);if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(t[4]),this.setRGB(Math.min(100,parseInt(t[1],10))/100,Math.min(100,parseInt(t[2],10))/100,Math.min(100,parseInt(t[3],10))/100,e);break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(t[4]),this.setHSL(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100,e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=i[1],n=t.length;if(3===n)return this.setRGB(parseInt(t.charAt(0),16)/15,parseInt(t.charAt(1),16)/15,parseInt(t.charAt(2),16)/15,e);if(6===n)return this.setHex(parseInt(t,16),e)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Su){const n=Wp[t.toLowerCase()];return void 0!==n&&this.setHex(n,e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ud(t.r),this.g=ud(t.g),this.b=ud(t.b),this}copyLinearToSRGB(t){return this.r=dd(t.r),this.g=dd(t.g),this.b=dd(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Su){return hd.fromWorkingColorSpace($p.copy(this),t),65536*Math.round(Xu(255*$p.r,0,255))+256*Math.round(Xu(255*$p.g,0,255))+Math.round(Xu(255*$p.b,0,255))}getHexString(t=Su){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=hd.workingColorSpace){hd.fromWorkingColorSpace($p.copy(this),e);const n=$p.r,i=$p.g,r=$p.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const t=s-a;switch(l=c<=.5?t/(s+a):t/(2-s-a),s){case n:o=(i-r)/t+(i<r?6:0);break;case i:o=(r-n)/t+2;break;case r:o=(n-i)/t+4}o/=6}return t.h=o,t.s=l,t.l=c,t}getRGB(t,e=hd.workingColorSpace){return hd.fromWorkingColorSpace($p.copy(this),e),t.r=$p.r,t.g=$p.g,t.b=$p.b,t}getStyle(t=Su){hd.fromWorkingColorSpace($p.copy(this),t);const e=$p.r,n=$p.g,i=$p.b;return t!==Su?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(t,e,n){return this.getHSL(jp),this.setHSL(jp.h+t,jp.s+e,jp.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(jp),t.getHSL(Xp);const n=Yu(jp.h,Xp.h,e),i=Yu(jp.s,Xp.s,e),r=Yu(jp.l,Xp.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const $p=new Yp;Yp.NAMES=Wp;let Zp=0;class Kp extends zu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zp++}),this.uuid=ju(),this.name="",this.type="Material",this.blending=1,this.side=cc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yc,this.blendDst=xc,this.blendEquation=dc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Yp(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Eu,this.stencilZFail=Eu,this.stencilZPass=Eu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n)continue;const i=this[e];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==cc&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==yc&&(n.blendSrc=this.blendSrc),this.blendDst!==xc&&(n.blendDst=this.blendDst),this.blendEquation!==dc&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Eu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Eu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Eu&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){}}class Jp extends Kp{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yp(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dp,this.combine=kc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Qp=function(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const t=l-127;t<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):t<-14?(i[l]=1024>>-t-14,i[256|l]=1024>>-t-14|32768,r[l]=-t-1,r[256|l]=-t-1):t<=15?(i[l]=t+15<<10,i[256|l]=t+15<<10|32768,r[l]=13,r[256|l]=13):t<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let t=l<<13,e=0;for(;!(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,s[l]=t|e}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}();function tf(t){Math.abs(t),t=Xu(t,-65504,65504),Qp.floatView[0]=t;const e=Qp.uint32View[0],n=e>>23&511;return Qp.baseTable[n]+((8388607&e)>>Qp.shiftTable[n])}function ef(t){const e=t>>10;return Qp.uint32View[0]=Qp.mantissaTable[Qp.offsetTable[e]+(1023&t)]+Qp.exponentTable[e],Qp.floatView[0]}class nf{static toHalfFloat(t){return tf(t)}static fromHalfFloat(t){return ef(t)}}const rf=new Ad,sf=new Ju;let af=0;class of{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:af++}),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Uu,this.updateRanges=[],this.gpuType=vh,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)sf.fromBufferAttribute(this,e),sf.applyMatrix3(t),this.setXY(e,sf.x,sf.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)rf.fromBufferAttribute(this,e),rf.applyMatrix3(t),this.setXYZ(e,rf.x,rf.y,rf.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)rf.fromBufferAttribute(this,e),rf.applyMatrix4(t),this.setXYZ(e,rf.x,rf.y,rf.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)rf.fromBufferAttribute(this,e),rf.applyNormalMatrix(t),this.setXYZ(e,rf.x,rf.y,rf.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)rf.fromBufferAttribute(this,e),rf.transformDirection(t),this.setXYZ(e,rf.x,rf.y,rf.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=$u(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Zu(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=$u(e,this.array)),e}setX(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=$u(e,this.array)),e}setY(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=$u(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=$u(e,this.array)),e}setW(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array),i=Zu(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array),i=Zu(i,this.array),r=Zu(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Uu&&(t.usage=this.usage),t}}class lf extends of{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class cf extends of{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class hf extends of{constructor(t,e,n){super(new Float32Array(t),e,n)}}let uf=0;const df=new np,pf=new Rp,ff=new Ad,mf=new Rd,gf=new Rd,_f=new Ad;class vf extends zu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uf++}),this.uuid=ju(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ed(t)?cf:lf)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Qu).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return df.makeRotationFromQuaternion(t),this.applyMatrix4(df),this}rotateX(t){return df.makeRotationX(t),this.applyMatrix4(df),this}rotateY(t){return df.makeRotationY(t),this.applyMatrix4(df),this}rotateZ(t){return df.makeRotationZ(t),this.applyMatrix4(df),this}translate(t,e,n){return df.makeTranslation(t,e,n),this.applyMatrix4(df),this}scale(t,e,n){return df.makeScale(t,e,n),this.applyMatrix4(df),this}lookAt(t){return pf.lookAt(t),pf.updateMatrix(),this.applyMatrix4(pf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ff).negate(),this.translate(ff.x,ff.y,ff.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}this.setAttribute("position",new hf(e,3))}else{const n=Math.min(t.length,e.count);for(let i=0;i<n;i++){const n=t[i];e.setXYZ(i,n.x,n.y,n.z||0)}t.length,e.count,e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Rd);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new Ad(-1/0,-1/0,-1/0),new Ad(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];mf.setFromBufferAttribute(n),this.morphTargetsRelative?(_f.addVectors(this.boundingBox.min,mf.min),this.boundingBox.expandByPoint(_f),_f.addVectors(this.boundingBox.max,mf.max),this.boundingBox.expandByPoint(_f)):(this.boundingBox.expandByPoint(mf.min),this.boundingBox.expandByPoint(mf.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new qd);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new Ad,1/0);else if(t){const n=this.boundingSphere.center;if(mf.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const n=e[t];gf.setFromBufferAttribute(n),this.morphTargetsRelative?(_f.addVectors(mf.min,gf.min),mf.expandByPoint(_f),_f.addVectors(mf.max,gf.max),mf.expandByPoint(_f)):(mf.expandByPoint(gf.min),mf.expandByPoint(gf.max))}mf.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)_f.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(_f));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],a=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)_f.fromBufferAttribute(s,e),a&&(ff.fromBufferAttribute(t,e),_f.add(ff)),i=Math.max(i,n.distanceToSquared(_f))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return;const n=e.position,i=e.normal,r=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new of(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),a=[],o=[];for(let S=0;S<n.count;S++)a[S]=new Ad,o[S]=new Ad;const l=new Ad,c=new Ad,h=new Ad,u=new Ju,d=new Ju,p=new Ju,f=new Ad,m=new Ad;function g(t,e,i){l.fromBufferAttribute(n,t),c.fromBufferAttribute(n,e),h.fromBufferAttribute(n,i),u.fromBufferAttribute(r,t),d.fromBufferAttribute(r,e),p.fromBufferAttribute(r,i),c.sub(l),h.sub(l),d.sub(u),p.sub(u);const s=1/(d.x*p.y-p.x*d.y);isFinite(s)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(h,-d.y).multiplyScalar(s),m.copy(h).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(s),a[t].add(f),a[e].add(f),a[i].add(f),o[t].add(m),o[e].add(m),o[i].add(m))}let _=this.groups;0===_.length&&(_=[{start:0,count:t.count}]);for(let S=0,w=_.length;S<w;++S){const e=_[S],n=e.start;for(let i=n,r=n+e.count;i<r;i+=3)g(t.getX(i+0),t.getX(i+1),t.getX(i+2))}const v=new Ad,y=new Ad,x=new Ad,b=new Ad;function M(t){x.fromBufferAttribute(i,t),b.copy(x);const e=a[t];v.copy(e),v.sub(x.multiplyScalar(x.dot(e))).normalize(),y.crossVectors(b,e);const n=y.dot(o[t])<0?-1:1;s.setXYZW(t,v.x,v.y,v.z,n)}for(let S=0,w=_.length;S<w;++S){const e=_[S],n=e.start;for(let i=n,r=n+e.count;i<r;i+=3)M(t.getX(i+0)),M(t.getX(i+1)),M(t.getX(i+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new of(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Ad,r=new Ad,s=new Ad,a=new Ad,o=new Ad,l=new Ad,c=new Ad,h=new Ad;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),p=t.getX(u+1),f=t.getX(u+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,f),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,u=e.count;t<u;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)_f.fromBufferAttribute(t,e),_f.normalize(),t.setXYZ(e,_f.x,_f.y,_f.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let a=0,o=0;for(let l=0,c=e.length;l<c;l++){a=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(let t=0;t<i;t++)s[o++]=n[a++]}return new of(s,i,r)}if(null===this.index)return this;const e=new vf,n=this.index.array,i=this.attributes;for(const a in i){const r=t(i[a],n);e.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],s=r[a];for(let e=0,r=s.length;e<r;e++){const r=t(s[e],n);i.push(r)}e.morphAttributes[a]=i}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const t=s[a];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const o in n){const e=n[o];t.data.attributes[o]=e.toJSON(t.data)}const i={};let r=!1;for(const o in this.morphAttributes){const e=this.morphAttributes[o],n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];n.push(r.toJSON(t.data))}n.length>0&&(i[o]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const t=i[l];this.setAttribute(l,t.clone(e))}const r=t.morphAttributes;for(const l in r){const t=[],n=r[l];for(let i=0,r=n.length;i<r;i++)t.push(n[i].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let l=0,c=s.length;l<c;l++){const t=s[l];this.addGroup(t.start,t.count,t.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const yf=new np,xf=new ep,bf=new qd,Mf=new Ad,Sf=new Ad,wf=new Ad,Tf=new Ad,Af=new Ad,Ef=new Ad,Cf=new Ad,Rf=new Ad;class Pf extends Rp{constructor(t=new vf,e=new Jp){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const a=this.morphTargetInfluences;if(r&&a){Ef.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(Af.fromBufferAttribute(o,t),s?Ef.addScaledVector(Af,i):Ef.addScaledVector(Af.sub(e),i))}e.add(Ef)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),bf.copy(n.boundingSphere),bf.applyMatrix4(r),xf.copy(t.ray).recast(t.near),!1===bf.containsPoint(xf.origin)){if(null===xf.intersectSphere(bf,Mf))return;if(xf.origin.distanceToSquared(Mf)>(t.far-t.near)**2)return}yf.copy(r).invert(),xf.copy(t.ray).applyMatrix4(yf),null!==n.boundingBox&&!1===xf.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,xf)}}_computeIntersections(t,e,n){let i;const r=this.geometry,s=this.material,a=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,h=r.attributes.normal,u=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(s))for(let p=0,f=u.length;p<f;p++){const r=u[p],o=s[r.materialIndex];for(let s=Math.max(r.start,d.start),u=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));s<u;s+=3){i=If(this,o,t,n,l,c,h,a.getX(s),a.getX(s+1),a.getX(s+2)),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);r<o;r+=3){i=If(this,s,t,n,l,c,h,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}else if(void 0!==o)if(Array.isArray(s))for(let p=0,f=u.length;p<f;p++){const r=u[p],a=s[r.materialIndex];for(let s=Math.max(r.start,d.start),u=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));s<u;s+=3){i=If(this,a,t,n,l,c,h,s,s+1,s+2),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);r<a;r+=3){i=If(this,s,t,n,l,c,h,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}}}function If(t,e,n,i,r,s,a,o,l,c){t.getVertexPosition(o,Sf),t.getVertexPosition(l,wf),t.getVertexPosition(c,Tf);const h=function(t,e,n,i,r,s,a,o){let l;if(l=e.side===hc?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,e.side===cc,o),null===l)return null;Rf.copy(o),Rf.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Rf);return c<n.near||c>n.far?null:{distance:c,point:Rf.clone(),object:t}}(t,e,n,i,Sf,wf,Tf,Cf);if(h){const t=new Ad;Gp.getBarycoord(Cf,Sf,wf,Tf,t),r&&(h.uv=Gp.getInterpolatedAttribute(r,o,l,c,t,new Ju)),s&&(h.uv1=Gp.getInterpolatedAttribute(s,o,l,c,t,new Ju)),a&&(h.normal=Gp.getInterpolatedAttribute(a,o,l,c,t,new Ad),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new Ad,materialIndex:0};Gp.getNormal(Sf,wf,Tf,e.normal),h.face=e,h.barycoord=t}return h}class Lf extends vf{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],h=[];let u=0,d=0;function p(t,e,n,i,r,s,p,f,m,g,_){const v=s/m,y=p/g,x=s/2,b=p/2,M=f/2,S=m+1,w=g+1;let T=0,A=0;const E=new Ad;for(let a=0;a<w;a++){const s=a*y-b;for(let o=0;o<S;o++){const u=o*v-x;E[t]=u*i,E[e]=s*r,E[n]=M,l.push(E.x,E.y,E.z),E[t]=0,E[e]=0,E[n]=f>0?1:-1,c.push(E.x,E.y,E.z),h.push(o/m),h.push(1-a/g),T+=1}}for(let a=0;a<g;a++)for(let t=0;t<m;t++){const e=u+t+S*a,n=u+t+S*(a+1),i=u+(t+1)+S*(a+1),r=u+(t+1)+S*a;o.push(e,n,r),o.push(n,i,r),A+=6}a.addGroup(d,A,_),d+=A,u+=T}p("z","y","x",-1,-1,n,e,t,s,r,0),p("z","y","x",1,-1,n,e,-t,s,r,1),p("x","z","y",1,1,t,n,e,i,s,2),p("x","z","y",1,-1,t,n,-e,i,s,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new hf(l,3)),this.setAttribute("normal",new hf(c,3)),this.setAttribute("uv",new hf(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Lf(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Df(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?e[n][i]=null:e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Nf(t){const e={};for(let n=0;n<t.length;n++){const i=Df(t[n]);for(const t in i)e[t]=i[t]}return e}function Of(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:hd.workingColorSpace}const Uf={clone:Df,merge:Nf};class Ff extends Kp{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Df(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class kf extends Rp{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new np,this.projectionMatrix=new np,this.projectionMatrixInverse=new np,this.coordinateSystem=ku}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Bf=new Ad,zf=new Ju,Hf=new Ju;class Vf extends kf{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Wu*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Gu*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Wu*Math.atan(Math.tan(.5*Gu*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Bf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Bf.x,Bf.y).multiplyScalar(-t/Bf.z),Bf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Bf.x,Bf.y).multiplyScalar(-t/Bf.z)}getViewSize(t,e){return this.getViewBounds(t,zf,Hf),e.subVectors(Hf,zf)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Gu*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/a,i*=s.width/t,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Gf=-90;class Wf extends Rp{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Vf(Gf,1,t,e);i.layers=this.layers,this.add(i);const r=new Vf(Gf,1,t,e);r.layers=this.layers,this.add(r);const s=new Vf(Gf,1,t,e);s.layers=this.layers,this.add(s);const a=new Vf(Gf,1,t,e);a.layers=this.layers,this.add(a);const o=new Vf(Gf,1,t,e);o.layers=this.layers,this.add(o);const l=new Vf(Gf,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,i,r,s,a,o]=e;for(const l of e)this.remove(l);if(t===ku)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(t!==Bu)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of e)this.add(l),l.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,s,a,o,l,c]=this.children,h=t.getRenderTarget(),u=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),p=t.xr.enabled;t.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,i),t.render(e,r),t.setRenderTarget(n,1,i),t.render(e,s),t.setRenderTarget(n,2,i),t.render(e,a),t.setRenderTarget(n,3,i),t.render(e,o),t.setRenderTarget(n,4,i),t.render(e,l),n.texture.generateMipmaps=f,t.setRenderTarget(n,5,i),t.render(e,c),t.setRenderTarget(h,u,d),t.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class jf extends yd{constructor(t,e,n,i,r,s,a,o,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:Jc,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Xf extends Md{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new jf(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:ch}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Lf(5,5,5),r=new Ff({name:"CubemapFromEquirect",uniforms:Df(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:hc,blending:0});r.uniforms.tEquirect.value=e;const s=new Pf(i,r),a=e.minFilter;e.minFilter===uh&&(e.minFilter=ch);return new Wf(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}}class qf extends Rp{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Yf={type:"move"};class $f{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ad,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ad),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ad,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ad),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){s=!0;for(const s of t.hand.values()){const t=e.getJointPose(s,n),i=this._getHandJoint(l,s);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=t.radius),i.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=e.getPose(t.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Yf)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new qf;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Zf{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Yp(t),this.density=e}clone(){return new Zf(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Kf{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Yp(t),this.near=e,this.far=n}clone(){return new Kf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Jf extends Rp{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new dp,this.environmentIntensity=1,this.environmentRotation=new dp,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class Qf{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Uu,this.updateRanges=[],this.version=0,this.uuid=ju()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ju()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ju()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const tm=new Ad;class em{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)tm.fromBufferAttribute(this,e),tm.applyMatrix4(t),this.setXYZ(e,tm.x,tm.y,tm.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)tm.fromBufferAttribute(this,e),tm.applyNormalMatrix(t),this.setXYZ(e,tm.x,tm.y,tm.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)tm.fromBufferAttribute(this,e),tm.transformDirection(t),this.setXYZ(e,tm.x,tm.y,tm.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=$u(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Zu(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=Zu(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Zu(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Zu(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Zu(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=$u(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=$u(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=$u(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=$u(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array),i=Zu(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array),i=Zu(i,this.array),r=Zu(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new of(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new em(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nm extends Kp{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Yp(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let im;const rm=new Ad,sm=new Ad,am=new Ad,om=new Ju,lm=new Ju,cm=new np,hm=new Ad,um=new Ad,dm=new Ad,pm=new Ju,fm=new Ju,mm=new Ju;class gm extends Rp{constructor(t=new nm){if(super(),this.isSprite=!0,this.type="Sprite",void 0===im){im=new vf;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Qf(t,5);im.setIndex([0,1,2,0,2,3]),im.setAttribute("position",new em(e,3,0,!1)),im.setAttribute("uv",new em(e,2,3,!1))}this.geometry=im,this.material=t,this.center=new Ju(.5,.5)}raycast(t,e){t.camera,sm.setFromMatrixScale(this.matrixWorld),cm.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),am.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&sm.multiplyScalar(-am.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;_m(hm.set(-.5,-.5,0),am,s,sm,i,r),_m(um.set(.5,-.5,0),am,s,sm,i,r),_m(dm.set(.5,.5,0),am,s,sm,i,r),pm.set(0,0),fm.set(1,0),mm.set(1,1);let a=t.ray.intersectTriangle(hm,um,dm,!1,rm);if(null===a&&(_m(um.set(-.5,.5,0),am,s,sm,i,r),fm.set(0,1),a=t.ray.intersectTriangle(hm,dm,um,!1,rm),null===a))return;const o=t.ray.origin.distanceTo(rm);o<t.near||o>t.far||e.push({distance:o,point:rm.clone(),uv:Gp.getInterpolation(rm,hm,um,dm,pm,fm,mm,new Ju),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function _m(t,e,n,i,r,s){om.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(lm.x=s*om.x-r*om.y,lm.y=r*om.x+s*om.y):lm.copy(om),t.copy(e),t.x+=lm.x,t.y+=lm.y,t.applyMatrix4(cm)}const vm=new Ad,ym=new Ad;class xm extends Rp{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance,t.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const i=this.levels;let r;for(r=0;r<i.length&&!(e<i[r].distance);r++);return i.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const t=e.splice(n,1);return this.remove(t[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i;n++){let i=e[n].distance;if(e[n].object.visible&&(i-=i*e[n].hysteresis),t<i)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){vm.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(vm);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){vm.setFromMatrixPosition(t.matrixWorld),ym.setFromMatrixPosition(this.matrixWorld);const n=vm.distanceTo(ym)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r;i++){let t=e[i].distance;if(e[i].object.visible&&(t-=t*e[i].hysteresis),!(n>=t))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const t=n[i];e.object.levels.push({object:t.object.uuid,distance:t.distance,hysteresis:t.hysteresis})}return e}}const bm=new Ad,Mm=new xd,Sm=new xd,wm=new Ad,Tm=new np,Am=new Ad,Em=new qd,Cm=new np,Rm=new ep;class Pm extends Pf{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$c,this.bindMatrix=new np,this.bindMatrixInverse=new np,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Rd),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,Am),this.boundingBox.expandByPoint(Am)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new qd),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,Am),this.boundingSphere.expandByPoint(Am)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Em.copy(this.boundingSphere),Em.applyMatrix4(i),!1!==t.ray.intersectsSphere(Em)&&(Cm.copy(i).invert(),Rm.copy(t.ray).applyMatrix4(Cm),null!==this.boundingBox&&!1===Rm.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,Rm)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new xd,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===$c?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Zc&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}applyBoneTransform(t,e){const n=this.skeleton,i=this.geometry;Mm.fromBufferAttribute(i.attributes.skinIndex,t),Sm.fromBufferAttribute(i.attributes.skinWeight,t),bm.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const t=Sm.getComponent(r);if(0!==t){const i=Mm.getComponent(r);Tm.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(wm.copy(bm).applyMatrix4(Tm),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Im extends Rp{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lm extends yd{constructor(t=null,e=1,n=1,i,r,s,a,o,l=ah,c=ah,h,u){super(null,s,a,o,l,c,i,r,h,u),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Dm=new np,Nm=new np;class Om{constructor(t=[],e=[]){this.uuid=ju(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new np)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new np;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=t.length;r<s;r++){const i=t[r]?t[r].matrixWorld:Nm;Dm.multiplyMatrices(i,e[r]),Dm.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new Om(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Lm(e,t,t,Ah,vh);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){let i=e[t.bones[n]];void 0===i&&(i=new Im),this.bones.push(i),this.boneInverses.push((new np).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class Um extends of{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Fm=new np,km=new np,Bm=[],zm=new Rd,Hm=new np,Vm=new Pf,Gm=new qd;class Wm extends Pf{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Um(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Hm)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Rd),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Fm),zm.copy(t.boundingBox).applyMatrix4(Fm),this.boundingBox.union(zm)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new qd),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Fm),Gm.copy(t.boundingSphere).applyMatrix4(Fm),this.boundingSphere.union(Gm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const n=e.morphTargetInfluences,i=this.morphTexture.source.data.data,r=t*(n.length+1)+1;for(let s=0;s<n.length;s++)n[s]=i[r+s]}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Vm.geometry=this.geometry,Vm.material=this.material,void 0!==Vm.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Gm.copy(this.boundingSphere),Gm.applyMatrix4(n),!1!==t.ray.intersectsSphere(Gm)))for(let r=0;r<i;r++){this.getMatrixAt(r,Fm),km.multiplyMatrices(n,Fm),Vm.matrixWorld=km,Vm.raycast(t,Bm);for(let t=0,n=Bm.length;t<n;t++){const n=Bm[t];n.instanceId=r,n.object=this,e.push(n)}Bm.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Um(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const n=e.morphTargetInfluences,i=n.length+1;null===this.morphTexture&&(this.morphTexture=new Lm(new Float32Array(i*this.count),i,this.count,Ih,vh));const r=this.morphTexture.source.data.data;let s=0;for(let l=0;l<n.length;l++)s+=n[l];const a=this.geometry.morphTargetsRelative?1:1-s,o=i*t;r[o]=a,r.set(n,o+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const jm=new Ad,Xm=new Ad,qm=new Qu;class Ym{constructor(t=new Ad(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=jm.subVectors(n,e).cross(Xm.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(jm),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||qm.getNormalMatrix(t),i=this.coplanarPoint(jm).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const $m=new qd,Zm=new Ad;class Km{constructor(t=new Ym,e=new Ym,n=new Ym,i=new Ym,r=new Ym,s=new Ym){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=ku){const n=this.planes,i=t.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],_=i[13],v=i[14],y=i[15];if(n[0].setComponents(o-r,u-l,m-d,y-g).normalize(),n[1].setComponents(o+r,u+l,m+d,y+g).normalize(),n[2].setComponents(o+s,u+c,m+p,y+_).normalize(),n[3].setComponents(o-s,u-c,m-p,y-_).normalize(),n[4].setComponents(o-a,u-h,m-f,y-v).normalize(),e===ku)n[5].setComponents(o+a,u+h,m+f,y+v).normalize();else{if(e!==Bu)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,h,f,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),$m.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),$m.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere($m)}intersectsSprite(t){return $m.center.set(0,0,0),$m.radius=.7071067811865476,$m.applyMatrix4(t.matrixWorld),this.intersectsSphere($m)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Zm.x=i.normal.x>0?t.max.x:t.min.x,Zm.y=i.normal.y>0?t.max.y:t.min.y,Zm.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Zm)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Jm(t,e){return t-e}function Qm(t,e){return t.z-e.z}function tg(t,e){return e.z-t.z}const eg=new np,ng=new Yp(1,1,1),ig=new Km,rg=new Rd,sg=new qd,ag=new Ad,og=new Ad,lg=new Ad,cg=new class{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const a=r[this.index];s.push(a),this.index++,a.start=t,a.count=e,a.z=n,a.index=i}reset(){this.list.length=0,this.index=0}},hg=new Pf,ug=[];function dg(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let s=0;s<r;s++)for(let r=0;r<i;r++)e.setComponent(s+n,r,t.getComponent(s,r))}else e.array.set(t.array,n*i);e.needsUpdate=!0}function pg(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class fg extends Pf{constructor(t,e,n=2*e,i){super(new vf,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(4*this._maxInstanceCount);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Lm(e,t,t,Ah,vh);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Lm(e,t,t,Lh,_h);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Lm(e,t,t,Ah,vh);n.colorSpace=hd.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in t.attributes){const r=t.getAttribute(i),{array:s,itemSize:a,normalized:o}=r,l=new s.constructor(n*a),c=new of(l,a,o);e.setAttribute(i,c)}if(null!==t.getIndex()){const t=n>65535?new Uint32Array(i):new Uint16Array(i);e.setIndex(new of(t,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(Boolean(t.getIndex())!==Boolean(e.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=t.getAttribute(n),r=e.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Rd);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,i=e.length;n<i;n++){if(!1===e[n].active)continue;const i=e[n].geometryIndex;this.getMatrixAt(n,eg),this.getBoundingBoxAt(i,rg).applyMatrix4(eg),t.union(rg)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new qd);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,i=e.length;n<i;n++){if(!1===e[n].active)continue;const i=e[n].geometryIndex;this.getMatrixAt(n,eg),this.getBoundingSphereAt(i,sg).applyMatrix4(eg),t.union(sg)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const e={visible:!0,active:!0,geometryIndex:t};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Jm),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=e):(n=this._instanceInfo.length,this._instanceInfo.push(e));const i=this._matricesTexture;eg.identity().toArray(i.image.data,16*n),i.needsUpdate=!0;const r=this._colorsTexture;return r&&(ng.toArray(r.image.data,4*n),r.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===e?t.getAttribute("position").count:e;const s=t.getIndex();if(null!==s&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?s.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let a;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Jm),a=this._availableGeometryIds.shift(),r[a]=i):(a=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(a,t),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,a}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,i=null!==n.getIndex(),r=n.getIndex(),s=e.getIndex(),a=this._geometryInfo[t];if(i&&s.count>a.reservedIndexCount||e.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const o=a.vertexStart,l=a.reservedVertexCount;a.vertexCount=e.getAttribute("position").count;for(const c in n.attributes){const t=e.getAttribute(c),i=n.getAttribute(c);dg(t,i,o);const r=t.itemSize;for(let e=t.count,n=l;e<n;e++){const t=o+e;for(let e=0;e<r;e++)i.setComponent(t,e,0)}i.needsUpdate=!0,i.addUpdateRange(o*r,l*r)}if(i){const t=a.indexStart,n=a.reservedIndexCount;a.indexCount=e.getIndex().count;for(let e=0;e<s.count;e++)r.setX(t+e,o+s.getX(e));for(let e=s.count,i=n;e<i;e++)r.setX(t+e,o);r.needsUpdate=!0,r.addUpdateRange(t,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,null!==e.boundingBox&&(a.boundingBox=e.boundingBox.clone()),a.boundingSphere=null,null!==e.boundingSphere&&(a.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||!1===e[t].active)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].active&&n[i].geometryIndex===t&&this.deleteInstance(i);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,i=n.map(((t,e)=>e)).sort(((t,e)=>n[t].vertexStart-n[e].vertexStart)),r=this.geometry;for(let s=0,a=n.length;s<a;s++){const a=i[s],o=n[a];if(!1!==o.active){if(null!==r.index){if(o.indexStart!==e){const{indexStart:n,vertexStart:i,reservedIndexCount:s}=o,a=r.index,l=a.array,c=t-i;for(let t=n;t<n+s;t++)l[t]=l[t]+c;a.array.copyWithin(e,n,n+s),a.addUpdateRange(e,s),o.indexStart=e}e+=o.reservedIndexCount}if(o.vertexStart!==t){const{vertexStart:e,reservedVertexCount:n}=o,i=r.attributes;for(const r in i){const s=i[r],{array:a,itemSize:o}=s;a.copyWithin(t*o,e*o,(e+n)*o),s.addUpdateRange(t*o,n*o)}o.vertexStart=t}t+=o.reservedVertexCount,o.start=r.index?o.indexStart:o.vertexStart,this._nextIndexStart=r.index?o.indexStart+o.reservedIndexCount:0,this._nextVertexStart=o.vertexStart+o.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[t];if(null===i.boundingBox){const t=new Rd,e=n.index,r=n.attributes.position;for(let n=i.start,s=i.start+i.count;n<s;n++){let i=n;e&&(i=e.getX(i)),t.expandByPoint(ag.fromBufferAttribute(r,i))}i.boundingBox=t}return e.copy(i.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[t];if(null===i.boundingSphere){const e=new qd;this.getBoundingBoxAt(t,rg),rg.getCenter(e.center);const r=n.index,s=n.attributes.position;let a=0;for(let t=i.start,n=i.start+i.count;t<n;t++){let n=t;r&&(n=r.getX(n)),ag.fromBufferAttribute(s,n),a=Math.max(a,e.center.distanceToSquared(ag))}e.radius=Math.sqrt(a),i.boundingSphere=e}return e.copy(i.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,i=this._matricesTexture.image.data;return e.toArray(i,16*t),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,16*t)}setColorAt(t,e){return this.validateInstanceId(t),null===this._colorsTexture&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,4*t),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,4*t)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e||(this._instanceInfo[t].visible=e,this._visibilityChanged=!0),this}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(Jm);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const i=new Int32Array(t),r=new Int32Array(t);pg(this._multiDrawCounts,i),pg(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=t;const s=this._indirectTexture,a=this._matricesTexture,o=this._colorsTexture;s.dispose(),this._initIndirectTexture(),pg(s.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),pg(a.image.data,this._matricesTexture.image.data),o&&(o.dispose(),this._initColorsTexture(),pg(o.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter((t=>t.active));if(Math.max(...n.map((t=>t.vertexStart+t.reservedVertexCount)))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index){if(Math.max(...n.map((t=>t.indexStart+t.reservedIndexCount)))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`)}const i=this.geometry;i.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new vf,this._initializeGeometry(i));const r=this.geometry;i.index&&pg(i.index.array,r.index.array);for(const s in i.attributes)pg(i.attributes[s].array,r.attributes[s].array)}raycast(t,e){const n=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,s=this.geometry;hg.material=this.material,hg.geometry.index=s.index,hg.geometry.attributes=s.attributes,null===hg.geometry.boundingBox&&(hg.geometry.boundingBox=new Rd),null===hg.geometry.boundingSphere&&(hg.geometry.boundingSphere=new qd);for(let a=0,o=n.length;a<o;a++){if(!n[a].visible||!n[a].active)continue;const s=n[a].geometryIndex,o=i[s];hg.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(a,hg.matrixWorld).premultiply(r),this.getBoundingBoxAt(s,hg.geometry.boundingBox),this.getBoundingSphereAt(s,hg.geometry.boundingSphere),hg.raycast(t,ug);for(let t=0,n=ug.length;t<n;t++){const n=ug[t];n.object=this,n.batchId=a,e.push(n)}ug.length=0}hg.material=null,hg.geometry.index=null,hg.geometry.attributes={},hg.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=null!==t.boundingBox?t.boundingBox.clone():null,this.boundingSphere=null!==t.boundingSphere?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map((t=>l(o({},t),{boundingBox:null!==t.boundingBox?t.boundingBox.clone():null,boundingSphere:null!==t.boundingSphere?t.boundingSphere.clone():null}))),this._instanceInfo=t._instanceInfo.map((t=>o({},t))),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=null===s?1:s.array.BYTES_PER_ELEMENT,o=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,h=this._geometryInfo,u=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data;u&&(eg.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),ig.setFromProjectionMatrix(eg,t.coordinateSystem));let f=0;if(this.sortObjects){eg.copy(this.matrixWorld).invert(),ag.setFromMatrixPosition(n.matrixWorld).applyMatrix4(eg),og.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(eg);for(let n=0,i=o.length;n<i;n++)if(o[n].visible&&o[n].active){const t=o[n].geometryIndex;this.getMatrixAt(n,eg),this.getBoundingSphereAt(t,sg).applyMatrix4(eg);let e=!1;if(u&&(e=!ig.intersectsSphere(sg)),!e){const e=h[t],i=lg.subVectors(sg.center,ag).dot(og);cg.push(e.start,e.count,i,n)}}const t=cg.list,e=this.customSort;null===e?t.sort(r.transparent?tg:Qm):e.call(this,t,n);for(let n=0,i=t.length;n<i;n++){const e=t[n];l[f]=e.start*a,c[f]=e.count,p[f]=e.index,f++}cg.reset()}else for(let m=0,g=o.length;m<g;m++)if(o[m].visible&&o[m].active){const t=o[m].geometryIndex;let e=!1;if(u&&(this.getMatrixAt(m,eg),this.getBoundingSphereAt(t,sg).applyMatrix4(eg),e=!ig.intersectsSphere(sg)),!e){const e=h[t];l[f]=e.start*a,c[f]=e.count,p[f]=m,f++}}d.needsUpdate=!0,this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(t,e,n,i,r,s){this.onBeforeRender(t,null,i,r,s)}}class mg extends Kp{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yp(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const gg=new Ad,_g=new Ad,vg=new np,yg=new ep,xg=new qd,bg=new Ad,Mg=new Ad;class Sg extends Rp{constructor(t=new vf,e=new mg){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)gg.fromBufferAttribute(e,t-1),_g.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=gg.distanceTo(_g);t.setAttribute("lineDistance",new hf(n,1))}return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),xg.copy(n.boundingSphere),xg.applyMatrix4(i),xg.radius+=r,!1===t.ray.intersectsSphere(xg))return;vg.copy(i).invert(),yg.copy(t.ray).applyMatrix4(vg);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=this.isLineSegments?2:1,c=n.index,h=n.attributes.position;if(null!==c){const n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);for(let r=n,s=i-1;r<s;r+=l){const n=c.getX(r),i=c.getX(r+1),s=wg(this,t,yg,o,n,i,r);s&&e.push(s)}if(this.isLineLoop){const r=c.getX(i-1),s=c.getX(n),a=wg(this,t,yg,o,r,s,i-1);a&&e.push(a)}}else{const n=Math.max(0,s.start),i=Math.min(h.count,s.start+s.count);for(let r=n,s=i-1;r<s;r+=l){const n=wg(this,t,yg,o,r,r+1,r);n&&e.push(n)}if(this.isLineLoop){const r=wg(this,t,yg,o,i-1,n,i-1);r&&e.push(r)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function wg(t,e,n,i,r,s,a){const o=t.geometry.attributes.position;gg.fromBufferAttribute(o,r),_g.fromBufferAttribute(o,s);if(n.distanceSqToSegment(gg,_g,bg,Mg)>i)return;bg.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(bg);return l<e.near||l>e.far?void 0:{distance:l,point:Mg.clone().applyMatrix4(t.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:t}}const Tg=new Ad,Ag=new Ad;class Eg extends Sg{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)Tg.fromBufferAttribute(e,t),Ag.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Tg.distanceTo(Ag);t.setAttribute("lineDistance",new hf(n,1))}return this}}class Cg extends Sg{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Rg extends Kp{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yp(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Pg=new np,Ig=new ep,Lg=new qd,Dg=new Ad;class Ng extends Rp{constructor(t=new vf,e=new Rg){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Lg.copy(n.boundingSphere),Lg.applyMatrix4(i),Lg.radius+=r,!1===t.ray.intersectsSphere(Lg))return;Pg.copy(i).invert(),Ig.copy(t.ray).applyMatrix4(Pg);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);n<r;n++){const r=l.getX(n);Dg.fromBufferAttribute(c,r),Og(Dg,r,o,i,t,e,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(c.count,s.start+s.count);n<r;n++)Dg.fromBufferAttribute(c,n),Og(Dg,n,o,i,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Og(t,e,n,i,r,s,a){const o=Ig.distanceSqToPoint(t);if(o<n){const n=new Ad;Ig.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class Ug extends yd{constructor(t,e,n,i,r,s,a,o,l){super(t,e,n,i,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:ch,this.magFilter=void 0!==r?r:ch,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Fg extends yd{constructor(t,e,n,i,r,s,a,o,l,c,h,u){super(null,s,a,o,l,c,i,r,h,u),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class kg extends yd{constructor(t,e,n,i,r,s,a,o,l,c=Rh){if(c!==Rh&&c!==Ph)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Rh&&(n=_h),void 0===n&&c===Ph&&(n=Mh),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:ah,this.minFilter=void 0!==o?o:ah,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new gd(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class Bg{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let i=0;const r=n.length;let s;s=e||t*n[r-1];let a,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=n[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=e||(s.isVector2?new Ju:new Ad);return o.copy(a).sub(s).normalize(),o}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new Ad,i=[],r=[],s=[],a=new Ad,o=new np;for(let d=0;d<=t;d++){const e=d/t;i[d]=this.getTangentAt(e,new Ad)}r[0]=new Ad,s[0]=new Ad;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let d=1;d<=t;d++){if(r[d]=r[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(Xu(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(o.makeRotationAxis(a,t))}s[d].crossVectors(i[d],r[d])}if(!0===e){let e=Math.acos(Xu(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],e*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class zg extends Bg{constructor(t=0,e=0,n=1,i=1,r=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(t,e=new Ju){const n=e,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const a=this.aStartAngle+t*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(o,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Hg extends zg{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}}function Vg(){let t=0,e=0,n=0,i=0;function r(r,s,a,o){t=r,e=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,a,o){let l=(e-t)/s-(n-t)/(s+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+o)+(i-n)/o;l*=a,c*=a,r(e,n,l,c)},calc:function(r){const s=r*r;return t+e*r+n*s+i*(s*r)}}}const Gg=new Ad,Wg=new Vg,jg=new Vg,Xg=new Vg;class qg extends Bg{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new Ad){const n=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*t;let a,o,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=i[(l-1)%r]:(Gg.subVectors(i[0],i[1]).add(i[0]),a=Gg);const h=i[l%r],u=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(Gg.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=Gg),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(h),t),n=Math.pow(h.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(o),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),Wg.initNonuniformCatmullRom(a.x,h.x,u.x,o.x,e,n,i),jg.initNonuniformCatmullRom(a.y,h.y,u.y,o.y,e,n,i),Xg.initNonuniformCatmullRom(a.z,h.z,u.z,o.z,e,n,i)}else"catmullrom"===this.curveType&&(Wg.initCatmullRom(a.x,h.x,u.x,o.x,this.tension),jg.initCatmullRom(a.y,h.y,u.y,o.y,this.tension),Xg.initCatmullRom(a.z,h.z,u.z,o.z,this.tension));return n.set(Wg.calc(c),jg.calc(c),Xg.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Ad).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Yg(t,e,n,i,r){const s=.5*(i-e),a=.5*(r-n),o=t*t;return(2*n-2*i+s+a)*(t*o)+(-3*n+3*i-2*s-a)*o+s*t+n}function $g(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Zg(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}class Kg extends Bg{constructor(t=new Ju,e=new Ju,n=new Ju,i=new Ju){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Ju){const n=e,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(Zg(t,i.x,r.x,s.x,a.x),Zg(t,i.y,r.y,s.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Jg extends Bg{constructor(t=new Ad,e=new Ad,n=new Ad,i=new Ad){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Ad){const n=e,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(Zg(t,i.x,r.x,s.x,a.x),Zg(t,i.y,r.y,s.y,a.y),Zg(t,i.z,r.z,s.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Qg extends Bg{constructor(t=new Ju,e=new Ju){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Ju){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Ju){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class t_ extends Bg{constructor(t=new Ad,e=new Ad){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Ad){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Ad){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class e_ extends Bg{constructor(t=new Ju,e=new Ju,n=new Ju){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Ju){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set($g(t,i.x,r.x,s.x),$g(t,i.y,r.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class n_ extends Bg{constructor(t=new Ad,e=new Ad,n=new Ad){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Ad){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set($g(t,i.x,r.x,s.x),$g(t,i.y,r.y,s.y),$g(t,i.z,r.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class i_ extends Bg{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Ju){const n=e,i=this.points,r=(i.length-1)*t,s=Math.floor(r),a=r-s,o=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(Yg(a,o.x,l.x,c.x,h.x),Yg(a,o.y,l.y,c.y,h.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Ju).fromArray(n))}return this}}var r_=Object.freeze({__proto__:null,ArcCurve:Hg,CatmullRomCurve3:qg,CubicBezierCurve:Kg,CubicBezierCurve3:Jg,EllipseCurve:zg,LineCurve:Qg,LineCurve3:t_,QuadraticBezierCurve:e_,QuadraticBezierCurve3:n_,SplineCurve:i_});class s_ extends Bg{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new r_[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-t/a;return s.getPointAt(o,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,o=s.getPoints(a);for(let t=0;t<o.length;t++){const i=o[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new r_[n.type]).fromJSON(n))}return this}}class a_ extends s_{constructor(t){super(),this.type="Path",this.currentPoint=new Ju,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Qg(this.currentPoint.clone(),new Ju(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new e_(this.currentPoint.clone(),new Ju(t,e),new Ju(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){const a=new Kg(this.currentPoint.clone(),new Ju(t,e),new Ju(n,i),new Ju(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new i_(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+a,e+o,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,s,a,o),this}absellipse(t,e,n,i,r,s,a,o){const l=new zg(t,e,n,i,r,s,a,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class o_ extends vf{constructor(t=[new Ju(0,-.5),new Ju(.5,0),new Ju(0,.5)],e=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Xu(i,0,2*Math.PI);const r=[],s=[],a=[],o=[],l=[],c=1/e,h=new Ad,u=new Ju,d=new Ad,p=new Ad,f=new Ad;let m=0,g=0;for(let _=0;_<=t.length-1;_++)switch(_){case 0:m=t[_+1].x-t[_].x,g=t[_+1].y-t[_].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case t.length-1:o.push(f.x,f.y,f.z);break;default:m=t[_+1].x-t[_].x,g=t[_+1].y-t[_].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),o.push(d.x,d.y,d.z),f.copy(p)}for(let _=0;_<=e;_++){const r=n+_*c*i,d=Math.sin(r),p=Math.cos(r);for(let n=0;n<=t.length-1;n++){h.x=t[n].x*d,h.y=t[n].y,h.z=t[n].x*p,s.push(h.x,h.y,h.z),u.x=_/e,u.y=n/(t.length-1),a.push(u.x,u.y);const i=o[3*n+0]*d,r=o[3*n+1],c=o[3*n+0]*p;l.push(i,r,c)}}for(let _=0;_<e;_++)for(let e=0;e<t.length-1;e++){const n=e+_*t.length,i=n,s=n+t.length,a=n+t.length+1,o=n+1;r.push(i,s,o),r.push(a,o,s)}this.setIndex(r),this.setAttribute("position",new hf(s,3)),this.setAttribute("uv",new hf(a,2)),this.setAttribute("normal",new hf(l,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new o_(t.points,t.segments,t.phiStart,t.phiLength)}}class l_ extends o_{constructor(t=1,e=1,n=4,i=8){const r=new a_;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:i}}static fromJSON(t){return new l_(t.radius,t.length,t.capSegments,t.radialSegments)}}class c_ extends vf{constructor(t=1,e=32,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],s=[],a=[],o=[],l=new Ad,c=new Ju;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let h=0,u=3;h<=e;h++,u+=3){const r=n+h/e*i;l.x=t*Math.cos(r),l.y=t*Math.sin(r),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[u]/t+1)/2,c.y=(s[u+1]/t+1)/2,o.push(c.x,c.y)}for(let h=1;h<=e;h++)r.push(h,h+1,0);this.setIndex(r),this.setAttribute("position",new hf(s,3)),this.setAttribute("normal",new hf(a,3)),this.setAttribute("uv",new hf(o,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new c_(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class h_ extends vf{constructor(t=1,e=1,n=1,i=32,r=1,s=!1,a=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],h=[],u=[],d=[];let p=0;const f=[],m=n/2;let g=0;function _(n){const r=p,s=new Ju,f=new Ad;let _=0;const v=!0===n?t:e,y=!0===n?1:-1;for(let t=1;t<=i;t++)h.push(0,m*y,0),u.push(0,y,0),d.push(.5,.5),p++;const x=p;for(let t=0;t<=i;t++){const e=t/i*o+a,n=Math.cos(e),r=Math.sin(e);f.x=v*r,f.y=m*y,f.z=v*n,h.push(f.x,f.y,f.z),u.push(0,y,0),s.x=.5*n+.5,s.y=.5*r*y+.5,d.push(s.x,s.y),p++}for(let t=0;t<i;t++){const e=r+t,i=x+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),_+=3}l.addGroup(g,_,!0===n?1:2),g+=_}!function(){const s=new Ad,_=new Ad;let v=0;const y=(e-t)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,v=g*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*o+a,l=Math.sin(r),f=Math.cos(r);_.x=v*l,_.y=-g*n+m,_.z=v*f,h.push(_.x,_.y,_.z),s.set(l,y,f).normalize(),u.push(s.x,s.y,s.z),d.push(e,1-g),c.push(p++)}f.push(c)}for(let n=0;n<i;n++)for(let i=0;i<r;i++){const s=f[i][n],a=f[i+1][n],o=f[i+1][n+1],l=f[i][n+1];(t>0||0!==i)&&(c.push(s,a,l),v+=3),(e>0||i!==r-1)&&(c.push(a,o,l),v+=3)}l.addGroup(g,v,0),g+=v}(),!1===s&&(t>0&&_(!0),e>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new hf(h,3)),this.setAttribute("normal",new hf(u,3)),this.setAttribute("uv",new hf(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new h_(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class u_ extends h_{constructor(t=1,e=1,n=32,i=1,r=!1,s=0,a=2*Math.PI){super(0,t,e,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}static fromJSON(t){return new u_(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class d_ extends vf{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],s=[];function a(t,e,n,i){const r=i+1,s=[];for(let a=0;a<=r;a++){s[a]=[];const i=t.clone().lerp(n,a/r),o=e.clone().lerp(n,a/r),l=r-a;for(let t=0;t<=l;t++)s[a][t]=0===t&&a===r?i:i.clone().lerp(o,t/l)}for(let a=0;a<r;a++)for(let t=0;t<2*(r-a)-1;t++){const e=Math.floor(t/2);t%2==0?(o(s[a][e+1]),o(s[a+1][e]),o(s[a][e])):(o(s[a][e+1]),o(s[a+1][e+1]),o(s[a+1][e]))}}function o(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=i/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}function u(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}!function(t){const n=new Ad,i=new Ad,r=new Ad;for(let s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),a(n,i,r,t)}(i),function(t){const e=new Ad;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new Ad;for(let e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];const n=h(t)/2/Math.PI+.5,i=u(t)/Math.PI+.5;s.push(n,1-i)}(function(){const t=new Ad,e=new Ad,n=new Ad,i=new Ad,a=new Ju,o=new Ju,l=new Ju;for(let u=0,d=0;u<r.length;u+=9,d+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),a.set(s[d+0],s[d+1]),o.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(t).add(e).add(n).divideScalar(3);const p=h(i);c(a,d+0,t,p),c(o,d+2,e,p),c(l,d+4,n,p)}})(),function(){for(let t=0;t<s.length;t+=6){const e=s[t+0],n=s[t+2],i=s[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),i<.2&&(s[t+4]+=1))}}()}(),this.setAttribute("position",new hf(r,3)),this.setAttribute("normal",new hf(r.slice(),3)),this.setAttribute("uv",new hf(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new d_(t.vertices,t.indices,t.radius,t.details)}}class p_ extends d_{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new p_(t.radius,t.detail)}}const f_=new Ad,m_=new Ad,g_=new Ad,__=new Gp;class v_ extends vf{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(Gu*e),s=t.getIndex(),a=t.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],c=["a","b","c"],h=new Array(3),u={},d=[];for(let t=0;t<o;t+=3){s?(l[0]=s.getX(t),l[1]=s.getX(t+1),l[2]=s.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:o}=__;if(e.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),__.getNormal(g_),h[0]=`${Math.round(e.x*i)},${Math.round(e.y*i)},${Math.round(e.z*i)}`,h[1]=`${Math.round(n.x*i)},${Math.round(n.y*i)},${Math.round(n.z*i)}`,h[2]=`${Math.round(o.x*i)},${Math.round(o.y*i)},${Math.round(o.z*i)}`,h[0]!==h[1]&&h[1]!==h[2]&&h[2]!==h[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=h[t],i=h[e],s=__[c[t]],a=__[c[e]],o=`${n}_${i}`,p=`${i}_${n}`;p in u&&u[p]?(g_.dot(u[p].normal)<=r&&(d.push(s.x,s.y,s.z),d.push(a.x,a.y,a.z)),u[p]=null):o in u||(u[o]={index0:l[t],index1:l[e],normal:g_.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];f_.fromBufferAttribute(a,e),m_.fromBufferAttribute(a,n),d.push(f_.x,f_.y,f_.z),d.push(m_.x,m_.y,m_.z)}this.setAttribute("position",new hf(d,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class y_ extends a_{constructor(t){super(t),this.uuid=ju(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new a_).fromJSON(n))}return this}}class x_{static triangulate(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=b_(t,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,h,u,d,p;if(i&&(s=function(t,e,n,i){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:t.length,c=b_(t,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(L_(c));for(r.sort(C_),s=0;s<r.length;s++)n=R_(r[s],n);return n}(t,e,s,n)),t.length>80*n){o=c=t[0],l=h=t[1];for(let e=n;e<r;e+=n)u=t[e],d=t[e+1],u<o&&(o=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);p=Math.max(c-o,h-l),p=0!==p?32767/p:0}return S_(s,a,n,o,l,p,0),a}}function b_(t,e,n,i,r){let s,a;if(r===function(t,e,n,i){let r=0;for(let s=e,a=n-i;s<n;s+=i)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)a=V_(s,t[s],t[s+1],a);else for(s=n-i;s>=e;s-=i)a=V_(s,t[s],t[s+1],a);return a&&U_(a,a.next)&&(G_(a),a=a.next),a}function M_(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!U_(i,i.next)&&0!==O_(i.prev,i,i.next))i=i.next;else{if(G_(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function S_(t,e,n,i,r,s,a){if(!t)return;!a&&s&&function(t,e,n,i){let r=t;do{0===r.z&&(r.z=I_(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,s,a,o,l,c=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,i=n,o=0,e=0;e<c&&(o++,i=i.nextZ,i);e++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,s);let o,l,c=t;for(;t.prev!==t.next;)if(o=t.prev,l=t.next,s?T_(t,i,r,s):w_(t))e.push(o.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),G_(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?S_(t=A_(M_(t),e,n),e,n,i,r,s,2):2===a&&E_(t,e,n,i,r,s):S_(M_(t),e,n,i,r,s,1);break}}function w_(t){const e=t.prev,n=t,i=t.next;if(O_(e,n,i)>=0)return!1;const r=e.x,s=n.x,a=i.x,o=e.y,l=n.y,c=i.y,h=r<s?r<a?r:a:s<a?s:a,u=o<l?o<c?o:c:l<c?l:c,d=r>s?r>a?r:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c;let f=i.next;for(;f!==e;){if(f.x>=h&&f.x<=d&&f.y>=u&&f.y<=p&&D_(r,o,s,l,a,c,f.x,f.y)&&O_(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function T_(t,e,n,i){const r=t.prev,s=t,a=t.next;if(O_(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,h=r.y,u=s.y,d=a.y,p=o<l?o<c?o:c:l<c?l:c,f=h<u?h<d?h:d:u<d?u:d,m=o>l?o>c?o:c:l>c?l:c,g=h>u?h>d?h:d:u>d?u:d,_=I_(p,f,e,n,i),v=I_(m,g,e,n,i);let y=t.prevZ,x=t.nextZ;for(;y&&y.z>=_&&x&&x.z<=v;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==a&&D_(o,h,l,u,c,d,y.x,y.y)&&O_(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&D_(o,h,l,u,c,d,x.x,x.y)&&O_(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;y&&y.z>=_;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==a&&D_(o,h,l,u,c,d,y.x,y.y)&&O_(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&D_(o,h,l,u,c,d,x.x,x.y)&&O_(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function A_(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!U_(r,s)&&F_(r,i,i.next,s)&&z_(r,s)&&z_(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),G_(i),G_(i.next),i=t=s),i=i.next}while(i!==t);return M_(i)}function E_(t,e,n,i,r,s){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&N_(a,t)){let o=H_(a,t);return a=M_(a,a.next),o=M_(o,o.next),S_(a,e,n,i,r,s,0),void S_(o,e,n,i,r,s,0)}t=t.next}a=a.next}while(a!==t)}function C_(t,e){return t.x-e.x}function R_(t,e){const n=function(t,e){let n,i=e,r=-1/0;const s=t.x,a=t.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const t=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=s&&t>r&&(r=t,n=i.x<i.next.x?i:i.next,t===s))return n}i=i.next}while(i!==e);if(!n)return null;const o=n,l=n.x,c=n.y;let h,u=1/0;i=n;do{s>=i.x&&i.x>=l&&s!==i.x&&D_(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(h=Math.abs(a-i.y)/(s-i.x),z_(i,t)&&(h<u||h===u&&(i.x>n.x||i.x===n.x&&P_(n,i)))&&(n=i,u=h)),i=i.next}while(i!==o);return n}(t,e);if(!n)return e;const i=H_(n,t);return M_(i,i.next),M_(n,n.next)}function P_(t,e){return O_(t.prev,t,e.prev)<0&&O_(e.next,t,t.next)<0}function I_(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function L_(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function D_(t,e,n,i,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(i-o)>=(n-a)*(e-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function N_(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&F_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(z_(t,e)&&z_(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(O_(t.prev,t,e.prev)||O_(t,e.prev,e))||U_(t,e)&&O_(t.prev,t,t.next)>0&&O_(e.prev,e,e.next)>0)}function O_(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function U_(t,e){return t.x===e.x&&t.y===e.y}function F_(t,e,n,i){const r=B_(O_(t,e,n)),s=B_(O_(t,e,i)),a=B_(O_(n,i,t)),o=B_(O_(n,i,e));return r!==s&&a!==o||(!(0!==r||!k_(t,n,e))||(!(0!==s||!k_(t,i,e))||(!(0!==a||!k_(n,t,i))||!(0!==o||!k_(n,e,i)))))}function k_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function B_(t){return t>0?1:t<0?-1:0}function z_(t,e){return O_(t.prev,t,t.next)<0?O_(t,e,t.next)>=0&&O_(t,t.prev,e)>=0:O_(t,e,t.prev)<0||O_(t,t.next,e)<0}function H_(t,e){const n=new W_(t.i,t.x,t.y),i=new W_(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function V_(t,e,n,i){const r=new W_(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function G_(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function W_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class j_{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return j_.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];X_(t),q_(n,t);let s=t.length;e.forEach(X_);for(let o=0;o<e.length;o++)i.push(s),s+=e[o].length,q_(n,e[o]);const a=x_.triangulate(n,i);for(let o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}}function X_(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function q_(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Y_ extends vf{constructor(t=new y_([new Ju(.5,.5),new Ju(-.5,.5),new Ju(-.5,-.5),new Ju(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let a=0,o=t.length;a<o;a++){s(t[a])}function s(t){const s=[],a=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:1;let c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:h-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:$_;let g,_,v,y,x,b=!1;f&&(g=f.getSpacedPoints(o),b=!0,c=!1,_=f.computeFrenetFrames(o,!1),v=new Ad,y=new Ad,x=new Ad),c||(p=0,h=0,u=0,d=0);const M=t.extractPoints(a);let S=M.shape;const w=M.holes;if(!j_.isClockWise(S)){S=S.reverse();for(let t=0,e=w.length;t<e;t++){const e=w[t];j_.isClockWise(e)&&(w[t]=e.reverse())}}const T=j_.triangulateShape(S,w),A=S;for(let e=0,n=w.length;e<n;e++){const t=w[e];S=S.concat(t)}function E(t,e,n){return t.clone().addScaledVector(e,n)}const C=S.length,R=T.length;function P(t,e,n){let i,r,s;const a=t.x-e.x,o=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=a*a+o*o,u=a*c-o*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),p=e.x-o/u,f=e.y+a/u,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(a*c-o*l);i=p+a*m-t.x,r=f+o*m-t.y;const g=i*i+r*r;if(g<=2)return new Ju(i,r);s=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(c)&&(t=!0),t?(i=-o,r=a,s=Math.sqrt(h)):(i=a,r=o,s=Math.sqrt(h/2))}return new Ju(i/s,r/s)}const I=[];for(let e=0,n=A.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[e]=P(A[e],A[i],A[r]);const L=[];let D,N=I.concat();for(let e=0,n=w.length;e<n;e++){const t=w[e];D=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),D[e]=P(t[e],t[i],t[r]);L.push(D),N=N.concat(D)}for(let e=0;e<p;e++){const t=e/p,n=h*Math.cos(t*Math.PI/2),i=u*Math.sin(t*Math.PI/2)+d;for(let e=0,r=A.length;e<r;e++){const t=E(A[e],I[e],i);F(t.x,t.y,-n)}for(let e=0,r=w.length;e<r;e++){const t=w[e];D=L[e];for(let e=0,r=t.length;e<r;e++){const r=E(t[e],D[e],i);F(r.x,r.y,-n)}}}const O=u+d;for(let e=0;e<C;e++){const t=c?E(S[e],N[e],O):S[e];b?(y.copy(_.normals[0]).multiplyScalar(t.x),v.copy(_.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(y).add(v),F(x.x,x.y,x.z)):F(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<C;t++){const n=c?E(S[t],N[t],O):S[t];b?(y.copy(_.normals[e]).multiplyScalar(n.x),v.copy(_.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(y).add(v),F(x.x,x.y,x.z)):F(n.x,n.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=h*Math.cos(t*Math.PI/2),i=u*Math.sin(t*Math.PI/2)+d;for(let e=0,r=A.length;e<r;e++){const t=E(A[e],I[e],i);F(t.x,t.y,l+n)}for(let e=0,r=w.length;e<r;e++){const t=w[e];D=L[e];for(let e=0,r=t.length;e<r;e++){const r=E(t[e],D[e],i);b?F(r.x,r.y+g[o-1].y,g[o-1].x+n):F(r.x,r.y,l+n)}}}function U(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=o+2*p;t<n;t++){const n=C*t,s=C*(t+1);B(e+i+n,e+r+n,e+r+s,e+i+s)}}}function F(t,e,n){s.push(t),s.push(e),s.push(n)}function k(t,e,r){z(t),z(e),z(r);const s=i.length/3,a=m.generateTopUV(n,i,s-3,s-2,s-1);H(a[0]),H(a[1]),H(a[2])}function B(t,e,r,s){z(t),z(e),z(s),z(e),z(r),z(s);const a=i.length/3,o=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function z(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function H(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(c){let t=0,e=C*t;for(let n=0;n<R;n++){const t=T[n];k(t[2]+e,t[1]+e,t[0]+e)}t=o+2*p,e=C*t;for(let n=0;n<R;n++){const t=T[n];k(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<R;t++){const e=T[t];k(e[2],e[1],e[0])}for(let t=0;t<R;t++){const e=T[t];k(e[0]+C*o,e[1]+C*o,e[2]+C*o)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;U(A,e),e+=A.length;for(let n=0,i=w.length;n<i;n++){const t=w[n];U(t,e),e+=t.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new hf(i,3)),this.setAttribute("uv",new hf(r,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const e=t[i];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let r=0,s=t.shapes.length;r<s;r++){const i=e[t.shapes[r]];n.push(i)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new r_[i.type]).fromJSON(i)),new Y_(n,t.options)}}const $_={generateTopUV:function(t,e,n,i,r){const s=e[3*n],a=e[3*n+1],o=e[3*i],l=e[3*i+1],c=e[3*r],h=e[3*r+1];return[new Ju(s,a),new Ju(o,l),new Ju(c,h)]},generateSideWallUV:function(t,e,n,i,r,s){const a=e[3*n],o=e[3*n+1],l=e[3*n+2],c=e[3*i],h=e[3*i+1],u=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*s],g=e[3*s+1],_=e[3*s+2];return Math.abs(o-h)<Math.abs(a-c)?[new Ju(a,1-l),new Ju(c,1-u),new Ju(d,1-f),new Ju(m,1-_)]:[new Ju(o,1-l),new Ju(h,1-u),new Ju(p,1-f),new Ju(g,1-_)]}};class Z_ extends d_{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Z_(t.radius,t.detail)}}class K_ extends d_{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new K_(t.radius,t.detail)}}class J_ extends vf{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,h=t/a,u=e/o,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const t=g*u-s;for(let e=0;e<l;e++){const n=e*h-r;p.push(n,-t,0),f.push(0,0,1),m.push(e/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let t=0;t<a;t++){const e=t+l*g,n=t+l*(g+1),i=t+1+l*(g+1),r=t+1+l*g;d.push(e,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new hf(p,3)),this.setAttribute("normal",new hf(f,3)),this.setAttribute("uv",new hf(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new J_(t.width,t.height,t.widthSegments,t.heightSegments)}}class Q_ extends vf{constructor(t=.5,e=1,n=32,i=1,r=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n);const a=[],o=[],l=[],c=[];let h=t;const u=(e-t)/(i=Math.max(1,i)),d=new Ad,p=new Ju;for(let f=0;f<=i;f++){for(let t=0;t<=n;t++){const i=r+t/n*s;d.x=h*Math.cos(i),d.y=h*Math.sin(i),o.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,c.push(p.x,p.y)}h+=u}for(let f=0;f<i;f++){const t=f*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,s=i+n+1,o=i+n+2,l=i+1;a.push(r,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new hf(o,3)),this.setAttribute("normal",new hf(l,3)),this.setAttribute("uv",new hf(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Q_(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class tv extends vf{constructor(t=new y_([new Ju(0,.5),new Ju(-.5,-.5),new Ju(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(t))l(t);else for(let c=0;c<t.length;c++)l(t[c]),this.addGroup(a,o,c),a+=o,o=0;function l(t){const a=i.length/3,l=t.extractPoints(e);let c=l.shape;const h=l.holes;!1===j_.isClockWise(c)&&(c=c.reverse());for(let e=0,n=h.length;e<n;e++){const t=h[e];!0===j_.isClockWise(t)&&(h[e]=t.reverse())}const u=j_.triangulateShape(c,h);for(let e=0,n=h.length;e<n;e++){const t=h[e];c=c.concat(t)}for(let e=0,n=c.length;e<n;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),s.push(t.x,t.y)}for(let e=0,i=u.length;e<i;e++){const t=u[e],i=t[0]+a,r=t[1]+a,s=t[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new hf(i,3)),this.setAttribute("normal",new hf(r,3)),this.setAttribute("uv",new hf(s,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new tv(n,t.curveSegments)}}class ev extends vf{constructor(t=1,e=32,n=16,i=0,r=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],h=new Ad,u=new Ad,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],_=g/n;let v=0;0===g&&0===s?v=.5/e:g===n&&o===Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const o=n/e;h.x=-t*Math.cos(i+o*r)*Math.sin(s+_*a),h.y=t*Math.cos(s+_*a),h.z=t*Math.sin(i+o*r)*Math.sin(s+_*a),p.push(h.x,h.y,h.z),u.copy(h).normalize(),f.push(u.x,u.y,u.z),m.push(o+v,1-_),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=c[g][t+1],i=c[g][t],r=c[g+1][t],a=c[g+1][t+1];(0!==g||s>0)&&d.push(e,i,a),(g!==n-1||o<Math.PI)&&d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new hf(p,3)),this.setAttribute("normal",new hf(f,3)),this.setAttribute("uv",new hf(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ev(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class nv extends d_{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new nv(t.radius,t.detail)}}class iv extends vf{constructor(t=1,e=.4,n=12,i=48,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],o=[],l=[],c=new Ad,h=new Ad,u=new Ad;for(let d=0;d<=n;d++)for(let s=0;s<=i;s++){const p=s/i*r,f=d/n*Math.PI*2;h.x=(t+e*Math.cos(f))*Math.cos(p),h.y=(t+e*Math.cos(f))*Math.sin(p),h.z=e*Math.sin(f),a.push(h.x,h.y,h.z),c.x=t*Math.cos(p),c.y=t*Math.sin(p),u.subVectors(h,c).normalize(),o.push(u.x,u.y,u.z),l.push(s/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=i;t++){const e=(i+1)*d+t-1,n=(i+1)*(d-1)+t-1,r=(i+1)*(d-1)+t,a=(i+1)*d+t;s.push(e,n,a),s.push(n,r,a)}this.setIndex(s),this.setAttribute("position",new hf(a,3)),this.setAttribute("normal",new hf(o,3)),this.setAttribute("uv",new hf(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new iv(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class rv extends vf{constructor(t=1,e=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],h=new Ad,u=new Ad,d=new Ad,p=new Ad,f=new Ad,m=new Ad,g=new Ad;for(let v=0;v<=n;++v){const a=v/n*r*Math.PI*2;_(a,r,s,t,d),_(a+.01,r,s,t,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,s=-e*Math.cos(r),a=e*Math.sin(r);h.x=d.x+(s*g.x+a*f.x),h.y=d.y+(s*g.y+a*f.y),h.z=d.z+(s*g.z+a*f.z),o.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(v/n),c.push(t/i)}}for(let v=1;v<=n;v++)for(let t=1;t<=i;t++){const e=(i+1)*(v-1)+(t-1),n=(i+1)*v+(t-1),r=(i+1)*v+t,s=(i+1)*(v-1)+t;a.push(e,n,s),a.push(n,r,s)}function _(t,e,n,i,r){const s=Math.cos(t),a=Math.sin(t),o=n/e*t,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new hf(o,3)),this.setAttribute("normal",new hf(l,3)),this.setAttribute("uv",new hf(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rv(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class sv extends vf{constructor(t=new n_(new Ad(-1,-1,0),new Ad(-1,1,0),new Ad(1,1,0)),e=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const s=t.computeFrenetFrames(e,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new Ad,o=new Ad,l=new Ju;let c=new Ad;const h=[],u=[],d=[],p=[];function f(r){c=t.getPointAt(r/e,c);const l=s.normals[r],d=s.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),s=-Math.cos(e);o.x=s*l.x+r*d.x,o.y=s*l.y+r*d.y,o.z=s*l.z+r*d.z,o.normalize(),u.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,h.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)f(t);f(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),s=(i+1)*t+e,a=(i+1)*(t-1)+e;p.push(n,r,a),p.push(r,s,a)}}()}(),this.setIndex(p),this.setAttribute("position",new hf(h,3)),this.setAttribute("normal",new hf(u,3)),this.setAttribute("uv",new hf(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new sv((new r_[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class av extends vf{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new Ad,r=new Ad;if(null!==t.index){const s=t.attributes.position,a=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,l=o.length;t<l;++t){const l=o[t],c=l.start;for(let t=c,o=c+l.count;t<o;t+=3)for(let l=0;l<3;l++){const o=a.getX(t+l),c=a.getX(t+(l+1)%3);i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,c),!0===ov(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const s=t.attributes.position;for(let t=0,a=s.count/3;t<a;t++)for(let o=0;o<3;o++){const a=3*t+o,l=3*t+(o+1)%3;i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,l),!0===ov(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new hf(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function ov(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var lv=Object.freeze({__proto__:null,BoxGeometry:Lf,CapsuleGeometry:l_,CircleGeometry:c_,ConeGeometry:u_,CylinderGeometry:h_,DodecahedronGeometry:p_,EdgesGeometry:v_,ExtrudeGeometry:Y_,IcosahedronGeometry:Z_,LatheGeometry:o_,OctahedronGeometry:K_,PlaneGeometry:J_,PolyhedronGeometry:d_,RingGeometry:Q_,ShapeGeometry:tv,SphereGeometry:ev,TetrahedronGeometry:nv,TorusGeometry:iv,TorusKnotGeometry:rv,TubeGeometry:sv,WireframeGeometry:av});class cv extends Kp{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Yp(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class hv extends Ff{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class uv extends Kp{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Yp(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ju(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dp,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class dv extends uv{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ju(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xu(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yp(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yp(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yp(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class pv extends Kp{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Yp(16777215),this.specular=new Yp(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ju(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dp,this.combine=kc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class fv extends Kp{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Yp(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ju(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class mv extends Kp{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ju(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class gv extends Kp{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Yp(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ju(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dp,this.combine=kc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class _v extends Kp{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class vv extends Kp{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class yv extends Kp{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Yp(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ju(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class xv extends mg{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function bv(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Mv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sv(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n}function wv(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,a=0;a!==i;++s){const i=n[s]*e;for(let n=0;n!==e;++n)r[a++]=t[i+n]}return r}function Tv(t,e,n,i){let r=1,s=t[0];for(;void 0!==s&&void 0===s[i];)s=t[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(e.push(s.time),n.push(...a)),s=t[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(e.push(s.time),a.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(e.push(s.time),n.push(a)),s=t[r++]}while(void 0!==s)}const Av={convertArray:bv,isTypedArray:Mv,getKeyframeOrder:Sv,sortedArray:wv,flattenJSON:Tv,subclip:function(t,e,n,i,r=30){const s=t.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const t=s.tracks[l],e=t.getValueSize(),o=[],c=[];for(let s=0;s<t.times.length;++s){const a=t.times[s]*r;if(!(a<n||a>=i)){o.push(t.times[s]);for(let n=0;n<e;++n)c.push(t.values[s*e+n])}}0!==o.length&&(t.times=bv(o,t.times.constructor),t.values=bv(c,t.values.constructor),a.push(t))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let a=0;a<r;++a){const e=n.tracks[a],i=e.ValueTypeName;if("bool"===i||"string"===i)continue;const r=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===i}));if(void 0===r)continue;let o=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const h=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);const u=e.times.length-1;let d;if(s<=e.times[0]){const t=o,n=l-o;d=e.values.slice(t,n)}else if(s>=e.times[u]){const t=u*l+o,n=t+l-o;d=e.values.slice(t,n)}else{const t=e.createInterpolant(),n=o,i=l-o;t.evaluate(s),d=t.resultBuffer.slice(n,i)}if("quaternion"===i){(new Td).fromArray(d).normalize().conjugate().toArray(d)}const p=r.times.length;for(let t=0;t<p;++t){const e=t*h+c;if("quaternion"===i)Td.multiplyQuaternionsFlat(r.values,e,d,0,r.values,e);else{const t=h-2*c;for(let n=0;n<t;++n)r.values[e+n]-=d[n]}}}return t.blendMode=bu,t}};class Ev{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let s;n:{i:if(!(t<i)){for(let s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}s=e.length;break n}if(t>=r)break t;{const a=e[1];t<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}s=n,n=0}}for(;n<s;){const i=n+s>>>1;t<e[i]?s=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let s=0;s!==i;++s)e[s]=n[r+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Cv extends Ev{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_u,endingEnd:_u}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,s=t+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case vu:r=t,a=2*e-n;break;case yu:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case vu:s=t,o=2*n-e;break;case yu:s=1,o=n+i[1]-i[0];break;default:s=t-1,o=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,_=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f;for(let x=0;x!==a;++x)r[x]=g*s[c+x]+_*s[l+x]+v*s[o+x]+y*s[h+x];return r}}class Rv extends Ev{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,c=(n-e)/(i-e),h=1-c;for(let u=0;u!==a;++u)r[u]=s[l+u]*h+s[o+u]*c;return r}}class Pv extends Ev{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Iv{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bv(e,this.TimeBufferType),this.values=bv(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:bv(t.times,Array),values:bv(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Pv(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Rv(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Cv(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case fu:e=this.InterpolantFactoryMethodDiscrete;break;case mu:e=this.InterpolantFactoryMethodLinear;break;case gu:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fu;case this.InterpolantFactoryMethodLinear:return mu;case this.InterpolantFactoryMethodSmooth:return gu}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=n.slice(r,s),this.values=this.values.slice(r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(t=!1);let s=null;for(let a=0;a!==r;a++){const e=n[a];if("number"==typeof e&&isNaN(e)){t=!1;break}if(null!==s&&s>e){t=!1;break}s=e}if(void 0!==i&&Mv(i))for(let a=0,o=i.length;a!==o;++a){const e=i[a];if(isNaN(e)){t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===gu,r=t.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=t[a];if(o!==t[a+1]&&(1!==a||o!==t[0]))if(i)r=!0;else{const t=a*n,i=t-n,s=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[i+a]||n!==e[s+a]){r=!0;break}}}if(r){if(a!==s){t[s]=t[a];const i=a*n,r=s*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*n,i=s*n,a=0;a!==n;++a)e[i+a]=e[t+a];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Iv.prototype.TimeBufferType=Float32Array,Iv.prototype.ValueBufferType=Float32Array,Iv.prototype.DefaultInterpolation=mu;class Lv extends Iv{constructor(t,e,n){super(t,e,n)}}Lv.prototype.ValueTypeName="bool",Lv.prototype.ValueBufferType=Array,Lv.prototype.DefaultInterpolation=fu,Lv.prototype.InterpolantFactoryMethodLinear=void 0,Lv.prototype.InterpolantFactoryMethodSmooth=void 0;class Dv extends Iv{}Dv.prototype.ValueTypeName="color";class Nv extends Iv{}Nv.prototype.ValueTypeName="number";class Ov extends Ev{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-e)/(i-e);let l=t*a;for(let c=l+a;l!==c;l+=4)Td.slerpFlat(r,0,s,l-a,s,l,o);return r}}class Uv extends Iv{InterpolantFactoryMethodLinear(t){return new Ov(this.times,this.values,this.getValueSize(),t)}}Uv.prototype.ValueTypeName="quaternion",Uv.prototype.InterpolantFactoryMethodSmooth=void 0;class Fv extends Iv{constructor(t,e,n){super(t,e,n)}}Fv.prototype.ValueTypeName="string",Fv.prototype.ValueBufferType=Array,Fv.prototype.DefaultInterpolation=fu,Fv.prototype.InterpolantFactoryMethodLinear=void 0,Fv.prototype.InterpolantFactoryMethodSmooth=void 0;class kv extends Iv{}kv.prototype.ValueTypeName="vector";class Bv{constructor(t="",e=-1,n=[],i=xu){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=ju(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let s=0,a=n.length;s!==a;++s)e.push(zv(n[s]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,s=n.length;r!==s;++r)e.push(Iv.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,s=[];for(let a=0;a<r;a++){let t=[],o=[];t.push((a+r-1)%r,a,(a+1)%r),o.push(0,1,0);const l=Sv(t);t=wv(t,1,l),o=wv(o,1,l),i||0!==t[0]||(t.push(r),o.push(o[0])),s.push(new Nv(".morphTargetInfluences["+e[a].name+"]",t,o).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,o=t.length;a<o;a++){const e=t[a],n=e.name.match(r);if(n&&n.length>1){const t=n[1];let r=i[t];r||(i[t]=r=[]),r.push(e)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],e,n));return s}static parseAnimation(t,e){if(!t)return null;const n=function(t,e,n,i,r){if(0!==n.length){const s=[],a=[];Tv(n,s,a,i),0!==s.length&&r.push(new t(e,s,a))}},i=[],r=t.name||"default",s=t.fps||30,a=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let c=0;c<l.length;c++){const t=l[c].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let i=0;i<t[n].morphTargets.length;i++)e[t[n].morphTargets[i]]=-1;for(const r in e){const e=[],s=[];for(let i=0;i!==t[n].morphTargets.length;++i){const i=t[n];e.push(i.time),s.push(i.morphTarget===r?1:0)}i.push(new Nv(".morphTargetInfluence["+r+"]",e,s))}o=e.length*s}else{const r=".bones["+e[c].name+"]";n(kv,r+".position",t,"pos",i),n(Uv,r+".quaternion",t,"rot",i),n(kv,r+".scale",t,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zv(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nv;case"vector":case"vector2":case"vector3":case"vector4":return kv;case"color":return Dv;case"quaternion":return Uv;case"bool":case"boolean":return Lv;case"string":return Fv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Tv(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Hv={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Vv{constructor(t,e,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===s&&void 0!==i.onStart&&i.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const Gv=new Vv;class Wv{constructor(t){this.manager=void 0!==t?t:Gv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Wv.DEFAULT_MATERIAL_NAME="__DEFAULT";const jv={};class Xv extends Error{constructor(t,e){super(t),this.response=e}}class qv extends Wv{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Hv.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==jv[t])return void jv[t].push({onLoad:e,onProgress:n,onError:i});jv[t]=[],jv[t].push({onLoad:e,onProgress:n,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((e=>{if(200===e.status||0===e.status){if(e.status,"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=jv[t],i=e.body.getReader(),r=e.headers.get("X-File-Size")||e.headers.get("Content-Length"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(t){!function e(){i.read().then((({done:i,value:r})=>{if(i)t.close();else{o+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}}),(e=>{t.error(e)}))}()}});return new Response(l)}throw new Xv(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),n=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(n);return t.arrayBuffer().then((t=>i.decode(t)))}}})).then((e=>{Hv.add(t,e);const n=jv[t];delete jv[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}})).catch((e=>{const n=jv[t];if(void 0===n)throw this.manager.itemError(t),e;delete jv[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Yv extends Wv{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Hv.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const a=rd("img");function o(){c(),Hv.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}class $v extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Lm,a=new qv(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,(function(t){let n;try{n=r.parse(t)}catch(a){if(void 0===i)return;i(a)}void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:rh,s.wrapT=void 0!==n.wrapT?n.wrapT:rh,s.magFilter=void 0!==n.magFilter?n.magFilter:ch,s.minFilter=void 0!==n.minFilter?n.minFilter:ch,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(s.colorSpace=n.colorSpace),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=uh),1===n.mipmapCount&&(s.minFilter=ch),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,e&&e(s,n)}),n,i),s}}class Zv extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=new yd,s=new Yv(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class Kv extends Rp{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Yp(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(e.object.target=this.target.uuid),e}}class Jv extends Kv{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rp.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Yp(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const Qv=new np,ty=new Ad,ey=new Ad;class ny{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ju(512,512),this.map=null,this.mapPass=null,this.matrix=new np,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Km,this._frameExtents=new Ju(1,1),this._viewportCount=1,this._viewports=[new xd(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;ty.setFromMatrixPosition(t.matrixWorld),e.position.copy(ty),ey.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(ey),e.updateMatrixWorld(),Qv.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Qv)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class iy extends ny{constructor(){super(new Vf(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*Wu*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class ry extends Kv{constructor(t,e,n=0,i=Math.PI/3,r=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rp.DEFAULT_UP),this.updateMatrix(),this.target=new Rp,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new iy}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const sy=new np,ay=new Ad,oy=new Ad;class ly extends ny{constructor(){super(new Vf(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ju(4,2),this._viewportCount=6,this._viewports=[new xd(2,1,1,1),new xd(0,1,1,1),new xd(3,1,1,1),new xd(1,1,1,1),new xd(3,0,1,1),new xd(1,0,1,1)],this._cubeDirections=[new Ad(1,0,0),new Ad(-1,0,0),new Ad(0,0,1),new Ad(0,0,-1),new Ad(0,1,0),new Ad(0,-1,0)],this._cubeUps=[new Ad(0,1,0),new Ad(0,1,0),new Ad(0,1,0),new Ad(0,1,0),new Ad(0,0,1),new Ad(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),ay.setFromMatrixPosition(t.matrixWorld),n.position.copy(ay),oy.copy(n.position),oy.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(oy),n.updateMatrixWorld(),i.makeTranslation(-ay.x,-ay.y,-ay.z),sy.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sy)}}class cy extends Kv{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new ly}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class hy extends kf{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,a=i+e,o=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,a-=e*this.view.offsetY,o=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}class uy extends ny{constructor(){super(new hy(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class dy extends Kv{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rp.DEFAULT_UP),this.updateMatrix(),this.target=new Rp,this.shadow=new uy}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class py extends Kv{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class fy extends Kv{constructor(t,e,n=10,i=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class my{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Ad)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*i),e.addScaledVector(s[2],.488603*r),e.addScaledVector(s[3],.488603*n),e.addScaledVector(s[4],n*i*1.092548),e.addScaledVector(s[5],i*r*1.092548),e.addScaledVector(s[6],.315392*(3*r*r-1)),e.addScaledVector(s[7],n*r*1.092548),e.addScaledVector(s[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*i),e.addScaledVector(s[2],1.023328*r),e.addScaledVector(s[3],1.023328*n),e.addScaledVector(s[4],.858086*n*i),e.addScaledVector(s[5],.858086*i*r),e.addScaledVector(s[6],.743125*r*r-.247708),e.addScaledVector(s[7],.858086*n*r),e.addScaledVector(s[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}class gy extends Kv{constructor(t=new my,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class _y extends Wv{constructor(t){super(t),this.textures={}}load(t,e,n,i){const r=this,s=new qv(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(s){i&&i(s),r.manager.itemError(t)}}),n,i)}parse(t){const e=this.textures;function n(t){return e[t],e[t]}const i=this.createMaterialFromType(t.type);if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new Yp).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(i.dispersion=t.dispersion),void 0!==t.iridescence&&(i.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(i.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(i.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(i.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(i.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(i.depthFunc=t.depthFunc),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(i.blendSrc=t.blendSrc),void 0!==t.blendDst&&(i.blendDst=t.blendDst),void 0!==t.blendEquation&&(i.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(i.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(i.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(i.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(i.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),void 0!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(i.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const r in t.uniforms){const e=t.uniforms[r];switch(i.uniforms[r]={},e.type){case"t":i.uniforms[r].value=n(e.value);break;case"c":i.uniforms[r].value=(new Yp).setHex(e.value);break;case"v2":i.uniforms[r].value=(new Ju).fromArray(e.value);break;case"v3":i.uniforms[r].value=(new Ad).fromArray(e.value);break;case"v4":i.uniforms[r].value=(new xd).fromArray(e.value);break;case"m3":i.uniforms[r].value=(new Qu).fromArray(e.value);break;case"m4":i.uniforms[r].value=(new np).fromArray(e.value);break;default:i.uniforms[r].value=e.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(i.glslVersion=t.glslVersion),void 0!==t.extensions)for(const r in t.extensions)i.extensions[r]=t.extensions[r];if(void 0!==t.lights&&(i.lights=t.lights),void 0!==t.clipping&&(i.clipping=t.clipping),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new Ju).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapRotation&&i.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Ju).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(i.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(i.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return _y.createMaterialFromType(t)}static createMaterialFromType(t){return new{ShadowMaterial:cv,SpriteMaterial:nm,RawShaderMaterial:hv,ShaderMaterial:Ff,PointsMaterial:Rg,MeshPhysicalMaterial:dv,MeshStandardMaterial:uv,MeshPhongMaterial:pv,MeshToonMaterial:fv,MeshNormalMaterial:mv,MeshLambertMaterial:gv,MeshDepthMaterial:_v,MeshDistanceMaterial:vv,MeshBasicMaterial:Jp,MeshMatcapMaterial:yv,LineDashedMaterial:xv,LineBasicMaterial:mg,Material:Kp}[t]}}class vy{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(n){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class yy extends vf{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class xy extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new qv(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(s){i&&i(s),r.manager.itemError(t)}}),n,i)}parse(t){const e={},n={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],s=function(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers,r=i[e],s=new Uint32Array(r).buffer;return n[e]=s,s}(t,r.buffer),a=id(r.type,s),o=new Qf(a,r.stride);return o.uuid=r.uuid,e[i]=o,o}const r=t.isInstancedBufferGeometry?new yy:new vf,s=t.data.index;if(void 0!==s){const t=id(s.type,s.array);r.setIndex(new of(t,1))}const a=t.data.attributes;for(const h in a){const e=a[h];let n;if(e.isInterleavedBufferAttribute){const r=i(t.data,e.data);n=new em(r,e.itemSize,e.offset,e.normalized)}else{const t=id(e.type,e.array);n=new(e.isInstancedBufferAttribute?Um:of)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),void 0!==e.usage&&n.setUsage(e.usage),r.setAttribute(h,n)}const o=t.data.morphAttributes;if(o)for(const h in o){const e=o[h],n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];let a;if(s.isInterleavedBufferAttribute){const e=i(t.data,s.data);a=new em(e,s.itemSize,s.offset,s.normalized)}else{const t=id(s.type,s.array);a=new of(t,s.itemSize,s.normalized)}void 0!==s.name&&(a.name=s.name),n.push(a)}r.morphAttributes[h]=n}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let h=0,u=l.length;h!==u;++h){const t=l[h];r.addGroup(t.start,t.count,t.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new Ad;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new qd(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}const by={UVMapping:Kc,CubeReflectionMapping:Jc,CubeRefractionMapping:Qc,EquirectangularReflectionMapping:th,EquirectangularRefractionMapping:eh,CubeUVReflectionMapping:nh},My={RepeatWrapping:ih,ClampToEdgeWrapping:rh,MirroredRepeatWrapping:sh},Sy={NearestFilter:ah,NearestMipmapNearestFilter:oh,NearestMipmapLinearFilter:lh,LinearFilter:ch,LinearMipmapNearestFilter:hh,LinearMipmapLinearFilter:uh};class wy extends Wv{constructor(t){super(t),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Hv.get(t);if(void 0!==s)return r.manager.itemStart(t),s.then?void s.then((n=>{e&&e(n),r.manager.itemEnd(t)})).catch((t=>{i&&i(t)})):(setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const o=fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){return Hv.add(t,n),e&&e(n),r.manager.itemEnd(t),n})).catch((function(e){i&&i(e),Hv.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)}));Hv.add(t,o),r.manager.itemStart(t)}}let Ty;class Ay{static getContext(){return void 0===Ty&&(Ty=new(window.AudioContext||window.webkitAudioContext)),Ty}static setContext(t){Ty=t}}const Ey=new np,Cy=new np,Ry=new np;class Py extends Vf{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class Iy{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ly(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Ly();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Ly(){return performance.now()}const Dy=new Ad,Ny=new Td,Oy=new Ad,Uy=new Ad;class Fy extends Rp{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return;if(!1===this.hasPlaybackControl)return;this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1!==this.hasPlaybackControl&&this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),"buffer"!==t.sourceType||(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice()),this}clone(t){return new this.constructor(this.listener).copy(this,t)}}const ky=new Ad,By=new Td,zy=new Ad,Hy=new Ad;class Vy{constructor(t,e,n){let i,r,s;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==i;++t)n[r+t]=n[t];s=e}else{s+=e;const t=e/s;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let o=e,l=e+e;o!==l;++o)if(n[o]!==n[o+e]){a.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,s=i;r!==s;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)t[e+s]=t[n+s]}_slerp(t,e,n,i){Td.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const s=this._workIndex*r;Td.multiplyQuaternionsFlat(t,s,t,e,t,n),Td.slerpFlat(t,e,t,e,t,s,i)}_lerp(t,e,n,i,r){const s=1-i;for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]*s+t[n+a]*i}}_lerpAdditive(t,e,n,i,r){for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]+t[n+s]*i}}}const Gy="\\[\\]\\.:\\/",Wy=new RegExp("["+Gy+"]","g"),jy="[^"+Gy+"]",Xy="[^"+Gy.replace("\\.","")+"]",qy=/((?:WC+[\/:])*)/.source.replace("WC",jy),Yy=/(WCOD+)?/.source.replace("WCOD",Xy),$y=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jy),Zy=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jy),Ky=new RegExp("^"+qy+Yy+$y+Zy+"$"),Jy=["material","materials","bones","map"];class Qy{constructor(t,e,n){this.path=e,this.parsedPath=n||Qy.parseTrackName(e),this.node=Qy.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Qy.Composite(t,e,n):new Qy(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Wy,"")}static parseTrackName(t){const e=Ky.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==Jy.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const s=n(r.children);if(s)return s}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Qy.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return;if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return;if(!t.material.map)return;t=t.material.map;break;default:if(void 0===t[n])return;t=t[n]}if(void 0!==i){if(void 0===t[i])return;t=t[i]}}const s=t[i];if(void 0===s){e.nodeName;return}let a=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?a=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qy.Composite=class{constructor(t,e,n){const i=n||Qy.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Qy.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Qy.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Qy.prototype.GetterByBindingType=[Qy.prototype._getValue_direct,Qy.prototype._getValue_array,Qy.prototype._getValue_arrayElement,Qy.prototype._getValue_toArray],Qy.prototype.SetterByBindingTypeAndVersioning=[[Qy.prototype._setValue_direct,Qy.prototype._setValue_direct_setNeedsUpdate,Qy.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qy.prototype._setValue_array,Qy.prototype._setValue_array_setNeedsUpdate,Qy.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qy.prototype._setValue_arrayElement,Qy.prototype._setValue_arrayElement_setNeedsUpdate,Qy.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qy.prototype._setValue_fromArray,Qy.prototype._setValue_fromArray_setNeedsUpdate,Qy.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tx{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,s=r.length,a=new Array(s),o={endingStart:_u,endingEnd:_u};for(let l=0;l!==s;++l){const t=r[l].createInterpolant(null);a[l]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,s=n/i;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=t/s,l[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;i<0||0===n?e=0:(this._startTime=null,e=n*i)}e*=this._updateTimeScale(t);const s=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===bu)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(s),e[n].accumulateAdditive(a);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(s),e[n].accumulate(i,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const s=2202===n;if(0===t)return-1===r||!s||1&~r?i:e-i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&!(1&~r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=vu,i.endingEnd=vu):(i.endingStart=t?this.zeroSlopeAtStart?vu:_u:yu,i.endingEnd=e?this.zeroSlopeAtEnd?vu:_u:yu)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=e,a[1]=r+t,o[1]=n,this}}const ex=new Float32Array(1);class nx extends zu{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,a=t._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let h=0;h!==r;++h){const t=i[h],r=t.name;let l=c[r];if(void 0!==l)++l.referenceCount,s[h]=l;else{if(l=s[h],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}const i=e&&e._propertyBindings[h].binding.parsedPath;l=new Vy(Qy.create(n,r,i),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),s[h]=l}a[h].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const t=e[n];0==--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];void 0===s&&(s={},i[e]=s),s[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,a=s[i],o=e[e.length-1],l=t._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete a[r],0===Object.keys(a).length&&delete s[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Rv(new Float32Array(2),new Float32Array(2),1,ex),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let s="string"==typeof t?Bv.findByName(i,t):t;const a=null!==s?s.uuid:t,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:xu),void 0!==o){const t=o.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new tx(this,s,e,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"==typeof t?Bv.findByName(n,t):t,s=r?r.uuid:t,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1;for(let l=0;l!==n;++l){e[l]._update(i,t,r,s)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,s=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,e[r]=s,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const t=n[r].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const r in i){const t=i[r];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class ix{constructor(t){this.value=t}clone(){return new ix(void 0===this.value.clone?this.value:this.value.clone())}}let rx=0;const sx=new np;function ax(t,e){return t.distance-e.distance}function ox(t,e,n,i){let r=!0;if(t.layers.test(e.layers)){!1===t.raycast(e,n)&&(r=!1)}if(!0===r&&!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)ox(i[t],e,n,!0)}}class lx{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Xu(this.phi,t,Math.PI-t),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Xu(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class cx{constructor(t,e,n,i){cx.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==t&&this.set(t,e,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,i){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=i,this}}const hx=new Ju;const ux=new Ad,dx=new Ad;const px=new Ad;const fx=new Ad,mx=new np,gx=new np;function _x(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(..._x(t.children[n]));return e}const vx=new Ad,yx=new Yp,xx=new Yp;const bx=new Ad,Mx=new Ad,Sx=new Ad;const wx=new Ad,Tx=new kf;class Ax extends Eg{constructor(t){const e=new vf,n=new mg({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};function a(t,e){o(t),o(e)}function o(t){i.push(0,0,0),r.push(0,0,0),void 0===s[t]&&(s[t]=[]),s[t].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),e.setAttribute("position",new hf(i,3)),e.setAttribute("color",new hf(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new Yp(16755200),c=new Yp(16711680),h=new Yp(43775),u=new Yp(16777215),d=new Yp(3355443);this.setColors(l,c,h,u,d)}setColors(t,e,n,i,r){const s=this.geometry.getAttribute("color");s.setXYZ(0,t.r,t.g,t.b),s.setXYZ(1,t.r,t.g,t.b),s.setXYZ(2,t.r,t.g,t.b),s.setXYZ(3,t.r,t.g,t.b),s.setXYZ(4,t.r,t.g,t.b),s.setXYZ(5,t.r,t.g,t.b),s.setXYZ(6,t.r,t.g,t.b),s.setXYZ(7,t.r,t.g,t.b),s.setXYZ(8,t.r,t.g,t.b),s.setXYZ(9,t.r,t.g,t.b),s.setXYZ(10,t.r,t.g,t.b),s.setXYZ(11,t.r,t.g,t.b),s.setXYZ(12,t.r,t.g,t.b),s.setXYZ(13,t.r,t.g,t.b),s.setXYZ(14,t.r,t.g,t.b),s.setXYZ(15,t.r,t.g,t.b),s.setXYZ(16,t.r,t.g,t.b),s.setXYZ(17,t.r,t.g,t.b),s.setXYZ(18,t.r,t.g,t.b),s.setXYZ(19,t.r,t.g,t.b),s.setXYZ(20,t.r,t.g,t.b),s.setXYZ(21,t.r,t.g,t.b),s.setXYZ(22,t.r,t.g,t.b),s.setXYZ(23,t.r,t.g,t.b),s.setXYZ(24,e.r,e.g,e.b),s.setXYZ(25,e.r,e.g,e.b),s.setXYZ(26,e.r,e.g,e.b),s.setXYZ(27,e.r,e.g,e.b),s.setXYZ(28,e.r,e.g,e.b),s.setXYZ(29,e.r,e.g,e.b),s.setXYZ(30,e.r,e.g,e.b),s.setXYZ(31,e.r,e.g,e.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;Tx.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const n=this.camera.coordinateSystem===ku?-1:0;Ex("c",e,t,Tx,0,0,n),Ex("t",e,t,Tx,0,0,1),Ex("n1",e,t,Tx,-1,-1,n),Ex("n2",e,t,Tx,1,-1,n),Ex("n3",e,t,Tx,-1,1,n),Ex("n4",e,t,Tx,1,1,n),Ex("f1",e,t,Tx,-1,-1,1),Ex("f2",e,t,Tx,1,-1,1),Ex("f3",e,t,Tx,-1,1,1),Ex("f4",e,t,Tx,1,1,1),Ex("u1",e,t,Tx,.7,1.1,n),Ex("u2",e,t,Tx,-.7,1.1,n),Ex("u3",e,t,Tx,0,2,n),Ex("cf1",e,t,Tx,-1,0,1),Ex("cf2",e,t,Tx,1,0,1),Ex("cf3",e,t,Tx,0,-1,1),Ex("cf4",e,t,Tx,0,1,1),Ex("cn1",e,t,Tx,-1,0,n),Ex("cn2",e,t,Tx,1,0,n),Ex("cn3",e,t,Tx,0,-1,n),Ex("cn4",e,t,Tx,0,1,n),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ex(t,e,n,i,r,s,a){wx.set(r,s,a).unproject(i);const o=e[t];if(void 0!==o){const t=n.getAttribute("position");for(let e=0,n=o.length;e<n;e++)t.setXYZ(o[e],wx.x,wx.y,wx.z)}}const Cx=new Rd;const Rx=new Ad;let Px,Ix;class Lx extends zu{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Dx(t,e,n,i){const r=function(t){switch(t){case dh:case ph:return{byteLength:1,components:1};case mh:case fh:case yh:return{byteLength:2,components:1};case xh:case bh:return{byteLength:2,components:4};case _h:case gh:case vh:return{byteLength:4,components:1};case Sh:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}(i);switch(n){case wh:case Eh:return t*e;case Ch:return t*e*2;case Ih:case Lh:return t*e/r.components*r.byteLength;case Dh:case Nh:return t*e*2/r.components*r.byteLength;case Th:return t*e*3/r.components*r.byteLength;case Ah:case Oh:return t*e*4/r.components*r.byteLength;case Uh:case Fh:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case kh:case Bh:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Hh:case Gh:return Math.max(t,16)*Math.max(e,8)/4;case zh:case Vh:return Math.max(t,8)*Math.max(e,8)/2;case Wh:case jh:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Xh:case qh:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Yh:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case $h:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Zh:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Kh:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case Jh:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Qh:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case tu:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case eu:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case nu:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case iu:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case ru:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case su:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case au:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case ou:case lu:case cu:return Math.ceil(t/4)*Math.ceil(e/4)*16;case hu:case uu:return Math.ceil(t/4)*Math.ceil(e/4)*8;case du:case pu:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Nx(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Ox(t){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const t=e.get(n);return void((!t||t.version<n.version)&&e.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=e.get(n);if(void 0===r)e.set(n,function(e,n){const i=e.array,r=e.usage,s=i.byteLength,a=t.createBuffer();let o;if(t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback(),i instanceof Float32Array)o=t.FLOAT;else if(i instanceof Uint16Array)o=e.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(i instanceof Int16Array)o=t.SHORT;else if(i instanceof Uint32Array)o=t.UNSIGNED_INT;else if(i instanceof Int32Array)o=t.INT;else if(i instanceof Int8Array)o=t.BYTE;else if(i instanceof Uint8Array)o=t.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=t.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version,size:s}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,n,i){const r=n.array,s=n.updateRanges;if(t.bindBuffer(i,e),0===s.length)t.bufferSubData(i,0,r);else{s.sort(((t,e)=>t.start-e.start));let e=0;for(let t=1;t<s.length;t++){const n=s[e],i=s[t];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++e,s[e]=i)}s.length=e+1;for(let n=0,a=s.length;n<a;n++){const e=s[n];t.bufferSubData(i,e.start*r.BYTES_PER_ELEMENT,r,e.start,e.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ic}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=ic));const Ux={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Fx={common:{diffuse:{value:new Yp(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qu},alphaMap:{value:null},alphaMapTransform:{value:new Qu},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qu}},envmap:{envMap:{value:null},envMapRotation:{value:new Qu},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qu}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qu}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qu},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qu},normalScale:{value:new Ju(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qu},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qu}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qu}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qu}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yp(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yp(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qu},alphaTest:{value:0},uvTransform:{value:new Qu}},sprite:{diffuse:{value:new Yp(16777215)},opacity:{value:1},center:{value:new Ju(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qu},alphaMap:{value:null},alphaMapTransform:{value:new Qu},alphaTest:{value:0}}},kx={basic:{uniforms:Nf([Fx.common,Fx.specularmap,Fx.envmap,Fx.aomap,Fx.lightmap,Fx.fog]),vertexShader:Ux.meshbasic_vert,fragmentShader:Ux.meshbasic_frag},lambert:{uniforms:Nf([Fx.common,Fx.specularmap,Fx.envmap,Fx.aomap,Fx.lightmap,Fx.emissivemap,Fx.bumpmap,Fx.normalmap,Fx.displacementmap,Fx.fog,Fx.lights,{emissive:{value:new Yp(0)}}]),vertexShader:Ux.meshlambert_vert,fragmentShader:Ux.meshlambert_frag},phong:{uniforms:Nf([Fx.common,Fx.specularmap,Fx.envmap,Fx.aomap,Fx.lightmap,Fx.emissivemap,Fx.bumpmap,Fx.normalmap,Fx.displacementmap,Fx.fog,Fx.lights,{emissive:{value:new Yp(0)},specular:{value:new Yp(1118481)},shininess:{value:30}}]),vertexShader:Ux.meshphong_vert,fragmentShader:Ux.meshphong_frag},standard:{uniforms:Nf([Fx.common,Fx.envmap,Fx.aomap,Fx.lightmap,Fx.emissivemap,Fx.bumpmap,Fx.normalmap,Fx.displacementmap,Fx.roughnessmap,Fx.metalnessmap,Fx.fog,Fx.lights,{emissive:{value:new Yp(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ux.meshphysical_vert,fragmentShader:Ux.meshphysical_frag},toon:{uniforms:Nf([Fx.common,Fx.aomap,Fx.lightmap,Fx.emissivemap,Fx.bumpmap,Fx.normalmap,Fx.displacementmap,Fx.gradientmap,Fx.fog,Fx.lights,{emissive:{value:new Yp(0)}}]),vertexShader:Ux.meshtoon_vert,fragmentShader:Ux.meshtoon_frag},matcap:{uniforms:Nf([Fx.common,Fx.bumpmap,Fx.normalmap,Fx.displacementmap,Fx.fog,{matcap:{value:null}}]),vertexShader:Ux.meshmatcap_vert,fragmentShader:Ux.meshmatcap_frag},points:{uniforms:Nf([Fx.points,Fx.fog]),vertexShader:Ux.points_vert,fragmentShader:Ux.points_frag},dashed:{uniforms:Nf([Fx.common,Fx.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ux.linedashed_vert,fragmentShader:Ux.linedashed_frag},depth:{uniforms:Nf([Fx.common,Fx.displacementmap]),vertexShader:Ux.depth_vert,fragmentShader:Ux.depth_frag},normal:{uniforms:Nf([Fx.common,Fx.bumpmap,Fx.normalmap,Fx.displacementmap,{opacity:{value:1}}]),vertexShader:Ux.meshnormal_vert,fragmentShader:Ux.meshnormal_frag},sprite:{uniforms:Nf([Fx.sprite,Fx.fog]),vertexShader:Ux.sprite_vert,fragmentShader:Ux.sprite_frag},background:{uniforms:{uvTransform:{value:new Qu},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ux.background_vert,fragmentShader:Ux.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qu}},vertexShader:Ux.backgroundCube_vert,fragmentShader:Ux.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ux.cube_vert,fragmentShader:Ux.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ux.equirect_vert,fragmentShader:Ux.equirect_frag},distanceRGBA:{uniforms:Nf([Fx.common,Fx.displacementmap,{referencePosition:{value:new Ad},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ux.distanceRGBA_vert,fragmentShader:Ux.distanceRGBA_frag},shadow:{uniforms:Nf([Fx.lights,Fx.fog,{color:{value:new Yp(0)},opacity:{value:1}}]),vertexShader:Ux.shadow_vert,fragmentShader:Ux.shadow_frag}};kx.physical={uniforms:Nf([kx.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qu},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qu},clearcoatNormalScale:{value:new Ju(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qu},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qu},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qu},sheen:{value:0},sheenColor:{value:new Yp(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qu},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qu},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qu},transmissionSamplerSize:{value:new Ju},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qu},attenuationDistance:{value:0},attenuationColor:{value:new Yp(0)},specularColor:{value:new Yp(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qu},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qu},anisotropyVector:{value:new Ju},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qu}}]),vertexShader:Ux.meshphysical_vert,fragmentShader:Ux.meshphysical_frag};const Bx={r:0,b:0,g:0},zx=new dp,Hx=new np;function Vx(t,e,n,i,r,s,a){const o=new Yp(0);let l,c,h=!0===s?0:1,u=null,d=0,p=null;function f(t){let i=!0===t.isScene?t.background:null;if(i&&i.isTexture){i=(t.backgroundBlurriness>0?n:e).get(i)}return i}function m(e,n){e.getRGB(Bx,Of(t)),i.buffers.color.setClear(Bx.r,Bx.g,Bx.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),h=e,m(o,h)},getClearAlpha:function(){return h},setClearAlpha:function(t){h=t,m(o,h)},render:function(e){let n=!1;const r=f(e);null===r?m(o,h):r&&r.isColor&&(m(r,1),n=!0);const s=t.xr.getEnvironmentBlendMode();"additive"===s?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===s&&i.buffers.color.setClear(0,0,0,0,a),(t.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(e,n){const i=f(n);i&&(i.isCubeTexture||i.mapping===nh)?(void 0===c&&(c=new Pf(new Lf(1,1,1),new Ff({name:"BackgroundCubeMaterial",uniforms:Df(kx.backgroundCube.uniforms),vertexShader:kx.backgroundCube.vertexShader,fragmentShader:kx.backgroundCube.fragmentShader,side:hc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),zx.copy(n.backgroundRotation),zx.x*=-1,zx.y*=-1,zx.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(zx.y*=-1,zx.z*=-1),c.material.uniforms.envMap.value=i,c.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Hx.makeRotationFromEuler(zx)),c.material.toneMapped=hd.getTransfer(i.colorSpace)!==Au,u===i&&d===i.version&&p===t.toneMapping||(c.material.needsUpdate=!0,u=i,d=i.version,p=t.toneMapping),c.layers.enableAll(),e.unshift(c,c.geometry,c.material,0,0,null)):i&&i.isTexture&&(void 0===l&&(l=new Pf(new J_(2,2),new Ff({name:"BackgroundMaterial",uniforms:Df(kx.background.uniforms),vertexShader:kx.background.vertexShader,fragmentShader:kx.background.fragmentShader,side:cc,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=i,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=hd.getTransfer(i.colorSpace)!==Au,!0===i.matrixAutoUpdate&&i.updateMatrix(),l.material.uniforms.uvTransform.value.copy(i.matrix),u===i&&d===i.version&&p===t.toneMapping||(l.material.needsUpdate=!0,u=i,d=i.version,p=t.toneMapping),l.layers.enableAll(),e.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Gx(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=c(null);let s=r,a=!1;function o(e){return t.bindVertexArray(e)}function l(e){return t.deleteVertexArray(e)}function c(t){const e=[],i=[],r=[];for(let s=0;s<n;s++)e[s]=0,i[s]=0,r[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:r,object:t,attributes:{},index:null}}function h(){const t=s.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function u(t){d(t,0)}function d(e,n){const i=s.newAttributes,r=s.enabledAttributes,a=s.attributeDivisors;i[e]=1,0===r[e]&&(t.enableVertexAttribArray(e),r[e]=1),a[e]!==n&&(t.vertexAttribDivisor(e,n),a[e]=n)}function p(){const e=s.newAttributes,n=s.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function f(e,n,i,r,s,a,o){!0===o?t.vertexAttribIPointer(e,n,i,s,a):t.vertexAttribPointer(e,n,i,r,s,a)}function m(){g(),a=!0,s!==r&&(s=r,o(s.object))}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,m,g){let _=!1;const v=function(e,n,r){const s=!0===r.wireframe;let a=i[e.id];void 0===a&&(a={},i[e.id]=a);let o=a[n.id];void 0===o&&(o={},a[n.id]=o);let l=o[s];void 0===l&&(l=c(t.createVertexArray()),o[s]=l);return l}(m,l,r);s!==v&&(s=v,o(s.object)),_=function(t,e,n,i){const r=s.attributes,a=e.attributes;let o=0;const l=n.getAttributes();for(const s in l){if(l[s].location>=0){const e=r[s];let n=a[s];if(void 0===n&&("instanceMatrix"===s&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===s&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;o++}}return s.attributesNum!==o||s.index!==i}(n,m,l,g),_&&function(t,e,n,i){const r={},a=e.attributes;let o=0;const l=n.getAttributes();for(const s in l){if(l[s].location>=0){let e=a[s];void 0===e&&("instanceMatrix"===s&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===s&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),r[s]=n,o++}}s.attributes=r,s.attributesNum=o,s.index=i}(n,m,l,g),null!==g&&e.update(g,t.ELEMENT_ARRAY_BUFFER),(_||a)&&(a=!1,function(n,i,r,s){h();const a=s.attributes,o=r.getAttributes(),l=i.defaultAttributeValues;for(const c in o){const i=o[c];if(i.location>=0){let r=a[c];if(void 0===r&&("instanceMatrix"===c&&n.instanceMatrix&&(r=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(r=n.instanceColor)),void 0!==r){const a=r.normalized,o=r.itemSize,l=e.get(r);if(void 0===l)continue;const c=l.buffer,h=l.type,p=l.bytesPerElement,m=h===t.INT||h===t.UNSIGNED_INT||r.gpuType===gh;if(r.isInterleavedBufferAttribute){const e=r.data,l=e.stride,g=r.offset;if(e.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)d(i.location+t,e.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=e.meshPerAttribute*e.count)}else for(let t=0;t<i.locationSize;t++)u(i.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<i.locationSize;t++)f(i.location+t,o/i.locationSize,h,a,l*p,(g+o/i.locationSize*t)*p,m)}else{if(r.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)d(i.location+t,r.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let t=0;t<i.locationSize;t++)u(i.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<i.locationSize;t++)f(i.location+t,o/i.locationSize,h,a,o*p,o/i.locationSize*t*p,m)}}else if(void 0!==l){const e=l[c];if(void 0!==e)switch(e.length){case 2:t.vertexAttrib2fv(i.location,e);break;case 3:t.vertexAttrib3fv(i.location,e);break;case 4:t.vertexAttrib4fv(i.location,e);break;default:t.vertexAttrib1fv(i.location,e)}}}}p()}(n,r,l,m),null!==g&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const t in i){const e=i[t];for(const t in e){const n=e[t];for(const t in n)l(n[t].object),delete n[t];delete e[t]}delete i[t]}},releaseStatesOfGeometry:function(t){if(void 0===i[t.id])return;const e=i[t.id];for(const n in e){const t=e[n];for(const e in t)l(t[e].object),delete t[e];delete e[n]}delete i[t.id]},releaseStatesOfProgram:function(t){for(const e in i){const n=i[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)l(r[t].object),delete r[t];delete n[t.id]}},initAttributes:h,enableAttribute:u,disableUnusedAttributes:p}}function Wx(t,e,n){let i;function r(e,r,s){0!==s&&(t.drawArraysInstanced(i,e,r,s),n.update(r,i,s))}this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(t,r,s){if(0===s)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,t,0,r,0,s);let a=0;for(let e=0;e<s;e++)a+=r[e];n.update(a,i,1)},this.renderMultiDrawInstances=function(t,s,a,o){if(0===a)return;const l=e.get("WEBGL_multi_draw");if(null===l)for(let e=0;e<t.length;e++)r(t[e],s[e],o[e]);else{l.multiDrawArraysInstancedWEBGL(i,t,0,s,0,o,0,a);let e=0;for(let t=0;t<a;t++)e+=s[t]*o[t];n.update(e,i,1)}}}function jx(t,e,n,i){let r;function s(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const o=s(a);o!==a&&(a=o);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&e.has("EXT_clip_control"),h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,textureFormatReadable:function(e){return e===Ah||i.convert(e)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===yh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(n!==dh&&i.convert(n)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==vh&&!r)},precision:a,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function Xx(t){const e=this;let n=null,i=0,r=!1,s=!1;const a=new Ym,o=new Qu,l={value:null,needsUpdate:!1};function c(t,n,i,r){const s=null!==t?t.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const e=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=i;n!==s;++n,l+=4)a.copy(t[n]).applyMatrix4(r,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==i||r;return r=e,i=t.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(t,e){n=c(t,e,0)},this.setState=function(a,o,h){const u=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=t.get(a);if(!r||null===u||0===u.length||s&&!p)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);e.numPlanes=i,e.numIntersection=0}();else{const t=s?0:i,e=4*t;let r=f.clippingState||null;l.value=r,r=c(u,o,e,h);for(let i=0;i!==e;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function qx(t){let e=new WeakMap;function n(t,e){return e===th?t.mapping=Jc:e===eh&&(t.mapping=Qc),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping;if(s===th||s===eh){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=new Xf(s.height);return a.fromEquirectangularTexture(t,r),e.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}const Yx=[.125,.215,.35,.446,.526,.582],$x=20,Zx=new hy,Kx=new Yp;let Jx=null,Qx=0,tb=0,eb=!1;const nb=(1+Math.sqrt(5))/2,ib=1/nb,rb=[new Ad(-nb,ib,0),new Ad(nb,ib,0),new Ad(-ib,0,nb),new Ad(ib,0,nb),new Ad(0,nb,-ib),new Ad(0,nb,ib),new Ad(-1,1,-1),new Ad(1,1,-1),new Ad(-1,1,1),new Ad(1,1,1)],sb=new Ad;class ab{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100,r={}){const{size:s=256,position:a=sb}=r;Jx=this._renderer.getRenderTarget(),Qx=this._renderer.getActiveCubeFace(),tb=this._renderer.getActiveMipmapLevel(),eb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,n,i,o,a),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=hb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=cb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Jx,Qx,tb),this._renderer.xr.enabled=eb,t.scissorTest=!1,lb(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Jc||t.mapping===Qc?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Jx=this._renderer.getRenderTarget(),Qx=this._renderer.getActiveCubeFace(),tb=this._renderer.getActiveMipmapLevel(),eb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:ch,minFilter:ch,generateMipmaps:!1,type:yh,format:Ah,colorSpace:wu,depthBuffer:!1},i=ob(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ob(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const s=t-4+1+Yx.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>t-4?o=Yx[a-t+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,h=1+l,u=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,f=3,m=2,g=1,_=new Float32Array(f*p*d),v=new Float32Array(m*p*d),y=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];_.set(i,f*p*t),v.set(u,m*p*t);const r=[t,t,t,t,t,t];y.set(r,g*p*t)}const x=new vf;x.setAttribute("position",new of(_,f)),x.setAttribute("uv",new of(v,m)),x.setAttribute("faceIndex",new of(y,g)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array($x),r=new Ad(0,1,0),s=new Ff({name:"SphericalGaussianBlur",defines:{n:$x,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ub(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return s}(i,t,e)}return i}_compileMaterial(t){const e=new Pf(this._lodPlanes[0],t);this._renderer.compile(e,Zx)}_sceneToCubeUV(t,e,n,i,r){const s=new Vf(90,1,e,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,h=l.toneMapping;l.getClearColor(Kx),l.toneMapping=Hc,l.autoClear=!1;const u=new Jp({name:"PMREM.Background",side:hc,depthWrite:!1,depthTest:!1}),d=new Pf(new Lf,u);let p=!1;const f=t.background;f?f.isColor&&(u.color.copy(f),t.background=null,p=!0):(u.color.copy(Kx),p=!0);for(let m=0;m<6;m++){const e=m%3;0===e?(s.up.set(0,a[m],0),s.position.set(r.x,r.y,r.z),s.lookAt(r.x+o[m],r.y,r.z)):1===e?(s.up.set(0,0,a[m]),s.position.set(r.x,r.y,r.z),s.lookAt(r.x,r.y+o[m],r.z)):(s.up.set(0,a[m],0),s.position.set(r.x,r.y,r.z),s.lookAt(r.x,r.y,r.z+o[m]));const n=this._cubeSize;lb(i,e*n,m>2?n:0,n,n),l.setRenderTarget(i),p&&l.render(d,s),l.render(t,s)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=h,l.autoClear=c,t.background=f}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===Jc||t.mapping===Qc;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=hb()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=cb());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new Pf(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const a=this._cubeSize;lb(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(s,Zx)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=rb[(i-r-1)%rb.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial,c=new Pf(this._lodPlanes[i],l),h=l.uniforms,u=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):$x,m=[];let g=0;for(let y=0;y<$x;++y){const t=y/p,e=Math.exp(-t*t/2);m.push(e),0===y?g+=e:y<f&&(g+=2*e)}for(let y=0;y<m.length;y++)m[y]=m[y]/g;h.envMap.value=t.texture,h.samples.value=f,h.weights.value=m,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a);const{_lodMax:_}=this;h.dTheta.value=d,h.mipInt.value=_-n;const v=this._sizeLods[i];lb(e,3*v*(i>_-4?i-_+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(e),o.render(c,Zx)}}function ob(t,e,n){const i=new Md(t,e,n);return i.texture.mapping=nh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function lb(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function cb(){return new Ff({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ub(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function hb(){return new Ff({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ub(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ub(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function db(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===th||s===eh,o=s===Jc||s===Qc;if(a||o){let s=e.get(r);const l=void 0!==s?s.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new ab(t)),s=a?n.fromEquirectangular(r,s):n.fromCubemap(r,s),s.texture.pmremVersion=r.pmremVersion,e.set(r,s),s.texture;if(void 0!==s)return s.texture;{const l=r.image;return a&&l&&l.height>0||o&&l&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(l)?(null===n&&(n=new ab(t)),s=a?n.fromEquirectangular(r):n.fromCubemap(r),s.texture.pmremVersion=r.pmremVersion,e.set(r,s),r.addEventListener("dispose",i),s.texture):null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function pb(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const e=n(t);return null===e&&od("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function fb(t,e,n,i){const r={},s=new WeakMap;function a(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const n in o.attributes)e.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(e.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(t){const n=[],i=t.index,r=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{if(void 0===r)return;{const t=r.array;a=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}}const o=new(ed(n)?cf:lf)(n,1);o.version=a;const l=s.get(t);l&&e.remove(l),s.set(t,o)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",a),r[e.id]=!0,n.memory.geometries++),e},update:function(n){const i=n.attributes;for(const r in i)e.update(i[r],t.ARRAY_BUFFER)},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return s.get(t)}}}function mb(t,e,n){let i,r,s;function a(e,a,o){0!==o&&(t.drawElementsInstanced(i,a,r,e*s,o),n.update(a,i,o))}this.setMode=function(t){i=t},this.setIndex=function(t){r=t.type,s=t.bytesPerElement},this.render=function(e,a){t.drawElements(i,a,r,e*s),n.update(a,i,1)},this.renderInstances=a,this.renderMultiDraw=function(t,s,a){if(0===a)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,s,0,r,t,0,a);let o=0;for(let e=0;e<a;e++)o+=s[e];n.update(o,i,1)},this.renderMultiDrawInstances=function(t,o,l,c){if(0===l)return;const h=e.get("WEBGL_multi_draw");if(null===h)for(let e=0;e<t.length;e++)a(t[e]/s,o[e],c[e]);else{h.multiDrawElementsInstancedWEBGL(i,o,0,r,t,0,c,0,l);let e=0;for(let t=0;t<l;t++)e+=o[t]*c[t];n.update(e,i,1)}}}function gb(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,i,r){switch(e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n}}}}function _b(t,e,n){const i=new WeakMap,r=new xd;return{update:function(s,a,o){const l=s.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=void 0!==c?c.length:0;let u=i.get(a);if(void 0===u||u.count!==h){let t=function(){_.dispose(),i.delete(a),a.removeEventListener("dispose",t)};void 0!==u&&u.texture.dispose();const n=void 0!==a.morphAttributes.position,s=void 0!==a.morphAttributes.normal,o=void 0!==a.morphAttributes.color,l=a.morphAttributes.position||[],c=a.morphAttributes.normal||[],d=a.morphAttributes.color||[];let p=0;!0===n&&(p=1),!0===s&&(p=2),!0===o&&(p=3);let f=a.attributes.position.count*p,m=1;f>e.maxTextureSize&&(m=Math.ceil(f/e.maxTextureSize),f=e.maxTextureSize);const g=new Float32Array(f*m*4*h),_=new Sd(g,f,m,h);_.type=vh,_.needsUpdate=!0;const v=4*p;for(let e=0;e<h;e++){const t=l[e],i=c[e],a=d[e],h=f*m*4*e;for(let e=0;e<t.count;e++){const l=e*v;!0===n&&(r.fromBufferAttribute(t,e),g[h+l+0]=r.x,g[h+l+1]=r.y,g[h+l+2]=r.z,g[h+l+3]=0),!0===s&&(r.fromBufferAttribute(i,e),g[h+l+4]=r.x,g[h+l+5]=r.y,g[h+l+6]=r.z,g[h+l+7]=0),!0===o&&(r.fromBufferAttribute(a,e),g[h+l+8]=r.x,g[h+l+9]=r.y,g[h+l+10]=r.z,g[h+l+11]=4===a.itemSize?r.w:1)}}u={count:h,texture:_,size:new Ju(f,m)},i.set(a,u),a.addEventListener("dispose",t)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)o.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let e=0;for(let t=0;t<l.length;t++)e+=l[t];const n=a.morphTargetsRelative?1:1-e;o.getUniforms().setValue(t,"morphTargetBaseInfluence",n),o.getUniforms().setValue(t,"morphTargetInfluences",l)}o.getUniforms().setValue(t,"morphTargetsTexture",u.texture,n),o.getUniforms().setValue(t,"morphTargetsTextureSize",u.size)}}}function vb(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(a){const o=i.render.frame,l=a.geometry,c=e.get(a,l);if(r.get(c)!==o&&(e.update(c),r.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),r.get(a)!==o&&(n.update(a.instanceMatrix,t.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,t.ARRAY_BUFFER),r.set(a,o))),a.isSkinnedMesh){const t=a.skeleton;r.get(t)!==o&&(t.update(),r.set(t,o))}return c},dispose:function(){r=new WeakMap}}}const yb=new yd,xb=new kg(1,1),bb=new Sd,Mb=new wd,Sb=new jf,wb=[],Tb=[],Ab=new Float32Array(16),Eb=new Float32Array(9),Cb=new Float32Array(4);function Rb(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=wb[r];if(void 0===s&&(s=new Float32Array(r),wb[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function Pb(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ib(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Lb(t,e){let n=Tb[e];void 0===n&&(n=new Int32Array(e),Tb[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Db(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Nb(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Pb(n,e))return;t.uniform2fv(this.addr,e),Ib(n,e)}}function Ob(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Pb(n,e))return;t.uniform3fv(this.addr,e),Ib(n,e)}}function Ub(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Pb(n,e))return;t.uniform4fv(this.addr,e),Ib(n,e)}}function Fb(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Pb(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ib(n,e)}else{if(Pb(n,i))return;Cb.set(i),t.uniformMatrix2fv(this.addr,!1,Cb),Ib(n,i)}}function kb(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Pb(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ib(n,e)}else{if(Pb(n,i))return;Eb.set(i),t.uniformMatrix3fv(this.addr,!1,Eb),Ib(n,i)}}function Bb(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Pb(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ib(n,e)}else{if(Pb(n,i))return;Ab.set(i),t.uniformMatrix4fv(this.addr,!1,Ab),Ib(n,i)}}function zb(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Hb(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Pb(n,e))return;t.uniform2iv(this.addr,e),Ib(n,e)}}function Vb(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Pb(n,e))return;t.uniform3iv(this.addr,e),Ib(n,e)}}function Gb(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Pb(n,e))return;t.uniform4iv(this.addr,e),Ib(n,e)}}function Wb(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function jb(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Pb(n,e))return;t.uniform2uiv(this.addr,e),Ib(n,e)}}function Xb(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Pb(n,e))return;t.uniform3uiv(this.addr,e),Ib(n,e)}}function qb(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Pb(n,e))return;t.uniform4uiv(this.addr,e),Ib(n,e)}}function Yb(t,e,n){const i=this.cache,r=n.allocateTextureUnit();let s;i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),this.type===t.SAMPLER_2D_SHADOW?(xb.compareFunction=Iu,s=xb):s=yb,n.setTexture2D(e||s,r)}function $b(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Mb,r)}function Zb(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||Sb,r)}function Kb(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||bb,r)}function Jb(t,e){t.uniform1fv(this.addr,e)}function Qb(t,e){const n=Rb(e,this.size,2);t.uniform2fv(this.addr,n)}function tM(t,e){const n=Rb(e,this.size,3);t.uniform3fv(this.addr,n)}function eM(t,e){const n=Rb(e,this.size,4);t.uniform4fv(this.addr,n)}function nM(t,e){const n=Rb(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function iM(t,e){const n=Rb(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function rM(t,e){const n=Rb(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function sM(t,e){t.uniform1iv(this.addr,e)}function aM(t,e){t.uniform2iv(this.addr,e)}function oM(t,e){t.uniform3iv(this.addr,e)}function lM(t,e){t.uniform4iv(this.addr,e)}function cM(t,e){t.uniform1uiv(this.addr,e)}function hM(t,e){t.uniform2uiv(this.addr,e)}function uM(t,e){t.uniform3uiv(this.addr,e)}function dM(t,e){t.uniform4uiv(this.addr,e)}function pM(t,e,n){const i=this.cache,r=e.length,s=Lb(n,r);Pb(i,s)||(t.uniform1iv(this.addr,s),Ib(i,s));for(let a=0;a!==r;++a)n.setTexture2D(e[a]||yb,s[a])}function fM(t,e,n){const i=this.cache,r=e.length,s=Lb(n,r);Pb(i,s)||(t.uniform1iv(this.addr,s),Ib(i,s));for(let a=0;a!==r;++a)n.setTexture3D(e[a]||Mb,s[a])}function mM(t,e,n){const i=this.cache,r=e.length,s=Lb(n,r);Pb(i,s)||(t.uniform1iv(this.addr,s),Ib(i,s));for(let a=0;a!==r;++a)n.setTextureCube(e[a]||Sb,s[a])}function gM(t,e,n){const i=this.cache,r=e.length,s=Lb(n,r);Pb(i,s)||(t.uniform1iv(this.addr,s),Ib(i,s));for(let a=0;a!==r;++a)n.setTexture2DArray(e[a]||bb,s[a])}class _M{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return Db;case 35664:return Nb;case 35665:return Ob;case 35666:return Ub;case 35674:return Fb;case 35675:return kb;case 35676:return Bb;case 5124:case 35670:return zb;case 35667:case 35671:return Hb;case 35668:case 35672:return Vb;case 35669:case 35673:return Gb;case 5125:return Wb;case 36294:return jb;case 36295:return Xb;case 36296:return qb;case 35678:case 36198:case 36298:case 36306:case 35682:return Yb;case 35679:case 36299:case 36307:return $b;case 35680:case 36300:case 36308:case 36293:return Zb;case 36289:case 36303:case 36311:case 36292:return Kb}}(e.type)}}class vM{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Jb;case 35664:return Qb;case 35665:return tM;case 35666:return eM;case 35674:return nM;case 35675:return iM;case 35676:return rM;case 5124:case 35670:return sM;case 35667:case 35671:return aM;case 35668:case 35672:return oM;case 35669:case 35673:return lM;case 5125:return cM;case 36294:return hM;case 36295:return uM;case 36296:return dM;case 35678:case 36198:case 36298:case 36306:case 35682:return pM;case 35679:case 36299:case 36307:return fM;case 35680:case 36300:case 36308:case 36293:return mM;case 36289:case 36303:case 36311:case 36292:return gM}}(e.type)}}class yM{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}}}const xM=/(\w+)(\])?(\[|\.)?/g;function bM(t,e){t.seq.push(e),t.map[e.id]=e}function MM(t,e,n){const i=t.name,r=i.length;for(xM.lastIndex=0;;){const s=xM.exec(i),a=xM.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){bM(n,void 0===c?new _M(o,t,e):new vM(o,t,e));break}{let t=n.map[o];void 0===t&&(t=new yM(o),bM(n,t)),n=t}}}class SM{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);MM(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n}}function wM(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const TM=37297;let AM=0;const EM=new Qu;function CM(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=r;a<s;a++){const t=a+1;i.push(`${t===e?">":" "} ${t}: ${n[a]}`)}return i.join("\n")}(t.getShaderSource(e),i)}return r}function RM(t,e){const n=function(t){hd._getMatrix(EM,hd.workingColorSpace,t);const e=`mat3( ${EM.elements.map((t=>t.toFixed(4)))} )`;switch(hd.getTransfer(t)){case Tu:return[e,"LinearTransferOETF"];case Au:return[e,"sRGBTransferOETF"];default:return[e,"LinearTransferOETF"]}}(e);return[`vec4 ${t}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function PM(t,e){let n;switch(e){case Vc:n="Linear";break;case Gc:n="Reinhard";break;case Wc:n="Cineon";break;case jc:n="ACESFilmic";break;case qc:n="AgX";break;case Yc:n="Neutral";break;case Xc:n="Custom";break;default:n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const IM=new Ad;function LM(){hd.getLuminanceCoefficients(IM);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${IM.x.toFixed(4)}, ${IM.y.toFixed(4)}, ${IM.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function DM(t){return""!==t}function NM(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function OM(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const UM=/^[ \t]*#include +<([\w\d./]+)>/gm;function FM(t){return t.replace(UM,BM)}const kM=new Map;function BM(t,e){let n=Ux[e];if(void 0===n){const t=kM.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=Ux[t]}return FM(n)}const zM=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function HM(t){return t.replace(zM,VM)}function VM(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function GM(t){let e=`precision ${t.precision} float;\n\tprecision ${t.precision} int;\n\tprecision ${t.precision} sampler2D;\n\tprecision ${t.precision} samplerCube;\n\tprecision ${t.precision} sampler3D;\n\tprecision ${t.precision} sampler2DArray;\n\tprecision ${t.precision} sampler2DShadow;\n\tprecision ${t.precision} samplerCubeShadow;\n\tprecision ${t.precision} sampler2DArrayShadow;\n\tprecision ${t.precision} isampler2D;\n\tprecision ${t.precision} isampler3D;\n\tprecision ${t.precision} isamplerCube;\n\tprecision ${t.precision} isampler2DArray;\n\tprecision ${t.precision} usampler2D;\n\tprecision ${t.precision} usampler3D;\n\tprecision ${t.precision} usamplerCube;\n\tprecision ${t.precision} usampler2DArray;\n\t`;return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function WM(t,e,n,i){const r=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===ac?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===oc?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===lc&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Jc:case Qc:e="ENVMAP_TYPE_CUBE";break;case nh:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),h=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===Qc&&(e="ENVMAP_MODE_REFRACTION");return e}(n),u=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case kc:e="ENVMAP_BLENDING_MULTIPLY";break;case Bc:e="ENVMAP_BLENDING_MIX";break;case zc:e="ENVMAP_BLENDING_ADD"}return e}(n),d=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(DM).join("\n")}(n),f=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,_,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(DM).join("\n"),g.length>0&&(g+="\n"),_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(DM).join("\n"),_.length>0&&(_+="\n")):(g=[GM(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(DM).join("\n"),_=[GM(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Hc?"#define TONE_MAPPING":"",n.toneMapping!==Hc?Ux.tonemapping_pars_fragment:"",n.toneMapping!==Hc?PM("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ux.colorspace_pars_fragment,RM("linearToOutputTexel",n.outputColorSpace),LM(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(DM).join("\n")),a=FM(a),a=NM(a,n),a=OM(a,n),o=FM(o),o=NM(o,n),o=OM(o,n),a=HM(a),o=HM(o),!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in",n.glslVersion===Fu?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Fu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const y=v+g+a,x=v+_+o,b=wM(r,r.VERTEX_SHADER,y),M=wM(r,r.FRAGMENT_SHADER,x);function S(e){if(t.debug.checkShaderErrors){const n=r.getProgramInfoLog(m).trim(),i=r.getShaderInfoLog(b).trim(),s=r.getShaderInfoLog(M).trim();let a=!0,o=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(a=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(r,m,b,M);else{CM(r,b,"vertex"),CM(r,M,"fragment")}else""!==n||""!==i&&""!==s||(o=!1);o&&(e.diagnostics={runnable:a,programLog:n,vertexShader:{log:i,prefix:g},fragmentShader:{log:s,prefix:_}})}r.deleteShader(b),r.deleteShader(M),w=new SM(r,m),T=function(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let a=1;i.type===t.FLOAT_MAT2&&(a=2),i.type===t.FLOAT_MAT3&&(a=3),i.type===t.FLOAT_MAT4&&(a=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}(r,m)}let w,T;r.attachShader(m,b),r.attachShader(m,M),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===w&&S(this),w},this.getAttributes=function(){return void 0===T&&S(this),T};let A=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=r.getProgramParameter(m,TM)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=AM++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=M,this}let jM=0;class XM{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new qM(t),e.set(t,n)),n}}class qM{constructor(t){this.id=jM++,this.code=t,this.usedTimes=0}}function YM(t,e,n,i,r,s,a){const o=new pp,l=new XM,c=new Set,h=[],u=r.logarithmicDepthBuffer,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return c.add(t),0===t?"uv":`uv${t}`}return{getParameters:function(s,o,h,g,_){const v=g.fog,y=_.geometry,x=s.isMeshStandardMaterial?g.environment:null,b=(s.isMeshStandardMaterial?n:e).get(s.envMap||x),M=b&&b.mapping===nh?b.image.height:null,S=f[s.type];null!==s.precision&&(p=r.getMaxPrecision(s.precision),s.precision);const w=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,T=void 0!==w?w.length:0;let A,E,C,R,P=0;if(void 0!==y.morphAttributes.position&&(P=1),void 0!==y.morphAttributes.normal&&(P=2),void 0!==y.morphAttributes.color&&(P=3),S){const t=kx[S];A=t.vertexShader,E=t.fragmentShader}else A=s.vertexShader,E=s.fragmentShader,l.update(s),C=l.getVertexShaderID(s),R=l.getFragmentShaderID(s);const I=t.getRenderTarget(),L=t.state.buffers.depth.getReversed(),D=!0===_.isInstancedMesh,N=!0===_.isBatchedMesh,O=!!s.map,U=!!s.matcap,F=!!b,k=!!s.aoMap,B=!!s.lightMap,z=!!s.bumpMap,H=!!s.normalMap,V=!!s.displacementMap,G=!!s.emissiveMap,W=!!s.metalnessMap,j=!!s.roughnessMap,X=s.anisotropy>0,q=s.clearcoat>0,Y=s.dispersion>0,$=s.iridescence>0,Z=s.sheen>0,K=s.transmission>0,J=X&&!!s.anisotropyMap,Q=q&&!!s.clearcoatMap,tt=q&&!!s.clearcoatNormalMap,et=q&&!!s.clearcoatRoughnessMap,nt=$&&!!s.iridescenceMap,it=$&&!!s.iridescenceThicknessMap,rt=Z&&!!s.sheenColorMap,st=Z&&!!s.sheenRoughnessMap,at=!!s.specularMap,ot=!!s.specularColorMap,lt=!!s.specularIntensityMap,ct=K&&!!s.transmissionMap,ht=K&&!!s.thicknessMap,ut=!!s.gradientMap,dt=!!s.alphaMap,pt=s.alphaTest>0,ft=!!s.alphaHash,mt=!!s.extensions;let gt=Hc;s.toneMapped&&(null!==I&&!0!==I.isXRRenderTarget||(gt=t.toneMapping));const _t={shaderID:S,shaderType:s.type,shaderName:s.name,vertexShader:A,fragmentShader:E,defines:s.defines,customVertexShaderID:C,customFragmentShaderID:R,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,batching:N,batchingColor:N&&null!==_._colorsTexture,instancing:D,instancingColor:D&&null!==_.instanceColor,instancingMorph:D&&null!==_.morphTexture,supportsVertexTextures:d,outputColorSpace:null===I?t.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:wu,alphaToCoverage:!!s.alphaToCoverage,map:O,matcap:U,envMap:F,envMapMode:F&&b.mapping,envMapCubeUVHeight:M,aoMap:k,lightMap:B,bumpMap:z,normalMap:H,displacementMap:d&&V,emissiveMap:G,normalMapObjectSpace:H&&1===s.normalMapType,normalMapTangentSpace:H&&0===s.normalMapType,metalnessMap:W,roughnessMap:j,anisotropy:X,anisotropyMap:J,clearcoat:q,clearcoatMap:Q,clearcoatNormalMap:tt,clearcoatRoughnessMap:et,dispersion:Y,iridescence:$,iridescenceMap:nt,iridescenceThicknessMap:it,sheen:Z,sheenColorMap:rt,sheenRoughnessMap:st,specularMap:at,specularColorMap:ot,specularIntensityMap:lt,transmission:K,transmissionMap:ct,thicknessMap:ht,gradientMap:ut,opaque:!1===s.transparent&&1===s.blending&&!1===s.alphaToCoverage,alphaMap:dt,alphaTest:pt,alphaHash:ft,combine:s.combine,mapUv:O&&m(s.map.channel),aoMapUv:k&&m(s.aoMap.channel),lightMapUv:B&&m(s.lightMap.channel),bumpMapUv:z&&m(s.bumpMap.channel),normalMapUv:H&&m(s.normalMap.channel),displacementMapUv:V&&m(s.displacementMap.channel),emissiveMapUv:G&&m(s.emissiveMap.channel),metalnessMapUv:W&&m(s.metalnessMap.channel),roughnessMapUv:j&&m(s.roughnessMap.channel),anisotropyMapUv:J&&m(s.anisotropyMap.channel),clearcoatMapUv:Q&&m(s.clearcoatMap.channel),clearcoatNormalMapUv:tt&&m(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&m(s.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&m(s.iridescenceMap.channel),iridescenceThicknessMapUv:it&&m(s.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&m(s.sheenColorMap.channel),sheenRoughnessMapUv:st&&m(s.sheenRoughnessMap.channel),specularMapUv:at&&m(s.specularMap.channel),specularColorMapUv:ot&&m(s.specularColorMap.channel),specularIntensityMapUv:lt&&m(s.specularIntensityMap.channel),transmissionMapUv:ct&&m(s.transmissionMap.channel),thicknessMapUv:ht&&m(s.thicknessMap.channel),alphaMapUv:dt&&m(s.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(H||X),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,pointsUvs:!0===_.isPoints&&!!y.attributes.uv&&(O||dt),fog:!!v,useFog:!0===s.fog,fogExp2:!!v&&v.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:u,reverseDepthBuffer:L,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:T,morphTextureStride:P,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:gt,decodeVideoTexture:O&&!0===s.map.isVideoTexture&&hd.getTransfer(s.map.colorSpace)===Au,decodeVideoTextureEmissive:G&&!0===s.emissiveMap.isVideoTexture&&hd.getTransfer(s.emissiveMap.colorSpace)===Au,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:s.side===hc,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionClipCullDistance:mt&&!0===s.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(mt&&!0===s.extensions.multiDraw||N)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()};return _t.vertexUv1s=c.has(1),_t.vertexUv2s=c.has(2),_t.vertexUv3s=c.has(3),c.clear(),_t},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){o.disableAll(),e.supportsVertexTextures&&o.enable(0);e.instancing&&o.enable(1);e.instancingColor&&o.enable(2);e.instancingMorph&&o.enable(3);e.matcap&&o.enable(4);e.envMap&&o.enable(5);e.normalMapObjectSpace&&o.enable(6);e.normalMapTangentSpace&&o.enable(7);e.clearcoat&&o.enable(8);e.iridescence&&o.enable(9);e.alphaTest&&o.enable(10);e.vertexColors&&o.enable(11);e.vertexAlphas&&o.enable(12);e.vertexUv1s&&o.enable(13);e.vertexUv2s&&o.enable(14);e.vertexUv3s&&o.enable(15);e.vertexTangents&&o.enable(16);e.anisotropy&&o.enable(17);e.alphaHash&&o.enable(18);e.batching&&o.enable(19);e.dispersion&&o.enable(20);e.batchingColor&&o.enable(21);t.push(o.mask),o.disableAll(),e.fog&&o.enable(0);e.useFog&&o.enable(1);e.flatShading&&o.enable(2);e.logarithmicDepthBuffer&&o.enable(3);e.reverseDepthBuffer&&o.enable(4);e.skinning&&o.enable(5);e.morphTargets&&o.enable(6);e.morphNormals&&o.enable(7);e.morphColors&&o.enable(8);e.premultipliedAlpha&&o.enable(9);e.shadowMapEnabled&&o.enable(10);e.doubleSided&&o.enable(11);e.flipSided&&o.enable(12);e.useDepthPacking&&o.enable(13);e.dithering&&o.enable(14);e.transmission&&o.enable(15);e.sheen&&o.enable(16);e.opaque&&o.enable(17);e.pointsUvs&&o.enable(18);e.decodeVideoTexture&&o.enable(19);e.decodeVideoTextureEmissive&&o.enable(20);e.alphaToCoverage&&o.enable(21);t.push(o.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;if(e){const t=kx[e];n=Uf.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,r=h.length;t<r;t++){const e=h[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new WM(t,n,e,s),h.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:h,dispose:function(){l.dispose()}}}function $M(){let t=new WeakMap;return{has:function(e){return t.has(e)},get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function ZM(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function KM(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function JM(){const t=[];let e=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,a,o,l,c){const h=s(t,e,a,o,l,c);a.transmission>0?i.push(h):!0===a.transparent?r.push(h):n.push(h)},unshift:function(t,e,a,o,l,c){const h=s(t,e,a,o,l,c);a.transmission>0?i.unshift(h):!0===a.transparent?r.unshift(h):n.unshift(h)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||ZM),i.length>1&&i.sort(e||KM),r.length>1&&r.sort(e||KM)}}}function QM(){let t=new WeakMap;return{get:function(e,n){const i=t.get(e);let r;return void 0===i?(r=new JM,t.set(e,[r])):n>=i.length?(r=new JM,i.push(r)):r=i[n],r},dispose:function(){t=new WeakMap}}}function tS(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ad,color:new Yp};break;case"SpotLight":n={position:new Ad,direction:new Ad,color:new Yp,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ad,color:new Yp,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ad,skyColor:new Yp,groundColor:new Yp};break;case"RectAreaLight":n={color:new Yp,position:new Ad,halfWidth:new Ad,halfHeight:new Ad}}return t[e.id]=n,n}}}let eS=0;function nS(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function iS(t){const e=new tS,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ju};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ju,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)i.probe.push(new Ad);const r=new Ad,s=new np,a=new np;return{setup:function(r){let s=0,a=0,o=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let l=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,_=0,v=0;r.sort(nS);for(let t=0,x=r.length;t<x;t++){const y=r[t],x=y.color,b=y.intensity,M=y.distance,S=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)s+=x.r*b,a+=x.g*b,o+=x.b*b;else if(y.isLightProbe){for(let t=0;t<9;t++)i.probe[t].addScaledVector(y.sh.coefficients[t],b);v++}else if(y.isDirectionalLight){const t=e.get(y);if(t.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const t=y.shadow,e=n.get(y);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,i.directionalShadow[l]=e,i.directionalShadowMap[l]=S,i.directionalShadowMatrix[l]=y.shadow.matrix,p++}i.directional[l]=t,l++}else if(y.isSpotLight){const t=e.get(y);t.position.setFromMatrixPosition(y.matrixWorld),t.color.copy(x).multiplyScalar(b),t.distance=M,t.coneCos=Math.cos(y.angle),t.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),t.decay=y.decay,i.spot[h]=t;const r=y.shadow;if(y.map&&(i.spotLightMap[g]=y.map,g++,r.updateMatrices(y),y.castShadow&&_++),i.spotLightMatrix[h]=r.matrix,y.castShadow){const t=n.get(y);t.shadowIntensity=r.intensity,t.shadowBias=r.bias,t.shadowNormalBias=r.normalBias,t.shadowRadius=r.radius,t.shadowMapSize=r.mapSize,i.spotShadow[h]=t,i.spotShadowMap[h]=S,m++}h++}else if(y.isRectAreaLight){const t=e.get(y);t.color.copy(x).multiplyScalar(b),t.halfWidth.set(.5*y.width,0,0),t.halfHeight.set(0,.5*y.height,0),i.rectArea[u]=t,u++}else if(y.isPointLight){const t=e.get(y);if(t.color.copy(y.color).multiplyScalar(y.intensity),t.distance=y.distance,t.decay=y.decay,y.castShadow){const t=y.shadow,e=n.get(y);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,e.shadowCameraNear=t.camera.near,e.shadowCameraFar=t.camera.far,i.pointShadow[c]=e,i.pointShadowMap[c]=S,i.pointShadowMatrix[c]=y.shadow.matrix,f++}i.point[c]=t,c++}else if(y.isHemisphereLight){const t=e.get(y);t.skyColor.copy(y.color).multiplyScalar(b),t.groundColor.copy(y.groundColor).multiplyScalar(b),i.hemi[d]=t,d++}}u>0&&(!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Fx.LTC_FLOAT_1,i.rectAreaLTC2=Fx.LTC_FLOAT_2):(i.rectAreaLTC1=Fx.LTC_HALF_1,i.rectAreaLTC2=Fx.LTC_HALF_2)),i.ambient[0]=s,i.ambient[1]=a,i.ambient[2]=o;const y=i.hash;y.directionalLength===l&&y.pointLength===c&&y.spotLength===h&&y.rectAreaLength===u&&y.hemiLength===d&&y.numDirectionalShadows===p&&y.numPointShadows===f&&y.numSpotShadows===m&&y.numSpotMaps===g&&y.numLightProbes===v||(i.directional.length=l,i.spot.length=h,i.rectArea.length=u,i.point.length=c,i.hemi.length=d,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=f,i.pointShadowMap.length=f,i.spotShadow.length=m,i.spotShadowMap.length=m,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=f,i.spotLightMatrix.length=m+g-_,i.spotLightMap.length=g,i.numSpotLightShadowsWithMaps=_,i.numLightProbes=v,y.directionalLength=l,y.pointLength=c,y.spotLength=h,y.rectAreaLength=u,y.hemiLength=d,y.numDirectionalShadows=p,y.numPointShadows=f,y.numSpotShadows=m,y.numSpotMaps=g,y.numLightProbes=v,i.version=eS++)},setupView:function(t,e){let n=0,o=0,l=0,c=0,h=0;const u=e.matrixWorldInverse;for(let d=0,p=t.length;d<p;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),r.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(r),t.direction.transformDirection(u),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(e.matrixWorld),r.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(r),t.direction.transformDirection(u),l++}else if(e.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),a.identity(),s.copy(e.matrixWorld),s.premultiply(u),a.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),c++}else if(e.isPointLight){const t=i.point[o];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),o++}else if(e.isHemisphereLight){const t=i.hemi[h];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(u),h++}}},state:i}}function rS(t){const e=new iS(t),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function(t){r.camera=t,n.length=0,i.length=0},state:r,setupLights:function(){e.setup(n)},setupLightsView:function(t){e.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){i.push(t)}}}function sS(t){let e=new WeakMap;return{get:function(n,i=0){const r=e.get(n);let s;return void 0===r?(s=new rS(t),e.set(n,[s])):i>=r.length?(s=new rS(t),r.push(s)):s=r[i],s},dispose:function(){e=new WeakMap}}}function aS(t,e,n){let i=new Km;const r=new Ju,s=new Ju,a=new xd,o=new _v({depthPacking:3201}),l=new vv,c={},h=n.maxTextureSize,u={[cc]:hc,[hc]:cc,[uc]:2},d=new Ff({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ju},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new vf;f.setAttribute("position",new of(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Pf(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ac;let _=this.type;function v(n,i){const s=e.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Md(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,s,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,s,p,m,null)}function y(e,n,i,r){let s=null;const a=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===i.isPointLight?l:o,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=s.uuid,e=n.uuid;let i=c[t];void 0===i&&(i={},c[t]=i);let r=i[e];void 0===r&&(r=s.clone(),i[e]=r,n.addEventListener("dispose",b)),s=r}if(s.visible=n.visible,s.wireframe=n.wireframe,s.side=r===lc?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial){t.properties.get(s).light=i}return s}function x(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===lc)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),l=n.material;if(Array.isArray(l)){const e=i.groups;for(let c=0,h=e.length;c<h;c++){const h=e[c],u=l[h.materialIndex];if(u&&u.visible){const e=y(n,u,a,o);n.onBeforeShadow(t,n,r,s,i,e,h),t.renderBufferDirect(s,null,i,e,n,h),n.onAfterShadow(t,n,r,s,i,e,h)}}}else if(l.visible){const e=y(n,l,a,o);n.onBeforeShadow(t,n,r,s,i,e,null),t.renderBufferDirect(s,null,i,e,n,null),n.onAfterShadow(t,n,r,s,i,e,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)x(l[t],r,s,a,o)}function b(t){t.target.removeEventListener("dispose",b);for(const e in c){const n=c[e],i=t.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(e,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=_!==lc&&this.type===lc,f=_===lc&&this.type!==lc;for(let m=0,g=e.length;m<g;m++){const l=e[m],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const u=c.getFrameExtents();if(r.multiply(u),s.copy(c.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/u.x),r.x=s.x*u.x,c.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/u.y),r.y=s.y*u.y,c.mapSize.y=s.y)),null===c.map||!0===p||!0===f){const t=this.type!==lc?{minFilter:ah,magFilter:ah}:{};null!==c.map&&c.map.dispose(),c.map=new Md(r.x,r.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const g=c.getViewportCount();for(let t=0;t<g;t++){const e=c.getViewport(t);a.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),d.viewport(a),c.updateMatrices(l,t),i=c.getFrustum(),x(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===lc&&v(c,o),c.needsUpdate=!1}_=this.type,g.needsUpdate=!1,t.setRenderTarget(l,c,u)}}const oS={[Pc]:1,[Lc]:6,[Nc]:7,[Dc]:5,[Ic]:0,[Uc]:2,[Fc]:4,[Oc]:3};function lS(t,e){const n=new function(){let e=!1;const n=new xd;let i=null;const r=new xd(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,a,o){!0===o&&(e*=a,i*=a,s*=a),n.set(e,i,s,a),!1===r.equals(n)&&(t.clearColor(e,i,s,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,r=null,s=null,a=null;return{setReversed:function(t){if(i!==t){const t=e.get("EXT_clip_control");i?t.clipControlEXT(t.LOWER_LEFT_EXT,t.ZERO_TO_ONE_EXT):t.clipControlEXT(t.LOWER_LEFT_EXT,t.NEGATIVE_ONE_TO_ONE_EXT);const n=a;a=null,this.setClear(n)}i=t},getReversed:function(){return i},setTest:function(e){e?z(t.DEPTH_TEST):H(t.DEPTH_TEST)},setMask:function(e){r===e||n||(t.depthMask(e),r=e)},setFunc:function(e){if(i&&(e=oS[e]),s!==e){switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}s=e}},setLocked:function(t){n=t},setClear:function(e){a!==e&&(i&&(e=1-e),t.clearDepth(e),a=e)},reset:function(){n=!1,r=null,s=null,a=null,i=!1}}},r=new function(){let e=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(n){e||(n?z(t.STENCIL_TEST):H(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&s===a||(t.stencilFunc(e,n,a),i=e,r=n,s=a)},setOp:function(e,n,i){a===e&&o===n&&l===i||(t.stencilOp(e,n,i),a=e,o=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},s=new WeakMap,a=new WeakMap;let o={},l={},c=new WeakMap,h=[],u=null,d=!1,p=null,f=null,m=null,g=null,_=null,v=null,y=null,x=new Yp(0,0,0),b=0,M=!1,S=null,w=null,T=null,A=null,E=null;const C=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,P=0;const I=t.getParameter(t.VERSION);-1!==I.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(I)[1]),R=P>=1):-1!==I.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),R=P>=2);let L=null,D={};const N=t.getParameter(t.SCISSOR_BOX),O=t.getParameter(t.VIEWPORT),U=(new xd).fromArray(N),F=(new xd).fromArray(O);function k(e,n,i,r){const s=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let o=0;o<i;o++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,r,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage2D(n+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s);return a}const B={};function z(e){!0!==o[e]&&(t.enable(e),o[e]=!0)}function H(e){!1!==o[e]&&(t.disable(e),o[e]=!1)}B[t.TEXTURE_2D]=k(t.TEXTURE_2D,t.TEXTURE_2D,1),B[t.TEXTURE_CUBE_MAP]=k(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),B[t.TEXTURE_2D_ARRAY]=k(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),B[t.TEXTURE_3D]=k(t.TEXTURE_3D,t.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),r.setClear(0),z(t.DEPTH_TEST),i.setFunc(3),j(!1),X(1),z(t.CULL_FACE),W(0);const V={[dc]:t.FUNC_ADD,[pc]:t.FUNC_SUBTRACT,[fc]:t.FUNC_REVERSE_SUBTRACT};V[103]=t.MIN,V[104]=t.MAX;const G={[mc]:t.ZERO,[gc]:t.ONE,[_c]:t.SRC_COLOR,[yc]:t.SRC_ALPHA,[Tc]:t.SRC_ALPHA_SATURATE,[Sc]:t.DST_COLOR,[bc]:t.DST_ALPHA,[vc]:t.ONE_MINUS_SRC_COLOR,[xc]:t.ONE_MINUS_SRC_ALPHA,[wc]:t.ONE_MINUS_DST_COLOR,[Mc]:t.ONE_MINUS_DST_ALPHA,[Ac]:t.CONSTANT_COLOR,[Ec]:t.ONE_MINUS_CONSTANT_COLOR,[Cc]:t.CONSTANT_ALPHA,[Rc]:t.ONE_MINUS_CONSTANT_ALPHA};function W(e,n,i,r,s,a,o,l,c,h){if(0!==e){if(!1===d&&(z(t.BLEND),d=!0),5===e)s=s||n,a=a||i,o=o||r,n===f&&s===_||(t.blendEquationSeparate(V[n],V[s]),f=n,_=s),i===m&&r===g&&a===v&&o===y||(t.blendFuncSeparate(G[i],G[r],G[a],G[o]),m=i,g=r,v=a,y=o),!1!==l.equals(x)&&c===b||(t.blendColor(l.r,l.g,l.b,c),x.copy(l),b=c),p=e,M=!1;else if(e!==p||h!==M){if(f===dc&&_===dc||(t.blendEquation(t.FUNC_ADD),f=dc,_=dc),h)switch(e){case 1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.ONE,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)}else switch(e){case 1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFunc(t.ZERO,t.SRC_COLOR)}m=null,g=null,v=null,y=null,x.set(0,0,0),b=0,p=e,M=h}}else!0===d&&(H(t.BLEND),d=!1)}function j(e){S!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),S=e)}function X(e){0!==e?(z(t.CULL_FACE),e!==w&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):H(t.CULL_FACE),w=e}function q(e,n,i){e?(z(t.POLYGON_OFFSET_FILL),A===n&&E===i||(t.polygonOffset(n,i),A=n,E=i)):H(t.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:r},enable:z,disable:H,bindFramebuffer:function(e,n){return l[e]!==n&&(t.bindFramebuffer(e,n),l[e]=n,e===t.DRAW_FRAMEBUFFER&&(l[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(l[t.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(e,n){let i=h,r=!1;if(e){i=c.get(n),void 0===i&&(i=[],c.set(n,i));const s=e.textures;if(i.length!==s.length||i[0]!==t.COLOR_ATTACHMENT0){for(let e=0,n=s.length;e<n;e++)i[e]=t.COLOR_ATTACHMENT0+e;i.length=s.length,r=!0}}else i[0]!==t.BACK&&(i[0]=t.BACK,r=!0);r&&t.drawBuffers(i)},useProgram:function(e){return u!==e&&(t.useProgram(e),u=e,!0)},setBlending:W,setMaterial:function(e,s){2===e.side?H(t.CULL_FACE):z(t.CULL_FACE);let a=e.side===hc;s&&(a=!a),j(a),1===e.blending&&!1===e.transparent?W(0):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),i.setFunc(e.depthFunc),i.setTest(e.depthTest),i.setMask(e.depthWrite),n.setMask(e.colorWrite);const o=e.stencilWrite;r.setTest(o),o&&(r.setMask(e.stencilWriteMask),r.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),r.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?z(t.SAMPLE_ALPHA_TO_COVERAGE):H(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:j,setCullFace:X,setLineWidth:function(e){e!==T&&(R&&t.lineWidth(e),T=e)},setPolygonOffset:q,setScissorTest:function(e){e?z(t.SCISSOR_TEST):H(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+C-1),L!==e&&(t.activeTexture(e),L=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===L?t.TEXTURE0+C-1:L);let r=D[i];void 0===r&&(r={type:void 0,texture:void 0},D[i]=r),r.type===e&&r.texture===n||(L!==i&&(t.activeTexture(i),L=i),t.bindTexture(e,n||B[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=D[L];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D(...arguments)}catch(e){}},compressedTexImage3D:function(){try{t.compressedTexImage3D(...arguments)}catch(e){}},texImage2D:function(){try{t.texImage2D(...arguments)}catch(e){}},texImage3D:function(){try{t.texImage3D(...arguments)}catch(e){}},updateUBOMapping:function(e,n){let i=a.get(n);void 0===i&&(i=new WeakMap,a.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=a.get(n).get(e);s.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),s.set(n,i))},texStorage2D:function(){try{t.texStorage2D(...arguments)}catch(e){}},texStorage3D:function(){try{t.texStorage3D(...arguments)}catch(e){}},texSubImage2D:function(){try{t.texSubImage2D(...arguments)}catch(e){}},texSubImage3D:function(){try{t.texSubImage3D(...arguments)}catch(e){}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D(...arguments)}catch(e){}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D(...arguments)}catch(e){}},scissor:function(e){!1===U.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),U.copy(e))},viewport:function(e){!1===F.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),F.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),i.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),o={},L=null,D={},l={},c=new WeakMap,h=[],u=null,d=!1,p=null,f=null,m=null,g=null,_=null,v=null,y=null,x=new Yp(0,0,0),b=0,M=!1,S=null,w=null,T=null,A=null,E=null,U.set(0,0,t.canvas.width,t.canvas.height),F.set(0,0,t.canvas.width,t.canvas.height),n.reset(),i.reset(),r.reset()}}}function cS(t,e,n,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new Ju,h=new WeakMap;let u;const d=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function f(t,e){return p?new OffscreenCanvas(t,e):rd("canvas")}function m(t,e,n){let i=1;const r=H(t);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&t instanceof VideoFrame){const n=Math.floor(i*r.width),s=Math.floor(i*r.height);void 0===u&&(u=f(n,s));const a=e?f(n,s):u;a.width=n,a.height=s;return a.getContext("2d").drawImage(t,0,0,n,s),a}return t}return t}function g(t){return t.generateMipmaps}function _(e){t.generateMipmap(e)}function v(e){return e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:e.isWebGL3DRenderTarget?t.TEXTURE_3D:e.isWebGLArrayRenderTarget||e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function y(n,i,r,s,a=!1){if(null!==n&&void 0!==t[n])return t[n];let o=i;if(i===t.RED&&(r===t.FLOAT&&(o=t.R32F),r===t.HALF_FLOAT&&(o=t.R16F),r===t.UNSIGNED_BYTE&&(o=t.R8)),i===t.RED_INTEGER&&(r===t.UNSIGNED_BYTE&&(o=t.R8UI),r===t.UNSIGNED_SHORT&&(o=t.R16UI),r===t.UNSIGNED_INT&&(o=t.R32UI),r===t.BYTE&&(o=t.R8I),r===t.SHORT&&(o=t.R16I),r===t.INT&&(o=t.R32I)),i===t.RG&&(r===t.FLOAT&&(o=t.RG32F),r===t.HALF_FLOAT&&(o=t.RG16F),r===t.UNSIGNED_BYTE&&(o=t.RG8)),i===t.RG_INTEGER&&(r===t.UNSIGNED_BYTE&&(o=t.RG8UI),r===t.UNSIGNED_SHORT&&(o=t.RG16UI),r===t.UNSIGNED_INT&&(o=t.RG32UI),r===t.BYTE&&(o=t.RG8I),r===t.SHORT&&(o=t.RG16I),r===t.INT&&(o=t.RG32I)),i===t.RGB_INTEGER&&(r===t.UNSIGNED_BYTE&&(o=t.RGB8UI),r===t.UNSIGNED_SHORT&&(o=t.RGB16UI),r===t.UNSIGNED_INT&&(o=t.RGB32UI),r===t.BYTE&&(o=t.RGB8I),r===t.SHORT&&(o=t.RGB16I),r===t.INT&&(o=t.RGB32I)),i===t.RGBA_INTEGER&&(r===t.UNSIGNED_BYTE&&(o=t.RGBA8UI),r===t.UNSIGNED_SHORT&&(o=t.RGBA16UI),r===t.UNSIGNED_INT&&(o=t.RGBA32UI),r===t.BYTE&&(o=t.RGBA8I),r===t.SHORT&&(o=t.RGBA16I),r===t.INT&&(o=t.RGBA32I)),i===t.RGB&&r===t.UNSIGNED_INT_5_9_9_9_REV&&(o=t.RGB9_E5),i===t.RGBA){const e=a?Tu:hd.getTransfer(s);r===t.FLOAT&&(o=t.RGBA32F),r===t.HALF_FLOAT&&(o=t.RGBA16F),r===t.UNSIGNED_BYTE&&(o=e===Au?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(o=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(o=t.RGB5_A1)}return o!==t.R16F&&o!==t.R32F&&o!==t.RG16F&&o!==t.RG32F&&o!==t.RGBA16F&&o!==t.RGBA32F||e.get("EXT_color_buffer_float"),o}function x(e,n){let i;return e?null===n||n===_h||n===Mh?i=t.DEPTH24_STENCIL8:n===vh?i=t.DEPTH32F_STENCIL8:n===mh&&(i=t.DEPTH24_STENCIL8):null===n||n===_h||n===Mh?i=t.DEPTH_COMPONENT24:n===vh?i=t.DEPTH_COMPONENT32F:n===mh&&(i=t.DEPTH_COMPONENT16),i}function b(t,e){return!0===g(t)||t.isFramebufferTexture&&t.minFilter!==ah&&t.minFilter!==ch?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function M(t){const e=t.target;e.removeEventListener("dispose",M),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=d.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&w(t),0===Object.keys(r).length&&d.delete(n)}i.remove(t)}(e),e.isVideoTexture&&h.delete(e)}function S(e){const n=e.target;n.removeEventListener("dispose",S),function(e){const n=i.get(e);e.depthTexture&&(e.depthTexture.dispose(),i.remove(e.depthTexture));if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let e=0;e<n.__webglFramebuffer[i].length;e++)t.deleteFramebuffer(n.__webglFramebuffer[i][e]);else t.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let e=0;e<n.__webglFramebuffer.length;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let e=0;e<n.__webglColorRenderbuffer.length;e++)n.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(n.__webglColorRenderbuffer[e]);n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=e.textures;for(let s=0,o=r.length;s<o;s++){const e=i.get(r[s]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),a.memory.textures--),i.remove(r[s])}i.remove(e)}(n)}function w(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete d.get(r)[n.__cacheKey],a.memory.textures--}let T=0;function A(e,r){const s=i.get(e);if(e.isVideoTexture&&function(t){const e=a.render.frame;h.get(t)!==e&&(h.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&s.__version!==e.version){const t=e.image;if(null===t);else if(!1!==t.complete)return void L(s,e,r)}n.bindTexture(t.TEXTURE_2D,s.__webglTexture,t.TEXTURE0+r)}const E={[ih]:t.REPEAT,[rh]:t.CLAMP_TO_EDGE,[sh]:t.MIRRORED_REPEAT},C={[ah]:t.NEAREST,[oh]:t.NEAREST_MIPMAP_NEAREST,[lh]:t.NEAREST_MIPMAP_LINEAR,[ch]:t.LINEAR,[hh]:t.LINEAR_MIPMAP_NEAREST,[uh]:t.LINEAR_MIPMAP_LINEAR},R={[Cu]:t.NEVER,[Ou]:t.ALWAYS,[Ru]:t.LESS,[Iu]:t.LEQUAL,[Pu]:t.EQUAL,[Nu]:t.GEQUAL,[Lu]:t.GREATER,[Du]:t.NOTEQUAL};function P(n,s){if(s.type===vh&&!1===e.has("OES_texture_float_linear")&&(s.magFilter===ch||s.magFilter===hh||s.magFilter===lh||s.magFilter===uh||s.minFilter===ch||s.minFilter===hh||s.minFilter===lh||s.minFilter),t.texParameteri(n,t.TEXTURE_WRAP_S,E[s.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,E[s.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,E[s.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,C[s.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,C[s.minFilter]),s.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,R[s.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(s.magFilter===ah)return;if(s.minFilter!==lh&&s.minFilter!==uh)return;if(s.type===vh&&!1===e.has("OES_texture_float_linear"))return;if(s.anisotropy>1||i.get(s).__currentAnisotropy){const a=e.get("EXT_texture_filter_anisotropic");t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy}}}function I(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",M));const r=n.source;let s=d.get(r);void 0===s&&(s={},d.set(r,s));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(o!==e.__cacheKey){void 0===s[o]&&(s[o]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[e.__cacheKey];void 0!==r&&(s[e.__cacheKey].usedTimes--,0===r.usedTimes&&w(n)),e.__cacheKey=o,e.__webglTexture=s[o].texture}return i}function L(e,a,o){let l=t.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=t.TEXTURE_3D);const c=I(e,a),h=a.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+o);const u=i.get(h);if(h.version!==u.__version||!0===c){n.activeTexture(t.TEXTURE0+o);const e=hd.getPrimaries(hd.workingColorSpace),i=a.colorSpace===Mu?null:hd.getPrimaries(a.colorSpace),d=a.colorSpace===Mu||e===i?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=m(a.image,!1,r.maxTextureSize);p=z(a,p);const f=s.convert(a.format,a.colorSpace),v=s.convert(a.type);let M,S=y(a.internalFormat,f,v,a.colorSpace,a.isVideoTexture);P(l,a);const w=a.mipmaps,T=!0!==a.isVideoTexture,A=void 0===u.__version||!0===c,E=h.dataReady,C=b(a,p);if(a.isDepthTexture)S=x(a.format===Ph,a.type),A&&(T?n.texStorage2D(t.TEXTURE_2D,1,S,p.width,p.height):n.texImage2D(t.TEXTURE_2D,0,S,p.width,p.height,0,f,v,null));else if(a.isDataTexture)if(w.length>0){T&&A&&n.texStorage2D(t.TEXTURE_2D,C,S,w[0].width,w[0].height);for(let e=0,i=w.length;e<i;e++)M=w[e],T?E&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,f,v,M.data):n.texImage2D(t.TEXTURE_2D,e,S,M.width,M.height,0,f,v,M.data);a.generateMipmaps=!1}else T?(A&&n.texStorage2D(t.TEXTURE_2D,C,S,p.width,p.height),E&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,p.width,p.height,f,v,p.data)):n.texImage2D(t.TEXTURE_2D,0,S,p.width,p.height,0,f,v,p.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){T&&A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,C,S,w[0].width,w[0].height,p.depth);for(let e=0,i=w.length;e<i;e++)if(M=w[e],a.format!==Ah){if(null!==f)if(T){if(E)if(a.layerUpdates.size>0){const i=Dx(M.width,M.height,a.format,a.type);for(const r of a.layerUpdates){const s=M.data.subarray(r*i/M.data.BYTES_PER_ELEMENT,(r+1)*i/M.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,r,M.width,M.height,1,f,s)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,M.width,M.height,p.depth,f,M.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,S,M.width,M.height,p.depth,0,M.data,0,0)}else T?E&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,M.width,M.height,p.depth,f,v,M.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,S,M.width,M.height,p.depth,0,f,v,M.data)}else{T&&A&&n.texStorage2D(t.TEXTURE_2D,C,S,w[0].width,w[0].height);for(let e=0,i=w.length;e<i;e++)M=w[e],a.format!==Ah?null!==f&&(T?E&&n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,f,M.data):n.compressedTexImage2D(t.TEXTURE_2D,e,S,M.width,M.height,0,M.data)):T?E&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,f,v,M.data):n.texImage2D(t.TEXTURE_2D,e,S,M.width,M.height,0,f,v,M.data)}else if(a.isDataArrayTexture)if(T){if(A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,C,S,p.width,p.height,p.depth),E)if(a.layerUpdates.size>0){const e=Dx(p.width,p.height,a.format,a.type);for(const i of a.layerUpdates){const r=p.data.subarray(i*e/p.data.BYTES_PER_ELEMENT,(i+1)*e/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,i,p.width,p.height,1,f,v,r)}a.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,v,p.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,S,p.width,p.height,p.depth,0,f,v,p.data);else if(a.isData3DTexture)T?(A&&n.texStorage3D(t.TEXTURE_3D,C,S,p.width,p.height,p.depth),E&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,v,p.data)):n.texImage3D(t.TEXTURE_3D,0,S,p.width,p.height,p.depth,0,f,v,p.data);else if(a.isFramebufferTexture){if(A)if(T)n.texStorage2D(t.TEXTURE_2D,C,S,p.width,p.height);else{let e=p.width,i=p.height;for(let r=0;r<C;r++)n.texImage2D(t.TEXTURE_2D,r,S,e,i,0,f,v,null),e>>=1,i>>=1}}else if(w.length>0){if(T&&A){const e=H(w[0]);n.texStorage2D(t.TEXTURE_2D,C,S,e.width,e.height)}for(let e=0,i=w.length;e<i;e++)M=w[e],T?E&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,f,v,M):n.texImage2D(t.TEXTURE_2D,e,S,f,v,M);a.generateMipmaps=!1}else if(T){if(A){const e=H(p);n.texStorage2D(t.TEXTURE_2D,C,S,e.width,e.height)}E&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,f,v,p)}else n.texImage2D(t.TEXTURE_2D,0,S,f,v,p);g(a)&&_(l),u.__version=h.version,a.onUpdate&&a.onUpdate(a)}e.__version=a.version}function D(e,r,a,l,c,h){const u=s.convert(a.format,a.colorSpace),d=s.convert(a.type),p=y(a.internalFormat,u,d,a.colorSpace),f=i.get(r),m=i.get(a);if(m.__renderTarget=r,!f.__hasExternalTextures){const e=Math.max(1,r.width>>h),i=Math.max(1,r.height>>h);c===t.TEXTURE_3D||c===t.TEXTURE_2D_ARRAY?n.texImage3D(c,h,p,e,i,r.depth,0,u,d,null):n.texImage2D(c,h,p,e,i,0,u,d,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),B(r)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,l,c,m.__webglTexture,0,k(r)):(c===t.TEXTURE_2D||c>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,l,c,m.__webglTexture,h),n.bindFramebuffer(t.FRAMEBUFFER,null)}function N(e,n,i){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer){const r=n.depthTexture,s=r&&r.isDepthTexture?r.type:null,a=x(n.stencilBuffer,s),l=n.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=k(n);B(n)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,a,n.width,n.height):i?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,a,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,a,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,l,t.RENDERBUFFER,e)}else{const e=n.textures;for(let r=0;r<e.length;r++){const a=e[r],l=s.convert(a.format,a.colorSpace),c=s.convert(a.type),h=y(a.internalFormat,l,c,a.colorSpace),u=k(n);i&&!1===B(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,u,h,n.width,n.height):B(n)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,u,h,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,h,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function O(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==e.depthTexture){const t=e.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),t){const e=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,t.removeEventListener("dispose",e)};t.addEventListener("dispose",e),r.__depthDisposeCallback=e}r.__boundDepthTexture=t}if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const s=i.get(r.depthTexture);s.__renderTarget=r,s.__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),A(r.depthTexture,0);const a=s.__webglTexture,l=k(r);if(r.depthTexture.format===Rh)B(r)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0,l):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==Ph)throw new Error("Unknown depthTexture format");B(r)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0,l):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[i]),void 0===r.__webglDepthbuffer[i])r.__webglDepthbuffer[i]=t.createRenderbuffer(),N(r.__webglDepthbuffer[i],e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,s=r.__webglDepthbuffer[i];t.bindRenderbuffer(t.RENDERBUFFER,s),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,s)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=t.createRenderbuffer(),N(r.__webglDepthbuffer,e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,i=r.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,i)}n.bindFramebuffer(t.FRAMEBUFFER,null)}const U=[],F=[];function k(t){return Math.min(r.maxSamples,t.samples)}function B(t){const n=i.get(t);return t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function z(t,e){const n=t.colorSpace;t.format,t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||n!==wu&&n!==Mu&&hd.getTransfer(n),e}function H(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?(c.width=t.naturalWidth||t.width,c.height=t.naturalHeight||t.height):"undefined"!=typeof VideoFrame&&t instanceof VideoFrame?(c.width=t.displayWidth,c.height=t.displayHeight):(c.width=t.width,c.height=t.height),c}this.allocateTextureUnit=function(){const t=T;return r.maxTextures,T+=1,t},this.resetTextureUnits=function(){T=0},this.setTexture2D=A,this.setTexture2DArray=function(e,r){const s=i.get(e);e.version>0&&s.__version!==e.version?L(s,e,r):n.bindTexture(t.TEXTURE_2D_ARRAY,s.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const s=i.get(e);e.version>0&&s.__version!==e.version?L(s,e,r):n.bindTexture(t.TEXTURE_3D,s.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,a){const o=i.get(e);e.version>0&&o.__version!==e.version?function(e,a,o){if(6!==a.image.length)return;const l=I(e,a),c=a.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+o);const h=i.get(c);if(c.version!==h.__version||!0===l){n.activeTexture(t.TEXTURE0+o);const e=hd.getPrimaries(hd.workingColorSpace),i=a.colorSpace===Mu?null:hd.getPrimaries(a.colorSpace),u=a.colorSpace===Mu||e===i?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,u);const d=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,f=[];for(let t=0;t<6;t++)f[t]=d||p?p?a.image[t].image:a.image[t]:m(a.image[t],!0,r.maxCubemapSize),f[t]=z(a,f[t]);const v=f[0],x=s.convert(a.format,a.colorSpace),M=s.convert(a.type),S=y(a.internalFormat,x,M,a.colorSpace),w=!0!==a.isVideoTexture,T=void 0===h.__version||!0===l,A=c.dataReady;let E,C=b(a,v);if(P(t.TEXTURE_CUBE_MAP,a),d){w&&T&&n.texStorage2D(t.TEXTURE_CUBE_MAP,C,S,v.width,v.height);for(let e=0;e<6;e++){E=f[e].mipmaps;for(let i=0;i<E.length;i++){const r=E[i];a.format!==Ah?null!==x&&(w?A&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,r.width,r.height,x,r.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,S,r.width,r.height,0,r.data)):w?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,r.width,r.height,x,M,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,S,r.width,r.height,0,x,M,r.data)}}}else{if(E=a.mipmaps,w&&T){E.length>0&&C++;const e=H(f[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,C,S,e.width,e.height)}for(let e=0;e<6;e++)if(p){w?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,f[e].width,f[e].height,x,M,f[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,f[e].width,f[e].height,0,x,M,f[e].data);for(let i=0;i<E.length;i++){const r=E[i].image[e].image;w?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,r.width,r.height,x,M,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,S,r.width,r.height,0,x,M,r.data)}}else{w?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,x,M,f[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,x,M,f[e]);for(let i=0;i<E.length;i++){const r=E[i];w?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,x,M,r.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,S,x,M,r.image[e])}}}g(a)&&_(t.TEXTURE_CUBE_MAP),h.__version=c.version,a.onUpdate&&a.onUpdate(a)}e.__version=a.version}(o,e,a):n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture,t.TEXTURE0+a)},this.rebindTextures=function(e,n,r){const s=i.get(e);void 0!==n&&D(s.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==r&&O(e)},this.setupRenderTarget=function(e){const r=e.texture,o=i.get(e),l=i.get(r);e.addEventListener("dispose",S);const c=e.textures,h=!0===e.isWebGLCubeRenderTarget,u=c.length>1;if(u||(void 0===l.__webglTexture&&(l.__webglTexture=t.createTexture()),l.__version=r.version,a.memory.textures++),h){o.__webglFramebuffer=[];for(let e=0;e<6;e++)if(r.mipmaps&&r.mipmaps.length>0){o.__webglFramebuffer[e]=[];for(let n=0;n<r.mipmaps.length;n++)o.__webglFramebuffer[e][n]=t.createFramebuffer()}else o.__webglFramebuffer[e]=t.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){o.__webglFramebuffer=[];for(let e=0;e<r.mipmaps.length;e++)o.__webglFramebuffer[e]=t.createFramebuffer()}else o.__webglFramebuffer=t.createFramebuffer();if(u)for(let e=0,n=c.length;e<n;e++){const n=i.get(c[e]);void 0===n.__webglTexture&&(n.__webglTexture=t.createTexture(),a.memory.textures++)}if(e.samples>0&&!1===B(e)){o.__webglMultisampledFramebuffer=t.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];o.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const r=s.convert(i.format,i.colorSpace),a=s.convert(i.type),l=y(i.internalFormat,r,a,i.colorSpace,!0===e.isXRRenderTarget),h=k(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,h,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,o.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(o.__webglDepthRenderbuffer=t.createRenderbuffer(),N(o.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,l.__webglTexture),P(t.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)D(o.__webglFramebuffer[n][i],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else D(o.__webglFramebuffer[n],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(r)&&_(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(u){for(let r=0,s=c.length;r<s;r++){const s=c[r],a=i.get(s);n.bindTexture(t.TEXTURE_2D,a.__webglTexture),P(t.TEXTURE_2D,s),D(o.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0+r,t.TEXTURE_2D,0),g(s)&&_(t.TEXTURE_2D)}n.unbindTexture()}else{let i=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(i=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),P(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)D(o.__webglFramebuffer[n],e,r,t.COLOR_ATTACHMENT0,i,n);else D(o.__webglFramebuffer,e,r,t.COLOR_ATTACHMENT0,i,0);g(r)&&_(i),n.unbindTexture()}e.depthBuffer&&O(e)},this.updateRenderTargetMipmap=function(t){const e=t.textures;for(let r=0,s=e.length;r<s;r++){const s=e[r];if(g(s)){const e=v(t),r=i.get(s).__webglTexture;n.bindTexture(e,r),_(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.samples>0)if(!1===B(e)){const r=e.textures,s=e.width,a=e.height;let o=t.COLOR_BUFFER_BIT;const c=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,h=i.get(e),u=r.length>1;if(u)for(let e=0;e<r.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,h.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,h.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,h.__webglFramebuffer);for(let n=0;n<r.length;n++){if(e.resolveDepthBuffer&&(e.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&e.resolveStencilBuffer&&(o|=t.STENCIL_BUFFER_BIT)),u){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,h.__webglColorRenderbuffer[n]);const e=i.get(r[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,s,a,0,0,s,a,o,t.NEAREST),!0===l&&(U.length=0,F.length=0,U.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&!1===e.resolveDepthBuffer&&(U.push(c),F.push(c),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,F)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,U))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),u)for(let e=0;e<r.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,h.__webglColorRenderbuffer[e]);const s=i.get(r[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,h.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,s,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,h.__webglMultisampledFramebuffer)}else if(e.depthBuffer&&!1===e.resolveDepthBuffer&&l){const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=D,this.useMultisampledRTT=B}function hS(t,e){return{convert:function(n,i=""){let r;const s=hd.getTransfer(i);if(n===dh)return t.UNSIGNED_BYTE;if(n===xh)return t.UNSIGNED_SHORT_4_4_4_4;if(n===bh)return t.UNSIGNED_SHORT_5_5_5_1;if(n===Sh)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===ph)return t.BYTE;if(n===fh)return t.SHORT;if(n===mh)return t.UNSIGNED_SHORT;if(n===gh)return t.INT;if(n===_h)return t.UNSIGNED_INT;if(n===vh)return t.FLOAT;if(n===yh)return t.HALF_FLOAT;if(n===wh)return t.ALPHA;if(n===Th)return t.RGB;if(n===Ah)return t.RGBA;if(n===Eh)return t.LUMINANCE;if(n===Ch)return t.LUMINANCE_ALPHA;if(n===Rh)return t.DEPTH_COMPONENT;if(n===Ph)return t.DEPTH_STENCIL;if(n===Ih)return t.RED;if(n===Lh)return t.RED_INTEGER;if(n===Dh)return t.RG;if(n===Nh)return t.RG_INTEGER;if(n===Oh)return t.RGBA_INTEGER;if(n===Uh||n===Fh||n===kh||n===Bh)if(s===Au){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Uh)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Fh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===kh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Bh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Uh)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Fh)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===kh)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Bh)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===zh||n===Hh||n===Vh||n===Gh){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===zh)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Hh)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Vh)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Gh)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Wh||n===jh||n===Xh){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Wh||n===jh)return s===Au?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Xh)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===qh||n===Yh||n===$h||n===Zh||n===Kh||n===Jh||n===Qh||n===tu||n===eu||n===nu||n===iu||n===ru||n===su||n===au){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===qh)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Yh)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===$h)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Zh)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Kh)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Jh)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Qh)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===tu)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===eu)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===nu)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===iu)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ru)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===su)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===au)return s===Au?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ou||n===lu||n===cu){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(n===ou)return s===Au?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===lu)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===cu)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===hu||n===uu||n===du||n===pu){if(r=e.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===ou)return r.COMPRESSED_RED_RGTC1_EXT;if(n===uu)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===du)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===pu)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Mh?t.UNSIGNED_INT_24_8:void 0!==t[n]?t[n]:null}}}class uS{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const i=new yd;t.properties.get(i).__webglTexture=e.texture,e.depthNear===n.depthNear&&e.depthFar===n.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new Ff({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Pf(new J_(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class dS extends zu{constructor(t,e){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,h=null,u=null,d=null,p=null;const f=new uS,m=e.getContextAttributes();let g=null,_=null;const v=[],y=[],x=new Ju;let b=null;const M=new Vf;M.viewport=new xd;const S=new Vf;S.viewport=new xd;const w=[M,S],T=new Py;let A=null,E=null;function C(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||s),n.dispatchEvent({type:t.type,data:t.inputSource}))}function R(){i.removeEventListener("select",C),i.removeEventListener("selectstart",C),i.removeEventListener("selectend",C),i.removeEventListener("squeeze",C),i.removeEventListener("squeezestart",C),i.removeEventListener("squeezeend",C),i.removeEventListener("end",R),i.removeEventListener("inputsourceschange",P);for(let t=0;t<v.length;t++){const e=y[t];null!==e&&(y[t]=null,v[t].disconnect(e))}A=null,E=null,f.reset(),t.setRenderTarget(g),d=null,u=null,h=null,i=null,_=null,O.stop(),n.isPresenting=!1,t.setPixelRatio(b),t.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function P(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let i=y.indexOf(n);if(-1===i){for(let t=0;t<v.length;t++){if(t>=y.length){y.push(n),i=t;break}if(null===y[t]){y[t]=n,i=t;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new $f,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new $f,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new $f,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,n.isPresenting},this.setReferenceSpaceType=function(t){a=t,n.isPresenting},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){g=t.getRenderTarget(),i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",R),i.addEventListener("inputsourceschange",P),!0!==m.xrCompatible&&await e.makeXRCompatible(),b=t.getPixelRatio(),t.getSize(x);if("undefined"!=typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,s=null,a=null;m.depth&&(a=m.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=m.stencil?Ph:Rh,s=m.stencil?Mh:_h);const o={colorFormat:e.RGBA8,depthFormat:a,scaleFactor:r};h=new XRWebGLBinding(i,e),u=h.createProjectionLayer(o),i.updateRenderState({layers:[u]}),t.setPixelRatio(1),t.setSize(u.textureWidth,u.textureHeight,!1),_=new Md(u.textureWidth,u.textureHeight,{format:Ah,type:dh,depthTexture:new kg(u.textureWidth,u.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:t.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===u.ignoreDepthValues,resolveStencilBuffer:!1===u.ignoreDepthValues})}else{const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:d}),t.setPixelRatio(1),t.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new Md(d.framebufferWidth,d.framebufferHeight,{format:Ah,type:dh,colorSpace:t.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}_.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),O.setContext(i),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const I=new Ad,L=new Ad;function D(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;let e=t.near,n=t.far;null!==f.texture&&(f.depthNear>0&&(e=f.depthNear),f.depthFar>0&&(n=f.depthFar)),T.near=S.near=M.near=e,T.far=S.far=M.far=n,A===T.near&&E===T.far||(i.updateRenderState({depthNear:T.near,depthFar:T.far}),A=T.near,E=T.far),M.layers.mask=2|t.layers.mask,S.layers.mask=4|t.layers.mask,T.layers.mask=M.layers.mask|S.layers.mask;const r=t.parent,s=T.cameras;D(T,r);for(let i=0;i<s.length;i++)D(s[i],r);2===s.length?function(t,e,n){I.setFromMatrixPosition(e.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const i=I.distanceTo(L),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=a*h,p=a*u,f=i/(-h+u),m=f*-h;if(e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),-1===r[10])t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const e=a+f,n=o+f,r=d-m,s=p+(i-m),h=l*o/n*e,u=c*o/n*e;t.projectionMatrix.makePerspective(r,s,h,u,e,n),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}}(T,M,S):T.projectionMatrix.copy(M.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*Wu*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,T,r)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==u||null!==d)return o},this.setFoveation=function(t){o=t,null!==u&&(u.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(T)};let N=null;const O=new Nx;O.setAnimationLoop((function(e,r){if(c=r.getViewerPose(l||s),p=r,null!==c){const e=c.views;null!==d&&(t.setRenderTargetFramebuffer(_,d.framebuffer),t.setRenderTarget(_));let n=!1;e.length!==T.cameras.length&&(T.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let s=null;if(null!==d)s=d.getViewport(r);else{const e=h.getViewSubImage(u,r);s=e.viewport,0===i&&(t.setRenderTargetTextures(_,e.colorTexture,u.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(_))}let a=w[i];void 0===a&&(a=new Vf,a.layers.enable(i),a.viewport=new xd,w[i]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&(T.matrix.copy(a.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===n&&T.cameras.push(a)}const r=i.enabledFeatures;if(r&&r.includes("depth-sensing")&&"gpu-optimized"==i.depthUsage&&h){const n=h.getDepthInformation(e[0]);n&&n.isValid&&n.texture&&f.init(t,n,i.renderState)}}for(let t=0;t<v.length;t++){const e=y[t],n=v[t];null!==e&&void 0!==n&&n.update(e,r,l||s)}N&&N(e,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null})),this.setAnimationLoop=function(t){N=t},this.dispose=function(){}}}const pS=new dp,fS=new np;function mS(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function i(t,i){t.opacity.value=i.opacity,i.color&&t.diffuse.value.copy(i.color),i.emissive&&t.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(t.map.value=i.map,n(i.map,t.mapTransform)),i.alphaMap&&(t.alphaMap.value=i.alphaMap,n(i.alphaMap,t.alphaMapTransform)),i.bumpMap&&(t.bumpMap.value=i.bumpMap,n(i.bumpMap,t.bumpMapTransform),t.bumpScale.value=i.bumpScale,i.side===hc&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,n(i.normalMap,t.normalMapTransform),t.normalScale.value.copy(i.normalScale),i.side===hc&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,n(i.displacementMap,t.displacementMapTransform),t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,t.emissiveMapTransform)),i.specularMap&&(t.specularMap.value=i.specularMap,n(i.specularMap,t.specularMapTransform)),i.alphaTest>0&&(t.alphaTest.value=i.alphaTest);const r=e.get(i),s=r.envMap,a=r.envMapRotation;s&&(t.envMap.value=s,pS.copy(a),pS.x*=-1,pS.y*=-1,pS.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(pS.y*=-1,pS.z*=-1),t.envMapRotation.value.setFromMatrix4(fS.makeRotationFromEuler(pS)),t.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,t.reflectivity.value=i.reflectivity,t.ior.value=i.ior,t.refractionRatio.value=i.refractionRatio),i.lightMap&&(t.lightMap.value=i.lightMap,t.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,t.lightMapTransform)),i.aoMap&&(t.aoMap.value=i.aoMap,t.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,Of(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,s,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(t,r):r.isMeshToonMaterial?(i(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(i(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(i(t,r),function(t,e){t.metalness.value=e.metalness,e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap,n(e.metalnessMap,t.metalnessMapTransform));t.roughness.value=e.roughness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap,n(e.roughnessMap,t.roughnessMapTransform));e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===hc&&t.clearcoatNormalScale.value.negate()));e.dispersion>0&&(t.dispersion.value=e.dispersion);e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,o)):r.isMeshMatcapMaterial?(i(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?i(t,r):r.isMeshDistanceMaterial?(i(t,r),function(t,n){const i=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(i.matrixWorld),t.nearDistance.value=i.shadow.camera.near,t.farDistance.value=i.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?i(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,i,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r,s,a):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function gS(t,e,n,i){let r={},s={},a=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(t,e,n,i){const r=t.value,s=e+"_"+n;if(void 0===i[s])return i[s]="number"==typeof r||"boolean"==typeof r?r:r.clone(),!0;{const t=i[s];if("number"==typeof r||"boolean"==typeof r){if(t!==r)return i[s]=r,!0}else if(!1===t.equals(r))return t.copy(r),!0}return!1}function c(t){const e={boundary:0,storage:0};return"number"==typeof t||"boolean"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture,e}function h(e){const n=e.target;n.removeEventListener("dispose",h);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(t,e){const n=e.program;i.uniformBlockBinding(t,n)},update:function(n,u){let d=r[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const i=16;for(let s=0,a=e.length;s<a;s++){const t=Array.isArray(e[s])?e[s]:[e[s]];for(let e=0,r=t.length;e<r;e++){const r=t[e],s=Array.isArray(r.value)?r.value:[r.value];for(let t=0,e=s.length;t<e;t++){const e=c(s[t]),a=n%i,o=a%e.boundary,l=a+o;n+=o,0!==l&&i-l<e.storage&&(n+=i-l),r.__data=new Float32Array(e.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=e.storage}}}const r=n%i;r>0&&(n+=i-r);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<o;t++)if(-1===a.indexOf(t))return a.push(t),t;return 0}();e.__bindingPointIndex=n;const i=t.createBuffer(),r=e.__size,s=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,r,s),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",h));const p=u.program;i.updateUBOMapping(n,p);const f=e.render.frame;s[n.id]!==f&&(!function(e){const n=r[e.id],i=e.uniforms,s=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let r=0,a=i.length;r<a;r++){const e=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!0===l(i,r,n,s)){const e=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let s=0;s<n.length;s++){const a=n[s],o=c(a);"number"==typeof a||"boolean"==typeof a?(i.__data[0]=a,t.bufferSubData(t.UNIFORM_BUFFER,e+r,i.__data)):a.isMatrix3?(i.__data[0]=a.elements[0],i.__data[1]=a.elements[1],i.__data[2]=a.elements[2],i.__data[3]=0,i.__data[4]=a.elements[3],i.__data[5]=a.elements[4],i.__data[6]=a.elements[5],i.__data[7]=0,i.__data[8]=a.elements[6],i.__data[9]=a.elements[7],i.__data[10]=a.elements[8],i.__data[11]=0):(a.toArray(i.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,i.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),s[n.id]=f)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);a=[],r={},s={}}}}class _S{constructor(t={}){const{canvas:e=sd(),context:n=null,depth:i=!0,stencil:r=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:u=!1}=t;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=s;const p=new Uint32Array(4),f=new Int32Array(4);let m=null,g=null;const _=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Su,this.toneMapping=Hc,this.toneMappingExposure=1;const y=this;let x=!1,b=0,M=0,S=null,w=-1,T=null;const A=new xd,E=new xd;let C=null;const R=new Yp(0);let P=0,I=e.width,L=e.height,D=1,N=null,O=null;const U=new xd(0,0,I,L),F=new xd(0,0,I,L);let k=!1;const B=new Km;let z=!1,H=!1;this.transmissionResolutionScale=1;const V=new np,G=new np,W=new Ad,j=new xd,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let q=!1;function Y(){return null===S?D:1}let $,Z,K,J,Q,tt,et,nt,it,rt,st,at,ot,lt,ct,ht,ut,dt,pt,ft,mt,gt,_t,vt,yt=n;function xt(t,n){return e.getContext(t,n)}try{const t={alpha:!0,depth:i,stencil:r,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${ic}`),e.addEventListener("webglcontextlost",St,!1),e.addEventListener("webglcontextrestored",wt,!1),e.addEventListener("webglcontextcreationerror",Tt,!1),null===yt){const e="webgl2";if(yt=xt(e,t),null===yt)throw xt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Gt){throw Gt}function bt(){$=new pb(yt),$.init(),gt=new hS(yt,$),Z=new jx(yt,$,t,gt),K=new lS(yt,$),Z.reverseDepthBuffer&&u&&K.buffers.depth.setReversed(!0),J=new gb(yt),Q=new $M,tt=new cS(yt,$,K,Q,Z,gt,J),et=new qx(y),nt=new db(y),it=new Ox(yt),_t=new Gx(yt,it),rt=new fb(yt,it,J,_t),st=new vb(yt,rt,it,J),pt=new _b(yt,Z,tt),ht=new Xx(Q),at=new YM(y,et,nt,$,Z,_t,ht),ot=new mS(y,Q),lt=new QM,ct=new sS($),dt=new Vx(y,et,nt,K,st,d,o),ut=new aS(y,st,Z),vt=new gS(yt,J,Z,K),ft=new Wx(yt,$,J),mt=new mb(yt,$,J),J.programs=at.programs,y.capabilities=Z,y.extensions=$,y.properties=Q,y.renderLists=lt,y.shadowMap=ut,y.state=K,y.info=J}bt();const Mt=new dS(y,yt);function St(t){t.preventDefault(),x=!0}function wt(){x=!1;const t=J.autoReset,e=ut.enabled,n=ut.autoUpdate,i=ut.needsUpdate,r=ut.type;bt(),J.autoReset=t,ut.enabled=e,ut.autoUpdate=n,ut.needsUpdate=i,ut.type=r}function Tt(t){}function At(t){const e=t.target;e.removeEventListener("dispose",At),function(t){(function(t){const e=Q.get(t).programs;void 0!==e&&(e.forEach((function(t){at.releaseProgram(t)})),t.isShaderMaterial&&at.releaseShaderCache(t))})(t),Q.remove(t)}(e)}function Et(t,e,n){!0===t.transparent&&2===t.side&&!1===t.forceSinglePass?(t.side=hc,t.needsUpdate=!0,Ft(t,e,n),t.side=cc,t.needsUpdate=!0,Ft(t,e,n),t.side=2):Ft(t,e,n)}this.xr=Mt,this.getContext=function(){return yt},this.getContextAttributes=function(){return yt.getContextAttributes()},this.forceContextLoss=function(){const t=$.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=$.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(t){void 0!==t&&(D=t,this.setSize(I,L,!1))},this.getSize=function(t){return t.set(I,L)},this.setSize=function(t,n,i=!0){Mt.isPresenting||(I=t,L=n,e.width=Math.floor(t*D),e.height=Math.floor(n*D),!0===i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(I*D,L*D).floor()},this.setDrawingBufferSize=function(t,n,i){I=t,L=n,D=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(A)},this.getViewport=function(t){return t.copy(U)},this.setViewport=function(t,e,n,i){t.isVector4?U.set(t.x,t.y,t.z,t.w):U.set(t,e,n,i),K.viewport(A.copy(U).multiplyScalar(D).round())},this.getScissor=function(t){return t.copy(F)},this.setScissor=function(t,e,n,i){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,i),K.scissor(E.copy(F).multiplyScalar(D).round())},this.getScissorTest=function(){return k},this.setScissorTest=function(t){K.setScissorTest(k=t)},this.setOpaqueSort=function(t){N=t},this.setTransparentSort=function(t){O=t},this.getClearColor=function(t){return t.copy(dt.getClearColor())},this.setClearColor=function(){dt.setClearColor(...arguments)},this.getClearAlpha=function(){return dt.getClearAlpha()},this.setClearAlpha=function(){dt.setClearAlpha(...arguments)},this.clear=function(t=!0,e=!0,n=!0){let i=0;if(t){let t=!1;if(null!==S){const e=S.texture.format;t=e===Oh||e===Nh||e===Lh}if(t){const t=S.texture.type,e=t===dh||t===_h||t===mh||t===Mh||t===xh||t===bh,n=dt.getClearColor(),i=dt.getClearAlpha(),r=n.r,s=n.g,a=n.b;e?(p[0]=r,p[1]=s,p[2]=a,p[3]=i,yt.clearBufferuiv(yt.COLOR,0,p)):(f[0]=r,f[1]=s,f[2]=a,f[3]=i,yt.clearBufferiv(yt.COLOR,0,f))}else i|=yt.COLOR_BUFFER_BIT}e&&(i|=yt.DEPTH_BUFFER_BIT),n&&(i|=yt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),yt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",St,!1),e.removeEventListener("webglcontextrestored",wt,!1),e.removeEventListener("webglcontextcreationerror",Tt,!1),dt.dispose(),lt.dispose(),ct.dispose(),Q.dispose(),et.dispose(),nt.dispose(),st.dispose(),_t.dispose(),vt.dispose(),at.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",Rt),Mt.removeEventListener("sessionend",Pt),It.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=X);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(t,e,n,i,r){!0!==e.isScene&&(e=X);tt.resetTextureUnits();const s=e.fog,a=i.isMeshStandardMaterial?e.environment:null,o=null===S?y.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:wu,l=(i.isMeshStandardMaterial?nt:et).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,h=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),u=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=Hc;i.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(f=y.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,_=void 0!==m?m.length:0,v=Q.get(i),x=g.state.lights;if(!0===z&&(!0===H||t!==T)){const e=t===T&&i.id===w;ht.setState(i,t,e)}let b=!1;i.version===v.__version?v.needsLights&&v.lightsStateVersion!==x.state.version||v.outputColorSpace!==o||r.isBatchedMesh&&!1===v.batching?b=!0:r.isBatchedMesh||!0!==v.batching?r.isBatchedMesh&&!0===v.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===v.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===v.instancing?b=!0:r.isInstancedMesh||!0!==v.instancing?r.isSkinnedMesh&&!1===v.skinning?b=!0:r.isSkinnedMesh||!0!==v.skinning?r.isInstancedMesh&&!0===v.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===v.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===v.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===v.instancingMorph&&null!==r.morphTexture||v.envMap!==l||!0===i.fog&&v.fog!==s?b=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ht.numPlanes&&v.numIntersection===ht.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==h||v.morphTargets!==u||v.morphNormals!==d||v.morphColors!==p||v.toneMapping!==f||v.morphTargetsCount!==_)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,v.__version=i.version);let M=v.currentProgram;!0===b&&(M=Ft(i,e,r));let A=!1,E=!1,C=!1;const R=M.getUniforms(),P=v.uniforms;K.useProgram(M.program)&&(A=!0,E=!0,C=!0);i.id!==w&&(w=i.id,E=!0);if(A||T!==t){K.buffers.depth.getReversed()?(V.copy(t.projectionMatrix),function(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(V),function(t){const e=t.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(V),R.setValue(yt,"projectionMatrix",V)):R.setValue(yt,"projectionMatrix",t.projectionMatrix),R.setValue(yt,"viewMatrix",t.matrixWorldInverse);const e=R.map.cameraPosition;void 0!==e&&e.setValue(yt,W.setFromMatrixPosition(t.matrixWorld)),Z.logarithmicDepthBuffer&&R.setValue(yt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&R.setValue(yt,"isOrthographic",!0===t.isOrthographicCamera),T!==t&&(T=t,E=!0,C=!0)}if(r.isSkinnedMesh){R.setOptional(yt,r,"bindMatrix"),R.setOptional(yt,r,"bindMatrixInverse");const t=r.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),R.setValue(yt,"boneTexture",t.boneTexture,tt))}r.isBatchedMesh&&(R.setOptional(yt,r,"batchingTexture"),R.setValue(yt,"batchingTexture",r._matricesTexture,tt),R.setOptional(yt,r,"batchingIdTexture"),R.setValue(yt,"batchingIdTexture",r._indirectTexture,tt),R.setOptional(yt,r,"batchingColorTexture"),null!==r._colorsTexture&&R.setValue(yt,"batchingColorTexture",r._colorsTexture,tt));const I=n.morphAttributes;void 0===I.position&&void 0===I.normal&&void 0===I.color||pt.update(r,n,M);(E||v.receiveShadow!==r.receiveShadow)&&(v.receiveShadow=r.receiveShadow,R.setValue(yt,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==e.environment&&(P.envMapIntensity.value=e.environmentIntensity);E&&(R.setValue(yt,"toneMappingExposure",y.toneMappingExposure),v.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(P,C),s&&!0===i.fog&&ot.refreshFogUniforms(P,s),ot.refreshMaterialUniforms(P,i,D,L,g.state.transmissionRenderTarget[t.id]),SM.upload(yt,kt(v),P,tt));i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(SM.upload(yt,kt(v),P,tt),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&R.setValue(yt,"center",r.center);if(R.setValue(yt,"modelViewMatrix",r.modelViewMatrix),R.setValue(yt,"normalMatrix",r.normalMatrix),R.setValue(yt,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,n=t.length;e<n;e++){const n=t[e];vt.update(n,M),vt.bind(n,M)}}return M}(t,e,n,i,r);K.setMaterial(i,a);let l=n.index,c=1;if(!0===i.wireframe){if(l=rt.getWireframeAttribute(n),void 0===l)return;c=2}const h=n.drawRange,u=n.attributes.position;let d=h.start*c,p=(h.start+h.count)*c;null!==s&&(d=Math.max(d,s.start*c),p=Math.min(p,(s.start+s.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):null!=u&&(d=Math.max(d,0),p=Math.min(p,u.count));const f=p-d;if(f<0||f===1/0)return;let m;_t.setup(r,i,o,n,l);let _=ft;if(null!==l&&(m=it.get(l),_=mt,_.setIndex(m)),r.isMesh)!0===i.wireframe?(K.setLineWidth(i.wireframeLinewidth*Y()),_.setMode(yt.LINES)):_.setMode(yt.TRIANGLES);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),K.setLineWidth(t*Y()),r.isLineSegments?_.setMode(yt.LINES):r.isLineLoop?_.setMode(yt.LINE_LOOP):_.setMode(yt.LINE_STRIP)}else r.isPoints?_.setMode(yt.POINTS):r.isSprite&&_.setMode(yt.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)od("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if($.get("WEBGL_multi_draw"))_.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const t=r._multiDrawStarts,e=r._multiDrawCounts,n=r._multiDrawCount,s=l?it.get(l).bytesPerElement:1,a=Q.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)a.setValue(yt,"_gl_DrawID",i),_.render(t[i]/s,e[i])}else if(r.isInstancedMesh)_.renderInstances(d,f,r.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);_.renderInstances(d,f,e)}else _.render(d,f)},this.compile=function(t,e,n=null){null===n&&(n=t),g=ct.get(n),g.init(e),v.push(g),n.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),t!==n&&t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),g.setupLights();const i=new Set;return t.traverse((function(t){if(!(t.isMesh||t.isPoints||t.isLine||t.isSprite))return;const e=t.material;if(e)if(Array.isArray(e))for(let r=0;r<e.length;r++){const s=e[r];Et(s,n,t),i.add(s)}else Et(e,n,t),i.add(e)})),g=v.pop(),i},this.compileAsync=function(t,e,n=null){const i=this.compile(t,e,n);return new Promise((e=>{function n(){i.forEach((function(t){Q.get(t).currentProgram.isReady()&&i.delete(t)})),0!==i.size?setTimeout(n,10):e(t)}null!==$.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Ct=null;function Rt(){It.stop()}function Pt(){It.start()}const It=new Nx;function Lt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)g.pushLight(t),t.castShadow&&g.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||B.intersectsSprite(t)){i&&j.setFromMatrixPosition(t.matrixWorld).applyMatrix4(G);const e=st.update(t),r=t.material;r.visible&&m.push(t,e,r,n,j.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||B.intersectsObject(t))){const e=st.update(t),r=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),j.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),j.copy(e.boundingSphere.center)),j.applyMatrix4(t.matrixWorld).applyMatrix4(G)),Array.isArray(r)){const i=e.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&m.push(t,e,o,n,j.z,a)}}else r.visible&&m.push(t,e,r,n,j.z,null)}const r=t.children;for(let s=0,a=r.length;s<a;s++)Lt(r[s],e,n,i)}function Dt(t,e,n,i){const r=t.opaque,s=t.transmissive,a=t.transparent;g.setupLightsView(n),!0===z&&ht.setGlobalState(y.clippingPlanes,n),i&&K.viewport(A.copy(i)),r.length>0&&Ot(r,e,n),s.length>0&&Ot(s,e,n),a.length>0&&Ot(a,e,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Nt(t,e,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[i.id]&&(g.state.transmissionRenderTarget[i.id]=new Md(1,1,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")||$.has("EXT_color_buffer_float")?yh:dh,minFilter:uh,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:hd.workingColorSpace}));const s=g.state.transmissionRenderTarget[i.id],a=i.viewport||A;s.setSize(a.z*y.transmissionResolutionScale,a.w*y.transmissionResolutionScale);const o=y.getRenderTarget();y.setRenderTarget(s),y.getClearColor(R),P=y.getClearAlpha(),P<1&&y.setClearColor(16777215,.5),y.clear(),q&&dt.render(n);const l=y.toneMapping;y.toneMapping=Hc;const c=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),g.setupLightsView(i),!0===z&&ht.setGlobalState(y.clippingPlanes,i),Ot(t,n,i),tt.updateMultisampleRenderTarget(s),tt.updateRenderTargetMipmap(s),!1===$.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=s.object,o=s.geometry,l=s.material,c=s.group;if(2===l.side&&a.layers.test(i.layers)){const e=l.side;l.side=hc,l.needsUpdate=!0,Ut(a,n,i,o,l,c),l.side=e,l.needsUpdate=!0,t=!0}}!0===t&&(tt.updateMultisampleRenderTarget(s),tt.updateRenderTargetMipmap(s))}y.setRenderTarget(o),y.setClearColor(R,P),void 0!==c&&(i.viewport=c),y.toneMapping=l}function Ot(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&Ut(a,e,n,o,l,c)}}function Ut(t,e,n,i,r,s){t.onBeforeRender(y,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(y,e,n,i,t,s),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=hc,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,s),r.side=cc,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,s),r.side=2):y.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(y,e,n,i,r,s)}function Ft(t,e,n){!0!==e.isScene&&(e=X);const i=Q.get(t),r=g.state.lights,s=g.state.shadowsArray,a=r.state.version,o=at.getParameters(t,r.state,s,e,n),l=at.getProgramCacheKey(o);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?nt:et).get(t.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===t.envMap?e.environmentRotation:t.envMapRotation,void 0===c&&(t.addEventListener("dispose",At),c=new Map,i.programs=c);let h=c.get(l);if(void 0!==h){if(i.currentProgram===h&&i.lightsStateVersion===a)return Bt(t,o),h}else o.uniforms=at.getUniforms(t),t.onBeforeCompile(o,y),h=at.acquireProgram(o,l),c.set(l,h),i.uniforms=o.uniforms;const u=i.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=ht.uniform),Bt(t,o),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=a,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=h,i.uniformsList=null,h}function kt(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=SM.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function Bt(t,e){const n=Q.get(t);n.outputColorSpace=e.outputColorSpace,n.batching=e.batching,n.batchingColor=e.batchingColor,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.instancingMorph=e.instancingMorph,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}It.setAnimationLoop((function(t){Ct&&Ct(t)})),"undefined"!=typeof self&&It.setContext(self),this.setAnimationLoop=function(t){Ct=t,Mt.setAnimationLoop(t),null===t?It.stop():It.start()},Mt.addEventListener("sessionstart",Rt),Mt.addEventListener("sessionend",Pt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return;if(!0===x)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Mt.enabled&&!0===Mt.isPresenting&&(!0===Mt.cameraAutoUpdate&&Mt.updateCamera(e),e=Mt.getCamera()),!0===t.isScene&&t.onBeforeRender(y,t,e,S),g=ct.get(t,v.length),g.init(e),v.push(g),G.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),B.setFromProjectionMatrix(G),H=this.localClippingEnabled,z=ht.init(this.clippingPlanes,H),m=lt.get(t,_.length),m.init(),_.push(m),!0===Mt.enabled&&!0===Mt.isPresenting){const t=y.xr.getDepthSensingMesh();null!==t&&Lt(t,e,-1/0,y.sortObjects)}Lt(t,e,0,y.sortObjects),m.finish(),!0===y.sortObjects&&m.sort(N,O),q=!1===Mt.enabled||!1===Mt.isPresenting||!1===Mt.hasDepthSensing(),q&&dt.addToRenderList(m,t),this.info.render.frame++,!0===z&&ht.beginShadows();const n=g.state.shadowsArray;ut.render(n,t,e),!0===z&&ht.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=m.opaque,r=m.transmissive;if(g.setupLights(),e.isArrayCamera){const n=e.cameras;if(r.length>0)for(let e=0,s=n.length;e<s;e++){Nt(i,r,t,n[e])}q&&dt.render(t);for(let e=0,i=n.length;e<i;e++){const i=n[e];Dt(m,t,i,i.viewport)}}else r.length>0&&Nt(i,r,t,e),q&&dt.render(t),Dt(m,t,e);null!==S&&0===M&&(tt.updateMultisampleRenderTarget(S),tt.updateRenderTargetMipmap(S)),!0===t.isScene&&t.onAfterRender(y,t,e),_t.resetDefaultState(),w=-1,T=null,v.pop(),v.length>0?(g=v[v.length-1],!0===z&&ht.setGlobalState(y.clippingPlanes,g.state.camera)):g=null,_.pop(),m=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(t,e,n){Q.get(t.texture).__webglTexture=e,Q.get(t.depthTexture).__webglTexture=n;const i=Q.get(t);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===$.has("WEBGL_multisampled_render_to_texture")&&(i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,e){const n=Q.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e};const zt=yt.createFramebuffer();this.setRenderTarget=function(t,e=0,n=0){S=t,b=e,M=n;let i=!0,r=null,s=!1,a=!1;if(t){const o=Q.get(t);if(void 0!==o.__useDefaultFramebuffer)K.bindFramebuffer(yt.FRAMEBUFFER,null),i=!1;else if(void 0===o.__webglFramebuffer)tt.setupRenderTarget(t);else if(o.__hasExternalTextures)tt.rebindTextures(t,Q.get(t.texture).__webglTexture,Q.get(t.depthTexture).__webglTexture);else if(t.depthBuffer){const e=t.depthTexture;if(o.__boundDepthTexture!==e){if(null!==e&&Q.has(e)&&(t.width!==e.image.width||t.height!==e.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");tt.setupDepthRenderbuffer(t)}}const l=t.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=Q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=Array.isArray(c[e])?c[e][n]:c[e],s=!0):r=t.samples>0&&!1===tt.useMultisampledRTT(t)?Q.get(t).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,A.copy(t.viewport),E.copy(t.scissor),C=t.scissorTest}else A.copy(U).multiplyScalar(D).floor(),E.copy(F).multiplyScalar(D).floor(),C=k;0!==n&&(r=zt);if(K.bindFramebuffer(yt.FRAMEBUFFER,r)&&i&&K.drawBuffers(t,r),K.viewport(A),K.scissor(E),K.setScissorTest(C),s){const i=Q.get(t.texture);yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_CUBE_MAP_POSITIVE_X+e,i.__webglTexture,n)}else if(a){const i=Q.get(t.texture),r=e;yt.framebufferTextureLayer(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,i.__webglTexture,n,r)}else if(null!==t&&0!==n){const e=Q.get(t.texture);yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_2D,e.__webglTexture,n)}w=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,a){if(!t||!t.isWebGLRenderTarget)return;let o=Q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){K.bindFramebuffer(yt.FRAMEBUFFER,o);try{const a=t.texture,o=a.format,l=a.type;if(!Z.textureFormatReadable(o))return;if(!Z.textureTypeReadable(l))return;e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&yt.readPixels(e,n,i,r,gt.convert(o),gt.convert(l),s)}finally{const t=null!==S?Q.get(S).__webglFramebuffer:null;K.bindFramebuffer(yt.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,e,n,i,r,s,a){if(!t||!t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){const a=t.texture,l=a.format,c=a.type;if(!Z.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r){K.bindFramebuffer(yt.FRAMEBUFFER,o);const t=yt.createBuffer();yt.bindBuffer(yt.PIXEL_PACK_BUFFER,t),yt.bufferData(yt.PIXEL_PACK_BUFFER,s.byteLength,yt.STREAM_READ),yt.readPixels(e,n,i,r,gt.convert(l),gt.convert(c),0);const a=null!==S?Q.get(S).__webglFramebuffer:null;K.bindFramebuffer(yt.FRAMEBUFFER,a);const h=yt.fenceSync(yt.SYNC_GPU_COMMANDS_COMPLETE,0);return yt.flush(),await function(t,e,n){return new Promise((function(i,r){setTimeout((function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:i()}}),n)}))}(yt,h,4),yt.bindBuffer(yt.PIXEL_PACK_BUFFER,t),yt.getBufferSubData(yt.PIXEL_PACK_BUFFER,0,s),yt.deleteBuffer(t),yt.deleteSync(h),s}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(t,e=null,n=0){!0!==t.isTexture&&(od("WebGLRenderer: copyFramebufferToTexture function signature has changed."),e=arguments[0]||null,t=arguments[1]);const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i),a=null!==e?e.x:0,o=null!==e?e.y:0;tt.setTexture2D(t,0),yt.copyTexSubImage2D(yt.TEXTURE_2D,n,0,0,a,o,r,s),K.unbindTexture()};const Ht=yt.createFramebuffer(),Vt=yt.createFramebuffer();this.copyTextureToTexture=function(t,e,n=null,i=null,r=0,s=null){let a,o,l,c,h,u,d,p,f;!0!==t.isTexture&&(od("WebGLRenderer: copyTextureToTexture function signature has changed."),i=arguments[0]||null,t=arguments[1],e=arguments[2],s=arguments[3]||0,n=null),null===s&&(0!==r?(od("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),s=r,r=0):s=0);const m=t.isCompressedTexture?t.mipmaps[s]:t.image;if(null!==n)a=n.max.x-n.min.x,o=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,c=n.min.x,h=n.min.y,u=n.isBox3?n.min.z:0;else{const e=Math.pow(2,-r);a=Math.floor(m.width*e),o=Math.floor(m.height*e),l=t.isDataArrayTexture?m.depth:t.isData3DTexture?Math.floor(m.depth*e):1,c=0,h=0,u=0}null!==i?(d=i.x,p=i.y,f=i.z):(d=0,p=0,f=0);const g=gt.convert(e.format),_=gt.convert(e.type);let v;e.isData3DTexture?(tt.setTexture3D(e,0),v=yt.TEXTURE_3D):e.isDataArrayTexture||e.isCompressedArrayTexture?(tt.setTexture2DArray(e,0),v=yt.TEXTURE_2D_ARRAY):(tt.setTexture2D(e,0),v=yt.TEXTURE_2D),yt.pixelStorei(yt.UNPACK_FLIP_Y_WEBGL,e.flipY),yt.pixelStorei(yt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),yt.pixelStorei(yt.UNPACK_ALIGNMENT,e.unpackAlignment);const y=yt.getParameter(yt.UNPACK_ROW_LENGTH),x=yt.getParameter(yt.UNPACK_IMAGE_HEIGHT),b=yt.getParameter(yt.UNPACK_SKIP_PIXELS),M=yt.getParameter(yt.UNPACK_SKIP_ROWS),S=yt.getParameter(yt.UNPACK_SKIP_IMAGES);yt.pixelStorei(yt.UNPACK_ROW_LENGTH,m.width),yt.pixelStorei(yt.UNPACK_IMAGE_HEIGHT,m.height),yt.pixelStorei(yt.UNPACK_SKIP_PIXELS,c),yt.pixelStorei(yt.UNPACK_SKIP_ROWS,h),yt.pixelStorei(yt.UNPACK_SKIP_IMAGES,u);const w=t.isDataArrayTexture||t.isData3DTexture,T=e.isDataArrayTexture||e.isData3DTexture;if(t.isDepthTexture){const n=Q.get(t),i=Q.get(e),m=Q.get(n.__renderTarget),g=Q.get(i.__renderTarget);K.bindFramebuffer(yt.READ_FRAMEBUFFER,m.__webglFramebuffer),K.bindFramebuffer(yt.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let _=0;_<l;_++)w&&(yt.framebufferTextureLayer(yt.READ_FRAMEBUFFER,yt.COLOR_ATTACHMENT0,Q.get(t).__webglTexture,r,u+_),yt.framebufferTextureLayer(yt.DRAW_FRAMEBUFFER,yt.COLOR_ATTACHMENT0,Q.get(e).__webglTexture,s,f+_)),yt.blitFramebuffer(c,h,a,o,d,p,a,o,yt.DEPTH_BUFFER_BIT,yt.NEAREST);K.bindFramebuffer(yt.READ_FRAMEBUFFER,null),K.bindFramebuffer(yt.DRAW_FRAMEBUFFER,null)}else if(0!==r||t.isRenderTargetTexture||Q.has(t)){const n=Q.get(t),i=Q.get(e);K.bindFramebuffer(yt.READ_FRAMEBUFFER,Ht),K.bindFramebuffer(yt.DRAW_FRAMEBUFFER,Vt);for(let t=0;t<l;t++)w?yt.framebufferTextureLayer(yt.READ_FRAMEBUFFER,yt.COLOR_ATTACHMENT0,n.__webglTexture,r,u+t):yt.framebufferTexture2D(yt.READ_FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_2D,n.__webglTexture,r),T?yt.framebufferTextureLayer(yt.DRAW_FRAMEBUFFER,yt.COLOR_ATTACHMENT0,i.__webglTexture,s,f+t):yt.framebufferTexture2D(yt.DRAW_FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_2D,i.__webglTexture,s),0!==r?yt.blitFramebuffer(c,h,a,o,d,p,a,o,yt.COLOR_BUFFER_BIT,yt.NEAREST):T?yt.copyTexSubImage3D(v,s,d,p,f+t,c,h,a,o):yt.copyTexSubImage2D(v,s,d,p,c,h,a,o);K.bindFramebuffer(yt.READ_FRAMEBUFFER,null),K.bindFramebuffer(yt.DRAW_FRAMEBUFFER,null)}else T?t.isDataTexture||t.isData3DTexture?yt.texSubImage3D(v,s,d,p,f,a,o,l,g,_,m.data):e.isCompressedArrayTexture?yt.compressedTexSubImage3D(v,s,d,p,f,a,o,l,g,m.data):yt.texSubImage3D(v,s,d,p,f,a,o,l,g,_,m):t.isDataTexture?yt.texSubImage2D(yt.TEXTURE_2D,s,d,p,a,o,g,_,m.data):t.isCompressedTexture?yt.compressedTexSubImage2D(yt.TEXTURE_2D,s,d,p,m.width,m.height,g,m.data):yt.texSubImage2D(yt.TEXTURE_2D,s,d,p,a,o,g,_,m);yt.pixelStorei(yt.UNPACK_ROW_LENGTH,y),yt.pixelStorei(yt.UNPACK_IMAGE_HEIGHT,x),yt.pixelStorei(yt.UNPACK_SKIP_PIXELS,b),yt.pixelStorei(yt.UNPACK_SKIP_ROWS,M),yt.pixelStorei(yt.UNPACK_SKIP_IMAGES,S),0===s&&e.generateMipmaps&&yt.generateMipmap(v),K.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n=null,i=null,r=0){return!0!==t.isTexture&&(od("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,i=arguments[1]||null,t=arguments[2],e=arguments[3],r=arguments[4]||0),od('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(t,e,n,i,r)},this.initRenderTarget=function(t){void 0===Q.get(t).__webglFramebuffer&&tt.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?tt.setTextureCube(t,0):t.isData3DTexture?tt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?tt.setTexture2DArray(t,0):tt.setTexture2D(t,0),K.unbindTexture()},this.resetState=function(){b=0,M=0,S=null,K.reset(),_t.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ku}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=hd._getDrawingBufferColorSpace(t),e.unpackColorSpace=hd._getUnpackColorSpace()}}const vS=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:jc,AddEquation:dc,AddOperation:zc,AdditiveAnimationBlendMode:bu,AdditiveBlending:2,AgXToneMapping:qc,AlphaFormat:wh,AlwaysCompare:519,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:py,AnimationAction:tx,AnimationClip:Bv,AnimationLoader:class extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new qv(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(s){i&&i(s),r.manager.itemError(t)}}),n,i)}parse(t){const e=[];for(let n=0;n<t.length;n++){const i=Bv.parse(t[n]);e.push(i)}return e}},AnimationMixer:nx,AnimationObjectGroup:class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ju(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let a,o=t.length,l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const h=arguments[c],u=h.uuid;let d=e[u];if(void 0===d){d=o++,e[u]=d,t.push(h);for(let t=0,e=s;t!==e;++t)r[t].push(new Qy(h,n[t],i[t]))}else if(d<l){a=t[d];const o=--l,c=t[o];e[c.uuid]=d,t[d]=c,e[u]=o,t[o]=h;for(let t=0,e=s;t!==e;++t){const e=r[t],s=e[o];let a=e[d];e[d]=s,void 0===a&&(a=new Qy(h,n[t],i[t])),e[o]=a}}else t[d]}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=e[o];if(void 0!==l&&l>=r){const s=r++,c=t[s];e[c.uuid]=l,t[l]=c,e[o]=s,t[s]=a;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[s],r=e[l];e[l]=i,e[s]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=t.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=e[o];if(void 0!==l)if(delete e[o],l<r){const a=--r,o=t[a],c=--s,h=t[c];e[o.uuid]=l,t[l]=o,e[h.uuid]=a,t[a]=h,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[a],r=e[c];e[l]=i,e[a]=r,e.pop()}}else{const r=--s,a=t[r];r>0&&(e[a.uuid]=l),t[l]=a,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,h=new Array(l);i=r.length,n[t]=i,s.push(t),a.push(e),r.push(h);for(let u=c,d=o.length;u!==d;++u){const n=o[u];h[u]=new Qy(n,t,e)}return h}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];e[t[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}},AnimationUtils:Av,ArcCurve:Hg,ArrayCamera:Py,ArrowHelper:class extends Rp{constructor(t=new Ad(0,0,1),e=new Ad(0,0,0),n=1,i=16776960,r=.2*n,s=.2*r){super(),this.type="ArrowHelper",void 0===Px&&(Px=new vf,Px.setAttribute("position",new hf([0,0,0,0,1,0],3)),Ix=new h_(0,.5,1,5,1),Ix.translate(0,-.5,0)),this.position.copy(e),this.line=new Sg(Px,new mg({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pf(Ix,new Jp({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,s)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Rx.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Rx,e)}}setLength(t,e=.2*t,n=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},AttachedBindMode:$c,Audio:Fy,AudioAnalyser:class{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}},AudioContext:Ay,AudioListener:class extends Rp{constructor(){super(),this.type="AudioListener",this.context=Ay.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Iy}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Dy,Ny,Oy),Uy.set(0,0,-1).applyQuaternion(Ny),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Dy.x,t),e.positionY.linearRampToValueAtTime(Dy.y,t),e.positionZ.linearRampToValueAtTime(Dy.z,t),e.forwardX.linearRampToValueAtTime(Uy.x,t),e.forwardY.linearRampToValueAtTime(Uy.y,t),e.forwardZ.linearRampToValueAtTime(Uy.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Dy.x,Dy.y,Dy.z),e.setOrientation(Uy.x,Uy.y,Uy.z,n.x,n.y,n.z)}},AudioLoader:class extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new qv(this.manager);function a(e){i&&i(e),r.manager.itemError(t)}s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(t){try{const n=t.slice(0);Ay.getContext().decodeAudioData(n,(function(t){e(t)})).catch(a)}catch(n){a(n)}}),n,i)}},AxesHelper:class extends Eg{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new vf;n.setAttribute("position",new hf(e,3)),n.setAttribute("color",new hf([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new mg({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const i=new Yp,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BackSide:hc,BasicDepthPacking:3200,BasicShadowMap:0,BatchedMesh:fg,Bone:Im,BooleanKeyframeTrack:Lv,Box2:class{constructor(t=new Ju(1/0,1/0),e=new Ju(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=hx.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,hx).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Box3:Rd,Box3Helper:class extends Eg{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new vf;i.setIndex(new of(n,1)),i.setAttribute("position",new hf([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new mg({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},BoxGeometry:Lf,BoxHelper:class extends Eg{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new vf;r.setIndex(new of(n,1)),r.setAttribute("position",new of(i,3)),super(r,new mg({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&Cx.setFromObject(this.object),Cx.isEmpty())return;const t=Cx.min,e=Cx.max,n=this.geometry.attributes.position,i=n.array;i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=t.x,i[4]=e.y,i[5]=e.z,i[6]=t.x,i[7]=t.y,i[8]=e.z,i[9]=e.x,i[10]=t.y,i[11]=e.z,i[12]=e.x,i[13]=e.y,i[14]=t.z,i[15]=t.x,i[16]=e.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=e.x,i[22]=t.y,i[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BufferAttribute:of,BufferGeometry:vf,BufferGeometryLoader:xy,ByteType:ph,Cache:Hv,Camera:kf,CameraHelper:Ax,CanvasTexture:class extends yd{constructor(t,e,n,i,r,s,a,o,l){super(t,e,n,i,r,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},CapsuleGeometry:l_,CatmullRomCurve3:qg,CineonToneMapping:Wc,CircleGeometry:c_,ClampToEdgeWrapping:rh,Clock:Iy,Color:Yp,ColorKeyframeTrack:Dv,ColorManagement:hd,CompressedArrayTexture:class extends Fg{constructor(t,e,n,i,r,s){super(t,e,n,r,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=rh,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}},CompressedCubeTexture:class extends Fg{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,Jc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}},CompressedTexture:Fg,CompressedTextureLoader:class extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=this,s=[],a=new Fg,o=new qv(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(t[c],(function(t){const n=r.parse(t,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=ch),a.image=s,a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,i)}if(Array.isArray(t))for(let h=0,u=t.length;h<u;++h)c(h);else o.load(t,(function(t){const n=r.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){s[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)s[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),s[e].format=n.format,s[e].width=n.width,s[e].height=n.height}a.image=s}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=ch),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,i);return a}},ConeGeometry:u_,ConstantAlphaFactor:213,ConstantColorFactor:211,Controls:Lx,CubeCamera:Wf,CubeReflectionMapping:Jc,CubeRefractionMapping:Qc,CubeTexture:jf,CubeTextureLoader:class extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=new jf;r.colorSpace=Su;const s=new Yv(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(t[n],(function(t){r.images[n]=t,a++,6===a&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let l=0;l<t.length;++l)o(l);return r}},CubeUVReflectionMapping:nh,CubicBezierCurve:Kg,CubicBezierCurve3:Jg,CubicInterpolant:Cv,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:Bg,CurvePath:s_,CustomBlending:5,CustomToneMapping:Xc,CylinderGeometry:h_,Cylindrical:class{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}},Data3DTexture:wd,DataArrayTexture:Sd,DataTexture:Lm,DataTextureLoader:$v,DataUtils:nf,DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:Gv,DepthFormat:Rh,DepthStencilFormat:Ph,DepthTexture:kg,DetachedBindMode:Zc,DirectionalLight:dy,DirectionalLightHelper:class extends Rp{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let i=new vf;i.setAttribute("position",new hf([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new mg({fog:!1,toneMapped:!1});this.lightPlane=new Sg(i,r),this.add(this.lightPlane),i=new vf,i.setAttribute("position",new hf([0,0,0,0,0,1],3)),this.targetLine=new Sg(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),bx.setFromMatrixPosition(this.light.matrixWorld),Mx.setFromMatrixPosition(this.light.target.matrixWorld),Sx.subVectors(Mx,bx),this.lightPlane.lookAt(Mx),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Mx),this.targetLine.scale.z=Sx.length()}},DiscreteInterpolant:Pv,DodecahedronGeometry:p_,DoubleSide:2,DstAlphaFactor:206,DstColorFactor:208,DynamicCopyUsage:35050,DynamicDrawUsage:35048,DynamicReadUsage:35049,EdgesGeometry:v_,EllipseCurve:zg,EqualCompare:514,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:th,EquirectangularRefractionMapping:eh,Euler:dp,EventDispatcher:zu,ExtrudeGeometry:Y_,FileLoader:qv,Float16BufferAttribute:class extends of{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=ef(this.array[t*this.itemSize]);return this.normalized&&(e=$u(e,this.array)),e}setX(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize]=tf(e),this}getY(t){let e=ef(this.array[t*this.itemSize+1]);return this.normalized&&(e=$u(e,this.array)),e}setY(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize+1]=tf(e),this}getZ(t){let e=ef(this.array[t*this.itemSize+2]);return this.normalized&&(e=$u(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize+2]=tf(e),this}getW(t){let e=ef(this.array[t*this.itemSize+3]);return this.normalized&&(e=$u(e,this.array)),e}setW(t,e){return this.normalized&&(e=Zu(e,this.array)),this.array[t*this.itemSize+3]=tf(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array)),this.array[t+0]=tf(e),this.array[t+1]=tf(n),this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array),i=Zu(i,this.array)),this.array[t+0]=tf(e),this.array[t+1]=tf(n),this.array[t+2]=tf(i),this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Zu(e,this.array),n=Zu(n,this.array),i=Zu(i,this.array),r=Zu(r,this.array)),this.array[t+0]=tf(e),this.array[t+1]=tf(n),this.array[t+2]=tf(i),this.array[t+3]=tf(r),this}},Float32BufferAttribute:hf,FloatType:vh,Fog:Kf,FogExp2:Zf,FramebufferTexture:class extends yd{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=ah,this.minFilter=ah,this.generateMipmaps=!1,this.needsUpdate=!0}},FrontSide:cc,Frustum:Km,GLBufferAttribute:class{constructor(t,e,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}},GLSL1:"100",GLSL3:Fu,GreaterCompare:516,GreaterDepth:6,GreaterEqualCompare:518,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:class extends Eg{constructor(t=10,e=10,n=4473924,i=8947848){n=new Yp(n),i=new Yp(i);const r=e/2,s=t/e,a=t/2,o=[],l=[];for(let h=0,u=0,d=-a;h<=e;h++,d+=s){o.push(-a,0,d,a,0,d),o.push(d,0,-a,d,0,a);const t=h===r?n:i;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}const c=new vf;c.setAttribute("position",new hf(o,3)),c.setAttribute("color",new hf(l,3));super(c,new mg({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},Group:qf,HalfFloatType:yh,HemisphereLight:Jv,HemisphereLightHelper:class extends Rp{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new K_(e);i.rotateY(.5*Math.PI),this.material=new Jp({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new of(s,3)),this.add(new Pf(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");yx.copy(this.light.color),xx.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const i=t<n/2?yx:xx;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(vx.setFromMatrixPosition(this.light.matrixWorld).negate())}},IcosahedronGeometry:Z_,ImageBitmapLoader:wy,ImageLoader:Yv,ImageUtils:fd,IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:Um,InstancedBufferGeometry:yy,InstancedInterleavedBuffer:class extends Qf{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}},InstancedMesh:Wm,Int16BufferAttribute:class extends of{constructor(t,e,n){super(new Int16Array(t),e,n)}},Int32BufferAttribute:class extends of{constructor(t,e,n){super(new Int32Array(t),e,n)}},Int8BufferAttribute:class extends of{constructor(t,e,n){super(new Int8Array(t),e,n)}},IntType:gh,InterleavedBuffer:Qf,InterleavedBufferAttribute:em,Interpolant:Ev,InterpolateDiscrete:fu,InterpolateLinear:mu,InterpolateSmooth:gu,InvertStencilOp:5386,KeepStencilOp:Eu,KeyframeTrack:Iv,LOD:xm,LatheGeometry:o_,Layers:pp,LessCompare:513,LessDepth:2,LessEqualCompare:Iu,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:Kv,LightProbe:gy,Line:Sg,Line3:class{constructor(t=new Ad,e=new Ad){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){ux.subVectors(t,this.start),dx.subVectors(this.end,this.start);const n=dx.dot(dx);let i=dx.dot(ux)/n;return e&&(i=Xu(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},LineBasicMaterial:mg,LineCurve:Qg,LineCurve3:t_,LineDashedMaterial:xv,LineLoop:Cg,LineSegments:Eg,LinearFilter:ch,LinearInterpolant:Rv,LinearMipMapLinearFilter:1008,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:uh,LinearMipmapNearestFilter:hh,LinearSRGBColorSpace:wu,LinearToneMapping:Vc,LinearTransfer:Tu,Loader:Wv,LoaderUtils:vy,LoadingManager:Vv,LoopOnce:2200,LoopPingPong:2202,LoopRepeat:2201,LuminanceAlphaFormat:Ch,LuminanceFormat:Eh,MOUSE:rc,Material:Kp,MaterialLoader:_y,MathUtils:Ku,Matrix2:cx,Matrix3:Qu,Matrix4:np,MaxEquation:104,Mesh:Pf,MeshBasicMaterial:Jp,MeshDepthMaterial:_v,MeshDistanceMaterial:vv,MeshLambertMaterial:gv,MeshMatcapMaterial:yv,MeshNormalMaterial:mv,MeshPhongMaterial:pv,MeshPhysicalMaterial:dv,MeshStandardMaterial:uv,MeshToonMaterial:fv,MinEquation:103,MirroredRepeatWrapping:sh,MixOperation:Bc,MultiplyBlending:4,MultiplyOperation:kc,NearestFilter:ah,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:lh,NearestMipmapNearestFilter:oh,NeutralToneMapping:Yc,NeverCompare:512,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColorSpace:Mu,NoToneMapping:Hc,NormalAnimationBlendMode:xu,NormalBlending:1,NotEqualCompare:517,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:Nv,Object3D:Rp,ObjectLoader:class extends Wv{constructor(t){super(t)}load(t,e,n,i){const r=this,s=""===this.path?vy.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const a=new qv(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){let s=null;try{s=JSON.parse(n)}catch(o){return void(void 0!==i&&i(o))}const a=s.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(s,e):void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+t))}),n,i)}async loadAsync(t,e){const n=""===this.path?vy.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const i=new qv(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(t,e),s=JSON.parse(r),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(s)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),s=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),a=this.parseTextures(t.textures,s),o=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,r,o,a,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==e){let t=!1;for(const e in s)if(s[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),s=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,s),o=this.parseObject(t.object,i,a,s,e),l=this.parseSkeletons(t.skeletons,o);return this.bindSkeletons(o,l),this.bindLightTargets(o),o}parseShapes(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new y_).fromJSON(t[n]);e[i.uuid]=i}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(let r=0,s=t.length;r<s;r++){const e=(new Om).fromJSON(t[r],i);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};if(void 0!==t){const i=new xy;for(let r=0,s=t.length;r<s;r++){let s;const a=t[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;default:a.type in lv&&(s=lv[a.type].fromJSON(a,e))}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new _y;r.setTextures(e);for(let e=0,s=t.length;e<s;e++){const s=t[e];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],r=Bv.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function s(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),r.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:id(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new Vv(e);r=new Yv(n),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const n=t[e],r=n.url;if(Array.isArray(r)){const t=[];for(let e=0,n=r.length;e<n;e++){const n=s(r[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new Lm(n.data,n.width,n.height)))}i[n.uuid]=new gd(t)}else{const t=s(n.url);i[n.uuid]=new gd(t)}}}return i}async parseImagesAsync(t){const e=this,n={};let i;async function r(t){if("string"==typeof t){const n=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await i.loadAsync(r)}return t.data?{data:id(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new Yv(this.manager),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.url;if(Array.isArray(s)){const t=[];for(let e=0,n=s.length;e<n;e++){const n=s[e],i=await r(n);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new Lm(i.data,i.width,i.height)))}n[i.uuid]=new gd(t)}else{const t=await r(i.url);n[i.uuid]=new gd(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:e[t]}const i={};if(void 0!==t)for(let r=0,s=t.length;r<s;r++){const s=t[r];s.image,e[s.image];const a=e[s.image],o=a.data;let l;Array.isArray(o)?(l=new jf,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Lm:new yd,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,by)),void 0!==s.channel&&(l.channel=s.channel),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],My),l.wrapT=n(s.wrap[1],My)),void 0!==s.format&&(l.format=s.format),void 0!==s.internalFormat&&(l.internalFormat=s.internalFormat),void 0!==s.type&&(l.type=s.type),void 0!==s.colorSpace&&(l.colorSpace=s.colorSpace),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,Sy)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,Sy)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.generateMipmaps&&(l.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(l.compareFunction=s.compareFunction),void 0!==s.userData&&(l.userData=s.userData),i[s.uuid]=l}return i}parseObject(t,e,n,i,r){let s,a,o;function l(t){return e[t],e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n[r],e.push(n[r])}return e}return n[t],n[t]}}function h(t){return i[t],i[t]}switch(t.type){case"Scene":s=new Jf,void 0!==t.background&&(Number.isInteger(t.background)?s.background=new Yp(t.background):s.background=h(t.background)),void 0!==t.environment&&(s.environment=h(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?s.fog=new Kf(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(s.fog=new Zf(t.fog.color,t.fog.density)),""!==t.fog.name&&(s.fog.name=t.fog.name)),void 0!==t.backgroundBlurriness&&(s.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(s.backgroundIntensity=t.backgroundIntensity),void 0!==t.backgroundRotation&&s.backgroundRotation.fromArray(t.backgroundRotation),void 0!==t.environmentIntensity&&(s.environmentIntensity=t.environmentIntensity),void 0!==t.environmentRotation&&s.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":s=new Vf(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(s.focus=t.focus),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.filmGauge&&(s.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(s.filmOffset=t.filmOffset),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new hy(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"AmbientLight":s=new py(t.color,t.intensity);break;case"DirectionalLight":s=new dy(t.color,t.intensity),s.target=t.target||"";break;case"PointLight":s=new cy(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":s=new fy(t.color,t.intensity,t.width,t.height);break;case"SpotLight":s=new ry(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),s.target=t.target||"";break;case"HemisphereLight":s=new Jv(t.color,t.groundColor,t.intensity);break;case"LightProbe":s=(new gy).fromJSON(t);break;case"SkinnedMesh":a=l(t.geometry),o=c(t.material),s=new Pm(a,o),void 0!==t.bindMode&&(s.bindMode=t.bindMode),void 0!==t.bindMatrix&&s.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(s.skeleton=t.skeleton);break;case"Mesh":a=l(t.geometry),o=c(t.material),s=new Pf(a,o);break;case"InstancedMesh":a=l(t.geometry),o=c(t.material);const e=t.count,n=t.instanceMatrix,i=t.instanceColor;s=new Wm(a,o,e),s.instanceMatrix=new Um(new Float32Array(n.array),16),void 0!==i&&(s.instanceColor=new Um(new Float32Array(i.array),i.itemSize));break;case"BatchedMesh":a=l(t.geometry),o=c(t.material),s=new fg(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,o),s.geometry=a,s.perObjectFrustumCulled=t.perObjectFrustumCulled,s.sortObjects=t.sortObjects,s._drawRanges=t.drawRanges,s._reservedRanges=t.reservedRanges,s._visibility=t.visibility,s._active=t.active,s._bounds=t.bounds.map((t=>{const e=new Rd;e.min.fromArray(t.boxMin),e.max.fromArray(t.boxMax);const n=new qd;return n.radius=t.sphereRadius,n.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:e,sphereInitialized:t.sphereInitialized,sphere:n}})),s._maxInstanceCount=t.maxInstanceCount,s._maxVertexCount=t.maxVertexCount,s._maxIndexCount=t.maxIndexCount,s._geometryInitialized=t.geometryInitialized,s._geometryCount=t.geometryCount,s._matricesTexture=h(t.matricesTexture.uuid),void 0!==t.colorsTexture&&(s._colorsTexture=h(t.colorsTexture.uuid));break;case"LOD":s=new xm;break;case"Line":s=new Sg(l(t.geometry),c(t.material));break;case"LineLoop":s=new Cg(l(t.geometry),c(t.material));break;case"LineSegments":s=new Eg(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":s=new Ng(l(t.geometry),c(t.material));break;case"Sprite":s=new gm(c(t.material));break;case"Group":s=new qf;break;case"Bone":s=new Im;break;default:s=new Rp}if(s.uuid=t.uuid,void 0!==t.name&&(s.name=t.name),void 0!==t.matrix?(s.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(s.matrixAutoUpdate=t.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==t.position&&s.position.fromArray(t.position),void 0!==t.rotation&&s.rotation.fromArray(t.rotation),void 0!==t.quaternion&&s.quaternion.fromArray(t.quaternion),void 0!==t.scale&&s.scale.fromArray(t.scale)),void 0!==t.up&&s.up.fromArray(t.up),void 0!==t.castShadow&&(s.castShadow=t.castShadow),void 0!==t.receiveShadow&&(s.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.intensity&&(s.shadow.intensity=t.shadow.intensity),void 0!==t.shadow.bias&&(s.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(s.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(s.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&s.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(s.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.frustumCulled&&(s.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(s.renderOrder=t.renderOrder),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.layers&&(s.layers.mask=t.layers),void 0!==t.children){const a=t.children;for(let t=0;t<a.length;t++)s.add(this.parseObject(a[t],e,n,i,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];s.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(s.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],i=s.getObjectByProperty("uuid",n.object);void 0!==i&&s.addLevel(i,n.distance,n.hysteresis)}}return s}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n||t.bind(n,t.bindMatrix)}}))}bindLightTargets(t){t.traverse((function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,i=t.getObjectByProperty("uuid",n);e.target=void 0!==i?i:new Rp}}))}},ObjectSpaceNormalMap:1,OctahedronGeometry:K_,OneFactor:201,OneMinusConstantAlphaFactor:214,OneMinusConstantColorFactor:212,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:xc,OneMinusSrcColorFactor:203,OrthographicCamera:hy,PCFShadowMap:ac,PCFSoftShadowMap:oc,PMREMGenerator:ab,Path:a_,PerspectiveCamera:Vf,Plane:Ym,PlaneGeometry:J_,PlaneHelper:class extends Sg{constructor(t,e=1,n=16776960){const i=n,r=new vf;r.setAttribute("position",new hf([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new mg({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const s=new vf;s.setAttribute("position",new hf([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),s.computeBoundingSphere(),this.add(new Pf(s,new Jp({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},PointLight:cy,PointLightHelper:class extends Pf{constructor(t,e,n){super(new ev(e,4,2),new Jp({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Points:Ng,PointsMaterial:Rg,PolarGridHelper:class extends Eg{constructor(t=10,e=16,n=8,i=64,r=4473924,s=8947848){r=new Yp(r),s=new Yp(s);const a=[],o=[];if(e>1)for(let c=0;c<e;c++){const n=c/e*(2*Math.PI),i=Math.sin(n)*t,l=Math.cos(n)*t;a.push(0,0,0),a.push(i,0,l);const h=1&c?r:s;o.push(h.r,h.g,h.b),o.push(h.r,h.g,h.b)}for(let c=0;c<n;c++){const e=1&c?r:s,l=t-t/n*c;for(let t=0;t<i;t++){let n=t/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l;a.push(r,0,s),o.push(e.r,e.g,e.b),n=(t+1)/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l,a.push(r,0,s),o.push(e.r,e.g,e.b)}}const l=new vf;l.setAttribute("position",new hf(a,3)),l.setAttribute("color",new hf(o,3));super(l,new mg({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},PolyhedronGeometry:d_,PositionalAudio:class extends Fy{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(ky,By,zy),Hy.set(0,0,1).applyQuaternion(By);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ky.x,t),e.positionY.linearRampToValueAtTime(ky.y,t),e.positionZ.linearRampToValueAtTime(ky.z,t),e.orientationX.linearRampToValueAtTime(Hy.x,t),e.orientationY.linearRampToValueAtTime(Hy.y,t),e.orientationZ.linearRampToValueAtTime(Hy.z,t)}else e.setPosition(ky.x,ky.y,ky.z),e.setOrientation(Hy.x,Hy.y,Hy.z)}},PropertyBinding:Qy,PropertyMixer:Vy,QuadraticBezierCurve:e_,QuadraticBezierCurve3:n_,Quaternion:Td,QuaternionKeyframeTrack:Uv,QuaternionLinearInterpolant:Ov,RED_GREEN_RGTC2_Format:du,RED_RGTC1_Format:hu,REVISION:ic,RGBADepthPacking:3201,RGBAFormat:Ah,RGBAIntegerFormat:Oh,RGBA_ASTC_10x10_Format:ru,RGBA_ASTC_10x5_Format:eu,RGBA_ASTC_10x6_Format:nu,RGBA_ASTC_10x8_Format:iu,RGBA_ASTC_12x10_Format:su,RGBA_ASTC_12x12_Format:au,RGBA_ASTC_4x4_Format:qh,RGBA_ASTC_5x4_Format:Yh,RGBA_ASTC_5x5_Format:$h,RGBA_ASTC_6x5_Format:Zh,RGBA_ASTC_6x6_Format:Kh,RGBA_ASTC_8x5_Format:Jh,RGBA_ASTC_8x6_Format:Qh,RGBA_ASTC_8x8_Format:tu,RGBA_BPTC_Format:ou,RGBA_ETC2_EAC_Format:Xh,RGBA_PVRTC_2BPPV1_Format:Gh,RGBA_PVRTC_4BPPV1_Format:Vh,RGBA_S3TC_DXT1_Format:Fh,RGBA_S3TC_DXT3_Format:kh,RGBA_S3TC_DXT5_Format:Bh,RGBDepthPacking:3202,RGBFormat:Th,RGBIntegerFormat:1032,RGB_BPTC_SIGNED_Format:lu,RGB_BPTC_UNSIGNED_Format:cu,RGB_ETC1_Format:Wh,RGB_ETC2_Format:jh,RGB_PVRTC_2BPPV1_Format:Hh,RGB_PVRTC_4BPPV1_Format:zh,RGB_S3TC_DXT1_Format:Uh,RGDepthPacking:3203,RGFormat:Dh,RGIntegerFormat:Nh,RawShaderMaterial:hv,Ray:ep,Raycaster:class{constructor(t,e,n=0,i=1/0){this.ray=new ep(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new pp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)}setFromXRController(t){return sx.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(sx),this}intersectObject(t,e=!0,n=[]){return ox(t,this,n,e),n.sort(ax),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)ox(t[i],this,n,e);return n.sort(ax),n}},RectAreaLight:fy,RedFormat:Ih,RedIntegerFormat:Lh,ReinhardToneMapping:Gc,RenderTarget:bd,RenderTarget3D:class extends bd{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new wd(null,t,e,n),this.texture.isRenderTargetTexture=!0}},RenderTargetArray:class extends bd{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Sd(null,t,e,n),this.texture.isRenderTargetTexture=!0}},RepeatWrapping:ih,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingGeometry:Q_,SIGNED_RED_GREEN_RGTC2_Format:pu,SIGNED_RED_RGTC1_Format:uu,SRGBColorSpace:Su,SRGBTransfer:Au,Scene:Jf,ShaderChunk:Ux,ShaderLib:kx,ShaderMaterial:Ff,ShadowMaterial:cv,Shape:y_,ShapeGeometry:tv,ShapePath:class{constructor(){this.type="ShapePath",this.color=new Yp,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new a_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,s){return this.currentPath.bezierCurveTo(t,e,n,i,r,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const n=e.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=e[r],a=e[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[s],o=-o,a=e[r],l=-l),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-o*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return i}const n=j_.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,s,a;const o=[];if(1===i.length)return s=i[0],a=new y_,a.curves=s.curves,o.push(a),o;let l=!n(i[0].getPoints());l=t?!l:l;const c=[],h=[];let u,d,p=[],f=0;h[f]=void 0,p[f]=[];for(let m=0,g=i.length;m<g;m++)s=i[m],u=s.getPoints(),r=n(u),r=t?!r:r,r?(!l&&h[f]&&f++,h[f]={s:new y_,p:u},h[f].s.curves=s.curves,l&&f++,p[f]=[]):p[f].push({h:s,p:u[0]});if(!h[0])return function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new y_;r.curves=i.curves,e.push(r)}return e}(i);if(h.length>1){let t=!1,n=0;for(let e=0,i=h.length;e<i;e++)c[e]=[];for(let i=0,r=h.length;i<r;i++){const r=p[i];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<h.length;r++)e(a.p,h[r].p)&&(i!==r&&n++,o?(o=!1,c[r].push(a)):t=!0);o&&c[i].push(a)}}n>0&&!1===t&&(p=c)}for(let m=0,g=h.length;m<g;m++){a=h[m].s,o.push(a),d=p[m];for(let t=0,e=d.length;t<e;t++)a.holes.push(d[t].h)}return o}},ShapeUtils:j_,ShortType:fh,Skeleton:Om,SkeletonHelper:class extends Eg{constructor(t){const e=_x(t),n=new vf,i=[],r=[],s=new Yp(0,0,1),a=new Yp(0,1,0);for(let o=0;o<e.length;o++){const t=e[o];t.parent&&t.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new hf(i,3)),n.setAttribute("color",new hf(r,3));super(n,new mg({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");gx.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<e.length;r++){const t=e[r];t.parent&&t.parent.isBone&&(mx.multiplyMatrices(gx,t.matrixWorld),fx.setFromMatrixPosition(mx),i.setXYZ(s,fx.x,fx.y,fx.z),mx.multiplyMatrices(gx,t.parent.matrixWorld),fx.setFromMatrixPosition(mx),i.setXYZ(s+1,fx.x,fx.y,fx.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}},SkinnedMesh:Pm,Source:gd,Sphere:qd,SphereGeometry:ev,Spherical:lx,SphericalHarmonics3:my,SplineCurve:i_,SpotLight:ry,SpotLightHelper:class extends Rp{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new vf,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){const t=s/o*Math.PI*2,e=a/o*Math.PI*2;i.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new hf(i,3));const r=new mg({fog:!1,toneMapped:!1});this.cone=new Eg(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),px.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(px),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Sprite:gm,SpriteMaterial:nm,SrcAlphaFactor:yc,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:Uu,StaticReadUsage:35045,StereoCamera:class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vf,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vf,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Ry.copy(t.projectionMatrix);const n=e.eyeSep/2,i=n*e.near/e.focus,r=e.near*Math.tan(Gu*e.fov*.5)/e.zoom;let s,a;Cy.elements[12]=-n,Ey.elements[12]=n,s=-r*e.aspect+i,a=r*e.aspect+i,Ry.elements[0]=2*e.near/(a-s),Ry.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(Ry),s=-r*e.aspect-i,a=r*e.aspect-i,Ry.elements[0]=2*e.near/(a-s),Ry.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(Ry)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Cy),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Ey)}},StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:Fv,SubtractEquation:101,SubtractiveBlending:3,TOUCH:sc,TangentSpaceNormalMap:0,TetrahedronGeometry:nv,Texture:yd,TextureLoader:Zv,TextureUtils:class{static contain(t,e){return function(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}(t,e)}static cover(t,e){return function(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}(t,e)}static fill(t){return function(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}(t)}static getByteLength(t,e,n,i){return Dx(t,e,n,i)}},TimestampQuery:{COMPUTE:"compute",RENDER:"render"},TorusGeometry:iv,TorusKnotGeometry:rv,Triangle:Gp,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeGeometry:sv,UVMapping:Kc,Uint16BufferAttribute:lf,Uint32BufferAttribute:cf,Uint8BufferAttribute:class extends of{constructor(t,e,n){super(new Uint8Array(t),e,n)}},Uint8ClampedBufferAttribute:class extends of{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}},Uniform:ix,UniformsGroup:class extends zu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:rx++}),this.name="",this.usage=Uu,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,i=e.length;n<i;n++){const t=Array.isArray(e[n])?e[n]:[e[n]];for(let e=0;e<t.length;e++)this.uniforms.push(t[e].clone())}return this}clone(){return(new this.constructor).copy(this)}},UniformsLib:Fx,UniformsUtils:Uf,UnsignedByteType:dh,UnsignedInt248Type:Mh,UnsignedInt5999Type:Sh,UnsignedIntType:_h,UnsignedShort4444Type:xh,UnsignedShort5551Type:bh,UnsignedShortType:mh,VSMShadowMap:lc,Vector2:Ju,Vector3:Ad,Vector4:xd,VectorKeyframeTrack:kv,VideoFrameTexture:class extends Ug{constructor(t,e,n,i,r,s,a,o){super({},t,e,n,i,r,s,a,o),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}},VideoTexture:Ug,WebGL3DRenderTarget:class extends Md{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new wd(null,t,e,n),this.texture.isRenderTargetTexture=!0}},WebGLArrayRenderTarget:class extends Md{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Sd(null,t,e,n),this.texture.isRenderTargetTexture=!0}},WebGLCoordinateSystem:ku,WebGLCubeRenderTarget:Xf,WebGLRenderTarget:Md,WebGLRenderer:_S,WebGLUtils:hS,WebGPUCoordinateSystem:Bu,WebXRController:$f,WireframeGeometry:av,WrapAroundEnding:yu,ZeroCurvatureEnding:_u,ZeroFactor:200,ZeroSlopeEnding:vu,ZeroStencilOp:0,createCanvasElement:sd},Symbol.toStringTag,{value:"Module"}));function yS(t,e){if(0===e)return t;if(2===e||1===e){let n=t.getIndex();if(null===n){const e=[],i=t.getAttribute("position");if(void 0===i)return t;for(let t=0;t<i.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const i=n.count-2,r=[];if(2===e)for(let t=1;t<=i;t++)r.push(n.getX(0)),r.push(n.getX(t)),r.push(n.getX(t+1));else for(let t=0;t<i;t++)t%2==0?(r.push(n.getX(t)),r.push(n.getX(t+1)),r.push(n.getX(t+2))):(r.push(n.getX(t+2)),r.push(n.getX(t+1)),r.push(n.getX(t)));r.length;const s=t.clone();return s.setIndex(r),s.clearGroups(),s}return t}function xS(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const bS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class MS{constructor(t){this.parser=t,this.name=bS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let a;const o=new Yp(16777215);void 0!==s.color&&o.setRGB(s.color[0],s.color[1],s.color[2],wu);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new dy(o),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new cy(o),a.distance=l;break;case"spot":a=new ry(o),a.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),cw(a,s),void 0!==s.intensity&&(a.intensity=s.intensity),a.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(a),e.cache.add(n,i),i}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,i=n.json.nodes[t],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return n._getNodeRef(e.cache,r,t)}))}}class SS{constructor(){this.name=bS.KHR_MATERIALS_UNLIT}getMaterialType(){return Jp}extendParams(t,e,n){const i=[];t.color=new Yp(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.setRGB(e[0],e[1],e[2],wu),t.opacity=e[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture,Su))}return Promise.all(i)}}class wS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(e.emissiveIntensity=i),Promise.resolve()}}class TS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const t=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Ju(t,t)}return Promise.all(r)}}class AS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_DISPERSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return e.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class ES{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.iridescenceFactor&&(e.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&r.push(n.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(e.iridescenceIOR=s.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&r.push(n.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(r)}}class CS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new Yp(0,0,0),e.sheenRoughness=0,e.sheen=1;const s=i.extensions[this.name];if(void 0!==s.sheenColorFactor){const t=s.sheenColorFactor;e.sheenColor.setRGB(t[0],t[1],t[2],wu)}return void 0!==s.sheenRoughnessFactor&&(e.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(e,"sheenColorMap",s.sheenColorTexture,Su)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class RS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(e.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(n.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class PS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return e.attenuationColor=(new Yp).setRGB(a[0],a[1],a[2],wu),Promise.all(r)}}class IS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return e.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class LS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(e,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return e.specularColor=(new Yp).setRGB(a[0],a[1],a[2],wu),void 0!==s.specularColorTexture&&r.push(n.assignTexture(e,"specularColorMap",s.specularColorTexture,Su)),Promise.all(r)}}class DS{constructor(t){this.parser=t,this.name=bS.EXT_MATERIALS_BUMP}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return e.bumpScale=void 0!==s.bumpFactor?s.bumpFactor:1,void 0!==s.bumpTexture&&r.push(n.assignTexture(e,"bumpMap",s.bumpTexture)),Promise.all(r)}}class NS{constructor(t){this.parser=t,this.name=bS.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?dv:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.anisotropyStrength&&(e.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(e.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&r.push(n.assignTexture(e,"anisotropyMap",s.anisotropyTexture)),Promise.all(r)}}class OS{constructor(t){this.parser=t,this.name=bS.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,s)}}class US{constructor(t){this.parser=t,this.name=bS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(o=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class FS{constructor(t){this.parser=t,this.name=bS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(o=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class kS{constructor(t){this.name=bS.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],i=this.parser.getDependency("buffer",t.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){const n=t.byteOffset||0,i=t.byteLength||0,s=t.count,a=t.byteStride,o=new Uint8Array(e,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(s,a,o,t.mode,t.filter).then((function(t){return t.buffer})):r.ready.then((function(){const e=new ArrayBuffer(s*a);return r.decodeGltfBuffer(new Uint8Array(e),s,a,o,t.mode,t.filter),e}))}))}return null}}class BS{constructor(t){this.name=bS.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=e.meshes[n.mesh];for(const o of i.primitives)if(o.mode!==ZS.TRIANGLES&&o.mode!==ZS.TRIANGLE_STRIP&&o.mode!==ZS.TRIANGLE_FAN&&void 0!==o.mode)return null;const r=n.extensions[this.name].attributes,s=[],a={};for(const o in r)s.push(this.parser.getDependency("accessor",r[o]).then((t=>(a[o]=t,a[o]))));return s.length<1?null:(s.push(this.parser.createNodeMesh(t)),Promise.all(s).then((t=>{const e=t.pop(),n=e.isGroup?e.children:[e],i=t[0].count,r=[];for(const s of n){const t=new np,e=new Ad,n=new Td,o=new Ad(1,1,1),l=new Wm(s.geometry,s.material,i);for(let r=0;r<i;r++)a.TRANSLATION&&e.fromBufferAttribute(a.TRANSLATION,r),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,r),a.SCALE&&o.fromBufferAttribute(a.SCALE,r),l.setMatrixAt(r,t.compose(e,n,o));for(const i in a)if("_COLOR_0"===i){const t=a[i];l.instanceColor=new Um(t.array,t.itemSize,t.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&s.geometry.setAttribute(i,a[i]);Rp.prototype.copy.call(l,s),this.parser.assignFinalMaterial(l),r.push(l)}return e.isGroup?(e.clear(),e.add(...r),e):r[0]})))}}const zS="glTF",HS=1313821514,VS=5130562;class GS{constructor(t){this.name=bS.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==zS)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(t,12);let s=0;for(;s<i;){const e=r.getUint32(s,!0);s+=4;const i=r.getUint32(s,!0);if(s+=4,i===HS){const i=new Uint8Array(t,12+s,e);this.content=n.decode(i)}else if(i===VS){const n=12+s;this.body=t.slice(n,n+e)}s+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class WS{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bS.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},o={},l={};for(const c in s){const t=ew[c]||c.toLowerCase();a[t]=s[c]}for(const c in t.attributes){const e=ew[c]||c.toLowerCase();if(void 0!==s[c]){const i=n.accessors[t.attributes[c]],r=KS[i.componentType];l[e]=r.name,o[e]=!0===i.normalized}}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e,n){i.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],i=o[e];void 0!==i&&(n.normalized=i)}e(t)}),a,l,wu,n)}))}))}}class jS{constructor(){this.name=bS.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&e.texCoord!==t.channel||void 0!==e.offset||void 0!==e.rotation||void 0!==e.scale?(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0,t):t}}class XS{constructor(){this.name=bS.KHR_MESH_QUANTIZATION}}class qS extends Ev{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let s=0;s!==i;s++)e[s]=n[r+s];return e}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=i-e,h=(n-e)/c,u=h*h,d=u*h,p=t*l,f=p-l,m=-2*d+3*u,g=d-u,_=1-m,v=g-u+h;for(let y=0;y!==a;y++){const t=s[f+y+a],e=s[f+y+o]*c,n=s[p+y+a],i=s[p+y]*c;r[y]=_*t+v*e+m*n+g*i}return r}}const YS=new Td;class $S extends qS{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return YS.fromArray(r).normalize().toArray(r),r}}const ZS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},KS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},JS={9728:ah,9729:ch,9984:oh,9985:hh,9986:lh,9987:uh},QS={33071:rh,33648:sh,10497:ih},tw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ew={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nw={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},iw={CUBICSPLINE:void 0,LINEAR:mu,STEP:fu},rw="OPAQUE",sw="MASK",aw="BLEND";function ow(t){return void 0===t.DefaultMaterial&&(t.DefaultMaterial=new uv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:cc})),t.DefaultMaterial}function lw(t,e,n){for(const i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function cw(t,e){void 0!==e.extras&&"object"==typeof e.extras&&Object.assign(t.userData,e.extras)}function hw(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,i=n.length;e<i;e++)t.morphTargetDictionary[n[e]]=e}}}function uw(t){let e;const n=t.extensions&&t.extensions[bS.KHR_DRACO_MESH_COMPRESSION];if(e=n?"draco:"+n.bufferView+":"+n.indices+":"+dw(n.attributes):t.indices+":"+dw(t.attributes)+":"+t.mode,void 0!==t.targets)for(let i=0,r=t.targets.length;i<r;i++)e+=":"+dw(t.targets[i]);return e}function dw(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function pw(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const fw=new np;class mw{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new xS,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,r=!1,s=-1;if("undefined"!=typeof navigator){const t=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(t);const e=t.match(/Version\/(\d+)/);i=n&&e?parseInt(e[1],10):-1,r=t.indexOf("Firefox")>-1,s=r?t.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||n&&i<17||r&&s<98?this.textureLoader=new Zv(this.options.manager):this.textureLoader=new wy(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qv(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const s={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};return lw(r,s,i),cw(s,i),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(s)}))).then((function(){for(const t of s.scenes)t.updateMatrixWorld();t(s)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=e.length;i<r;i++){const n=e[i].joints;for(let e=0,i=n.length;e<i;e++)t[n[e]].isBone=!0}for(let i=0,r=t.length;i<r;i++){const e=t[i];void 0!==e.mesh&&(this._addNodeRef(this.meshCache,e.mesh),void 0!==e.skin&&(n[e.mesh].isSkinnedMesh=!0)),void 0!==e.camera&&this._addNodeRef(this.cameraCache,e.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[i,s]of t.children.entries())r(s,e.children[i])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this._invokeOne((function(t){return t.loadNode&&t.loadNode(e)}));break;case"mesh":i=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":i=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":i=this.loadSkin(e);break;case"animation":i=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":i=this.loadCamera(e);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(t,e)})),!i)throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return n.getDependency(t,i)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[bS.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(t,r){n.load(vy.resolveURL(e.uri,i.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+n)}))}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse){const t=tw[i.type],e=KS[i.componentType],n=!0===i.normalized,r=new e(i.count*t);return Promise.resolve(new of(r,t,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],s=tw[i.type],a=KS[i.componentType],o=a.BYTES_PER_ELEMENT,l=o*s,c=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,u=!0===i.normalized;let d,p;if(h&&h!==l){const t=Math.floor(c/h),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+t+":"+i.count;let l=e.cache.get(n);l||(d=new a(r,t*h,i.count*h/o),l=new Qf(d,h/o),e.cache.add(n,l)),p=new em(l,s,c%h/o,u)}else d=null===r?new a(i.count*s):new a(r,c,i.count*s),p=new of(d,s,u);if(void 0!==i.sparse){const e=tw.SCALAR,n=KS[i.sparse.indices.componentType],o=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(t[1],o,i.sparse.count*e),h=new a(t[2],l,i.sparse.count*s);null!==r&&(p=new of(p.array.slice(),p.itemSize,p.normalized)),p.normalized=!1;for(let t=0,i=c.length;t<i;t++){const e=c[t];if(p.setX(e,h[t*s]),s>=2&&p.setY(e,h[t*s+1]),s>=3&&p.setZ(e,h[t*s+2]),s>=4&&p.setW(e,h[t*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}p.normalized=u}return p}))}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t].source,r=e.images[i];let s=this.textureLoader;if(r.uri){const t=n.manager.getHandler(r.uri);null!==t&&(s=t)}return this.loadTextureImage(t,i,s)}loadTextureImage(t,e,n){const i=this,r=this.json,s=r.textures[t],a=r.images[e],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(e,n).then((function(e){e.flipY=!1,e.name=s.name||a.name||"",""===e.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(e.name=a.uri);const n=(r.samplers||{})[s.sampler]||{};return e.magFilter=JS[n.magFilter]||ch,e.minFilter=JS[n.minFilter]||uh,e.wrapS=QS[n.wrapS]||ih,e.wrapT=QS[n.wrapT]||ih,e.generateMipmaps=!e.isCompressedTexture&&e.minFilter!==ah&&e.minFilter!==ch,i.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[o]=l,l}loadImageSource(t,e){const n=this.json,i=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const r=n.images[t],s=self.URL||self.webkitURL;let a=r.uri||"",o=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then((function(t){o=!0;const e=new Blob([t],{type:r.mimeType});return a=s.createObjectURL(e),a}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(a).then((function(t){return new Promise((function(n,r){let s=n;!0===e.isImageBitmapLoader&&(s=function(t){const e=new yd(t);e.needsUpdate=!0,n(e)}),e.load(vy.resolveURL(t,i.path),s,void 0,r)}))})).then((function(t){return!0===o&&s.revokeObjectURL(a),cw(t,r),t.userData.mimeType=r.mimeType||function(t){return t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":t.search(/\.ktx2($|\?)/i)>0||0===t.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"}(r.uri),t})).catch((function(t){throw t}));return this.sourceCache[t]=l,l}assignTexture(t,e,n,i){const r=this;return this.getDependency("texture",n.index).then((function(s){if(!s)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((s=s.clone()).channel=n.texCoord),r.extensions[bS.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[bS.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=r.associations.get(s);s=r.extensions[bS.KHR_TEXTURE_TRANSFORM].extendTexture(s,t),r.associations.set(s,e)}}return void 0!==i&&(s.colorSpace=i),t[e]=s,s}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,s=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new Rg,Kp.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new mg,Kp.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,this.cache.add(t,e)),n=e}if(i||r||s){let t="ClonedMaterial:"+n.uuid+":";i&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),s&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),r&&(e.vertexColors=!0),s&&(e.flatShading=!0),i&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}t.material=n}getMaterialType(){return uv}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let s;const a={},o=[];if((r.extensions||{})[bS.KHR_MATERIALS_UNLIT]){const t=i[bS.KHR_MATERIALS_UNLIT];s=t.getMaterialType(),o.push(t.extendParams(a,r,e))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new Yp(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;a.color.setRGB(t[0],t[1],t[2],wu),a.opacity=t[3]}void 0!==n.baseColorTexture&&o.push(e.assignTexture(a,"map",n.baseColorTexture,Su)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(e.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),o.push(e.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),o.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,a)}))))}!0===r.doubleSided&&(a.side=2);const l=r.alphaMode||rw;if(l===aw?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===sw&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==Jp&&(o.push(e.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new Ju(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;a.normalScale.set(t,t)}if(void 0!==r.occlusionTexture&&s!==Jp&&(o.push(e.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==Jp){const t=r.emissiveFactor;a.emissive=(new Yp).setRGB(t[0],t[1],t[2],wu)}return void 0!==r.emissiveTexture&&s!==Jp&&o.push(e.assignTexture(a,"emissiveMap",r.emissiveTexture,Su)),Promise.all(o).then((function(){const n=new s(a);return r.name&&(n.name=r.name),cw(n,r),e.associations.set(n,{materials:t}),r.extensions&&lw(i,n,r),n}))}createUniqueName(t){const e=Qy.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(t){return n[bS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return gw(n,t,e)}))}const s=[];for(let a=0,o=t.length;a<o;a++){const n=t[a],o=uw(n),l=i[o];if(l)s.push(l.promise);else{let t;t=n.extensions&&n.extensions[bS.KHR_DRACO_MESH_COMPRESSION]?r(n):gw(new vf,n,e),i[o]={primitive:n,promise:t},s.push(t)}}return Promise.all(s)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],s=r.primitives,a=[];for(let o=0,l=s.length;o<l;o++){const t=void 0===s[o].material?ow(this.cache):this.getDependency("material",s[o].material);a.push(t)}return a.push(e.loadGeometries(s)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let h=0,u=o.length;h<u;h++){const n=o[h],c=s[h];let u;const d=a[h];if(c.mode===ZS.TRIANGLES||c.mode===ZS.TRIANGLE_STRIP||c.mode===ZS.TRIANGLE_FAN||void 0===c.mode)u=!0===r.isSkinnedMesh?new Pm(n,d):new Pf(n,d),!0===u.isSkinnedMesh&&u.normalizeSkinWeights(),c.mode===ZS.TRIANGLE_STRIP?u.geometry=yS(u.geometry,1):c.mode===ZS.TRIANGLE_FAN&&(u.geometry=yS(u.geometry,2));else if(c.mode===ZS.LINES)u=new Eg(n,d);else if(c.mode===ZS.LINE_STRIP)u=new Sg(n,d);else if(c.mode===ZS.LINE_LOOP)u=new Cg(n,d);else{if(c.mode!==ZS.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);u=new Ng(n,d)}Object.keys(u.geometry.morphAttributes).length>0&&hw(u,r),u.name=e.createUniqueName(r.name||"mesh_"+t),cw(u,r),c.extensions&&lw(i,u,c),e.assignFinalMaterial(u),l.push(u)}for(let i=0,r=l.length;i<r;i++)e.associations.set(l[i],{meshes:t,primitives:i});if(1===l.length)return r.extensions&&lw(i,l[0],r),l[0];const c=new qf;r.extensions&&lw(i,c,r),e.associations.set(c,{meshes:t});for(let t=0,e=l.length;t<e;t++)c.add(l[t]);return c}))}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new Vf(Ku.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new hy(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),cw(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let i=0,r=e.joints.length;i<r;i++)n.push(this._loadNodeShallow(e.joints[i]));return void 0!==e.inverseBindMatrices?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(t){const e=t.pop(),n=t,i=[],r=[];for(let s=0,a=n.length;s<a;s++){const t=n[s];if(t){i.push(t);const n=new np;null!==e&&n.fromArray(e.array,16*s),r.push(n)}}return new Om(i,r)}))}loadAnimation(t){const e=this.json,n=this,i=e.animations[t],r=i.name?i.name:"animation_"+t,s=[],a=[],o=[],l=[],c=[];for(let h=0,u=i.channels.length;h<u;h++){const t=i.channels[h],e=i.samplers[t.sampler],n=t.target,r=n.node,u=void 0!==i.parameters?i.parameters[e.input]:e.input,d=void 0!==i.parameters?i.parameters[e.output]:e.output;void 0!==n.node&&(s.push(this.getDependency("node",r)),a.push(this.getDependency("accessor",u)),o.push(this.getDependency("accessor",d)),l.push(e),c.push(n))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c)]).then((function(t){const e=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=[];for(let r=0,c=e.length;r<c;r++){const t=e[r],c=i[r],h=s[r],u=a[r],d=o[r];if(void 0===t)continue;t.updateMatrix&&t.updateMatrix();const p=n._createAnimationTracks(t,c,h,u,d);if(p)for(let e=0;e<p.length;e++)l.push(p[e])}return new Bv(r,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,i.mesh,t);return void 0!==i.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=i.weights.length;e<n;e++)t.morphTargetInfluences[e]=i.weights[e]})),e}))}loadNode(t){const e=this,n=this.json.nodes[t],i=e._loadNodeShallow(t),r=[],s=n.children||[];for(let o=0,l=s.length;o<l;o++)r.push(e.getDependency("node",s[o]));const a=void 0===n.skin?Promise.resolve(null):e.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),a]).then((function(t){const e=t[0],n=t[1],i=t[2];null!==i&&e.traverse((function(t){t.isSkinnedMesh&&t.bind(i,fw)}));for(let r=0,s=n.length;r<s;r++)e.add(n[r]);return e}))}_loadNodeShallow(t){const e=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const r=e.nodes[t],s=r.name?i.createUniqueName(r.name):"",a=[],o=i._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return o&&a.push(o),void 0!==r.camera&&a.push(i.getDependency("camera",r.camera).then((function(t){return i._getNodeRef(i.cameraCache,r.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){a.push(t)})),this.nodeCache[t]=Promise.all(a).then((function(e){let a;if(a=!0===r.isBone?new Im:e.length>1?new qf:1===e.length?e[0]:new Rp,a!==e[0])for(let t=0,n=e.length;t<n;t++)a.add(e[t]);if(r.name&&(a.userData.name=r.name,a.name=s),cw(a,r),r.extensions&&lw(n,a,r),void 0!==r.matrix){const t=new np;t.fromArray(r.matrix),a.applyMatrix4(t)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=t,a})),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],i=this,r=new qf;n.name&&(r.name=i.createUniqueName(n.name)),cw(r,n),n.extensions&&lw(e,r,n);const s=n.nodes||[],a=[];for(let o=0,l=s.length;o<l;o++)a.push(i.getDependency("node",s[o]));return Promise.all(a).then((function(t){for(let e=0,n=t.length;e<n;e++)r.add(t[e]);return i.associations=(t=>{const e=new Map;for(const[n,r]of i.associations)(n instanceof Kp||n instanceof yd)&&e.set(n,r);return t.traverse((t=>{const n=i.associations.get(t);null!=n&&e.set(t,n)})),e})(r),r}))}_createAnimationTracks(t,e,n,i,r){const s=[],a=t.name?t.name:t.uuid,o=[];let l;switch(nw[r.path]===nw.weights?t.traverse((function(t){t.morphTargetInfluences&&o.push(t.name?t.name:t.uuid)})):o.push(a),nw[r.path]){case nw.weights:l=Nv;break;case nw.rotation:l=Uv;break;case nw.position:case nw.scale:l=kv;break;default:if(1===n.itemSize)l=Nv;else l=kv}const c=void 0!==i.interpolation?iw[i.interpolation]:mu,h=this._getArrayFromAccessor(n);for(let u=0,d=o.length;u<d;u++){const t=new l(o[u]+"."+nw[r.path],e.array,h,c);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(t),s.push(t)}return s}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const t=pw(e.constructor),n=new Float32Array(e.length);for(let i=0,r=e.length;i<r;i++)n[i]=e[i]*t;e=n}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(t){return new(this instanceof Uv?$S:qS)(this.times,this.values,this.getValueSize()/3,t)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function gw(t,e,n){const i=e.attributes,r=[];function s(e,i){return n.getDependency("accessor",e).then((function(e){t.setAttribute(i,e)}))}for(const a in i){const e=ew[a]||a.toLowerCase();e in t.attributes||r.push(s(i[a],e))}if(void 0!==e.indices&&!t.index){const i=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(i)}return hd.workingColorSpace,cw(t,e),function(t,e,n){const i=e.attributes,r=new Rd;if(void 0===i.POSITION)return;{const t=n.json.accessors[i.POSITION],e=t.min,s=t.max;if(void 0===e||void 0===s)return;if(r.set(new Ad(e[0],e[1],e[2]),new Ad(s[0],s[1],s[2])),t.normalized){const e=pw(KS[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const s=e.targets;if(void 0!==s){const t=new Ad,e=new Ad;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],s=i.min,a=i.max;if(void 0!==s&&void 0!==a){if(e.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),e.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),e.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),i.normalized){const t=pw(KS[i.componentType]);e.multiplyScalar(t)}t.max(e)}}}r.expandByVector(t)}t.boundingBox=r;const a=new qd;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=a}(t,e,n),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const t=e[c];if(void 0!==t.POSITION&&(i=!0),void 0!==t.NORMAL&&(r=!0),void 0!==t.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const a=[],o=[],l=[];for(let c=0,h=e.length;c<h;c++){const h=e[c];if(i){const e=void 0!==h.POSITION?n.getDependency("accessor",h.POSITION):t.attributes.position;a.push(e)}if(r){const e=void 0!==h.NORMAL?n.getDependency("accessor",h.NORMAL):t.attributes.normal;o.push(e)}if(s){const e=void 0!==h.COLOR_0?n.getDependency("accessor",h.COLOR_0):t.attributes.color;l.push(e)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then((function(e){const n=e[0],a=e[1],o=e[2];return i&&(t.morphAttributes.position=n),r&&(t.morphAttributes.normal=a),s&&(t.morphAttributes.color=o),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}const _w=new WeakMap;function vw(){let t,e;function n(t,e,n,i,r,s){const a=s.num_components(),o=n.num_points()*a,l=o*r.BYTES_PER_ELEMENT,c=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,r),h=t._malloc(l);e.GetAttributeDataArrayForAllPoints(n,s,c,l,h);const u=new r(t.HEAPF32.buffer,h,o).slice();return t._free(h),{name:i,array:u,itemSize:a}}onmessage=function(i){const r=i.data;switch(r.type){case"init":t=r.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const i=r.buffer,s=r.taskConfig;e.then((t=>{const e=t.draco,a=new e.Decoder;try{const t=function(t,e,i,r){const s=r.attributeIDs,a=r.attributeTypes;let o,l;const c=e.GetEncodedGeometryType(i);if(c===t.TRIANGULAR_MESH)o=new t.Mesh,l=e.DecodeArrayToMesh(i,i.byteLength,o);else{if(c!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new t.PointCloud,l=e.DecodeArrayToPointCloud(i,i.byteLength,o)}if(!l.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const h={index:null,attributes:[]};for(const u in s){const i=self[a[u]];let l,c;if(r.useUniqueIDs)c=s[u],l=e.GetAttributeByUniqueId(o,c);else{if(c=e.GetAttributeId(o,t[s[u]]),-1===c)continue;l=e.GetAttribute(o,c)}const d=n(t,e,o,u,i,l);"color"===u&&(d.vertexColorSpace=r.vertexColorSpace),h.attributes.push(d)}c===t.TRIANGULAR_MESH&&(h.index=function(t,e,n){const i=n.num_faces(),r=3*i,s=4*r,a=t._malloc(s);e.GetTrianglesUInt32Array(n,s,a);const o=new Uint32Array(t.HEAPF32.buffer,a,r).slice();return t._free(a),{array:o,itemSize:1}}(t,e,o));return t.destroy(o),h}(e,a,new Int8Array(i),s),o=t.attributes.map((t=>t.array.buffer));t.index&&o.push(t.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:t},o)}catch(o){self.postMessage({type:"error",id:r.id,error:o.message})}finally{e.destroy(a)}}))}}}const yw={type:"change"},xw={type:"start"},bw={type:"end"},Mw=new ep,Sw=new Ym,ww=Math.cos(70*Ku.DEG2RAD),Tw=new Ad,Aw=2*Math.PI,Ew=-1,Cw=0,Rw=1,Pw=2,Iw=3,Lw=4,Dw=5,Nw=6,Ow=1e-6;class Uw extends Lx{constructor(t,e=null){super(t,e),this.state=Ew,this.enabled=!0,this.target=new Ad,this.cursor=new Ad,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:rc.ROTATE,MIDDLE:rc.DOLLY,RIGHT:rc.PAN},this.touches={ONE:sc.ROTATE,TWO:sc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Ad,this._lastQuaternion=new Td,this._lastTargetPosition=new Ad,this._quat=(new Td).setFromUnitVectors(t.up,new Ad(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new lx,this._sphericalDelta=new lx,this._scale=1,this._panOffset=new Ad,this._rotateStart=new Ju,this._rotateEnd=new Ju,this._rotateDelta=new Ju,this._panStart=new Ju,this._panEnd=new Ju,this._panDelta=new Ju,this._dollyStart=new Ju,this._dollyEnd=new Ju,this._dollyDelta=new Ju,this._dollyDirection=new Ad,this._mouse=new Ju,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=kw.bind(this),this._onPointerDown=Fw.bind(this),this._onPointerUp=Bw.bind(this),this._onContextMenu=Xw.bind(this),this._onMouseWheel=Vw.bind(this),this._onKeyDown=Gw.bind(this),this._onTouchStart=Ww.bind(this),this._onTouchMove=jw.bind(this),this._onMouseDown=zw.bind(this),this._onMouseMove=Hw.bind(this),this._interceptControlDown=qw.bind(this),this._interceptControlUp=Yw.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1});this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents();this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(yw),this.update(),this.state=Ew}update(t=null){const e=this.object.position;Tw.copy(e).sub(this.target),Tw.applyQuaternion(this._quat),this._spherical.setFromVector3(Tw),this.autoRotate&&this.state===Ew&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=Aw:n>Math.PI&&(n-=Aw),i<-Math.PI?i+=Aw:i>Math.PI&&(i-=Aw),this._spherical.theta=n<=i?Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const t=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=t!=this._spherical.radius}if(Tw.setFromSpherical(this._spherical),Tw.applyQuaternion(this._quatInverse),e.copy(this.target).add(Tw),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let t=null;if(this.object.isPerspectiveCamera){const e=Tw.length();t=this._clampDistance(e*this._scale);const n=e-t;this.object.position.addScaledVector(this._dollyDirection,n),this.object.updateMatrixWorld(),r=!!n}else if(this.object.isOrthographicCamera){const e=new Ad(this._mouse.x,this._mouse.y,0);e.unproject(this.object);const n=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=n!==this.object.zoom;const i=new Ad(this._mouse.x,this._mouse.y,0);i.unproject(this.object),this.object.position.sub(i).add(e),this.object.updateMatrixWorld(),t=Tw.length()}else this.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(t).add(this.object.position):(Mw.origin.copy(this.object.position),Mw.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Mw.direction))<ww?this.object.lookAt(this.target):(Sw.setFromNormalAndCoplanarPoint(this.object.up,this.target),Mw.intersectPlane(Sw,this.target))))}else if(this.object.isOrthographicCamera){const t=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),t!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,!!(r||this._lastPosition.distanceToSquared(this.object.position)>Ow||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Ow||this._lastTargetPosition.distanceToSquared(this.target)>Ow)&&(this.dispatchEvent(yw),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?Aw/60*this.autoRotateSpeed*t:Aw/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){Tw.setFromMatrixColumn(e,0),Tw.multiplyScalar(-t),this._panOffset.add(Tw)}_panUp(t,e){!0===this.screenSpacePanning?Tw.setFromMatrixColumn(e,1):(Tw.setFromMatrixColumn(e,0),Tw.crossVectors(this.object.up,Tw)),Tw.multiplyScalar(t),this._panOffset.add(Tw)}_pan(t,e){const n=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Tw.copy(i).sub(this.target);let r=Tw.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*r/n.clientHeight,this.object.matrix),this._panUp(2*e*r/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):this.enablePan=!1}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:this.enableZoom=!1}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:this.enableZoom=!1}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),i=t-n.left,r=e-n.top,s=n.width,a=n.height;this._mouse.x=i/s*2-1,this._mouse.y=-r/a*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(Aw*this._rotateDelta.x/e.clientHeight),this._rotateUp(Aw*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(Aw*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-Aw*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(Aw*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-Aw*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._panStart.set(n,i)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,i=t.pageY-e.y,r=Math.sqrt(n*n+i*i);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._rotateEnd.set(n,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(Aw*this._rotateDelta.x/e.clientHeight),this._rotateUp(Aw*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,i=t.pageY-e.y,r=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=.5*(t.pageX+e.x),a=.5*(t.pageY+e.y);this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return void this._pointers.splice(e,1)}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];void 0===e&&(e=new Ju,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,n={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function Fw(t){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(t)||(this._addPointer(t),"touch"===t.pointerType?this._onTouchStart(t):this._onMouseDown(t)))}function kw(t){!1!==this.enabled&&("touch"===t.pointerType?this._onTouchMove(t):this._onMouseMove(t))}function Bw(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(bw),this.state=Ew;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y})}}function zw(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case rc.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(t),this.state=Rw;break;case rc.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=Pw}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=Cw}break;case rc.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=Cw}else{if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=Pw}break;default:this.state=Ew}this.state!==Ew&&this.dispatchEvent(xw)}function Hw(t){switch(this.state){case Cw:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(t);break;case Rw:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(t);break;case Pw:if(!1===this.enablePan)return;this._handleMouseMovePan(t)}}function Vw(t){!1!==this.enabled&&!1!==this.enableZoom&&this.state===Ew&&(t.preventDefault(),this.dispatchEvent(xw),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(bw))}function Gw(t){!1!==this.enabled&&this._handleKeyDown(t)}function Ww(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case sc.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(t),this.state=Iw;break;case sc.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(t),this.state=Lw;break;default:this.state=Ew}break;case 2:switch(this.touches.TWO){case sc.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(t),this.state=Dw;break;case sc.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(t),this.state=Nw;break;default:this.state=Ew}break;default:this.state=Ew}this.state!==Ew&&this.dispatchEvent(xw)}function jw(t){switch(this._trackPointer(t),this.state){case Iw:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(t),this.update();break;case Lw:if(!1===this.enablePan)return;this._handleTouchMovePan(t),this.update();break;case Dw:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(t),this.update();break;case Nw:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=Ew}}function Xw(t){!1!==this.enabled&&t.preventDefault()}function qw(t){if("Control"===t.key){this._controlActive=!0;this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}function Yw(t){if("Control"===t.key){this._controlActive=!1;this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}function $w(t,e){var n=t.__state.conversionName.toString(),i=Math.round(t.r),r=Math.round(t.g),s=Math.round(t.b),a=t.a,o=Math.round(t.h),l=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var h=t.hex.toString(16);h.length<6;)h="0"+h;return"#"+h}return"CSS_RGB"===n?"rgb("+i+","+r+","+s+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+s+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+s+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+s+","+a+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+s+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+s+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+o+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+o+",s:"+l+",v:"+c+",a:"+a+"}":"unknown format"}var Zw=Array.prototype.forEach,Kw=Array.prototype.slice,Jw={BREAK:{},extend:function(t){return this.each(Kw.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(Kw.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=Kw.call(arguments);return function(){for(var e=Kw.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(Zw&&t.forEach&&t.forEach===Zw)t.forEach(e,n);else if(t.length===t.length+0){var i,r=void 0;for(r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===this.BREAK)return}else for(var s in t)if(e.call(n,t[s],s)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i=void 0;return function(){var r=this,s=arguments;var a=n||!i;clearTimeout(i),i=setTimeout((function(){i=null,n||t.apply(r,s)}),e),a&&t.apply(r,s)}},toArray:function(t){return t.toArray?t.toArray():Kw.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},Qw=[{litmus:Jw.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:$w},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:$w},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:$w},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:$w}}},{litmus:Jw.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:Jw.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:Jw.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(Jw.isNumber(t.r)&&Jw.isNumber(t.g)&&Jw.isNumber(t.b)&&Jw.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(Jw.isNumber(t.r)&&Jw.isNumber(t.g)&&Jw.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(Jw.isNumber(t.h)&&Jw.isNumber(t.s)&&Jw.isNumber(t.v)&&Jw.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(Jw.isNumber(t.h)&&Jw.isNumber(t.s)&&Jw.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],tT=void 0,eT=void 0,nT=function(){eT=!1;var t=arguments.length>1?Jw.toArray(arguments):arguments[0];return Jw.each(Qw,(function(e){if(e.litmus(t))return Jw.each(e.conversions,(function(e,n){if(tT=e.read(t),!1===eT&&!1!==tT)return eT=tT,tT.conversionName=n,tT.conversion=e,Jw.BREAK})),Jw.BREAK})),eT},iT=void 0,rT={hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),s=n*(1-e),a=n*(1-r*e),o=n*(1-(1-r)*e),l=[[n,o,s],[a,n,s],[s,n,o],[s,a,n],[o,s,n],[n,s,a]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(t,e,n){var i=Math.min(t,e,n),r=Math.max(t,e,n),s=r-i,a=void 0;return 0===r?{h:NaN,s:0,v:0}:(a=t===r?(e-n)/s:e===r?2+(n-t)/s:4+(t-e)/s,(a/=6)<0&&(a+=1),{h:360*a,s:s/r,v:r/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(iT=8*e)|t&~(255<<iT)}},sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aT=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},oT=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),lT=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},cT=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},hT=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},uT=function(){function t(){if(aT(this,t),this.__state=nT.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return oT(t,[{key:"toString",value:function(){return $w(this)}},{key:"toHexString",value:function(){return $w(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function dT(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||uT.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(uT.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function pT(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||uT.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(uT.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}uT.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=rT.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");Jw.extend(t.__state,rT.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},uT.recalculateHSV=function(t){var e=rT.rgb_to_hsv(t.r,t.g,t.b);Jw.extend(t.__state,{s:e.s,v:e.v}),Jw.isNaN(e.h)?Jw.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},uT.COMPONENTS=["r","g","b","h","s","v","hex","a"],dT(uT.prototype,"r",2),dT(uT.prototype,"g",1),dT(uT.prototype,"b",0),pT(uT.prototype,"h"),pT(uT.prototype,"s"),pT(uT.prototype,"v"),Object.defineProperty(uT.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(uT.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=rT.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var fT=function(){function t(e,n){aT(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return oT(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),mT={};Jw.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){Jw.each(t,(function(t){mT[t]=e}))}));var gT=/(\d+(\.\d+)?)px/;function _T(t){if("0"===t||Jw.isUndefined(t))return 0;var e=t.match(gT);return Jw.isNull(e)?0:parseFloat(e[1])}var vT={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var i=n,r=e;Jw.isUndefined(r)&&(r=!0),Jw.isUndefined(i)&&(i=!0),t.style.position="absolute",r&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,i){var r=n||{},s=mT[e];if(!s)throw new Error("Event type "+e+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var o=r.x||r.clientX||0,l=r.y||r.clientY||0;a.initMouseEvent(e,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,o,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;Jw.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(e,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(e,r.bubbles||!1,r.cancelable||!0)}Jw.defaults(a,i),t.dispatchEvent(a)},bind:function(t,e,n,i){var r=i||!1;return t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),vT},unbind:function(t,e,n,i){var r=i||!1;return t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),vT},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return vT},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);-1!==i&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return vT},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return _T(e["border-left-width"])+_T(e["border-right-width"])+_T(e["padding-left"])+_T(e["padding-right"])+_T(e.width)},getHeight:function(t){var e=getComputedStyle(t);return _T(e["border-top-width"])+_T(e["border-bottom-width"])+_T(e["padding-top"])+_T(e["padding-bottom"])+_T(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},yT=function(t){function e(t,n){aT(this,e);var i=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),vT.bind(i.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return cT(e,fT),oT(e,[{key:"setValue",value:function(t){var n=lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(),xT=function(t){function e(t,n,i){aT(this,e);var r=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=i,a=r;if(r.__select=document.createElement("select"),Jw.isArray(s)){var o={};Jw.each(s,(function(t){o[t]=t})),s=o}return Jw.each(s,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)})),r.updateDisplay(),vT.bind(r.__select,"change",(function(){var t=this.options[this.selectedIndex].value;a.setValue(t)})),r.domElement.appendChild(r.__select),r}return cT(e,fT),oT(e,[{key:"setValue",value:function(t){var n=lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return vT.isActive(this.__select)?this:(this.__select.value=this.getValue(),lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(),bT=function(t){function e(t,n){aT(this,e);var i=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;function s(){r.setValue(r.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),vT.bind(i.__input,"keyup",s),vT.bind(i.__input,"change",s),vT.bind(i.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),vT.bind(i.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return cT(e,fT),oT(e,[{key:"updateDisplay",value:function(){return vT.isActive(this.__input)||(this.__input.value=this.getValue()),lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}();function MT(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var ST=function(t){function e(t,n,i){aT(this,e);var r=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=i||{};return r.__min=s.min,r.__max=s.max,r.__step=s.step,Jw.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=MT(r.__impliedStep),r}return cT(e,fT),oT(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=MT(t),this}}]),e}();var wT=function(t){function e(t,n,i){aT(this,e);var r=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));r.__truncationSuspended=!1;var s=r,a=void 0;function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function l(t){var e=a-t.clientY;s.setValue(s.getValue()+e*s.__impliedStep),a=t.clientY}function c(){vT.unbind(window,"mousemove",l),vT.unbind(window,"mouseup",c),o()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),vT.bind(r.__input,"change",(function(){var t=parseFloat(s.__input.value);Jw.isNaN(t)||s.setValue(t)})),vT.bind(r.__input,"blur",(function(){o()})),vT.bind(r.__input,"mousedown",(function(t){vT.bind(window,"mousemove",l),vT.bind(window,"mouseup",c),a=t.clientY})),vT.bind(r.__input,"keydown",(function(t){13===t.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,o())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return cT(e,ST),oT(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(this.getValue(),this.__precision),lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}();function TT(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}var AT=function(t){function e(t,n,i,r,s){aT(this,e);var a=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:i,max:r,step:s})),o=a;function l(t){t.preventDefault();var e=o.__background.getBoundingClientRect();return o.setValue(TT(t.clientX,e.left,e.right,o.__min,o.__max)),!1}function c(){vT.unbind(window,"mousemove",l),vT.unbind(window,"mouseup",c),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function h(t){var e=t.touches[0].clientX,n=o.__background.getBoundingClientRect();o.setValue(TT(e,n.left,n.right,o.__min,o.__max))}function u(){vT.unbind(window,"touchmove",h),vT.unbind(window,"touchend",u),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),vT.bind(a.__background,"mousedown",(function(t){document.activeElement.blur(),vT.bind(window,"mousemove",l),vT.bind(window,"mouseup",c),l(t)})),vT.bind(a.__background,"touchstart",(function(t){if(1!==t.touches.length)return;vT.bind(window,"touchmove",h),vT.bind(window,"touchend",u),h(t)})),vT.addClass(a.__background,"slider"),vT.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return cT(e,ST),oT(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",lT(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(),ET=function(t){function e(t,n,i){aT(this,e);var r=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===i?"Fire":i,vT.bind(r.__button,"click",(function(t){return t.preventDefault(),s.fire(),!1})),vT.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return cT(e,fT),oT(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(),CT=function(t){function e(t,n){aT(this,e);var i=hT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));i.__color=new uT(i.getValue()),i.__temp=new uT(0);var r=i;i.domElement=document.createElement("div"),vT.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",vT.bind(i.__input,"keydown",(function(t){13===t.keyCode&&h.call(this)})),vT.bind(i.__input,"blur",h),vT.bind(i.__selector,"mousedown",(function(){vT.addClass(this,"drag").bind(window,"mouseup",(function(){vT.removeClass(r.__selector,"drag")}))})),vT.bind(i.__selector,"touchstart",(function(){vT.addClass(this,"drag").bind(window,"touchend",(function(){vT.removeClass(r.__selector,"drag")}))}));var s=document.createElement("div");function a(t){d(t),vT.bind(window,"mousemove",d),vT.bind(window,"touchmove",d),vT.bind(window,"mouseup",l),vT.bind(window,"touchend",l)}function o(t){p(t),vT.bind(window,"mousemove",p),vT.bind(window,"touchmove",p),vT.bind(window,"mouseup",c),vT.bind(window,"touchend",c)}function l(){vT.unbind(window,"mousemove",d),vT.unbind(window,"touchmove",d),vT.unbind(window,"mouseup",l),vT.unbind(window,"touchend",l),u()}function c(){vT.unbind(window,"mousemove",p),vT.unbind(window,"touchmove",p),vT.unbind(window,"mouseup",c),vT.unbind(window,"touchend",c),u()}function h(){var t=nT(this.value);!1!==t?(r.__color.__state=t,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function u(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function d(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,i=n.clientX,s=n.clientY,a=(i-e.left)/(e.right-e.left),o=1-(s-e.top)/(e.bottom-e.top);return o>1?o=1:o<0&&(o=0),a>1?a=1:a<0&&(a=0),r.__color.v=o,r.__color.s=a,r.setValue(r.__color.toOriginal()),!1}function p(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return Jw.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Jw.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Jw.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Jw.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Jw.extend(s.style,{width:"100%",height:"100%",background:"none"}),PT(s,"top","rgba(0,0,0,0)","#000"),Jw.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(i.__hue_field),Jw.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),vT.bind(i.__saturation_field,"mousedown",a),vT.bind(i.__saturation_field,"touchstart",a),vT.bind(i.__field_knob,"mousedown",a),vT.bind(i.__field_knob,"touchstart",a),vT.bind(i.__hue_field,"mousedown",o),vT.bind(i.__hue_field,"touchstart",o),i.__saturation_field.appendChild(s),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return cT(e,fT),oT(e,[{key:"updateDisplay",value:function(){var t=nT(this.getValue());if(!1!==t){var e=!1;Jw.each(uT.COMPONENTS,(function(n){if(!Jw.isUndefined(t[n])&&!Jw.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&Jw.extend(this.__color.__state,t)}Jw.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;Jw.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,PT(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Jw.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),e}(),RT=["-moz-","-o-","-webkit-","-ms-",""];function PT(t,e,n,i){t.style.background="",Jw.each(RT,(function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+n+" 0%, "+i+" 100%); "}))}var IT=function(t,e){var n=e||document,i=document.createElement("style");i.type="text/css",i.innerHTML=t;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(s){}},LT=function(t,e){var n=t[e];return Jw.isArray(arguments[2])||Jw.isObject(arguments[2])?new xT(t,e,arguments[2]):Jw.isNumber(n)?Jw.isNumber(arguments[2])&&Jw.isNumber(arguments[3])?Jw.isNumber(arguments[4])?new AT(t,e,arguments[2],arguments[3],arguments[4]):new AT(t,e,arguments[2],arguments[3]):Jw.isNumber(arguments[4])?new wT(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new wT(t,e,{min:arguments[2],max:arguments[3]}):Jw.isString(n)?new bT(t,e):Jw.isFunction(n)?new ET(t,e,""):Jw.isBoolean(n)?new yT(t,e):null};var DT=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},NT=function(){function t(){aT(this,t),this.backgroundElement=document.createElement("div"),Jw.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),vT.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Jw.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;vT.bind(this.backgroundElement,"click",(function(){e.hide()}))}return oT(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Jw.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",vT.unbind(t.domElement,"webkitTransitionEnd",e),vT.unbind(t.domElement,"transitionend",e),vT.unbind(t.domElement,"oTransitionEnd",e)};vT.bind(this.domElement,"webkitTransitionEnd",e),vT.bind(this.domElement,"transitionend",e),vT.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-vT.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-vT.getHeight(this.domElement)/2+"px"}}]),t}(),OT=function(t){if("undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");IT(OT);var UT="Default",FT=function(){try{return!!window.localStorage}catch(t){return!1}}(),kT=void 0,BT=!0,zT=void 0,HT=!1,VT=[],GT=function t(e){var n=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),vT.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=Jw.defaults(i,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),i=Jw.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),Jw.isUndefined(i.load)?i.load={preset:UT}:i.preset&&(i.load.preset=i.preset),Jw.isUndefined(i.parent)&&i.hideable&&VT.push(this),i.resizable=Jw.isUndefined(i.parent)&&i.resizable,i.autoPlace&&Jw.isUndefined(i.scrollable)&&(i.scrollable=!0);var r=FT&&"true"===localStorage.getItem($T(this,"isLocal")),s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(t){n.parent?n.getRoot().preset=t:i.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return i.width},set:function(t){i.width=t,JT(n,t)}},name:{get:function(){return i.name},set:function(t){i.name=t,a&&(a.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(e){i.closed=e,i.closed?vT.addClass(n.__ul,t.CLASS_CLOSED):vT.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return r},set:function(t){FT&&(r=t,t?vT.bind(window,"unload",s):vT.unbind(window,"unload",s),localStorage.setItem($T(n,"isLocal"),t))}}}),Jw.isUndefined(i.parent)){if(this.closed=i.closed||!1,vT.addClass(this.domElement,t.CLASS_MAIN),vT.makeSelectable(this.domElement,!1),FT&&r){n.useLocalStorage=!0;var o=localStorage.getItem($T(this,"gui"));o&&(i.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,vT.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),i.closeOnTop?(vT.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(vT.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),vT.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===i.closed&&(i.closed=!0);var l=document.createTextNode(i.name);vT.addClass(l,"controller-name"),a=WT(n,l);vT.addClass(this.__ul,t.CLASS_CLOSED),vT.addClass(a,"title"),vT.bind(a,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),i.closed||(this.closed=!1)}i.autoPlace&&(Jw.isUndefined(i.parent)&&(BT&&(zT=document.createElement("div"),vT.addClass(zT,"dg"),vT.addClass(zT,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(zT),BT=!1),zT.appendChild(this.domElement),vT.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||JT(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},vT.bind(window,"resize",this.__resizeHandler),vT.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),vT.bind(this.__ul,"transitionend",this.__resizeHandler),vT.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&function(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function i(){vT.removeClass(t.__closeButton,GT.CLASS_DRAG),vT.unbind(window,"mousemove",n),vT.unbind(window,"mouseup",i)}function r(r){return r.preventDefault(),e=r.clientX,vT.addClass(t.__closeButton,GT.CLASS_DRAG),vT.bind(window,"mousemove",n),vT.bind(window,"mouseup",i),!1}t.__resize_handle=document.createElement("div"),Jw.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),vT.bind(t.__resize_handle,"mousedown",r),vT.bind(t.__closeButton,"mousedown",r),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),s=function(){FT&&"true"===localStorage.getItem($T(n,"isLocal"))&&localStorage.setItem($T(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,i.parent||function(){var t=n.getRoot();t.width+=1,Jw.defer((function(){t.width-=1}))}()};function WT(t,e,n){var i=document.createElement("li");return e&&i.appendChild(e),n?t.__ul.insertBefore(i,n):t.__ul.appendChild(i),t.onResize(),i}function jT(t){vT.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&vT.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function XT(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function qT(t,e){var n=t.getRoot(),i=n.__rememberedObjects.indexOf(e.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[e.property]=e,n.load&&n.load.remembered){var s=n.load.remembered,a=void 0;if(s[t.preset])a=s[t.preset];else{if(!s[UT])return;a=s[UT]}if(a[i]&&void 0!==a[i][e.property]){var o=a[i][e.property];e.initialValue=o,e.setValue(o)}}}}function YT(t,e,n,i){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var r=void 0;if(i.color)r=new CT(e,n);else{var s=[e,n].concat(i.factoryArgs);r=LT.apply(t,s)}i.before instanceof fT&&(i.before=i.before.__li),qT(t,r),vT.addClass(r.domElement,"c");var a=document.createElement("span");vT.addClass(a,"property-name"),a.innerHTML=r.property;var o=document.createElement("div");o.appendChild(a),o.appendChild(r.domElement);var l=WT(t,o,i.before);return vT.addClass(l,GT.CLASS_CONTROLLER_ROW),r instanceof CT?vT.addClass(l,"color"):vT.addClass(l,sT(r.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,Jw.extend(n,{options:function(e){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),YT(t,n.object,n.property,{before:i,factoryArgs:[Jw.toArray(arguments)]})}if(Jw.isArray(e)||Jw.isObject(e)){var r=n.__li.nextElementSibling;return n.remove(),YT(t,n.object,n.property,{before:r,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof AT){var i=new wT(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});Jw.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],r=i[t];n[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return r.apply(i,t),e.apply(n,t)}})),vT.addClass(e,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof wT){var r=function(e){if(Jw.isNumber(n.__min)&&Jw.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var s=YT(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return s.name(i),r&&s.listen(),s}return e};n.min=Jw.compose(r,n.min),n.max=Jw.compose(r,n.max)}else n instanceof yT?(vT.bind(e,"click",(function(){vT.fakeEvent(n.__checkbox,"click")})),vT.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof ET?(vT.bind(e,"click",(function(){vT.fakeEvent(n.__button,"click")})),vT.bind(e,"mouseover",(function(){vT.addClass(n.__button,"hover")})),vT.bind(e,"mouseout",(function(){vT.removeClass(n.__button,"hover")}))):n instanceof CT&&(vT.addClass(e,"color"),n.updateDisplay=Jw.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=Jw.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&XT(t.getRoot(),!0),e}),n.setValue)}(t,l,r),t.__controllers.push(r),r}function $T(t,e){return document.location.href+"."+e}function ZT(t,e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function KT(t,e){e.style.display=t.useLocalStorage?"block":"none"}function JT(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function QT(t,e){var n={};return Jw.each(t.__rememberedObjects,(function(i,r){var s={},a=t.__rememberedObjectIndecesToControllers[r];Jw.each(a,(function(t,n){s[n]=e?t.initialValue:t.getValue()})),n[r]=s})),n}function tA(t){0!==t.length&&DT.call(window,(function(){tA(t)})),Jw.each(t,(function(t){t.updateDisplay()}))}GT.toggleHide=function(){HT=!HT,Jw.each(VT,(function(t){t.domElement.style.display=HT?"none":""}))},GT.CLASS_AUTO_PLACE="a",GT.CLASS_AUTO_PLACE_CONTAINER="ac",GT.CLASS_MAIN="main",GT.CLASS_CONTROLLER_ROW="cr",GT.CLASS_TOO_TALL="taller-than-window",GT.CLASS_CLOSED="closed",GT.CLASS_CLOSE_BUTTON="close-button",GT.CLASS_CLOSE_TOP="close-top",GT.CLASS_CLOSE_BOTTOM="close-bottom",GT.CLASS_DRAG="drag",GT.DEFAULT_WIDTH=245,GT.TEXT_CLOSED="Close Controls",GT.TEXT_OPEN="Open Controls",GT._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||GT.toggleHide()},vT.bind(window,"keydown",GT._keydownHandler,!1),Jw.extend(GT.prototype,{add:function(t,e){return YT(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return YT(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;Jw.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&zT.removeChild(this.domElement);var t=this;Jw.each(this.__folders,(function(e){t.removeFolder(e)})),vT.unbind(window,"keydown",GT._keydownHandler,!1),jT(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new GT(e);this.__folders[t]=n;var i=WT(this,n.domElement);return vT.addClass(i,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],jT(t);var e=this;Jw.each(t.__folders,(function(e){t.removeFolder(e)})),Jw.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=vT.getOffset(t.__ul).top,n=0;Jw.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=vT.getHeight(e))})),window.innerHeight-e-20<n?(vT.addClass(t.domElement,GT.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(vT.removeClass(t.domElement,GT.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&Jw.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:Jw.debounce((function(){this.onResize()}),50),remember:function(){if(Jw.isUndefined(kT)&&((kT=new NT).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;Jw.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&function(t){var e=t.__save_row=document.createElement("li");vT.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),vT.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",vT.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",vT.addClass(i,"button"),vT.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",vT.addClass(r,"button"),vT.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",vT.addClass(s,"button"),vT.addClass(s,"revert");var a=t.__preset_select=document.createElement("select");t.load&&t.load.remembered?Jw.each(t.load.remembered,(function(e,n){ZT(t,n,n===t.preset)})):ZT(t,UT,!1);if(vT.bind(a,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(a),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(s),FT){var o=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem($T(t,"isLocal"))&&l.setAttribute("checked","checked"),KT(t,o),vT.bind(l,"change",(function(){t.useLocalStorage=!t.useLocalStorage,KT(t,o)}))}var c=document.getElementById("dg-new-constructor");vT.bind(c,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||kT.hide()})),vT.bind(n,"click",(function(){c.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),kT.show(),c.focus(),c.select()})),vT.bind(i,"click",(function(){t.save()})),vT.bind(r,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),vT.bind(s,"click",(function(){t.revert()}))}(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&JT(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=QT(this)),t.folders={},Jw.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=QT(this),XT(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[UT]=QT(this,!0)),this.load.remembered[t]=QT(this),this.preset=t,ZT(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){Jw.each(this.__controllers,(function(e){this.getRoot().load.remembered?qT(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),Jw.each(this.__folders,(function(t){t.revert(t)})),t||XT(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&tA(this.__listening)},updateDisplay:function(){Jw.each(this.__controllers,(function(t){t.updateDisplay()})),Jw.each(this.__folders,(function(t){t.updateDisplay()}))}});var eA=GT;let nA={add(){},addFolder(){},name(){}};const iA=new window.URLSearchParams(window.location.search);let rA,sA,aA=!1;const oA=t=>{"mousedown"===t.type?(aA=!0,rA=new Date):"mouseup"===t.type?aA=!1:"mousemove"===t.type&&aA&&t.target.classList.contains("title")&&(sA=new Date,sA.getTime()-rA.getTime()>333&&(nA.domElement.style.transform="translate( "+Number(t.layerX-44)+"px, "+Number(t.layerY-33)+"px)"))};if(iA.has("gui")){nA=new eA({closed:!1,autoPlace:!0,width:200});let t,e=location.href.indexOf("review.www")>=0||location.href.indexOf("http://localhost:")>=0;nA.domElement.addEventListener("mousedown",oA),nA.domElement.addEventListener("mousemove",oA),nA.domElement.addEventListener("mouseup",oA),iA.has("force_local")&&(e=!0),document.currentScript&&(t=JSON.parse(document.currentScript.parentNode.getAttribute("data-params"))),t&&t.force_local&&(e=!0),nA.domElement.id="gui",e&&iA.has("gui")||(nA.domElement.style.display="none")}const lA=t=>nA.addFolder(t);class cA extends $v{constructor(t){super(t),this.type=yh}parse(t){const e=function(t,e){switch(t){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(e||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(e||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(e||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(e||""))}},n=function(t,e,n){e=e||1024;let i=t.pos,r=-1,s=0,a="",o=String.fromCharCode.apply(null,new Uint16Array(t.subarray(i,i+128)));for(;0>(r=o.indexOf("\n"))&&s<e&&i<t.byteLength;)a+=o,s+=o.length,i+=128,o+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(i,i+128)));return-1<r&&(t.pos+=s+r+1,a+o.slice(0,r))},i=function(t,e,n,i){const r=t[e+3],s=Math.pow(2,r-128)/255;n[i+0]=t[e+0]*s,n[i+1]=t[e+1]*s,n[i+2]=t[e+2]*s,n[i+3]=1},r=function(t,e,n,i){const r=t[e+3],s=Math.pow(2,r-128)/255;n[i+0]=nf.toHalfFloat(Math.min(t[e+0]*s,65504)),n[i+1]=nf.toHalfFloat(Math.min(t[e+1]*s,65504)),n[i+2]=nf.toHalfFloat(Math.min(t[e+2]*s,65504)),n[i+3]=nf.toHalfFloat(1)},s=new Uint8Array(t);s.pos=0;const a=function(t){const i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,o={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((t.pos>=t.byteLength||!(l=n(t)))&&e(1,"no header found"),(c=l.match(/^#\?(\S+)/))||e(3,"bad initial token"),o.valid|=1,o.programtype=c[1],o.string+=l+"\n";l=n(t),!1!==l;)if(o.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(i))&&(o.gamma=parseFloat(c[1])),(c=l.match(r))&&(o.exposure=parseFloat(c[1])),(c=l.match(s))&&(o.valid|=2,o.format=c[1]),(c=l.match(a))&&(o.valid|=4,o.height=parseInt(c[1],10),o.width=parseInt(c[2],10)),2&o.valid&&4&o.valid)break}else o.comments+=l+"\n";return 2&o.valid||e(3,"missing format specifier"),4&o.valid||e(3,"missing image size specifier"),o}(s),o=a.width,l=a.height,c=function(t,n,i){const r=n;if(r<8||r>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);r!==(t[2]<<8|t[3])&&e(3,"wrong scanline width");const s=new Uint8Array(4*n*i);s.length||e(4,"unable to allocate buffer space");let a=0,o=0;const l=4*r,c=new Uint8Array(4),h=new Uint8Array(l);let u=i;for(;u>0&&o<t.byteLength;){o+4>t.byteLength&&e(1),c[0]=t[o++],c[1]=t[o++],c[2]=t[o++],c[3]=t[o++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==r||e(3,"bad rgbe scanline format");let n,i=0;for(;i<l&&o<t.byteLength;){n=t[o++];const r=n>128;if(r&&(n-=128),(0===n||i+n>l)&&e(3,"bad scanline data"),r){const e=t[o++];for(let t=0;t<n;t++)h[i++]=e}else h.set(t.subarray(o,o+n),i),i+=n,o+=n}const d=r;for(let t=0;t<d;t++){let e=0;s[a]=h[t+e],e+=r,s[a+1]=h[t+e],e+=r,s[a+2]=h[t+e],e+=r,s[a+3]=h[t+e],a+=4}u--}return s}(s.subarray(s.pos),o,l);let h,u,d;switch(this.type){case vh:d=c.length/4;const t=new Float32Array(4*d);for(let n=0;n<d;n++)i(c,4*n,t,4*n);h=t,u=vh;break;case yh:d=c.length/4;const e=new Uint16Array(4*d);for(let n=0;n<d;n++)r(c,4*n,e,4*n);h=e,u=yh;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:o,height:l,data:h,header:a.string,gamma:a.gamma,exposure:a.exposure,type:u}}setDataType(t){return this.type=t,this}load(t,e,n,i){return super.load(t,(function(t,n){switch(t.type){case vh:case yh:t.colorSpace=wu,t.minFilter=ch,t.magFilter=ch,t.generateMipmaps=!1,t.flipY=!0}e&&e(t,n)}),n,i)}}class hA extends Rp{constructor(t=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ju(.5,.5),this.addEventListener("removed",(function(){this.traverse((function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&null!==t.element.parentNode&&t.element.remove()}))}))}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this.center=t.center,this}}const uA=new Ad,dA=new np,pA=new np,fA=new Ad,mA=new Ad;class gA{constructor(t={}){const e=this;let n,i,r,s;const a={objects:new WeakMap},o=void 0!==t.element?t.element:document.createElement("div");function l(t){t.isCSS2DObject&&(t.element.style.display="none");for(let e=0,n=t.children.length;e<n;e++)l(t.children[e])}function c(t,n,i){if(!1!==t.visible){if(t.isCSS2DObject){uA.setFromMatrixPosition(t.matrixWorld),uA.applyMatrix4(pA);const l=uA.z>=-1&&uA.z<=1&&!0===t.layers.test(i.layers),c=t.element;c.style.display=!0===l?"":"none",!0===l&&(t.onBeforeRender(e,n,i),c.style.transform="translate("+-100*t.center.x+"%,"+-100*t.center.y+"%)translate("+(uA.x*r+r)+"px,"+(-uA.y*s+s)+"px)",c.parentNode!==o&&o.appendChild(c),t.onAfterRender(e,n,i));const u={distanceToCameraSquared:h(i,t)};a.objects.set(t,u)}for(let e=0,r=t.children.length;e<r;e++)c(t.children[e],n,i)}else l(t)}function h(t,e){return fA.setFromMatrixPosition(t.matrixWorld),mA.setFromMatrixPosition(e.matrixWorld),fA.distanceToSquared(mA)}o.style.overflow="hidden",this.domElement=o,this.getSize=function(){return{width:n,height:i}},this.render=function(t,e){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),dA.copy(e.matrixWorldInverse),pA.multiplyMatrices(e.projectionMatrix,dA),c(t,t,e),function(t){const e=function(t){const e=[];return t.traverseVisible((function(t){t.isCSS2DObject&&e.push(t)})),e}(t).sort((function(t,e){if(t.renderOrder!==e.renderOrder)return e.renderOrder-t.renderOrder;return a.objects.get(t).distanceToCameraSquared-a.objects.get(e).distanceToCameraSquared})),n=e.length;for(let i=0,r=e.length;i<r;i++)e[i].element.style.zIndex=n-i}(t)},this.setSize=function(t,e){n=t,i=e,r=n/2,s=i/2,o.style.width=t+"px",o.style.height=e+"px"}}}const _A=new Yp;class vA extends Wv{constructor(t){super(t),this.propertyNameMapping={},this.customPropertyMapping={}}load(t,e,n,i){const r=this,s=new qv(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{e(r.parse(n))}catch(s){i&&i(s),r.manager.itemError(t)}}),n,i)}setPropertyNameMapping(t){this.propertyNameMapping=t}setCustomPropertyNameMapping(t){this.customPropertyMapping=t}parse(t){function e(t,e=0){let n="";const i=/^ply([\s\S]*)end_header(\r\n|\r|\n)/.exec(t);null!==i&&(n=i[1]);const r={comments:[],elements:[],headerLength:e,objInfo:""},s=n.split(/\r\n|\r|\n/);let a;function o(t,e){const n={type:t[0]};return"list"===n.type?(n.name=t[3],n.countType=t[1],n.itemType=t[2]):n.name=t[1],n.name in e&&(n.name=e[n.name]),n}for(let l=0;l<s.length;l++){let t=s[l];if(t=t.trim(),""===t)continue;const e=t.split(/\s+/),n=e.shift();switch(t=e.join(" "),n){case"format":r.format=e[0],r.version=e[1];break;case"comment":r.comments.push(t);break;case"element":void 0!==a&&r.elements.push(a),a={},a.name=e[0],a.count=parseInt(e[1]),a.properties=[];break;case"property":a.properties.push(o(e,d.propertyNameMapping));break;case"obj_info":r.objInfo=t}}return void 0!==a&&r.elements.push(a),r}function n(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t);case"float":case"double":case"float32":case"float64":return parseFloat(t)}}function i(t,e){const i={};for(let r=0;r<t.length;r++){if(e.empty())return null;if("list"===t[r].type){const s=[],a=n(e.next(),t[r].countType);for(let i=0;i<a;i++){if(e.empty())return null;s.push(n(e.next(),t[r].itemType))}i[t[r].name]=s}else i[t[r].name]=n(e.next(),t[r].type)}return i}function r(){const t={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(const e of Object.keys(d.customPropertyMapping))t[e]=[];return t}function s(t){const e=t.map((t=>t.name));function n(t){for(let n=0,i=t.length;n<i;n++){const i=t[n];if(e.includes(i))return i}return null}return{attrX:n(["x","px","posx"])||"x",attrY:n(["y","py","posy"])||"y",attrZ:n(["z","pz","posz"])||"z",attrNX:n(["nx","normalx"]),attrNY:n(["ny","normaly"]),attrNZ:n(["nz","normalz"]),attrS:n(["s","u","texture_u","tx"]),attrT:n(["t","v","texture_v","ty"]),attrR:n(["red","diffuse_red","r","diffuse_r"]),attrG:n(["green","diffuse_green","g","diffuse_g"]),attrB:n(["blue","diffuse_blue","b","diffuse_b"])}}function a(t,e){const n=r();let a,c;a=null!==(c=/end_header\s+(\S[\s\S]*\S|\S)\s*$/.exec(t))?c[1].split(/\s+/):[];const h=new yA(a);t:for(let r=0;r<e.elements.length;r++){const t=e.elements[r],a=s(t.properties);for(let e=0;e<t.count;e++){const e=i(t.properties,h);if(!e)break t;l(n,t.name,e,a)}}return o(n)}function o(t){let e=new vf;t.indices.length>0&&e.setIndex(t.indices),e.setAttribute("position",new hf(t.vertices,3)),t.normals.length>0&&e.setAttribute("normal",new hf(t.normals,3)),t.uvs.length>0&&e.setAttribute("uv",new hf(t.uvs,2)),t.colors.length>0&&e.setAttribute("color",new hf(t.colors,3)),(t.faceVertexUvs.length>0||t.faceVertexColors.length>0)&&(e=e.toNonIndexed(),t.faceVertexUvs.length>0&&e.setAttribute("uv",new hf(t.faceVertexUvs,2)),t.faceVertexColors.length>0&&e.setAttribute("color",new hf(t.faceVertexColors,3)));for(const n of Object.keys(d.customPropertyMapping))t[n].length>0&&e.setAttribute(n,new hf(t[n],d.customPropertyMapping[n].length));return e.computeBoundingSphere(),e}function l(t,e,n,i){if("vertex"===e){t.vertices.push(n[i.attrX],n[i.attrY],n[i.attrZ]),null!==i.attrNX&&null!==i.attrNY&&null!==i.attrNZ&&t.normals.push(n[i.attrNX],n[i.attrNY],n[i.attrNZ]),null!==i.attrS&&null!==i.attrT&&t.uvs.push(n[i.attrS],n[i.attrT]),null!==i.attrR&&null!==i.attrG&&null!==i.attrB&&(_A.setRGB(n[i.attrR]/255,n[i.attrG]/255,n[i.attrB]/255,Su),t.colors.push(_A.r,_A.g,_A.b));for(const e of Object.keys(d.customPropertyMapping))for(const i of d.customPropertyMapping[e])t[e].push(n[i])}else if("face"===e){const e=n.vertex_indices||n.vertex_index,r=n.texcoord;3===e.length?(t.indices.push(e[0],e[1],e[2]),r&&6===r.length&&(t.faceVertexUvs.push(r[0],r[1]),t.faceVertexUvs.push(r[2],r[3]),t.faceVertexUvs.push(r[4],r[5]))):4===e.length&&(t.indices.push(e[0],e[1],e[3]),t.indices.push(e[1],e[2],e[3])),null!==i.attrR&&null!==i.attrG&&null!==i.attrB&&(_A.setRGB(n[i.attrR]/255,n[i.attrG]/255,n[i.attrB]/255,Su),t.faceVertexColors.push(_A.r,_A.g,_A.b),t.faceVertexColors.push(_A.r,_A.g,_A.b),t.faceVertexColors.push(_A.r,_A.g,_A.b))}}function c(t,e){const n={};let i=0;for(let r=0;r<e.length;r++){const s=e[r],a=s.valueReader;if("list"===s.type){const e=[],r=s.countReader.read(t+i);i+=s.countReader.size;for(let n=0;n<r;n++)e.push(a.read(t+i)),i+=a.size;n[s.name]=e}else n[s.name]=a.read(t+i),i+=a.size}return[n,i]}function h(t,e,n){function i(t,e,n){switch(e){case"int8":case"char":return{read:e=>t.getInt8(e),size:1};case"uint8":case"uchar":return{read:e=>t.getUint8(e),size:1};case"int16":case"short":return{read:e=>t.getInt16(e,n),size:2};case"uint16":case"ushort":return{read:e=>t.getUint16(e,n),size:2};case"int32":case"int":return{read:e=>t.getInt32(e,n),size:4};case"uint32":case"uint":return{read:e=>t.getUint32(e,n),size:4};case"float32":case"float":return{read:e=>t.getFloat32(e,n),size:4};case"float64":case"double":return{read:e=>t.getFloat64(e,n),size:8}}}for(let r=0,s=t.length;r<s;r++){const s=t[r];"list"===s.type?(s.countReader=i(e,s.countType,n),s.valueReader=i(e,s.itemType,n)):s.valueReader=i(e,s.type,n)}}let u;const d=this;if(t instanceof ArrayBuffer){const n=new Uint8Array(t),{headerText:i,headerLength:d}=function(t){let e=0,n=!0,i="";const r=[],s=(new TextDecoder).decode(t.subarray(0,5)),a=/^ply\r\n/.test(s);do{const s=String.fromCharCode(t[e++]);"\n"!==s&&"\r"!==s?i+=s:("end_header"===i&&(n=!1),""!==i&&(r.push(i),i=""))}while(n&&e<t.length);return!0===a&&e++,{headerText:r.join("\r")+"\r",headerLength:e}}(n),p=e(i,d);if("ascii"===p.format){u=a((new TextDecoder).decode(n),p)}else u=function(t,e){const n=r(),i="binary_little_endian"===e.format,a=new DataView(t,e.headerLength);let u,d=0;for(let r=0;r<e.elements.length;r++){const t=e.elements[r],o=t.properties,p=s(o);h(o,a,i);for(let e=0;e<t.count;e++){u=c(d,o),d+=u[1];const e=u[0];l(n,t.name,e,p)}}return o(n)}(t,p)}else u=a(t,e(t));return u}}class yA{constructor(t){this.arr=t,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}}let xA=0;const bA={simple:{vertexShader:" \n                            precision mediump float;\n                            uniform float pointWidth;\n                            uniform float uSize;\n                            uniform bool uSizeAttenuation;\n                            attribute float alpha;\n                            varying float vAlpha;\n                            attribute vec3 color;\n                            varying vec3 vColor;\n                        \n                            void main() {\n                              vAlpha = alpha;\n                              vColor = color;\n                              vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n                              gl_PointSize = uSize * pointWidth;\n                              if( uSizeAttenuation ) gl_PointSize *= ( 2.0 / - mvPosition.z );\n                              gl_Position = projectionMatrix * mvPosition;\n                            }\n                        ",fragmentShader:"\n                            precision mediump float;\n                            varying float vAlpha;\n                            varying vec3 vColor;                         \n                            void main() {\n                                if (distance(gl_PointCoord, vec2(0.5)) > 0.4) discard;\n                                gl_FragColor = vec4( vColor, vAlpha );\n                            }\n                        "},bruno:{vertexShader:" \n                            precision mediump float;\n                            uniform float pointWidth;\n                            uniform float uSize;\n                            uniform bool uSizeAttenuation;\n                            attribute float alpha;\n                            varying float vAlpha;\n                            attribute vec3 color;\n                            varying vec3 vColor;                            \n                        \n                            void main() {\n                              vAlpha = alpha;\n                              vColor = color;\n                              vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n                              gl_PointSize = uSize * pointWidth;\n                              if( uSizeAttenuation ) gl_PointSize *= ( 2.0 / - mvPosition.z );\n                              gl_Position = projectionMatrix * mvPosition;\n                            }\n                        ",fragmentShader:"\n                            precision mediump float;\n                            varying float vAlpha;\n                            varying vec3 vColor;                         \n                            void main() {\n                                if (distance(gl_PointCoord, vec2(0.5)) > 0.4) discard;\n                                float strength = distance(gl_PointCoord, vec2(0.5));\n                                strength = 3.0 - strength;\n                                vec3 color = mix(vec3(0.0), vColor, strength);\n                                gl_FragColor = vec4(color, vAlpha);\n                            }\n                        "}},MA=t=>{xA++,t.PLYGui=lA("PLY"),t.PLYObi.renderMode=t.datenAsset.ply.renderMode,t.datenAsset.ply.gridPointWidth&&""!==t.datenAsset.ply.gridPointWidth&&(t.gridPointWidth=Number(t.datenAsset.ply.gridPointWidth)),t.datenAsset.grid&&t.datenAsset.grid.gridPointWidth&&""!==t.datenAsset.grid.gridPointWidth&&(t.gridPointWidth=Number(t.datenAsset.ply.gridPointWidth));let e=!1;t.datenAsset.ply.pointWidth&&(t.pointWidth=Number(t.datenAsset.ply.pointWidth)),t.datenAsset.ply.sizeAttenuation&&(e=t.datenAsset.ply.sizeAttenuation);const n="shader"!==t.datenAsset.ply.renderMode?.3:1025;t.isGui&&(t.PLYGui.add(t.PLYObi,"renderMode"),t.PLYGui.add(t.PLYObi,"pointWidth").min(0).max(n).step(1e-4).onChange((()=>{t.pointWidth=t.PLYObi.pointWidth,"shader"!==t.datenAsset.ply.renderMode?t.pointCloud.material.size=t.pointWidth:t.pointMaterial.uniforms.pointWidth.value=t.pointWidth})));(new vA).load(t.datenAsset.ply.url,(n=>{n.computeVertexNormals();if(n.attributes.position.count>0){if("quad"===t.datenAsset.ply.renderMode)t.pointMaterial=new Rg({size:t.pointWidth,vertexColors:!0,sizeAttenuation:e});else if("sprite"===t.datenAsset.ply.renderMode){const n=(new Zv).load("https://interactive.spiegel.de/gra/apps/wissenschaft/2022/panzermuseum/v0/data/dot.png");t.pointMaterial=new Rg({size:t.pointWidth,vertexColors:!0,sizeAttenuation:e,map:n,alphaTest:.5,transparent:!0})}else if("shader"===t.datenAsset.ply.renderMode){const i=n.attributes.position.count,r=new Float32Array(i);for(let t=0;t<i;t++)r[t]=1.3;n.setAttribute("alpha",new of(r,1));const s=t.datenAsset.ply.shader?t.datenAsset.ply.shader:"simple";t.pointMaterial=new Ff({uniforms:{pointWidth:{value:t.pointWidth},uSize:{value:8*t.renderer.getPixelRatio()},uSizeAttenuation:{value:e}},vertexShader:bA[s].vertexShader,fragmentShader:bA[s].fragmentShader,transparent:!0})}t.pointCloud=new Ng(n,t.pointMaterial),t.pointCloud.name="dots",t.pointCloud.rotateX(-Math.PI/2),t.scene.add(t.pointCloud),t.datenAsset.pointWidth=t.pointWidth,t.onRenderDone(t.callback,t)}}),(e=>{t.loadingPercent=e.loaded/e.total,t.setLoadingPercent&&t.setLoadingPercent(t.loadingPercent)}),(e=>{t.loadingPercent=0,t.setLoadingPercent&&t.setLoadingPercent(t.loadingPercent),xA<2&&setTimeout((()=>{MA(t)}),4444)}))},SA=(t,e,n)=>e.split(".").reduce(((t,i,r)=>t[i]=e.split(".").length===++r?n:t[i]||{}),t);let wA=[];const TA=(t,e)=>{let n,i,r;if(e.isGui&&(e.lightGui||(e.lightGui=lA("Lights"))),"DirectionalLight"!==t.type||wA[t.name])if("SpotLight"!==t.type||wA[t.name]){if("PointLight"===t.type&&!wA[t.name]){if(wA[t.name]=!0,t.intensity=t.intensity/111,e.isShadow){t.castShadow=!0;const e=2;t.shadow.mapSize.width=1024*e,t.shadow.mapSize.height=1024*e,t.shadow.bias=1e-5,t.shadow.autoUpdate=!0}if(e.isGui){let n=-1,s=1;if(e.lightGui.add({name:t.name},"name"),e.lightGui.add(t,"intensity").min(0).max(2).step(e.stepSmall),e.lightGui.add(t.position,"x").min(n).max(s).step(e.stepSmall),e.lightGui.add(t.position,"y").min(n).max(s).step(e.stepSmall),e.lightGui.add(t.position,"z").min(n).max(s).step(e.stepSmall),e.isShadow){if(e.datenAsset.shadows&&e.datenAsset.shadows.shadowLights)for(i=e.datenAsset.shadows.shadowLights.length;i--;)if(t.name===e.datenAsset.shadows.shadowLights[i].name)for(r in e.datenAsset.shadows.shadowLights[i])SA(t,r,e.datenAsset.shadows.shadowLights[i][r]);t.shadow.camera.near=.01,t.shadow.camera.far=.2,t.shadow.camera.fov=90,e.shadowCams.push(t.shadow.camera),e.lightGui.add(t.shadow.camera,"near").min(-.1).max(.02).step(e.stepSmall).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"far").min(0).max(1).step(e.stepSmall).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"fov").min(10).max(200).step(e.stepSmall).onChange(e.updateShadows),e.lightGui.add(t.shadow,"bias").min(0).max(1).step(1e-5).onChange(e.updateShadows);const n=new Ax(t.shadow.camera);n.visible=!1,e.lightGui.add(n,"visible"),e.scene.add(n),e.helper.push(n)}}}}else{for(wA[t.name]=!0,t.intensity=t.intensity/111,n=e.datenAsset.lights.length;n--;)e.datenAsset.lights[n].name===t.name&&(t.intensity=e.datenAsset.lights[n].intensity);if(e.isGui&&(e.lightGui.add({name:t.name},"name"),e.lightGui.add(t,"intensity").min(0).max(2).step(e.stepSmall),e.lightGui.add(t.position,"x").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.position,"y").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.position,"z").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.rotation,"x").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.rotation,"y").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.rotation,"z").min(-66).max(66).step(e.stepSmall)),e.isShadow){if(e.datenAsset.shadows&&e.datenAsset.shadows.shadowLights)for(i=e.datenAsset.shadows.shadowLights.length;i--;)if(t.name===e.datenAsset.shadows.shadowLights[i].name)for(r in e.datenAsset.shadows.shadowLights[i])SA(t,r,e.datenAsset.shadows.shadowLights[i][r]);if(e.isGui){e.shadowCams.push(t.shadow.camera),e.lightGui.add(t.shadow.camera,"near").min(0).max(10).step(e.stepSmall).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"far").min(0).max(30).step(e.stepSmall).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"fov").min(10).max(60).step(e.stepSmall).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"radius").min(0).max(60).step(e.stepSmall).onChange(e.updateShadows),e.lightGui.add(t.shadow,"bias").min(0).max(.001).step(1e-5).onChange(e.updateShadows);const n=new Ax(t.shadow.camera);n.visible=!1,e.scene.add(n),e.helper.push(n),e.lightGui.add(n,"visible")}}}else{if(wA[t.name]=!0,t.intensity=t.intensity/2.2,e.isGui&&(e.lightGui.add({name:t.name},"name"),e.lightGui.add(t,"intensity").min(0).max(5).step(e.stepSmall),e.lightGui.add(t.position,"x").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.position,"y").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.position,"z").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.rotation,"x").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.rotation,"y").min(-66).max(66).step(e.stepSmall),e.lightGui.add(t.rotation,"z").min(-66).max(66).step(e.stepSmall)),e.isShadow){for(i=e.datenAsset.shadows.shadowLights.length;i--;)if(t.name===e.datenAsset.shadows.shadowLights[i].name)for(r in e.datenAsset.shadows.shadowLights[i])SA(t,r,e.datenAsset.shadows.shadowLights[i][r]);if(e.isGui){t.shadow.camera.position.x=t.position.x,t.shadow.camera.position.y=t.position.y,t.shadow.camera.position.z=t.position.z,t.shadow.camera.near=-60,t.shadow.camera.far=30,t.shadow.camera.top=11,t.shadow.camera.bottom=-20,t.shadow.camera.left=-15,t.shadow.camera.right=10,e.shadowCams.push(t.shadow.camera),e.lightGui.add(t.shadow.camera,"near").min(-66).max(150).step(e.step).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"far").min(-66).max(150).step(e.step).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"top").min(-100).max(100).step(e.step).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"bottom").min(-100).max(100).step(e.step).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"left").min(-100).max(100).step(e.step).onChange(e.updateShadows),e.lightGui.add(t.shadow.camera,"right").min(-100).max(100).step(e.step).onChange(e.updateShadows),e.lightGui.add(t.shadow,"bias").min(0).max(2).step(e.stepSmall);const n=new Ax(t.shadow.camera);n.visible=!1,e.scene.add(n),e.helper.push(n),e.lightGui.add(n,"visible")}}for(n=e.datenAsset.lights.length;n--;)e.datenAsset.lights[n].name===t.name&&(t.intensity=e.datenAsset.lights[n].intensity)}return e};class AA extends Ff{constructor(t={}){super(),this.vertexShader="\n      #define STANDARD\n      varying vec3 vViewPosition;\n      #ifdef USE_TRANSMISSION\n      varying vec3 vWorldPosition;\n      #endif\n    \n      varying vec2 vUv;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      varying vec3 vPositionW;\n\n      #include <common>\n      #include <uv_pars_vertex>\n      #include <envmap_pars_vertex>\n      #include <color_pars_vertex>\n      #include <fog_pars_vertex>\n      #include <morphtarget_pars_vertex>\n      #include <skinning_pars_vertex>\n      #include <logdepthbuf_pars_vertex>\n      #include <clipping_planes_pars_vertex>\n\n      void main() {\n        \n        #include <uv_vertex>\n        #include <color_vertex>\n        #include <morphcolor_vertex>\n      \n        #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n      \n          #include <beginnormal_vertex>\n          #include <morphnormal_vertex>\n          #include <skinbase_vertex>\n          #include <skinnormal_vertex>\n          #include <defaultnormal_vertex>\n      \n        #endif\n      \n        #include <begin_vertex>\n        #include <morphtarget_vertex>\n        #include <skinning_vertex>\n        #include <project_vertex>\n        #include <logdepthbuf_vertex>\n        #include <clipping_planes_vertex>\n      \n        #include <worldpos_vertex>\n        #include <envmap_vertex>\n        #include <fog_vertex>\n\n        mat4 modelViewProjectionMatrix = projectionMatrix * modelViewMatrix;\n\n        vUv = uv;\n        //vUv = vec2(1.0);\n        vPos = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n        vPositionW = vec3( vec4( transformed, 1.0 ) * modelMatrix);\n        vNormalW = normalize( vec3( vec4( normal, 0.0 ) * modelMatrix ) );\n        \n        gl_Position = modelViewProjectionMatrix * vec4( transformed, 1.0 );\n\n      }",this.fragmentShader=" \n      varying vec2 vUv;\n      varying vec3 vPositionW;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      \n      uniform float time;\n      uniform float fresnelOpacity;\n      uniform float scanlineSize;\n      uniform float fresnelAmount;\n      uniform float signalSpeed;\n      uniform float hologramBrightness;\n      uniform float hologramOpacity;\n      uniform bool blinkFresnelOnly;\n      uniform bool enableBlinking;\n      uniform vec3 hologramColor;\n\n      float flicker( float amt, float time ) {return clamp( fract( cos( time ) * 43758.5453123 ), amt, 1.0 );}\n      float random(in float a, in float b) { return fract((cos(dot(vec2(a,b) ,vec2(12.9898,78.233))) * 43758.5453)); }\n\n      void main() {\n        vec2 vCoords = vPos.xy;\n        vCoords /= vPos.w;\n        vCoords = vCoords * 0.5 + 0.5;\n        vec2 myUV = fract( vCoords );\n\n        // Defines hologram main color\n        vec4 hologramColor = vec4(hologramColor, mix(hologramBrightness, vUv.y, 0.5));\n\n        // Add scanlines\n        float scanlines = 10.;\n        scanlines += 20. * sin(time *signalSpeed * 20.8 - myUV.y * 60. * scanlineSize);\n        scanlines *= smoothstep(1.3 * cos(time *signalSpeed + myUV.y * scanlineSize), 0.78, 0.9);\n        scanlines *= max(0.25, sin(time *signalSpeed) * 1.0);        \n        \n        // Scanlines offsets\n        float r = random(vUv.x, vUv.y);\n        float g = random(vUv.y * 20.2, \tvUv.y * .2);\n        float b = random(vUv.y * .9, \tvUv.y * .2);\n\n        // Scanline composition\n        hologramColor += vec4(r*scanlines, b*scanlines, r, 1.0) / 84.;\n        vec4 scanlineMix = mix(vec4(0.0), hologramColor, hologramColor.a);\n\n        // Calculates fresnel\n        vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n        float fresnelEffect = dot(viewDirectionW, vNormalW) * (1.6 - fresnelOpacity/2.);\n        fresnelEffect = clamp(fresnelAmount - fresnelEffect, 0., fresnelOpacity);\n\n        // Blinkin effect\n        //Suggested by Octano - https://x.com/OtanoDesign?s=20\n        float blinkValue = enableBlinking ? 0.6 - signalSpeed : 1.0;\n        float blink = flicker(blinkValue, time * signalSpeed * .02);\n    \n        // Final shader composition\n        vec3 finalColor;\n\n        if(blinkFresnelOnly){\n          finalColor = scanlineMix.rgb + fresnelEffect * blink;\n        }else{\n          finalColor = scanlineMix.rgb * blink + fresnelEffect;\n        }\n\n        gl_FragColor = vec4( finalColor, hologramOpacity);\n\n      }",this.uniforms={time:new ix(0),fresnelOpacity:new ix(void 0!==t.fresnelOpacity?t.fresnelOpacity:1),fresnelAmount:new ix(void 0!==t.fresnelAmount?t.fresnelAmount:.45),scanlineSize:new ix(void 0!==t.scanlineSize?t.scanlineSize:8),hologramBrightness:new ix(void 0!==t.hologramBrightness?t.hologramBrightness:1),signalSpeed:new ix(void 0!==t.signalSpeed?t.signalSpeed:1),hologramColor:new ix(void 0!==t.hologramColor?new Yp(t.hologramColor):new Yp("#00d5ff")),enableBlinking:new ix(void 0===t.enableBlinking||t.enableBlinking),blinkFresnelOnly:new ix(void 0===t.blinkFresnelOnly||t.blinkFresnelOnly),hologramOpacity:new ix(void 0!==t.hologramOpacity?t.hologramOpacity:1)},this.clock=new Iy,this.setValues(t),this.depthTest=void 0!==t.depthTest&&t.depthTest,this.blending=void 0!==t.blendMode?t.blendMode:2,this.transparent=!0,this.side=void 0!==t.side?t.side:cc}update(){this.uniforms.time.value=this.clock.getElapsedTime()}}const EA=[],CA=[];let RA,PA=!1,IA=0;function LA(){EA.forEach((t=>{t.update()}))}const DA=(t,e,n)=>{const i=CA.find((e=>e.name===t)).material;if("hologramColor"===e){const t={hologramColor:i.uniforms.hologramColor.value.getStyle()};nc.to(t,{hologramColor:n,duration:1,onUpdate:()=>{i.uniforms.hologramColor.value.setStyle(t.hologramColor)}})}else if("hologramOpacity"===e){const t={hologramOpacity:i.uniforms.hologramOpacity.value};nc.to(t,{hologramOpacity:n,duration:1,onUpdate:()=>{i.uniforms[e].value=t.hologramOpacity}})}else i.uniforms[e].value=n;i.needsUpdate=!0},NA=(t,e)=>{let n=e.normal?1:2;e.multiply&&(n=4);const i=new AA({fresnelAmount:e.fresnelAmount,fresnelOpacity:e.fresnelOpacity,hologramBrightness:e.hologramBrightness,scanlineSize:e.scanlineSize,signalSpeed:e.signalSpeed,hologramColor:e.hologramColor,hologramOpacity:e.hologramOpacity,blendMode:n,depthTest:e.depthTest||!1});if(t.material=i,PA&&IA<999){OA||(OA=RA("Hologram")),IA++;const e=OA.addFolder(t.name);e.add(i.uniforms.fresnelOpacity,"value").min(0).max(10).step(.01).name("Fresnel_Opacity"),e.add(i.uniforms.fresnelAmount,"value").min(0).max(2).step(.01).name("Fresnel_Amount"),e.add(i.uniforms.scanlineSize,"value").min(0).max(20).step(.01).name("Scanline Size"),e.add(i.uniforms.hologramBrightness,"value").min(0).max(5).step(.01).name("Brightness"),e.add(i.uniforms.signalSpeed,"value").min(0).max(2).step(.01).name("Signal Speed"),e.add(i.uniforms.enableBlinking,"value").name("Blinking"),e.add(i.uniforms.blinkFresnelOnly,"value").name("Blink Fresnel Only"),e.add(i.uniforms.hologramOpacity,"value").min(0).max(3).step(.01).name("HOpacity"),e.add(i,"opacity").min(0).max(3).step(.01).name("opacity"),e.addColor({HologramColor:i.uniforms.hologramColor.value.getStyle()},"HologramColor").onChange((t=>{i.uniforms.hologramColor.value.setStyle(t),i.needsUpdate=!0})).name("Color")}EA.push(i),CA.push(t)};let OA,UA;let FA={},kA=!1;const BA=(t,e,n)=>{const i=document.createElement("CANVAS");let r,s,a,o;i.width=e,i.height=n;const l=i.getContext("2d");for(l.fillStyle=FA.datenAsset.common.backgroundColor.replace("0x","#"),l.fillRect(0,0,e,n),r=0;r<t;++r)s=1.2*Math.random(),a=Math.floor(Math.random()*e),o=Math.floor(Math.random()*n),l.beginPath(),l.arc(a,o,s,0,2*Math.PI,!1),l.fillStyle="white",l.fill();const c=new yd(i);return c.needsUpdate=!0,c.toneMapped=!1,i.style.display="none",c};let zA,HA=!1;const VA=t=>{kA&&(FA.datenAsset.hdr.enabled||(FA.datenAsset.hdr.url="https://www.spiegel.de/gra/glb/2021/jameswebb/v0/stars250.hdr"),(new cA).load(FA.datenAsset.hdr.url,(e=>{if(FA.datenAsset.hdr.starSkyBox){const t=new Lf(120,120,120),n=new Jp({map:BA(600,3*FA.sizes.width,3*FA.sizes.height),side:hc,toneMapped:!1});FA.datenAsset.common.backgroundColor&&"0x000000"!==FA.datenAsset.common.backgroundColor&&(n.color=new Yp(Number(FA.datenAsset.common.backgroundColor)),n.blending=1);const i=new Pf(t,n);i.toneMapped=!1,FA.scene.add(i),e.dispose(),FA.pmremGenerator&&FA.pmremGenerator.dispose(),FA.showHDR=!1}if(FA.datenAsset.hdr.enabled){if(!FA.isMobile&&FA.datenAsset.hdr.highHDR){const t={generateMipmaps:!0,minFilter:uh,magFilter:ch},n=FA.isLarge?4096:1024;FA.envMap=new Xf(n,t).fromEquirectangularTexture(FA.renderer,e).texture,FA.scene.environment=FA.envMap}else FA.envMap=FA.pmremGenerator.fromEquirectangular(e).texture,e.mapping=th,FA.scene.environment=FA.envMap;e.dispose(),FA.pmremGenerator.dispose()}FA.showHDR&&(FA.scene.background=FA.envMap,FA.hdrBackground?FA.hdrBackground.visible=!0:FA.hdrBackground={visible:!0}),FA.gltfLoader.load(FA.datenAsset.glb,(e=>{if(FA.camera=e.cameras[0],FA.camera||(FA.camera=FA.scene.camera),FA.camera||(FA.camera=new Vf(45,FA.sizes.width/FA.sizes.height,1,1e3),FA.scene.add(FA.camera)),FA.datenAsset.params.holo){HA=!0;const t=function(t){return RA=t.guiAddFolder,PA=t.isGui,{setHologram:NA,onTickBeforeRender:LA}}({scene:FA.scene,renderer:FA.renderer,guiAddFolder:lA,datenAsset:FA.datenAsset,isGui:FA.isGui});t.onTickBeforeRender&&FA.extraBeforeRender.push(t.onTickBeforeRender),zA=t.setHologram}let n;const i=[...e.scene.children];for(const t of i){if(FA.scene.add(t),"Object3D"===t.type&&"hidden"===t.name){t.visible=!1;for(const e of t.children)e.visible=!1,e.name.indexOf("tint")>=0&&FA.tints.push({chapter:e.userData.chapter,target:e.userData.target}),e.material&&FA.materials.push({material:e.material,chapter:e.userData.chapter,target:e.userData.target})}if(FA=TA(t,FA),t&&t.traverse&&t.children.length>0&&t.children.forEach((t=>{FA=TA(t,FA)})),t.traverse((t=>{FA=TA(t,FA)})),FA.isShadow&&FA.datenAsset.shadows.traverse&&(t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0),t.traverse((t=>{t.isMesh&&("background"===t.name?t.receiveShadow=!0:t.castShadow=!0)}))),HA&&t.traverse((t=>{t.isMesh&&FA.datenAsset.hologram.forEach((e=>{if(e.target.indexOf(",")>=0){e.target.split(",").forEach((n=>{n===t.name&&zA(t,e)}))}else e.target===t.name&&zA(t,e)}))})),"parent"===t.name||"Empty"===t.name){const e=[...t.children];FA.parentContainer=t;for(const t of e)if(t.name.indexOf("empty_")>=0){FA.labelGui||(FA.labelGui=lA("Labels"));const e=document.createElement("div");e.className="label";const n=document.createElement("div");n.className="inner",e.appendChild(n);const i=t.name.split("empty_")[1],r=new hA(e);if(n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.className="inner nobg",t.userData.text.indexOf("<br><b>")>=0&&(n.style.flexDirection="column"),FA.isControl&&(e.style.opacity=1),t.userData&&t.userData.text?n.innerHTML=t.userData.text:n.innerHTML=i.charAt(0).toUpperCase()+i.slice(1),t.userData.text.indexOf("{{SVGA:")>=0){alert("har");let e=t.userData.text.split("{{SVGA:"),i=e[1].split("}}")[0];e=t.userData.text.split("{{SVGB:");let r=e[1].split("}}")[0],s=document.createElement("div");s.classList.add("blinkA"),s.style.background="url('"+i+"') no-repeat";let a=document.createElement("div");a.classList.add("blinkB"),a.style.background="url('"+r+"') no-repeat";let o=document.createElement("style");o.innerHTML="@keyframes blink0 {0% {opacity: 0;}50% {opacity: 0;}51% {opacity: 1;}100% {opacity: 1;}}\n  @keyframes blink1 {0% {opacity: 1;}50% {opacity: 1;}51% {opacity: 0;}100% {opacity: 0;}}\n  div.blinkA{ animation: blink0 .4s infinite; }\n  div.blinkB{ animation: blink1 .4s infinite; position: absolute; }\n  div.blinkA,div.blinkB{ width: 400px; height: 200px;",n.innerHTML="",n.appendChild(s),n.appendChild(a),n.appendChild(o)}if(t.add(r),FA.isGui){const e=FA.labelGui.addFolder(t.name);e.add(r.position,"x").min(-33).max(33).step(FA.step),e.add(r.position,"y").min(-33).max(33).step(FA.step),e.add(r.position,"z").min(-33).max(33).step(FA.step)}const s={};s.el=r.element,s.text=e.textContent,t.userData.chapter&&(s.chapter=t.userData.chapter),t.userData.chapter_ende&&(s.chapter_ende=t.userData.chapter_ende),t.userData.time&&(s.time=t.userData.time),FA.markers.push(s),FA.labels.push(r.element)}else if(FA.isShadow&&t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0),FA.datenAsset.materials)for(n=FA.datenAsset.materials.length;n--;)t.name.indexOf(FA.datenAsset.materials[n].target)>=0&&(t.material.color=new Yp(FA.datenAsset.materials[n].color),t.material.emissive=new Yp(FA.datenAsset.materials[n].emissive),t.material.emissiveIntensity=FA.datenAsset.materials[n].emissiveIntensity,t.material.toneMapped=FA.datenAsset.materials[n].toneMapped,t.castShadow=FA.datenAsset.materials[n].castShadow,t.receiveShadow=FA.datenAsset.materials[n].receiveShadow)}else if(FA.datenAsset.common.noToneMap){const e=FA.datenAsset.common.noToneMap.split(",");let n=e.length;for(;n--;)t.name.indexOf(e[n])>=0&&(t.material&&(t.material.toneMapped=!1),t.children&&t.children[0]&&t.children[0].material&&(t.children[0].material.toneMapped=!1))}}if(FA.isGui){const t=lA("Colorize"),e={target:"MIRROR",color:13647122,emissive:13647122,specular:13647122,metalness:1,emissiveMap:FA.envMap,emissiveIntensity:2};t.add(e,"target"),t.addColor(e,"color").onChange((()=>{FA.scene.getObjectByName(e.target,!0).material.color=new Yp(e.color)})),t.addColor(e,"emissive").onChange((()=>{FA.scene.getObjectByName(e.target,!0).material.emissive=new Yp(e.emissive)})),t.add(e,"emissiveIntensity").min(-3).max(23).step(FA.stepSmall).onChange((()=>{FA.scene.getObjectByName(e.target,!0).material.emissiveIntensity=e.emissiveIntensity})),t.add(e,"metalness").min(-3).max(3).step(FA.stepSmall).onChange((()=>{FA.scene.getObjectByName(e.target,!0).material.metalness=e.metalness})),t.addColor(e,"specular").onChange((()=>{FA.scene.getObjectByName(e.target,!0).material.specular=new Yp(e.specular)}))}FA.alwaysRender=!0,FA.labelRenderer=new gA,FA.labelRenderer.setSize(window.innerWidth,window.innerHeight-108),FA.labelRenderer.domElement.style.position="absolute",FA.labelRenderer.domElement.style.top="0px",FA.labelRenderer.domElement.style.pointerEvents="none",FA.canvas.parentNode.appendChild(FA.labelRenderer.domElement),FA.labelRenderer.setSize(FA.sizes.width,FA.sizes.height);const r=new Ax(FA.camera);if(r.visible=!1,FA.scene.add(r),FA.datenAsset.common.fov&&(FA.camera.fov=FA.datenAsset.common.fov),FA.isMobile&&FA.datenAsset.common.fov_mobil&&(FA.camera.fov=FA.datenAsset.common.fov_mobil),FA.searchParams.has("fov")&&(FA.camera.fov=Number(FA.searchParams.get("fov"))),FA.isGui&&(FA.camGui=lA("Camera"),FA.camGui.add(FA.camera.position,"x").min(-15).max(15).step(FA.stepSmall),FA.camGui.add(FA.camera.position,"y").min(-15).max(15).step(FA.stepSmall),FA.camGui.add(FA.camera.position,"z").min(-15).max(15).step(FA.stepSmall),FA.camGui.add(FA.camera,"fov",1,180).listen().onChange(FA.updateCamera),FA.camGui.add(FA.camera,"near",1,180).listen().onChange(FA.updateCamera),FA.camGui.add(FA.camera,"far",1,1080).listen().onChange(FA.updateCamera),FA.camGui.add(FA.camera.rotation,"x").min(-5).max(5).step(FA.stepSmall),FA.camGui.add(FA.camera.rotation,"y").min(-5).max(5).step(FA.stepSmall),FA.camGui.add(FA.camera.rotation,"z").min(-15).max(15).step(FA.stepSmall),FA.camGui.add(r,"visible").name("Camera Helper")),e.animations&&e.animations.length>0){for(FA.ani of(FA.mixer=new nx(FA.scene),FA.anis=[...e.animations],FA.actions=[],FA.aniGui=lA("Animation "),FA.anis))FA.scene.animations.push(FA.ani),FA.action=FA.mixer.clipAction(FA.ani),FA.action.loop=!1,FA.action.paused=!0,FA.action.clampWhenFinished=!0,FA.action.play(),FA.actions.push(FA.action),FA.action._clip.duration>FA.maxAnimationDuration&&(FA.maxAnimationDuration=FA.action._clip.duration);setTimeout((()=>{let t=FA.actions.length;for(;t--;)FA.actions[t].time=0,FA.actions[t].timeScale=1}),33),FA.aniStatus={},FA.aniStatus.time=0,FA.isGui&&(FA.aniGui.name="Animation ("+Math.round(FA.maxAnimationDuration)+"s)",FA.aniGui.add(FA.aniStatus,"time").min(0).max(FA.maxAnimationDuration).step(FA.stepSmall).onChange((()=>{let t=FA.actions.length;for(;t--;)FA.actions[t].paused=!1,FA.actions[t].loop=!1,nc.to(FA.actions[t],{time:FA.aniStatus.time,duration:.6})})))}if(FA.parentContainer&&FA.isGui){const t=lA("Parent");t.add(FA.parentContainer.position,"x").min(-5).max(5).step(FA.stepSmall),t.add(FA.parentContainer.position,"y").min(-5).max(5).step(FA.stepSmall),t.add(FA.parentContainer.position,"z").min(-5).max(5).step(FA.stepSmall),t.add(FA.parentContainer.rotation,"x").min(-5).max(5).step(FA.stepSmall),t.add(FA.parentContainer.rotation,"y").min(-5).max(5).step(FA.stepSmall),t.add(FA.parentContainer.rotation,"z").min(-15).max(15).step(FA.stepSmall)}if(FA.datenAsset.params.video){const t=FA.scene.getObjectByName(FA.datenAsset.params.videoTarget,!0);if(t){let e=(t=>{let e=t.target,n=t.params.videoUrl||"https://interactive.spiegel.de/gra/video/2024/3024_breakdance/stream02_5kf.mp4";return navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t.params.videoUrlWebm&&(n=t.params.videoUrlWebm),UA=document.createElement("video"),UA.muted=!0,UA.playsInline=!0,UA.crossOrigin="anonymous",UA.controls=!0,UA.setAttribute("webkit-playsinline",!0),t.datenAsset.params.videoLoop&&(UA.loop=!0),UA.src=n,UA.play(),t.video=UA,setTimeout((()=>{const n=new Ug(UA);n.colorSpace=Su,n.wrapS=ih,n.wrapT=ih,n.magFilter=ch,n.minFilter=ch,n.encoding=void 0,n.flipY=!1,n.needsUpdate=!0;const i={color:16777215,map:n,transparent:!0,opacity:1,side:2,toneMapped:!1};if(e.material=new Jp(i),e.material.needsUpdate=!0,t.datenAsset.params.videoMultiply?(e.material.blending=4,e.material.depthWrite=!0,e.material.opacity=1,e.visible=!0):(e.material.blending=1,e.material.opacity=1,e.visible=!0),t.isGui){t.meshGui||(t.meshGui=lA("Meshs"));const n=t.meshGui.addFolder(e.name),i=.7;n.add(e.position,"x").min(-i).max(i).step(t.stepSmall),n.add(e.position,"y").min(-i).max(i).step(t.stepSmall),n.add(e.position,"z").min(-i).max(i).step(t.stepSmall),n.add(e.material,"opacity").min(0).max(1).step(t.stepSmall)}}),123),{video:UA,loop:t.datenAsset.params.videoLoop}})({scene:FA.scene,target:t,params:FA.datenAsset.params,isGui:FA.isGui,stepSmall:FA.stepSmall,datenAsset:FA.datenAsset});FA.video=e.video,FA.videoPLANE=t}else Vn.set("!kein Video Target!")}else if(FA.datenAsset.params.imageSequence){const t=FA.scene.getObjectByName(FA.datenAsset.params.videoTarget,!0);let e=(t=>{let e=new Array(t.count);const n=new Zv;for(let r=0;r<e.length;r++){let t=r.toString();t<=9?t="00"+t:t<=99&&(t="0"+t),e[r]=n.load("https://interactive.spiegel.de/gra/video/2024/3024_breakdance/jpg_sequence/v1/stream01_00"+t+".jpg"),e[r].flipY=!1,e[r].wrapS=rh}const i={color:16777215,map:e[0],transparent:!0,opacity:1,side:2};return t.target.material=new Jp(i),{imgs:e}})({target:t,start:"https://interactive.spiegel.de/gra/video/2024/3024_breakdance/jpg_sequence/v1/stream01_00",end:".jpg",count:400});FA.imageSequence=e.imgs,FA.imageSequenceTarget=t}setTimeout((()=>{FA.datenAsset.params.ambientOcclusionOff||(FA.saoPass.params.saoBias=FA.datenAsset.params.saoBias,FA.saoPass.params.saoIntensity=FA.datenAsset.params.saoIntensity,FA.saoPass.params.saoScale=FA.datenAsset.params.saoScale,FA.saoPass.params.saoKernelRadius=FA.datenAsset.params.saoKernelRadius,FA.saoPass.params.saoMinResolution=FA.datenAsset.params.saoMinResolution,FA.saoPass.params.saoBlur=FA.datenAsset.params.saoBlur||!1,FA.saoPass.params.saoBlurRadius=FA.datenAsset.params.saoBlurRadius,FA.saoPass.params.saoBlurStdDev=FA.datenAsset.params.saoBlurStdDev,FA.saoPass.params.saoBlurDepthCutoff=FA.datenAsset.params.saoBlurDepthCutoff,FA.isGui&&(FA.aoGui.add(FA.saoPass.params,"saoBias").min(-1).max(1).step(FA.stepSmall),FA.aoGui.add(FA.saoPass.params,"saoIntensity").min(0).max(1).step(FA.stepSmall),FA.aoGui.add(FA.saoPass.params,"saoScale").min(0).max(10).step(FA.stepSmall),FA.aoGui.add(FA.saoPass.params,"saoKernelRadius").min(1).max(100).step(FA.stepSmall),FA.aoGui.add(FA.saoPass.params,"saoMinResolution").min(0).max(1).step(FA.stepSmall),FA.aoGui.add(FA.saoPass.params,"saoBlur"),FA.aoGui.add(FA.saoPass.params,"saoBlurRadius").min(0).max(200).step(FA.stepSmall),FA.aoGui.add(FA.saoPass.params,"saoBlurStdDev").min(.5).max(150).step(FA.stepSmall),FA.aoGui.add(FA.saoPass.params,"saoBlurDepthCutoff").min(0).max(.1).step(FA.stepSmall))),FA.materials.length>0&&(FA.textureTarget.id=1,FA.textureTarget.el=FA.scene.getObjectByName(FA.textureTarget.name,!0),FA.changeTexture(0,!0)),FA.datenAsset.ply&&FA.datenAsset.ply.enabled?(FA.callback=t,MA(FA)):FA.onRenderDone(t,FA)}),66)}),(t=>{FA.loadingPercent=t.loaded/t.total,FA.loadingUpdate&&FA.loadingUpdate(FA.loadingPercent)}),(t=>{}))})))},GA=new class extends Wv{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new TS(t)})),this.register((function(t){return new AS(t)})),this.register((function(t){return new OS(t)})),this.register((function(t){return new US(t)})),this.register((function(t){return new FS(t)})),this.register((function(t){return new CS(t)})),this.register((function(t){return new RS(t)})),this.register((function(t){return new PS(t)})),this.register((function(t){return new IS(t)})),this.register((function(t){return new wS(t)})),this.register((function(t){return new LS(t)})),this.register((function(t){return new ES(t)})),this.register((function(t){return new NS(t)})),this.register((function(t){return new DS(t)})),this.register((function(t){return new MS(t)})),this.register((function(t){return new kS(t)})),this.register((function(t){return new BS(t)}))}load(t,e,n,i){const r=this;let s;if(""!==this.resourcePath)s=this.resourcePath;else if(""!==this.path){const e=vy.extractUrlBase(t);s=vy.resolveURL(e,this.path)}else s=vy.extractUrlBase(t);this.manager.itemStart(t);const a=function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)},o=new qv(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{r.parse(n,s,(function(n){e(n),r.manager.itemEnd(t)}),a)}catch(i){a(i)}}),n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const s={},a={},o=new TextDecoder;if("string"==typeof t)r=JSON.parse(t);else if(t instanceof ArrayBuffer){if(o.decode(new Uint8Array(t,0,4))===zS){try{s[bS.KHR_BINARY_GLTF]=new GS(t)}catch(c){return void(i&&i(c))}r=JSON.parse(s[bS.KHR_BINARY_GLTF].content)}else r=JSON.parse(o.decode(t))}else r=t;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new mw(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const t=this.pluginCallbacks[h](l);t.name,a[t.name]=t,s[t.name]=!0}if(r.extensionsUsed)for(let h=0;h<r.extensionsUsed.length;++h){const t=r.extensionsUsed[h],e=r.extensionsRequired||[];switch(t){case bS.KHR_MATERIALS_UNLIT:s[t]=new SS;break;case bS.KHR_DRACO_MESH_COMPRESSION:s[t]=new WS(r,this.dracoLoader);break;case bS.KHR_TEXTURE_TRANSFORM:s[t]=new jS;break;case bS.KHR_MESH_QUANTIZATION:s[t]=new XS;break;default:e.indexOf(t)>=0&&a[t]}}l.setExtensions(s),l.setPlugins(a),l.parse(n,i)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,e,i,r)}))}},WA=new class extends Wv{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){const r=new qv(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,(t=>{this.parse(t,e,i)}),n,i)}parse(t,e,n=(()=>{})){this.decodeDracoFile(t,e,null,null,Su,n).catch(n)}decodeDracoFile(t,e,n,i,r=wu,s=(()=>{})){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:r};return this.decodeGeometry(t,a).then(e).catch(s)}decodeGeometry(t,e){const n=JSON.stringify(e);if(_w.has(t)){const e=_w.get(t);if(e.key===n)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,s=t.byteLength,a=this._getWorker(r,s).then((n=>(i=n,new Promise(((n,s)=>{i._callbacks[r]={resolve:n,reject:s},i.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return a.catch((()=>!0)).then((()=>{i&&r&&this._releaseTask(i,r)})),_w.set(t,{key:n,promise:a}),a}_createGeometry(t){const e=new vf;t.index&&e.setIndex(new of(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n],r=i.name,s=i.array,a=i.itemSize,o=new of(s,a);"color"===r&&(this._assignVertexColorSpace(o,i.vertexColorSpace),o.normalized=s instanceof Float32Array==!1),e.setAttribute(r,o)}return e}_assignVertexColorSpace(t,e){if(e!==Su)return;const n=new Yp;for(let i=0,r=t.count;i<r;i++)n.fromBufferAttribute(t,i),hd.toWorkingColorSpace(n,Su),t.setXYZ(i,n.r,n.g,n.b)}_loadLibrary(t,e){const n=new qv(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise(((e,i)=>{n.load(t,e,void 0,i)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const i=vw.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const n=e.data;switch(n.type){case"decode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n)}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}},jA=new window.URLSearchParams(window.location.search),XA={width:Math.min(window.innerWidth,1008),height:window.innerHeight-108},qA=new Iy,YA={x:0,y:0},$A="v37.8 ",ZA={name:"maintarget"},KA=[],JA=[],QA=[],tE=[],eE=1e-4,nE=jA.get("gui"),iE=navigator.userAgent.toLowerCase(),rE={enabled:!0},sE=[],aE=document.createElement("div");Vn.set($A);let oE=!0;Gn.subscribe((t=>{oE=t}));let lE=!1;Wn.subscribe((t=>{lE=t}));let cE,hE,uE,dE,pE,fE,mE,gE,_E,vE,yE,xE,bE,ME,SE,wE,TE,AE,EE,CE,RE,PE,IE,LE,DE,NE,OE,UE,FE,kE,BE=new Jf,zE="continuous",HE=2,VE=2345,GE=[],WE=[],jE=window.innerWidth<700,XE=window.innerWidth>800,qE=[],YE=[],$E=!1,ZE=!0,KE=!1,JE=!1,QE=!1,tC=!1,eC=!1,nC=!1,iC=!1,rC=[],sC=0,aC=!1,oC=!1,lC=.01,cC=!1,hC=.1,uC=!1,dC=!1,pC=!1,fC=!1,mC=!1,gC=10,_C=!0;const vC={pointWidth:gC};let yC,xC;WA.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/"),GA.setDRACOLoader(WA),WA.preload(),document.currentScript&&(wE=JSON.parse(document.currentScript.parentNode.getAttribute("data-params"))),(wE&&wE.force_local||jA.get("debug"))&&(aE.classList.add("vdebug"),aE.textContent=$A),wE&&wE.isControl&&(fC=!0),iE.indexOf("iphone")>=0&&(jE=!0,XE=!1,iC=!0),iE.indexOf("android")>=0&&(jE=!0,XE=!1),nE&&(((t,e)=>nA.add(t,e))(rE,"enabled").name($A+" - Render").listen().onChange((()=>{ZE=rE.enabled})),DE=lA("Light")),location.href.indexOf("http://localhost")>=0&&(eC=!0),(wE&&wE.isPay||jA.get("isPay"))&&(mC=!0);const bC=(t,e,n,i)=>{uE=t,yC=e.assetData.config,mE=yC,xC=n;let r=!1;if(mE.common.logarithmicDepthBuffer&&(r=!0),uE=t,AE=new _S({canvas:uE,alpha:!1,antialias:true,powerPreference:"high-performance",logarithmicDepthBuffer:r}),uE.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(aE),fC){uE.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.style.backgroundColor=mE.common.backgroundColor.replace("0x","#"),uE.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.style.aspectRatio="1/1",uE.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector("svelte-scroller-foreground").remove(),uE.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector("svelte-scroller-background-container").style.pointerEvents="all",uE.style.cursor="pointer",uE.style.touchAction="none",uE.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector("svelte-scroller-background-container").overscrollBehavior="none",setTimeout((()=>{uE.style.touchAction="none"}),3333);let t=uE.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('[slot="background"]');t.style.top=0,t=uE.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode,t.style.marginTop=0,t.style.maxWidth="100%"}nE&&(t=>{const e=document.createElement("div");e.style.position="absolute",e.style.top="-8px",e.style.right="2px",e.style.color="green",e.style.fontSize="10px",e.style.width="max-content",e.style.textAlign="right",e.textContent=t,nA.domElement.appendChild(e),nA.domElement.style.userSelect="none",nA.domElement.style.fontSize="10px"})(mE.title),setTimeout((()=>{aE.textContent=" "}),3333),mE.shadows&&mE.shadows.enabled&&($E=!0),jA.get("no_shadows")&&($E=!1),$E&&(AE.shadowMap.enabled=!0,AE.shadowMap.type=vS[mE.shadows.mode],AE.shadowMap.enabled=!0,AE.shadowMap.type=oc),mE.mode&&(zE=mE.mode),mE.hdr&&mE.hdr.showHDRbackground&&(nC=mE.hdr.showHDRbackground),mE.common.alwaysRender&&(eC=mE.common.alwaysRender),mE.common.delay&&(VE=Number(mE.common.delay)),mE.common.snap_duration&&(HE=Number(mE.common.snap_duration)),jA.has("mode")&&(zE=jA.get("mode")),jA.has("tone")&&(mE.common.toneMapExposure=Number(jA.get("tone"))),AE.depthBuffer=!1,AE.setSize(XA.width,XA.height),mE.common.backgroundColor?BE.background=new Yp(Number(mE.common.backgroundColor)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?BE.background=new Yp(2039324):BE.background=new Yp(16777215),AE.setPixelRatio(Math.min(window.devicePixelRatio,2)),mE.hdr.enabled&&(TE=new ab(AE),TE.compileEquirectangularShader()),nE&&(EE=lA("HDR"),EE.add(AE,"toneMappingExposure").min(0).max(10).step(.005).listen(),CE={visible:!1},EE.add(CE,"visible").name("Background").listen().onChange((()=>{CE.visible?BE.background=dE:BE.background=null})),DE.add({isShadow:$E},"isShadow")),(t=>{FA=t,kA=!0})({datenAsset:mE,sizes:XA,scene:BE,pmremGenerator:TE,envMap:dE,hdrBackground:CE,gltfLoader:GA,camera:hE,tints:YE,materials:qE,lightGui:DE,stepSmall:eE,isGui:nE,isShadow:$E,shadowCams:QA,helper:tE,parentContainer:undefined,labelGui:undefined,step:.005,markers:JA,labels:KA,labelRenderer:fE,canvas:uE,camGui:undefined,mixer:cE,anis:SE,actions:ME,action:undefined,aniGui:undefined,maxAnimationDuration:0,aniStatus:pE,saoPass:undefined,aoGui:undefined,textureTarget:ZA,searchParams:jA,isControl:fC,showHDR:nC,isLarge:XE,ani:undefined,onRenderDone:CC,tick:UC,doResize:NC,changeTexture:JC,updateShadows:MC,updateCamera:OC,pointWidth:gC,pointCloud:NE,PLYObi:vC,pointMaterial:OE,PLYGui:UE,renderer:AE,extraAfterRender:GE,extraBeforeRender:WE,loadingUpdate:xC}),setTimeout((()=>{VA(i)}),3),wE&&wE.mouse&&(oC=!0),wE&&wE.gyro&&(cC=!0),oC&&(!cC&&iC||(nE&&(IE=lA("Mouse / Gyro"),LE={gyro_fak:hC,cursorEffect:lC},IE.add(LE,"gyro_fak").min(0).max(1).step(eE).onChange((()=>{hC=LE.gyro_fak})),IE.add(LE,"cursorEffect").min(0).max(1).step(eE).onChange((()=>{lC=LE.cursorEffect}))),YC(),iC&&ZC()),window.addEventListener("mousemove",qC))},MC=()=>{let t=QA.length;for(;t--;)QA[t].updateProjectionMatrix();for(t=tE.length;t--;)tE[t].update()};let SC;function wC(){let t=SC.attributes.position.array;for(let e=0;e<1e3;e++){let n=.5*Math.random();t[3*e+0]+=.2*(Math.random()-.5),t[3*e+2]+=.2*(Math.random()-.5),t[3*e+1]-=n,t[3*e+1]<-2&&(t[3*e+0]=0,t[3*e+1]=0,t[3*e+2]=0)}SC.attributes.position.needsUpdate=!0}let TC,AC,EC;const CC=(t,e)=>{var n;BE=e.scene,hE=e.camera,TE=e.pmremGenerator,nC=e.showHDR,dE=e.envMap,hE=e.camera,YE=e.tints,qE=e.materials,ME=e.actions,pE=e.aniStatus,cE=e.mixer,SE=e.anis,fE=e.labelRenderer,OE=e.pointMaterial,gC=e.pointWidth,FE=e.gridPointWidth,kE=e.gridPointMaterial,UE=e.PLYGui,BE=e.scene,WE=e.extraBeforeRender,GE=e.extraAfterRender,e.video?e.datenAsset.params.videoLoop||(TC=e.video):e.imageSequence&&(AC=e.imageSequence,EC=e.imageSequenceTarget),(null==(n=mE.params)?void 0:n.particles)&&(()=>{const t=(new Zv).load("https://interactive.spiegel.de/gra/apps/utility/float/v0/smoke1.png");SC=new vf;let e=new Float32Array(3e3);for(let r=0;r<100;r++){let t=0,n=0,i=0;e[3*r+0]=t,e[3*r+1]=n,e[3*r+2]=i}SC.setAttribute("position",new of(e,3));let n=new Rg({color:14384922,map:t,size:.13,blending:2}),i=new Ng(SC,n);BE.add(i),GE.push(wC)})(),e.composer&&(RE=e.composer),(mE.ply&&mE.ply.grid||mE.grid&&mE.grid.enabled)&&(drawGrid({datenAsset:mE,gridPointWidth:FE,gridPointMaterial:kE,pointMaterial:OE,pointWidth:gC,isGui:nE,scene:BE,PLYGui:UE}),FE=e.gridPointWidth,kE=e.gridPointMaterial,OE=e.pointMaterial,gC=e.pointWidth,UE=e.PLYGui,BE=e.scene,"shader"!==mE.ply.renderMode?NE.material.size=gC:OE.uniforms.pointWidth.value=gC),NC(),AE.setAnimationLoop(UC),setTimeout((()=>{if(zC({progress:0},!0),nc.set(uE,{opacity:0}),uE.style.display="block",nc.to(uE,{opacity:1,duration:.42,ease:"none"}),t){if(pC=!0,t(),fC){const t=document.createElement("div");t.style.position="absolute",t.style.top="12px",t.style.width="100%",t.style.textAlign="center",t.style.pointerEvents="none";const e=document.createElement("div");e.textContent="Tippen oder klicken Sie, um die Szene zu bewegen.",e.style.color="#FFFFFF",e.style.textShadow="0px 4px 4px rgba(0, 0, 0, 0.25)",e.style.fontSize="16px",e.style.padding="0.2rem 0.3rem",e.style.borderRadius="3px",e.style.maxWidth="60%",e.style.width="fit-content",e.style.margin="0 auto",e.style.background="#1F1E1Ca6",t.append(e),uE.parentNode.append(t);new IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio<=.2?jC():GC()}))}),{threshold:[0,.1,.2,.3]}).observe(uE);const n=()=>{PE.autoRotate=!1,t&&t.remove(),GC()};uE.addEventListener("touchstart",n),uE.addEventListener("mousedown",n),PE=new Uw(hE,AE.domElement),mE.control&&(mE.control.autoRotate&&(PE.autoRotate=mE.control.autoRotate),mE.control.autoRotateSpeed&&(PE.autoRotateSpeed=mE.control.autoRotateSpeed),mE.control.maxDistance&&(PE.maxDistance=mE.control.maxDistance),mE.control.minDistance&&(PE.minDistance=mE.control.minDistance),mE.control.maxPolarAngle&&(PE.maxPolarAngle=mE.control.maxPolarAngle),mE.control.cameraXYZ&&(hE.position.x=Number(mE.control.cameraXYZ.split(",")[0]),hE.position.y=Number(mE.control.cameraXYZ.split(",")[1]),hE.position.z=Number(mE.control.cameraXYZ.split(",")[2])))}e.composer&&(RE=e.composer),RC&&LC(),setTimeout((()=>{RC&&LC()}),333),setTimeout((()=>{eC||(aC=!1),RC&&LC()}),666)}lE&&setTimeout((()=>{lE=!1}),2222)}),66)};let RC=!1;(wE&&wE.introLoop||jA.get("introLoop"))&&(RC=!0);let PC={direction:!0,isIntroLoop:RC},IC=!1;const LC=()=>{if(!IC&&(IC=!0,RC&&(PC.isIntroLoop=!0),nE)){let t=lA("Intro");t.add(Fi,"isPlusSubscriber").name("S+").listen(),t.add({isPay:mC},"isPay"),t.add(PC,"isIntroLoop").name("isIntroLoop").listen(),t.add(PC,"direction").name("direction").listen()}let t,e=ME.length;for(t=PC.direction?5:0,PC.direction=!PC.direction;e--;)nc.killTweensOf(ME[e]),0===e?nc.to(ME[e],{time:t,duration:3,onComplete:()=>{LC()}}):nc.to(ME[e],{time:t,duration:3})},DC=t=>{hE.fovAim!==t&&(hE.fovAim=t,VC(999),nc.killTweensOf(hE),nc.to(hE,{fov:t,duration:.8,onUpdate:OC}))},NC=()=>{clearTimeout(yE),uE&&uE.parentNode&&(XA.width=uE.parentNode.getBoundingClientRect().width,XA.height=uE.parentNode.getBoundingClientRect().height);let t=!1;hE&&(hE.aspect=XA.width/XA.height,hE.updateProjectionMatrix()),AE&&(AE.setSize(XA.width,XA.height),AE.setPixelRatio(Math.min(window.devicePixelRatio,2))),RE&&RE.setSize(XA.width,XA.height),fE&&fE.setSize(XA.width,XA.height),jE=window.innerWidth<700,hE&&(jE&&mE.common.fovMobil&&hE.fov!==mE.common.fovMobil&&(t=!0,DC(mE.common.fovMobil)),!jE&&hE&&hE.fov!==mE.common.fov&&(t=!0,DC(mE.common.fov)),t||VC(333));let e=sE.length;for(;e--;)sE[e]()};window.addEventListener("resize",(()=>{clearTimeout(yE),yE=setTimeout(NC,77)}));const OC=()=>{hE.updateProjectionMatrix()},UC=()=>{if(oE&&!lE&&(ZE||aC||eC)&&hE){let t=WE.length;for(;t--;)WE[t]();oC&&(hE.position.x+=(YA.x-hE.position.x)*lC,hE.position.z+=(-YA.y-hE.position.z)*lC);const e=qA.getElapsedTime(),n=e-sC;for(sC=e,cE&&cE.update(n),hE&&AE.render(BE,hE),RE&&RE.render(.1),fE&&fE.render(BE,hE),PE&&PE.update(),t=GE.length;t--;)GE[t]()}},FC=t=>{if(!oE)return;if(lE)return;let e;if(t.opacityTarget.indexOf(",")>=0)e=t.opacityTarget.split(","),e.forEach((e=>{FC({opacity:t.opacity,opacityTarget:e,opacityDuration:t.opacityDuration})}));else{const e=BE.getObjectByName(t.opacityTarget,!0);e&&(nc.killTweensOf(e.material),e.material.needsUpdate=!0,e.material.transparent=!0,t.opacity>0&&(e.visible=!0),nc.to(e.material,{duration:t.opacityDuration||1,opacity:t.opacity,onComplete:()=>{0===t.opacity&&(e.visible=!1)}}))}},kC=t=>{if(!oE)return;if(lE)return;let e;if(t.opacityTarget2.indexOf(",")>=0)e=t.opacityTarget2.split(","),e.forEach((e=>{kC({opacity2:t.opacity2,opacityTarget2:e,opacityDuration2:t.opacityDuration2})}));else{const e=BE.getObjectByName(t.opacityTarget2,!0);e&&(nc.killTweensOf(e.material),e.material.needsUpdate=!0,e.material.transparent=!0,t.opacity2>0&&(e.visible=!0),nc.to(e.material,{duration:t.opacityDuration2||1,opacity:t.opacity2,onComplete:()=>{0===t.opacity2&&(e.visible=!1)}}))}},BC=t=>{pC&&mE.chapter[t].actions&&(mE.chapter[t].actions.pointWidth&&(t=>{if(gC!==t){if(!mE.ply||!mE.ply.renderMode)return;if(VC(1.2),"shader"!==mE.ply.renderMode)nc.killTweensOf(vC),nc.to(vC,{pointWidth:t,duration:1,onUpdate:()=>{gC=vC.pointWidth}});else{if(!OE)return;nc.killTweensOf(OE.uniforms.pointWidth),nc.to(OE.uniforms.pointWidth,{value:t,duration:1,onUpdate:()=>{gC=OE.uniforms.pointWidth.value}})}}})(mE.chapter[t].actions.pointWidth),mE.chapter[t].actions.fov&&DC(mE.chapter[t].actions.fov),mE.chapter[t].actions.holo&&(t=>{let e;VC(1.2),t.hologramColor&&(t.target.indexOf(",")>=0?(e=t.target.split(","),e.forEach((e=>{DA(e,"hologramColor",t.hologramColor)}))):DA(t.target,"hologramColor",t.hologramColor)),t.hologramOpacity&&(t.target.indexOf(",")>=0?(e=t.target.split(","),e.forEach((e=>{DA(e,"hologramOpacity",t.hologramOpacity)}))):DA(t.target,"hologramOpacity",t.hologramOpacity)),t.hologramOpacity2&&(t.target2.indexOf(",")>=0?(e=t.target2.split(","),e.forEach((e=>{DA(e,"hologramOpacity",t.hologramOpacity2)}))):DA(t.target2,"hologramOpacity",t.hologramOpacity2))})(mE.chapter[t].actions),mE.chapter[t].actions.opacityTarget&&FC(mE.chapter[t].actions),mE.chapter[t].actions.opacityTarget2&&kC(mE.chapter[t].actions),mE.chapter[t].actions.label&&setTimeout((()=>{let e=JA.length;for(;e--;)JA[e].text===mE.chapter[t].actions.label.text&&(nc.killTweensOf(JA[e].el.querySelector(".inner")),nc.to(JA[e].el.querySelector(".inner"),mE.chapter[t].actions.label.ani))}),666))},zC=(t,e)=>{if(PC&&(PC.isIntroLoop=!1),mC&&!Fi.isPlusSubscriber)return;if(!(e||ME&&"continuous"===zE))return;if(!ME||fC&&!_C)return;if(fC&&_C){let t=ME.length;for(;t--;)nc.set(ME[t],{time:0}),ME[t].stop();return void(_C=!1)}GC(),KE=!0;let n=ME.length;const i=mE.scaleProgress(t.$progress),r=e?0:.6;for(;n--;)nc.killTweensOf(ME[n]),0===n?nc.to(ME[n],{time:i,duration:r,onComplete:()=>{WC(!0)}}):nc.to(ME[n],{time:i,duration:r});if(TC){if(TC.duration&&t.$progress){let e=mE.scaleVideo?mE.scaleVideo(t.$progress):i;nc.killTweensOf(TC),nc.to(TC,{currentTime:e,duration:r})}}else if(AC){let e=Math.floor(t.$progress*AC.length);AC[e]&&(EC.material.map=AC[e])}},HC=()=>{clearTimeout(xE),aC=!1},VC=t=>{clearTimeout(xE),aC=!0,setTimeout(HC,t)},GC=()=>{rE.enabled=!0,ZE=!0,QE=!1,tC=!1,clearTimeout(vE)},WC=(t,e)=>{if(clearTimeout(vE),eC)return;t&&(QE=!0),e&&(tC=!0);vE=!JE||JE&&tC||(!KE||KE&&QE)?setTimeout(jC,VE):setTimeout((()=>{WC(t,e)}),77)},jC=()=>{clearTimeout(vE),rE.enabled=!1,ZE=!1,QE&&(QE=!1,KE=!1),tC&&(tC=!1,JE=!1)},XC=t=>{!dC&&t.accelerationIncludingGravity&&t.accelerationIncludingGravity.x&&t.accelerationIncludingGravity.x>=0&&(dC=!0,window.removeEventListener("mousemove",qC)),GC(),clearTimeout(bE),bE=setTimeout(WC,333),YA.x=t.accelerationIncludingGravity.x*hC,YA.y=t.accelerationIncludingGravity.y*hC},qC=t=>{YA.x=t.clientX/XA.width-.5,YA.y=t.clientY/XA.height-.5,GC(),clearTimeout(bE),bE=setTimeout(WC,333)},YC=()=>{uC||("function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((t=>{"granted"===t&&(uC=!0,window.addEventListener("devicemotion",XC,!1))})).catch(console.error):(uC=!0,window.addEventListener("devicemotion",XC,!1)))},$C=()=>{document.documentElement.removeEventListener("click",$C),YC()},ZC=()=>{document.documentElement.addEventListener("click",$C)},KC=(t,e,n)=>{if(JE)return!0;if(!e||!ZA.el)return;if(!n&&e.material.name===ZA.el.material.name)return;JE=!0,(e=e.material).opacity=0,e.transparent=!0;const i=new Pf(t.geometry,e),r=ZA.el,s=r.name,a=r.parent,o=n?0:.6;ZE||GC(),i.position.copy(ZA.el.position),i.rotation.copy(ZA.el.rotation),a.add(i),ZA.el=i,r.material.transparent=!0,nc.killTweensOf(r.material),nc.to(r.material,{opacity:.5,duration:o,delay:o,ease:"none",onComplete:()=>{a.remove(r),BE.remove(r),i.name=s,r.visible=!1,JE=!1,n||WC(null,!0)}}),nc.killTweensOf(i.material),nc.to(i.material,{opacity:1,duration:o,ease:"none"})},JC=(t,e)=>{clearTimeout(_E);let n,i,r,s,a=qE.length;for(;a--;)if(s=qE[a].chapter,"number"==typeof s&&(qE[a].chapter=[qE[a].chapter],s=qE[a].chapter),s)for(n=s.length;n--;)if(s[n]===t){if(i=BE.getObjectByName(qE[a].target,!0),!i)return void(_E=setTimeout((()=>{JC(t,e)}),33));if(r=KC(i,qE[a],e),r)return void(_E=setTimeout((()=>{JC(t,e)}),33))}},QC=t=>{const e=mE.tint&&mE.tint.speed?mE.tint.speed:1;rC.push(t),t.material.oldEmissiveIntensity=t.material.emissiveIntensity,t.material.oldColor={r:t.material.color.r,g:t.material.color.g,b:t.material.color.b},t.material.oldEmissive={r:t.material.emissive.r,g:t.material.emissive.g,b:t.material.emissive.b},t.material.needsUpdate=!0,nc.killTweensOf(t.material),nc.to(t.material,{emissiveIntensity:mE.tint.emissiveIntensityTo,duration:e,delay:0}),nc.killTweensOf(t.material.color),nc.to(t.material.color,{r:mE.tint.colorTo[0],g:mE.tint.colorTo[1],b:mE.tint.colorTo[2],duration:e,delay:0}),nc.killTweensOf(t.material.emissive),nc.to(t.material.emissive,{r:mE.tint.emissiveTo[0],g:mE.tint.emissiveTo[1],b:mE.tint.emissiveTo[2],duration:e,delay:0})},tR=t=>{const e=mE.tint.speed;nc.killTweensOf(t.material),nc.to(t.material,{emissiveIntensity:t.material.oldEmissiveIntensity,duration:e}),nc.killTweensOf(t.material.color),nc.to(t.material.color,{r:t.material.oldColor.r,g:t.material.oldColor.g,b:t.material.oldColor.b,duration:e}),nc.killTweensOf(t.material.emissive),nc.to(t.material.emissive,{r:t.material.oldEmissive.r,g:t.material.oldEmissive.g,b:t.material.oldEmissive.b,duration:e,onComplete:()=>{t.material.needsUpdate=!1}})},eR=t=>{let e,n,i,r=rC.length;for(;r--;)tR(rC[r]);for(rC=[],r=YE.length;r--;)if(i=YE[r].chapter,"number"==typeof i&&(YE[r].chapter=[YE[r].chapter],i=YE[r].chapter),i)for(e=i.length;e--;)i[e]===t&&(n=BE.getObjectByName(YE[r].target,!0),n&&QC(n))},nR=t=>{let e,n,i;if(KA&&KA.length>0){const r=[];let s;for(e=JA.length;e--;)if(i=JA[e].chapter,"number"==typeof i&&(JA[e].chapter=[JA[e].chapter],i=JA[e].chapter),i)for(n=i.length;n--;)i[n]===t&&r.push(JA[e].el);for(e=JA.length;e--;){for(n=r.length,s=!0;n--;)r[n]===JA[e].el&&(s=!1);nc.killTweensOf(JA[e].el),s?nc.to(JA[e].el,{opacity:0,duration:.6,ease:"none",onComplete(){this._targets[0].classList.add("hidden")}}):(JA[e].el.classList.remove("hidden"),nc.to(JA[e].el,{opacity:1,duration:.6,delay:.6,ease:"none"}))}}};function iR(t){let e;return{c(){e=z("div"),e.innerHTML='<svg id="Ebene_1" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 244.1 121.3" class="svelte-1g58oa3"><defs><style>.st0 {\n\t\t\t\t\t\t\tfill: #fff;\n\t\t\t\t\t\t}\n\t\t\t\t\t</style></defs><path class="st0" d="M60.6,119.3c-32.4,0-58.6-26.3-58.6-58.7S28.3,2,60.7,2c26.1,0,49.1,17.3,56.3,42.4.1,1.2-.7,2.2-1.8,2.4-.9.1-1.8-.4-2.2-1.2C104.7,16.7,74.5,0,45.6,8.3,16.7,16.7,0,46.9,8.4,75.7c8.3,28.9,38.5,45.5,67.4,37.2,18.2-5.2,32.3-19.5,37.3-37.7.4-1.1,1.6-1.7,2.7-1.3,1,.3,1.6,1.4,1.4,2.4-7.1,25.4-30.2,42.9-56.6,42.9Z"></path><path class="st0" d="M42.8,42.8h.2c3.3,0,6,2.7,6,6h.1c2.7-3.9,7.3-6.2,12.1-6.1,11.5,0,17.6,9.2,17.6,18.3s-6.4,17.4-17.1,17.4-10.7-3.6-11.9-5.8h-.1v17.6c-3.7,0-6.7-3-6.7-6.7h0v-40.7h0ZM60.7,48.5c-6.7,0-11.3,5.8-11.3,12s5.1,12.1,11.5,12.1c6.4,0,11.5-5.2,11.5-11.6,0-.1,0-.2,0-.3,0-6.1-4.7-12.1-11.6-12.1Z"></path><path class="st0" d="M91.5,77.5h-6.4v-45.3h6.4v45.3Z"></path><path class="st0" d="M127.6,77.5v-5.3h-.1c-2.4,4.2-6.9,6.1-11.5,6.1-11.4,0-18-8.8-18-17.7s5.8-18,18-18,9.1,2,11.5,5.7h.1v-4.8h6.4v33.9s-6.4,0-6.4,0ZM115.9,48.5c-7.8,0-11.6,6.8-11.6,12.1s4.8,11.9,11.6,11.9c6.5,0,11.8-5.3,11.8-11.9,0,0,0,0,0,0,0-7.2-5.2-12.1-11.8-12.1h0Z"></path><path class="st0" d="M165.8,77.5v-18.4c0-2.6,0-10.6-8.4-10.6s-8.9,3.7-8.9,10.5v18.5h-6.4v-33.9h5.9v3.6h.1c2.4-3,6.1-4.7,9.9-4.5,5.3,0,9.6,2.3,12,6.1,1.5,2.6,2.2,5.7,2.1,8.7v20.1h-6.3Z"></path><path class="st0" d="M227.2,77.5h0c-3.5,0-6.4-2.8-6.4-6.4h0v-21.7h-4.6v-5.8h4.6v-11.4h0c3.5,0,6.4,2.8,6.4,6.4h0v5h5.6v5.8h-5.6v28.1Z"></path><path class="st0" d="M213.2,60c-.1-9.6-8-17.2-17.5-17.1-9.6.1-17.2,8-17.1,17.5,0,.6,0,1.2,0,1.7h0c1.1,9.3,9,16.2,18.3,16.1,5.7,0,11.2-2.6,14.8-7.1l-5-2.9c-2.5,2.8-6.1,4.3-9.8,4.3-5.2,0-10.7-3.2-12-9.3h28c.1-.4.2-2.2.2-3.3ZM185,58.4c.5-6.1,5.9-10.5,11.9-10,5.3.5,9.5,4.7,10,10h-21.9Z"></path><path class="st0" d="M242.1,74.2c0,1.9-1.5,3.5-3.3,3.5-1.9,0-3.5-1.5-3.5-3.3,0-1.9,1.5-3.5,3.3-3.5,0,0,0,0,0,0,1.9,0,3.4,1.5,3.4,3.3,0,0,0,0,0,0"></path></svg>',j(e,"class","planet_labs_logo svelte-1g58oa3"),$(e,"footer",t[5])},m(t,n){k(t,e,n)},p(t,n){32&n&&$(e,"footer",t[5])},d(t){t&&B(e)}}}function rR(t){let e,n,i,r;return n=new _r({props:{}}),t[17](n),{c(){e=z("div"),Ct(n.$$.fragment),j(e,"class","loader svelte-1g58oa3")},m(t,i){k(t,e,i),Rt(n,e,null),r=!0},p(e,i){t=e;n.$set({})},i(t){r||(Mt(n.$$.fragment,t),i&&i.end(1),r=!0)},o(s){St(n.$$.fragment,s),s&&(i=Tt(e,fr,{duration:777,delay:t[11]})),r=!1},d(r){r&&B(e),t[17](null),Pt(n),r&&i&&i.end()}}}function sR(t){let e,n,i,r,s,a,o,l,c,h,u,d=t[9].planetLabsLogo&&t[7]&&iR(t),p=!t[0]&&rR(t);return{c(){e=z("div"),n=z("div"),i=G(),r=z("canvas"),s=G(),d&&d.c(),a=G(),o=z("div"),c=G(),p&&p.c(),h=W(),j(n,"class","headline nobg svelte-1g58oa3"),$(n,"left",t[4]),j(r,"class","svelte-1g58oa3"),j(o,"class","footer nobg svelte-1g58oa3"),$(o,"left",t[6]),j(e,"class","visu svelte-1g58oa3"),j(e,"style",l="--height: "+t[10]+"px; "+t[8]),$(e,"isReady",t[0])},m(l,f){k(l,e,f),O(e,n),n.innerHTML=t[3],O(e,i),O(e,r),t[16](r),O(e,s),d&&d.m(e,null),O(e,a),O(e,o),o.innerHTML=t[5],k(l,c,f),p&&p.m(l,f),k(l,h,f),u=!0},p(t,[i]){(!u||8&i)&&(n.innerHTML=t[3]),(!u||16&i)&&$(n,"left",t[4]),t[9].planetLabsLogo&&t[7]?d?d.p(t,i):(d=iR(t),d.c(),d.m(e,a)):d&&(d.d(1),d=null),(!u||32&i)&&(o.innerHTML=t[5]),(!u||64&i)&&$(o,"left",t[6]),(!u||1280&i&&l!==(l="--height: "+t[10]+"px; "+t[8]))&&j(e,"style",l),(!u||1&i)&&$(e,"isReady",t[0]),t[0]?p&&(xt(),St(p,1,1,(()=>{p=null})),bt()):p?(p.p(t,i),1&i&&Mt(p,1)):(p=rR(t),p.c(),Mt(p,1),p.m(h.parentNode,h))},i(t){u||(Mt(p),u=!0)},o(t){St(p),u=!1},d(n){n&&(B(e),B(c),B(h)),t[16](null),d&&d.d(),p&&p.d(n)}}}function aR(t,e,n){let i,r,s,a,o,l,c,h;b(t,Zt,(t=>n(9,i=t))),b(t,In,(t=>n(12,r=t))),b(t,Fn,(t=>n(13,s=t))),b(t,Dn,(t=>n(14,a=t))),b(t,Nn,(t=>n(15,o=t))),b(t,Ci,(t=>n(18,l=t))),b(t,Wt,(t=>n(10,c=t)));let u,d,p,f=!1,m=!1,g=!1,_=!1;const v=()=>{C(Ci,l=n(0,f=!0),l)};it((()=>{bC(h,r,u.setLoadingPercent,v)}));let y="",x=i.slowStart?2e3:500;return t.$$.update=()=>{var e,i,l,c,h,u,v,x,b,M,S,w,T,A,E;if(49153&t.$$.dirty&&f&&zC({$index:a,$progress:o}),28673&t.$$.dirty&&(f&&(t=>{let e,n;if(PC&&(PC.isIntroLoop=!1),t!==gE&&(e=gE,gE=t,JC(t),nR(t),eR(t),BC(t),"snap"===zE&&(GC(),KE=!0,ME&&ME.length))){n=Math.abs(mE.times[e]-mE.times[t]);let i=ME.length;for(;i--;)nc.killTweensOf(ME[i]),0===i?nc.to(ME[i],{time:mE.times[t],duration:n,ease:"power1.inOut",onComplete:()=>{WC(!0)}}):nc.to(ME[i],{time:mE.times[t],duration:HE,ease:"power1.inOut"})}})(a),n(3,d=a>0&&(null==(l=null==(i=null==(e=null==r?void 0:r.assetData)?void 0:e.config.chapter[s])?void 0:i.actions)?void 0:l.headline)||""),n(4,m=(null==(u=null==(h=null==(c=null==r?void 0:r.assetData)?void 0:c.config.chapter[s])?void 0:h.actions)?void 0:u.headlineLeft)||!1),n(5,p=a>0&&(null==(b=null==(x=null==(v=null==r?void 0:r.assetData)?void 0:v.config.chapter[s])?void 0:x.actions)?void 0:b.footer)||""),n(6,g=(null==(w=null==(S=null==(M=null==r?void 0:r.assetData)?void 0:M.config.chapter[s])?void 0:S.actions)?void 0:w.footerLeft)||!1),n(7,_=(null==(E=null==(A=null==(T=null==r?void 0:r.assetData)?void 0:T.config.chapter[s])?void 0:A.actions)?void 0:E.showLogo)||!1)),4352&t.$$.dirty&&(null==r?void 0:r.assetData.config.params)){let t=JSON.parse(null==r?void 0:r.assetData.config.params);t["headline-border-color"]&&(n(8,y+="--headline-border-color: "+t["headline-border-color"]+";"),n(8,y+="--headline-font-color: "+t["headline-font-color"]+";"),n(8,y+="--headline-border-color-dark: "+t["headline-border-color-dark"]+";"),n(8,y+="--headline-font-color-dark: "+t["headline-font-color-dark"]+";"),n(8,y+="--ice-legend-gradient-left: "+t["ice-legend-gradient-left"]+";"),n(8,y+="--ice-legend-gradient-center: "+t["ice-legend-gradient-center"]+";"),n(8,y+="--ice-legend-gradient-right: "+t["ice-legend-gradient-right"]+";"),n(8,y+="--threejs-tool-label-color: "+t["label-color"]+";"),n(8,y+="--threejs-tool-label-color-dark: "+t["label-color-dark"]+";"),n(8,y+="--threejs-tool-shadow-color: "+t["label-shadow-color"]+";"),n(8,y+="--threejs-tool-shadow-color-dark: "+t["label-shadow-color-dark"]+";"))}},[f,h,u,d,m,p,g,_,y,i,c,x,r,s,a,o,function(t){st[t?"unshift":"push"]((()=>{h=t,n(1,h)}))},function(t){st[t?"unshift":"push"]((()=>{u=t,n(2,u)}))}]}class oR extends Dt{constructor(t){super(),Lt(this,t,aR,sR,_,{})}}const lR=t=>({}),cR=t=>({}),hR=t=>({}),uR=t=>({});function dR(t){let e,n,i,r,s,a,o=`translate(0, ${t[3]}px)`;const l=t[15].background,c=M(l,t,t[14],uR),h=t[15].foreground,u=M(h,t,t[14],cR);return{c(){e=z("svelte-scroller-outer"),n=z("svelte-scroller-background-container"),i=z("svelte-scroller-background"),c&&c.c(),r=G(),s=z("svelte-scroller-foreground"),u&&u.c(),X(i,"class","svelte-xdbafy"),X(n,"class","background-container svelte-xdbafy"),Y(n,"width",t[4]+"px"),Y(n,"position",t[2]?"fixed":"absolute"),Y(n,"top",0),Y(n,"transform",o),X(s,"class","svelte-xdbafy"),X(e,"class","svelte-xdbafy")},m(o,l){k(o,e,l),O(e,n),O(n,i),c&&c.m(i,null),O(e,r),O(e,s),u&&u.m(s,null),t[16](s),t[17](e),a=!0},p(t,[e]){c&&c.p&&(!a||16384&e)&&T(c,l,t,t[14],a?w(l,t[14],e,hR):A(t[14]),uR),16&e&&Y(n,"width",t[4]+"px"),4&e&&Y(n,"position",t[2]?"fixed":"absolute"),8&e&&o!==(o=`translate(0, ${t[3]}px)`)&&Y(n,"transform",o),u&&u.p&&(!a||16384&e)&&T(u,h,t,t[14],a?w(h,t[14],e,lR):A(t[14]),cR)},i(t){a||(Mt(c,t),Mt(u,t),a=!0)},o(t){St(c,t),St(u,t),a=!1},d(n){n&&B(e),c&&c.d(n),u&&u.d(n),t[16](null),t[17](null)}}}const pR=[];let fR;if("undefined"!=typeof window){const t=()=>pR.forEach((t=>t()));window.addEventListener("scroll",t),window.addEventListener("resize",t)}if("undefined"!=typeof IntersectionObserver){const t=new Map,e=new IntersectionObserver((e=>{e.forEach((e=>{const n=t.get(e.target),i=pR.indexOf(n);e.isIntersecting?-1===i&&pR.push(n):(n(),-1!==i&&pR.splice(i,1))}))}),{rootMargin:"333px 0px 0px 0px"});fR={add:({outer:n,update:i})=>{const{top:r,bottom:s}=n.getBoundingClientRect();r<window.innerHeight&&s>0&&pR.push(i),t.set(n,i),e.observe(n)},remove:({outer:n,update:i})=>{const r=pR.indexOf(i);-1!==r&&pR.splice(r,1),t.delete(n),e.unobserve(n)}}}else fR={add:({update:t})=>{pR.push(t)},remove:({update:t})=>{const e=pR.indexOf(t);-1!==e&&pR.splice(e,1)}};function mR(t,e,n){let i,r,s,a,o,l,{$$slots:c={},$$scope:h}=e,{threshold:u=.5}=e,{query:d="section"}=e,{contentHeight:p=0}=e,{absoluteHeight:f=0}=e,{top_px:m=0}=e,{index:g=0}=e,{count:_=0}=e,{offset:v=0}=e,{progress:y=0}=e,x=0,b=1;function M(){if(!s)return;const t=r.getBoundingClientRect();a=t.left,n(4,b=t.right-a);const e=s.getBoundingClientRect(),c=e.bottom-e.top;n(8,y=(m-e.top)/(c-p)),y<=0?(n(3,x=0),n(2,l=!1),n(8,y=0)):y>=1?(n(3,x=c-p),n(2,l=!1),n(8,y=1)):(n(3,x=m),n(2,l=!0));for(let r=0;r<o.length;r++){const t=o[r],{top:s}=t.getBoundingClientRect(),a=o[r+1],l=a?a.getBoundingClientRect().top:e.bottom;if(n(7,v=Math.max(0,Math.min(1,(i-s)/(l-s)))),l>=i){n(5,g=r);break}}}return it((()=>{o=s.querySelectorAll(d),n(6,_=o.length),M();const t={outer:r,update:M};return fR.add(t),()=>fR.remove(t)})),t.$$set=t=>{"threshold"in t&&n(9,u=t.threshold),"query"in t&&n(10,d=t.query),"contentHeight"in t&&n(11,p=t.contentHeight),"absoluteHeight"in t&&n(12,f=t.absoluteHeight),"top_px"in t&&n(13,m=t.top_px),"index"in t&&n(5,g=t.index),"count"in t&&n(6,_=t.count),"offset"in t&&n(7,v=t.offset),"progress"in t&&n(8,y=t.progress),"$$scope"in t&&n(14,h=t.$$scope)},t.$$.update=()=>{4608&t.$$.dirty&&(i=Math.round(u*f)),10752&t.$$.dirty&&M()},[r,s,l,x,b,g,_,v,y,u,d,p,f,m,h,c,function(t){st[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},function(t){st[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class gR extends Dt{constructor(t){super(),Lt(this,t,mR,dR,_,{threshold:9,query:10,contentHeight:11,absoluteHeight:12,top_px:13,index:5,count:6,offset:7,progress:8})}}function _R(t){let e;return{c(){e=z("div"),j(e,"class","svelte-1elmfpt")},m(n,i){k(n,e,i),t[10](e)},p:u,i:u,o:u,d(n){n&&B(e),t[10](null)}}}function vR(t,e,n){let{isPlusSubscriber:i}=e,{isAufmacher:r=!1}=e,{isOpener:s=!1}=e,{visualHeight:a}=e,{safeHeight:o=null}=e,{headerHeight:l}=e,{footerHeight:c}=e,{contentHeight:h}=e,{tolerance:u=180}=e;const d=document.documentElement.classList.contains("is-app");let p,f,m=0;const g=()=>d||s||r?d?0:i?48:152:window.innerWidth<520?100:108,_=()=>{if(!f)return;({height:m}=f.getBoundingClientRect());const t=Math.abs(m-a)>u;(!a||m>a||t)&&n(1,a=m),n(3,l=g()),n(4,c=d?59:0),n(5,h=a-l-c),o&&!t||n(2,o=document.documentElement.clientHeight-l-c)},v=()=>{clearTimeout(p),p=setTimeout(_,125)};return it((()=>(v(),()=>clearTimeout(p)))),window.addEventListener("resize",v),t.$$set=t=>{"isPlusSubscriber"in t&&n(6,i=t.isPlusSubscriber),"isAufmacher"in t&&n(7,r=t.isAufmacher),"isOpener"in t&&n(8,s=t.isOpener),"visualHeight"in t&&n(1,a=t.visualHeight),"safeHeight"in t&&n(2,o=t.safeHeight),"headerHeight"in t&&n(3,l=t.headerHeight),"footerHeight"in t&&n(4,c=t.footerHeight),"contentHeight"in t&&n(5,h=t.contentHeight),"tolerance"in t&&n(9,u=t.tolerance)},[f,a,o,l,c,h,i,r,s,u,function(t){st[t?"unshift":"push"]((()=>{f=t,n(0,f)}))}]}class yR extends Dt{constructor(t){super(),Lt(this,t,vR,_R,_,{isPlusSubscriber:6,isAufmacher:7,isOpener:8,visualHeight:1,safeHeight:2,headerHeight:3,footerHeight:4,contentHeight:5,tolerance:9})}}function xR(t){let e,n;return e=new qn({}),{c(){Ct(e.$$.fragment)},m(t,i){Rt(e,t,i),n=!0},i(t){n||(Mt(e.$$.fragment,t),n=!0)},o(t){St(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function bR(t){let e,n,i,r,s,a;function o(e){t[20](e)}function l(e){t[21](e)}function c(e){t[22](e)}function h(e){t[23](e)}let u={contentHeight:t[6],absoluteHeight:t[4],top_px:t[5],$$slots:{foreground:[wR],background:[SR]},$$scope:{ctx:t}};return void 0!==t[11]&&(u.index=t[11]),void 0!==t[12]&&(u.count=t[12]),void 0!==t[13]&&(u.progress=t[13]),void 0!==t[14]&&(u.offset=t[14]),e=new gR({props:u}),st.push((()=>Et(e,"index",o))),st.push((()=>Et(e,"count",l))),st.push((()=>Et(e,"progress",c))),st.push((()=>Et(e,"offset",h))),{c(){Ct(e.$$.fragment)},m(t,n){Rt(e,t,n),a=!0},p(t,a){const o={};64&a&&(o.contentHeight=t[6]),16&a&&(o.absoluteHeight=t[4]),32&a&&(o.top_px=t[5]),33554756&a&&(o.$$scope={dirty:a,ctx:t}),!n&&2048&a&&(n=!0,o.index=t[11],ut((()=>n=!1))),!i&&4096&a&&(i=!0,o.count=t[12],ut((()=>i=!1))),!r&&8192&a&&(r=!0,o.progress=t[13],ut((()=>r=!1))),!s&&16384&a&&(s=!0,o.offset=t[14],ut((()=>s=!1))),e.$set(o)},i(t){a||(Mt(e.$$.fragment,t),a=!0)},o(t){St(e.$$.fragment,t),a=!1},d(t){Pt(e,t)}}}function MR(t){let e,n;return e=new hr({props:{sources:t[2]}}),{c(){Ct(e.$$.fragment)},m(t,i){Rt(e,t,i),n=!0},p(t,n){const i={};4&n&&(i.sources=t[2]),e.$set(i)},i(t){n||(Mt(e.$$.fragment,t),n=!0)},o(t){St(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function SR(t){let e,n,i,r,s,a,o;return i=new oR({}),a=new pr({props:{type:"embed",$$slots:{default:[MR]},$$scope:{ctx:t}}}),{c(){e=z("div"),n=z("div"),Ct(i.$$.fragment),r=G(),s=z("div"),Ct(a.$$.fragment),j(s,"class","bottom-fixed svelte-13r1v06"),Y(s,"width",Math.floor(t[8])-32+"px"),j(n,"class","background-wrapper svelte-13r1v06"),j(e,"slot","background"),Y(e,"height",t[6]+"px"),j(e,"class","svelte-13r1v06")},m(t,l){k(t,e,l),O(e,n),Rt(i,n,null),O(n,r),O(n,s),Rt(a,s,null),o=!0},p(t,n){const i={};33554436&n&&(i.$$scope={dirty:n,ctx:t}),a.$set(i),(!o||256&n)&&Y(s,"width",Math.floor(t[8])-32+"px"),(!o||64&n)&&Y(e,"height",t[6]+"px")},i(t){o||(Mt(i.$$.fragment,t),Mt(a.$$.fragment,t),o=!0)},o(t){St(i.$$.fragment,t),St(a.$$.fragment,t),o=!1},d(t){t&&B(e),Pt(i),Pt(a)}}}function wR(t){let e,n,i;return n=new ar({}),{c(){e=z("div"),Ct(n.$$.fragment),j(e,"slot","foreground"),j(e,"class","svelte-13r1v06")},m(t,r){k(t,e,r),Rt(n,e,null),i=!0},p:u,i(t){i||(Mt(n.$$.fragment,t),i=!0)},o(t){St(n.$$.fragment,t),i=!1},d(t){t&&B(e),Pt(n)}}}function TR(t){var e,n;let i,r,s,a,o,l=(null==(n=null==(e=t[10])?void 0:e.assetData)?void 0:n.config)&&t[6]>33&&bR(t);return{c(){i=z("div"),l&&l.c(),j(i,"class","wrapper svelte-13r1v06"),$(i,"isOpener",t[0]),$(i,"gone",!t[9])},m(e,n){k(e,i,n),l&&l.m(i,null),s=!0,a||(o=R(r=Ot.call(null,i,{height:t[4]})),a=!0)},p(t,e){var n,a;(null==(a=null==(n=t[10])?void 0:n.assetData)?void 0:a.config)&&t[6]>33?l?(l.p(t,e),1088&e&&Mt(l,1)):(l=bR(t),l.c(),Mt(l,1),l.m(i,null)):l&&(xt(),St(l,1,1,(()=>{l=null})),bt()),r&&g(r.update)&&16&e&&r.update.call(null,{height:t[4]}),(!s||1&e)&&$(i,"isOpener",t[0]),(!s||512&e)&&$(i,"gone",!t[9])},i(t){s||(Mt(l),s=!0)},o(t){St(l),s=!1},d(t){t&&B(i),l&&l.d(),a=!1,o()}}}function AR(t){let e,n,i,r,s,a,o,l,c,h,u=t[3]&&xR();function d(e){t[16](e)}function p(e){t[17](e)}function f(e){t[18](e)}function m(e){t[19](e)}let g={isPlusSubscriber:Fi.isPlusSubscriber,isOpener:t[0]||t[1]||!1};function _(e){t[24](e)}void 0!==t[4]&&(g.visualHeight=t[4]),void 0!==t[5]&&(g.headerHeight=t[5]),void 0!==t[6]&&(g.contentHeight=t[6]),void 0!==t[7]&&(g.footerHeight=t[7]),n=new yR({props:g}),st.push((()=>Et(n,"visualHeight",d))),st.push((()=>Et(n,"headerHeight",p))),st.push((()=>Et(n,"contentHeight",f))),st.push((()=>Et(n,"footerHeight",m)));let v={$$slots:{default:[TR]},$$scope:{ctx:t}};return void 0!==t[8]&&(v.width=t[8]),l=new Ei({props:v}),st.push((()=>Et(l,"width",_))),{c(){u&&u.c(),e=G(),Ct(n.$$.fragment),o=G(),Ct(l.$$.fragment)},m(t,i){u&&u.m(t,i),k(t,e,i),Rt(n,t,i),k(t,o,i),Rt(l,t,i),h=!0},p(t,[o]){t[3]?u?8&o&&Mt(u,1):(u=xR(),u.c(),Mt(u,1),u.m(e.parentNode,e)):u&&(xt(),St(u,1,1,(()=>{u=null})),bt());const h={};3&o&&(h.isOpener=t[0]||t[1]||!1),!i&&16&o&&(i=!0,h.visualHeight=t[4],ut((()=>i=!1))),!r&&32&o&&(r=!0,h.headerHeight=t[5],ut((()=>r=!1))),!s&&64&o&&(s=!0,h.contentHeight=t[6],ut((()=>s=!1))),!a&&128&o&&(a=!0,h.footerHeight=t[7],ut((()=>a=!1))),n.$set(h);const d={};33587061&o&&(d.$$scope={dirty:o,ctx:t}),!c&&256&o&&(c=!0,d.width=t[8],ut((()=>c=!1))),l.$set(d)},i(t){h||(Mt(u),Mt(n.$$.fragment,t),Mt(l.$$.fragment,t),h=!0)},o(t){St(u),St(n.$$.fragment,t),St(l.$$.fragment,t),h=!1},d(t){t&&(B(e),B(o)),u&&u.d(t),Pt(n,t),Pt(l,t)}}}function ER(t,e,n){let i,r,s,a,o,l,c,h,u,d,p,f,m,g,_,v;return b(t,Zt,(t=>n(15,o=t))),b(t,Ht,(t=>n(4,l=t))),b(t,Vt,(t=>n(5,c=t))),b(t,Wt,(t=>n(6,h=t))),b(t,Gt,(t=>n(7,u=t))),b(t,zt,(t=>n(8,d=t))),b(t,Gn,(t=>n(9,p=t))),b(t,In,(t=>n(10,f=t))),b(t,Dn,(t=>n(11,m=t))),b(t,Un,(t=>n(12,g=t))),b(t,Nn,(t=>n(13,_=t))),b(t,On,(t=>n(14,v=t))),t.$$.update=()=>{32768&t.$$.dirty&&n(3,({debug:i,sources:r="",aufmacher:s=!1,isOpener:a}=o||{}),i,(n(2,r),n(15,o)),(n(1,s),n(15,o)),(n(0,a),n(15,o)))},[a,s,r,i,l,c,h,u,d,p,f,m,g,_,v,o,function(t){l=t,Ht.set(l)},function(t){c=t,Vt.set(c)},function(t){h=t,Wt.set(h)},function(t){u=t,Gt.set(u)},function(t){m=t,Dn.set(m)},function(t){g=t,Un.set(g)},function(t){_=t,Nn.set(_)},function(t){v=t,On.set(v)},function(t){d=t,zt.set(d)}]}class CR extends Dt{constructor(t){super(),Lt(this,t,ER,AR,_,{})}}function RR(t){let e,n;return e=new CR({}),{c(){Ct(e.$$.fragment)},m(t,i){Rt(e,t,i),n=!0},i(t){n||(Mt(e.$$.fragment,t),n=!0)},o(t){St(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function PR(t){let e,n,i=(t[3]&&!t[1]||t[3]&&t[4]||t[2])&&RR();return{c(){e=z("div"),i&&i.c(),j(e,"id","#threejs-tool"),j(e,"data-type","graphics-svelte-app"),j(e,"class","svelte-12cljkb")},m(r,s){k(r,e,s),i&&i.m(e,null),t[7](e),n=!0},p(t,[n]){t[3]&&!t[1]||t[3]&&t[4]||t[2]?i?30&n&&Mt(i,1):(i=RR(),i.c(),Mt(i,1),i.m(e,null)):i&&(xt(),St(i,1,1,(()=>{i=null})),bt())},i(t){n||(Mt(i),n=!0)},o(t){St(i),n=!1},d(n){n&&B(e),i&&i.d(),t[7](null)}}}function IR(t,e,n){let i,r,s,a,o;b(t,Gn,(t=>n(4,i=t))),b(t,Zt,(t=>n(6,r=t))),b(t,Wn,(t=>n(8,s=t)));let l=!1,c=!1,h=!1;setTimeout((()=>{n(3,h=!0)}),3);const u=t=>{C(Gn,i=t[0].intersectionRatio>0,i),i&&n(2,c=!0)};return t.$$.update=()=>{65&t.$$.dirty&&n(1,l=r.isLazy&&a),64&t.$$.dirty&&C(Wn,s=r.slowStart,s),33&t.$$.dirty&&a&&!o&&(n(5,o=new IntersectionObserver(u,{rootMargin:"50px"})),o.observe(a))},[a,l,c,h,i,o,r,function(t){st[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}const LR=((t={})=>document.currentScript||(()=>{const e=(t.url||"").replace(/^.+?(\/src\/.+?.js)+?/,"$1");return document.querySelector("script[src='"+e+"']")})())();(t=>{const e=JSON.parse(t.getAttribute("data-params")||"{}"),n=t.getAttribute("data-url")||"";e&&h.add(e),n&&h.add({dataUrl:n})})(LR.parentNode),new class extends Dt{constructor(t){super(),Lt(this,t,IR,PR,_,{})}}({target:LR.previousElementSibling});
})()</script></div>
</div>
</div>
</div>
<script>if (typeof(Event) === 'function') {window.dispatchEvent(new Event('POLYGON_DOM_LARGEST_CONTENTFUL_PAINT_READY'));}</script>
</div>
</div>
<div class="absolute top-0 bottom-0 left-0 right-0 pointer-events-none">
<div class="absolute left-0 right-0 bottom-0">
<div class="relative w-full mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg lg:px-8 lg:pb-48 md:pb-48 sm:pb-32">
<div class="lg:w-10/12 md:w-10/12 lg:mx-auto md:mx-auto lg:px-24 md:px-24 sm:px-16 text-center text-white text-shadow-sm dark:text-shade-lightest">
<h2 class="mb-24">
<span class="font-brandUI font-extrabold lg:text-8xl md:text-5xl sm:text-4xl leading-tight">
</span>
</h2>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="relative pb-24 bg-white dark:bg-dm-shade-darkest">
<div class="w-full mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg lg:px-8">
<div class="lg:w-10/12 md:w-10/12 lg:mx-auto md:mx-auto lg:px-24 md:px-24 sm:px-16 text-center flex flex-col">
<div class="RichTextCaption font-sansUI lg:text-base md:text-base sm:text-s leading-normal text-shade-dark dark:text-shade-light pt-8">
Quellen: Bundesamt für Landestopografie swisstopo, Glambie, Glims, Nature, Science
</div>
<div class="font-sansUI lg:text-base md:text-base sm:text-s text-shade-dark dark:text-shade-light sm:mt-32 md:mt-48 lg:mt-48">
<span class="block mb-4">
Von
<a class="text-black dark:text-shade-lightest font-bold border-b border-shade-light hover:border-black dark:hover:border-white" href="https://www.spiegel.de/impressum/autor-a717122a-d118-46f0-b4dc-8b48b56fd2a7" target="_self" title="Max Heber">
Max Heber</a><span> und </span>
<a class="text-black dark:text-shade-lightest font-bold border-b border-shade-light hover:border-black dark:hover:border-white" href="https://www.spiegel.de/impressum/autor-61c694dc-46ae-48ac-8a1d-cf96ac878233" target="_self" title="Merlin Menze">
Merlin Menze</a></span>
<div class="font-sansUI lg:text-base md:text-base sm:text-s text-shade-dark dark:text-shade-light">
<time class="timeformat" datetime="2025-03-27 14:54:00">27.03.2025, 14.54 Uhr</time>
</div>
</div>
</div>
</div>
</div>
</header>
<div class="relative bg-white dark:bg-dm-shade-darkest">
<div class="relative z-20 w-full mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg">
<div class="lg:h-8 md:h-8 sm:h-4"></div>
<div class="iqdcontainer md:advertisement-filled:overflow-hidden sm:advertisement-filled:overflow-hidden" data-placement="pos_header" data-device="desktop" data-advertisement="pos_header desktop pos_header:desktop lg md sm"></div>
<div class="iqdcontainer md:advertisement-filled:overflow-hidden sm:advertisement-filled:overflow-hidden" data-placement="pos_header" data-device="mobile" data-advertisement="pos_header mobile pos_header:mobile lg md sm"></div>
<div class="relative lg:pt-8 md:pt-8 sm:pt-4 lg:px-6 bg-white dark:bg-dm-shade-darkest">
<main id="Inhalt" class="z-20 relative">
<article class="bg-white dark:bg-dm-shade-darkest" aria-label="Beispielloses Gletscherschmelzen: Diese Eisriesen zerrinnen" data-featurebar-height>
<div class="relative" data-article-el="body">
<div class="sticky z-20" style="top: var(--polygon-headerbar-height, 0px);" data-headerbar-height data-app-hidden>
<div class="bg-white dark:bg-dm-shade-darkest mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg relative lg:px-12 md:px-12 sm:px-4 flex items-center justify-between" id="feature-bar" data-area="feature-bar" data-sara-component="{&#34;name&#34;:&#34;feature-bar&#34;,&#34;type&#34;:&#34;generic&#34;}" x-data="{shareUrl: 'https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a',showContextMenu: false,}" x-app-ignore>
<hr class="absolute top-0 lg:left-24 md:left-24 sm:left-16 lg:right-24 md:right-24 sm:right-16 h-px border-0 border-separator-t" aria-hidden="true">
<ul class="flex flex-row items-center">
<li>
<button class="flex hover:opacity-distinct text-black dark:text-shade-lightest lg:py-16 md:py-16 sm:py-12 px-12" data-component="BookmarkButton" data-settings="{&#34;collection&#34;:&#34;article&#34;,&#34;documentId&#34;:&#34;5c889858-7313-4254-9f4a-dc0d3ab8587a&#34;}" data-area="bookmark_button" data-sara-click-el="button" data-sara-click-suppress title="Zur Merkliste hinzufügen">
<span class="sr-only" data-bookmark-button-el="label">Zur Merkliste hinzufügen</span>
<span class="leading-none" data-bookmark-button-el="icon-inactive"><svg id="spon-bookmark-xl" class="stroke-current" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="xl-bookmark-077e0b54-1657-4498-8675-e3367522ef3c">
        <path id="bookmark-077e0b54-1657-4498-8675-e3367522ef3c" d="M12.81 18.257L7.5 23.33V4.5h12v18.83l-5.31-5.073a1 1 0 00-1.38 0z" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
</svg>
</span>
<span class="leading-none hidden" data-bookmark-button-el="icon-active"><svg id="spon-bookmark-f-xl" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="xl-bookmark-f-716abd6f-3998-4a3b-8190-e441214fc016">
        <g id="xl-bookmark-716abd6f-3998-4a3b-8190-e441214fc016">
            <path id="bookmark-716abd6f-3998-4a3b-8190-e441214fc016" d="M13.155 18.618l-5.31 5.074A.5.5 0 017 23.331V4.5a.5.5 0 01.5-.5h12a.5.5 0 01.5.5v18.83a.5.5 0 01-.846.362l-5.309-5.074a.5.5 0 00-.69 0z" class="fill-current"/>
        </g>
    </g>
</svg>
</span>
</button>
</li>
</ul>
<ul class="flex items-center">
<li class="sm:hidden">
<a class="inline-flex items-center text-black dark:text-shade-lightest hover:opacity-distinct lg:py-16 md:py-16 sm:py-12 px-12" href="https://twitter.com/intent/tweet?lang=de&text=%28S%2B%29+Beispielloses+Gletscherschmelzen%3A+Diese+Eisriesen+zerrinnen&url=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-so-tw-sh&via=derspiegel" target="_self" rel="nofollow" title="X.com" data-sara-click-el="button" @click="if (!$userAgentUtils.isMobile) {$event.preventDefault();window.open($el.href, 'Beitrag teilen', 'height=500,width=600');}" data-sara-cta="sharing:X.com"><svg id="spon-twitter-xl" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M15.8619 12.4686L23.1472 4H21.4208L15.095 11.3532L10.0425 4H4.21509L11.8554 15.1193L4.21509 24H5.94158L12.6219 16.2348L17.9576 24H23.785L15.8619 12.4686ZM6.56366 5.29968H9.21546L21.4216 22.7594H18.7698L6.56366 5.29968Z" shape-rendering="geometricPrecision" class="fill-current"/>
</svg>
<span class="sr-only">X.com</span>
</a>
</li>
<li class="sm:hidden">
<a class="inline-flex items-center text-black dark:text-shade-lightest hover:opacity-distinct lg:py-16 md:py-16 sm:py-12 px-12" href="https://www.facebook.com/share.php?t=%28S%2B%29+Beispielloses+Gletscherschmelzen%3A+Diese+Eisriesen+zerrinnen&u=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-so-fb-sh" target="_self" rel="nofollow" title="Facebook" data-sara-click-el="button" @click="if (!$userAgentUtils.isMobile) {$event.preventDefault();window.open($el.href, 'Beitrag teilen', 'height=500,width=600');}" data-sara-cta="sharing:Facebook"><svg id="spon-facebook-xl" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M10.802 25.083v-9.576H7.467v-4.412h3.335v-3.12c0-3.337 2.152-5.058 5.165-5.058 1.4 0 2.69.107 3.013.107v3.551h-2.044c-1.614 0-2.045.754-2.045 1.937v2.583h4.412l-1.506 4.412H14.89v9.576h-4.089z" class="stroke-current" stroke-miterlimit="10" stroke-linejoin="round"/>
</svg>
<span class="sr-only">Facebook</span>
</a>
</li>
<li class="sm:hidden">
<a class="inline-flex items-center text-black dark:text-shade-lightest hover:opacity-distinct lg:py-16 md:py-16 sm:py-12 px-12" href="mailto:?subject=%28S%2B%29%20Beispielloses%20Gletscherschmelzen:%20Diese%20Eisriesen%20zerrinnen%20%28DER%20SPIEGEL%29&body=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-em-em-sh" target="_self" rel="nofollow" title="E-Mail" data-sara-click-el="button" data-sara-cta="sharing:E-Mail"><svg id="spon-mail-xl" class="stroke-current" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="xl-mail-bc5c6f9a-783d-4ccc-a0b0-396bb2b6a4de">
        <path id="rectangle-bc5c6f9a-783d-4ccc-a0b0-396bb2b6a4de" d="M4.5 6.5h19m-19 0v15m0-15l6.5 7m12.5-7v15m0-15l-6.5 7m6.5 8h-19m19 0l-6.5-8m-12.5 8l6.5-8m0 0l3 2.833 3-2.833" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
</svg>
<span class="sr-only">E-Mail</span>
</a>
</li>
<li class="sm:hidden">
<button class="inline-flex items-center text-black dark:text-shade-lightest hover:opacity-distinct lg:py-16 md:py-16 sm:py-12 px-12" data-sara-click-el="button" @click.prevent="const shareUrlObject = new URL(shareUrl);shareUrlObject.searchParams.set('sara_ref', 're-xx-cp-sh');if ($webUtils.copyToClipboard(shareUrlObject.href)) {$notificationService.addNotification({type: 'NOTIFICATION_TYPE_SUCCESS',headline: 'Link kopiert',description: 'Die Artikel-URL wurde erfolgreich in Ihrer Zwischenablage gespeichert.',});}" data-sara-cta="sharing:Link kopieren" title="Link kopieren"><svg id="spon-copylink-xl" class="stroke-current" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="xl-copylink-84ebbf08-138f-49ed-862d-4b2a327a4951" stroke-width="1.1" stroke-linecap="round">
        <path id="rectangle-84ebbf08-138f-49ed-862d-4b2a327a4951" d="M14.47 17.3s.945.944-.1 1.989l-2.137 2.137a3.5 3.5 0 01-4.95 0l-.354-.354-.354-.354a3.5 3.5 0 010-4.95l2.137-2.137c1.045-1.045 1.987-.102 1.987-.102" stroke-miterlimit="10"/>
        <path id="rectangle_2-84ebbf08-138f-49ed-862d-4b2a327a4951" d="M17.299 14.471s.944.945 1.989-.1l2.137-2.137a3.5 3.5 0 000-4.95l-.354-.354-.354-.354a3.5 3.5 0 00-4.95 0L13.63 8.713c-1.045 1.045-.102 1.987-.102 1.987" stroke-miterlimit="10"/>
        <path id="vector-84ebbf08-138f-49ed-862d-4b2a327a4951" d="M10.293 17.707l7.414-7.414"/>
    </g>
</svg>
<span class="sr-only">Link kopieren</span>
</button>
</li>
<li class="md:hidden lg:hidden relative">
<button class="inline-flex items-center text-black dark:text-shade-lightest hover:opacity-distinct lg:py-16 md:py-16 sm:py-12 px-12" title="Weitere Optionen zum Teilen" data-sara-click-el="button" @click.prevent.stop="showContextMenu = !showContextMenu;if (!showContextMenu) {return;}if ($refs.firstShareLink && $userAgentUtils.isMobile) {$focus($refs.firstShareLink);} else {$focus($refs.copyLink);}"><svg id="spon-share-xl" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M15.667 9.833V4.654l8.102 7.596-8.102 7.596v-5.18h-.5c-3.207 0-5.801 1.373-7.775 3.06-1.787 1.528-3.083 3.328-3.894 4.65.212-2.734.887-5.781 2.53-8.182 1.72-2.51 4.528-4.36 9.139-4.36h.5zm-.253-5.416l.103-.11-.103.11zm8.472 7.942z" class="stroke-current"/>
</svg>
<span class="sr-only">Weitere Optionen zum Teilen</span>
</button>
</li>
</ul>
<hr class="absolute bottom-0 lg:left-24 md:left-24 sm:left-16 lg:right-24 md:right-24 sm:right-16 h-px border-0 border-separator-b" aria-hidden="true">
<div class="absolute right-0 top-12/12 lg:mr-8 border border-shade-lighter inline-block shadow-sm rounded min-w-s font-sansUI bg-white dark:bg-dm-shade-darkest text-base py-12 text-left z-10 md:hidden lg:hidden" x-show="showContextMenu" x-cloak @click.away="showContextMenu = false">
<ul>
<li>
<a class="flex items-center leading-normal px-16 py-12 text-black dark:text-shade-lightest hover:bg-shade-lightest dark:hover:bg-black w-full disabled:opacity-slight disabled:cursor-not-allowed" href="https://twitter.com/intent/tweet?lang=de&text=%28S%2B%29+Beispielloses+Gletscherschmelzen%3A+Diese+Eisriesen+zerrinnen&url=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-so-tw-sh&via=derspiegel" target="_self" rel="nofollow" title="X.com" data-sara-click-el="button" x-ref="firstShareLink" data-sara-cta="sharing:X.com">
<span>
<span class="mr-16 inline-flex align-middle"><svg id="spon-twitter-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M13.675 10.6229L20.228 3.00488H18.675L12.985 9.61888L8.44 3.00488H3.198L10.071 13.0069L3.198 20.9949H4.751L10.761 14.0099L15.56 20.9949H20.802L13.675 10.6219V10.6229ZM5.31 4.17288H7.695L18.675 19.8799H16.29L5.31 4.17288Z" shape-rendering="geometricPrecision" class="fill-current"/>
</svg>
</span>
<span class="align-middle">X.com</span>
</span>
</a>
</li>
<li>
<a class="flex items-center leading-normal px-16 py-12 text-black dark:text-shade-lightest hover:bg-shade-lightest dark:hover:bg-black w-full disabled:opacity-slight disabled:cursor-not-allowed" href="https://www.facebook.com/share.php?t=%28S%2B%29+Beispielloses+Gletscherschmelzen%3A+Diese+Eisriesen+zerrinnen&u=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-so-fb-sh" target="_self" rel="nofollow" title="Facebook" data-sara-click-el="button" data-sara-cta="sharing:Facebook">
<span>
<span class="mr-16 inline-flex align-middle"><svg id="spon-facebook-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M9.26 21.5v-8.209H6.4V9.51h2.86V6.835c0-2.86 1.844-4.335 4.426-4.335 1.2 0 2.306.092 2.583.092v3.044h-1.752c-1.384 0-1.753.646-1.753 1.66V9.51h3.782l-1.292 3.781h-2.49V21.5H9.26z" class="stroke-current" stroke-miterlimit="10" stroke-linejoin="round"/>
</svg>
</span>
<span class="align-middle">Facebook</span>
</span>
</a>
</li>
<li>
<a class="flex items-center leading-normal px-16 py-12 text-black dark:text-shade-lightest hover:bg-shade-lightest dark:hover:bg-black w-full disabled:opacity-slight disabled:cursor-not-allowed" href="mailto:?subject=%28S%2B%29%20Beispielloses%20Gletscherschmelzen:%20Diese%20Eisriesen%20zerrinnen%20%28DER%20SPIEGEL%29&body=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-em-em-sh" target="_self" rel="nofollow" title="E-Mail" data-sara-click-el="button" data-sara-cta="sharing:E-Mail">
<span>
<span class="mr-16 inline-flex align-middle"><svg id="spon-mail-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path class="stroke-current" d="M3.5 5.5H20.5M3.5 5.5V18.5M3.5 5.5L10 12M20.5 5.5V18.5M20.5 5.5L14 12M20.5 18.5H3.5M20.5 18.5L14 12M3.5 18.5L10 12M10 12L12 14L14 12" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</span>
<span class="align-middle">E-Mail</span>
</span>
</a>
</li>
<li data-not-mobile-hidden>
<a class="flex items-center leading-normal px-16 py-12 text-black dark:text-shade-lightest hover:bg-shade-lightest dark:hover:bg-black w-full disabled:opacity-slight disabled:cursor-not-allowed" href="fb-messenger://share?link=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-so-fm-sh&app_id=2309869772" target="_self" rel="nofollow" title="Messenger" data-sara-click-el="button" data-sara-cta="sharing:Messenger">
<span>
<span class="mr-16 inline-flex align-middle"><svg id="spon-messenger-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M6.563 18.418c0-.314-.148-.602-.382-.79-1.894-1.522-3.08-3.765-3.08-6.257C3.1 6.835 7.05 3.1 12 3.1c4.948 0 8.9 3.734 8.9 8.27 0 4.535-3.952 8.27-8.9 8.27-.852 0-1.674-.11-2.452-.317a1.014 1.014 0 00-.762.096l-2.224 1.265v-2.267z" class="stroke-current"/>
    <path d="M10.996 8.968l-5.069 5.368 4.614-2.532 2.41 2.532 5.04-5.368-4.561 2.487-2.434-2.487z" class="fill-current"/>
</svg>
</span>
<span class="align-middle">Messenger</span>
</span>
</a>
</li>
<li data-not-mobile-hidden>
<a class="flex items-center leading-normal px-16 py-12 text-black dark:text-shade-lightest hover:bg-shade-lightest dark:hover:bg-black w-full disabled:opacity-slight disabled:cursor-not-allowed" href="whatsapp://send?text=%28S%2B%29+Beispielloses+Gletscherschmelzen%3A+Diese+Eisriesen+zerrinnen+%28DER+SPIEGEL%29+https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a%3Fsara_ref%3Dre-so-wa-sh" target="_self" rel="nofollow" title="WhatsApp" data-sara-click-el="button" data-sara-cta="sharing:WhatsApp">
<span>
<span class="mr-16 inline-flex align-middle"><svg id="spon-whatsapp-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M2.87 11.86v-.002C2.85 6.848 6.932 2.8 11.974 2.8c5.042 0 9.126 4.05 9.126 9.039 0 4.99-4.084 9.038-9.126 9.038a9.185 9.185 0 01-4.24-1.04l-.23.444.23-.444a1.014 1.014 0 00-.78-.067l-4.16 1.347 1.346-3.953a1.015 1.015 0 00-.082-.831A9.006 9.006 0 012.87 11.86z" class="stroke-current"/>
    <path d="M16.774 13.84c-.062-.083-.206-.145-.434-.27-.227-.103-1.322-.64-1.53-.723-.206-.082-.35-.103-.495.104-.145.227-.579.723-.703.868-.124.144-.268.165-.475.062-.227-.104-.95-.351-1.798-1.095-.661-.58-1.116-1.323-1.24-1.53-.124-.227-.02-.351.103-.454.104-.104.228-.27.33-.393.104-.124.146-.228.228-.372.083-.145.042-.269-.02-.393-.062-.103-.496-1.199-.682-1.653-.186-.434-.372-.372-.496-.372s-.29-.02-.434-.02a.89.89 0 00-.6.268c-.206.227-.785.764-.785 1.86 0 1.095.806 2.15.91 2.294.103.144 1.55 2.46 3.823 3.348 2.273.889 2.273.6 2.686.558.414-.041 1.323-.537 1.509-1.054.165-.496.165-.93.103-1.034z" class="fill-current"/>
</svg>
</span>
<span class="align-middle">WhatsApp</span>
</span>
</a>
</li>
<li>
<button class="flex items-center leading-normal px-16 py-12 text-black dark:text-shade-lightest hover:bg-shade-lightest dark:hover:bg-black w-full disabled:opacity-slight disabled:cursor-not-allowed" title="Link kopieren" data-sara-click-el="button" @click.prevent="const shareUrlObject = new URL(shareUrl);shareUrlObject.searchParams.set('sara_ref', 're-xx-cp-sh');if ($webUtils.copyToClipboard(shareUrlObject.href)) {$notificationService.addNotification({type: 'NOTIFICATION_TYPE_SUCCESS',headline: 'Link kopiert',description: 'Die Artikel-URL wurde erfolgreich in Ihrer Zwischenablage gespeichert.',});}" x-ref="copyLink" data-sara-cta="sharing:Link kopieren">
<span>
<span class="mr-16 inline-flex align-middle"><svg id="spon-copylink-l" class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-copylink-10184340-a751-4407-a2bd-11498a11019f" stroke-width="1.1" stroke-linecap="round">
        <path id="rectangle-10184340-a751-4407-a2bd-11498a11019f" d="M12.403 14.828s.81.81-.086 1.705l-1.832 1.832a3 3 0 01-4.242 0l-.304-.303-.304-.304a3 3 0 010-4.243l1.833-1.832c.895-.895 1.703-.087 1.703-.087" stroke-miterlimit="10"/>
        <path id="rectangle_2-10184340-a751-4407-a2bd-11498a11019f" d="M14.828 12.404s.81.81 1.704-.086l1.832-1.832a3 3 0 000-4.243l-.303-.303-.304-.304a3 3 0 00-4.242 0l-1.832 1.832c-.896.896-.088 1.704-.088 1.704" stroke-miterlimit="10"/>
        <path id="vector-10184340-a751-4407-a2bd-11498a11019f" d="M8.822 15.178l6.355-6.355"/>
    </g>
</svg>
</span>
<span class="align-middle">Link kopieren</span>
</span>
</button>
</li>
</ul>
</div>
</div>
</div>
<section class="relative">
<div data-has-paid-access-hidden data-not-gift-article-hidden>
<section class="lg:w-8/12 md:w-10/12 sm:w-full mx-auto lg:my-32 md:my-32 sm:my-24 lg:px-24 md:px-24 sm:px-16 clear-both">
<div class="bg-sec2-lightest dark:bg-sec2-darker rounded lg:p-24 md:p-24 sm:py-24 sm:px-16" data-sara-component="{&#34;name&#34;:&#34;gift-box&#34;,&#34;title&#34;:&#34;Blockierte Verschenken Box&#34;,&#34;type&#34;:&#34;pop-up&#34;}">
<div class="flex">
<div class="sm:hidden mr-24"><svg id="spon-article-sharing-small" width="120" height="120" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <rect width="120" height="120" rx="1.5" fill="#8DD5FF"/>
    <path d="M18 37H0m18 8H4m14 8h-7m86 31h23m-23 8h18m-18 8h7" stroke="#fff" stroke-width="2" stroke-miterlimit="10"/>
    <path d="M92 41H27v60h65V41Z" fill="#E64415"/>
    <path d="M96 36H23v15h73V36Z" fill="#C12B00"/>
    <path d="m65 51 27 4.21V51H65Z" fill="#000"/>
    <path d="M57.896 84.127V72.302H48.65v-5.36h4.615v3.31h4.632v-4.73c0-1.513-1.384-2.522-2.779-2.522H46.48C45.085 63 44 64.104 44 65.523v10.72h9.241v6.465h-4.746v-4.415H44v5.676c0 1.42 1.085 2.523 2.48 2.523h8.776c1.426 0 2.64-.946 2.64-2.365Zm8.23-15.997h3.391v5.086h5.088v3.392h-5.088v5.087h-3.39v-5.087h-5.088v-3.392h5.087V68.13Z" fill="#fff"/>
    <path d="m54.945 22.646 4.998 5.854c.333-.5 1.666-2.254 4.866-5.854 4-4.5 9.419-4.634 13-1.5 3.752 3.283 3.5 9 1 12-2 2.4-5.833 3-7.5 3h-5.365L72.369 44l-5 3.146-7.425-9.646-7.234 9.646L47.444 44l6.365-7.854h-6c-3.2 0-5.606-1.408-6.998-3-1.62-1.854-3.366-7.146.632-11.646 3.062-3.446 10.002-3.5 13.502 1.146Z" fill="#811D00"/>
    <path d="M75.516 26.389c-1.568-3.135-4.572-2.389-6.573-.39l-5 5.001h8c2.233-.115 5.074-1.61 3.573-4.611Zm-31.153 0c1.568-3.135 4.573-2.389 6.574-.39L55.936 31h-8c-2.233-.115-5.074-1.61-3.573-4.611Z" fill="#8DD5FF"/>
    <path d="M27 68h13v10H27V68Zm28-8v-9h10v9H55Zm0 41V90h10v11H55Zm24-33h13v10H79V68Z" fill="#811D00"/>
</svg>
</div>
<div class="flex flex-col justify-center">
<div class="mb-12 text-primary-base dark:text-shade-lighter"><svg id="spon-spiegel-plus-mobile" width="91" height="15" class="fill-current" viewBox="0 0 91 15" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M14.6544 5.89999V2.5H18.0671V5.89999H14.6544ZM20.9779 6.79999V1.6C20.9779 0.699999 20.2753 0 19.3719 0H10.5391V2.5H11.7436V12.5H10.5391V15H15.7585V12.5H14.6544V8.39999H19.3719C20.2753 8.39999 20.9779 7.69999 20.9779 6.79999Z"/>
    <path d="M26.097 12.5V2.5H27.3015V0H22.082V2.5H23.2865V12.5H22.082V15H27.3015V12.5H26.097Z"/>
    <path d="M36.0339 9.69999V12.5H32.6212V8.39999H37.138V5.89999H32.6212V2.5H36.0339V4.59999H38.9448V0H28.6063V2.5H29.7104V12.5H28.6063V15H38.9448V9.69999H36.0339Z"/>
    <path d="M44.2645 5.89999V8.39999H46.5732V12.5H43.1604V2.5H46.5732V4.59999H49.5843V1.6C49.5843 0.699999 48.8817 0 47.9784 0H41.956C41.5545 0 41.153 0.2 40.9522 0.399999C40.6511 0.699999 40.35 1.1 40.35 1.6V13.4C40.35 13.9 40.5507 14.3 40.9522 14.6C41.2534 14.9 41.6548 15 42.0563 15H49.5843V5.89999H44.2645Z"/>
    <path d="M58.417 9.69999V12.5H55.0043V8.39999H59.5211V5.89999H55.0043V2.5H58.417V4.59999H61.3278V0H50.9893V2.5H52.0934V12.5H50.9893V15H61.3278V9.69999H58.417Z"/>
    <path d="M70.1611 9.69999V12.5H66.8488V2.5H68.0533V0H62.7335V2.5H63.938V12.5H62.7335V15H73.0719V9.69999H70.1611Z"/>
    <path d="M9.23435 13.4899V5.93959H3.0112V2.51678H6.32352V4.63087H9.33472V1.61074C9.33472 0.644286 8.43136 0 7.528 0H1.60598C0.702616 0 0 0.704698 0 1.61074V8.45637H6.22314V12.5839H2.91082V9.76509H0V13.3892C0 14.2953 0.702616 15 1.60598 15H7.528C8.45173 15 9.23435 14.396 9.23435 13.4899Z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M76 0H91V15H76V0ZM82.9598 7.97671V12.7437H84.0085V7.97671H88.6801V7.02332H84.0085V2.25638H82.9598V7.02332H78.3199V7.97671H82.9598Z"/>
</svg>
</div>
<p class="text-black dark:text-shade-lightest font-sansUI text-base leading-loose">
Sie können den Artikel leider nicht mehr aufrufen. Der Link, der Ihnen geschickt wurde, ist entweder älter als 30 Tage oder der Artikel wurde bereits 10 Mal geöffnet.
</p>
</div>
</div>
</div>
</section>
</div>
<div class="lg:mt-32 md:mt-32 sm:mt-24 md:pb-48 lg:pb-48 sm:pb-32">
<div data-area="body">
<div data-sara-click-el="body_element" data-area="paywall" data-pos="1">
<div class="relative clear-both lg:mx-24 md:mx-24" data-area="paywall" data-target-id="article-paywall-primary-sale-web" data-has-spmetered-hidden data-app-hidden data-sara-component="{&#34;name&#34;:&#34;article-paywall-primary-sale&#34;,&#34;title&#34;:&#34;Default Paywall&#34;,&#34;type&#34;:&#34;paywall&#34;}">
<div class="mx-auto lg:w-10/12 md:w-10/12 bg-white dark:bg-dm-shade-darkest sm:mx-16 lg:pb-40 lg:px-24 md:px-24 md:pb-40 sm:pb-24 sm:px-16" x-data="{selectedOffer: 'first',hasChangedOffer: false}" x-init="$watch('selectedOffer', (value) => hasChangedOffer = true)">
<fieldset class="border border-solid border-shade-lighter dark:border-shade-dark sm:px-16 px-40">
<legend class="mx-auto px-16 bg-white dark:bg-dm-shade-darkest">
<span class="flex leading-none items-center text-primary-base"><svg id="spon-spplus-flag-xl" width="30" height="30" viewBox="0 0 30 30" class="fill-current" xmlns="http://www.w3.org/2000/svg">
    <rect class="text-spon-primary-base dark:text-spon-dm-primary-base fill-current" width="30" height="30" rx="1.5"/>
    <path d="M14.8689 22.1887V13.1277H7.6819V9.02007H11.2687V11.5571H14.8689V7.93276C14.8689 6.77295 13.7929 5.99976 12.7088 5.99976H5.99553C4.91143 5.99976 4.06824 6.84545 4.06824 7.93276V16.148H11.2507V21.1014H7.56145V17.7186H4.06824V22.0679C4.06824 23.1552 4.91143 24.0009 5.99553 24.0009H12.8168C13.9253 24.0009 14.8689 23.276 14.8689 22.1887Z" fill="#fff"/>
    <path d="M21.8443 11.3999H24.0945V14.7751H27.4697V17.0252H24.0945V20.4005H21.8443V17.0252H18.4691V14.7751H21.8443V11.3999Z" fill="#fff" />
</svg>
</span>
</legend>
<div class="mx-auto flex flex-col items-center">
<h3 class="font-sansUI font-bold sm:text-xl md:text-2xl lg:text-2xl text-center text-black dark:text-shade-lightest leading-normal my-16 lg:mt-24">
Diesen Artikel weiterlesen mit SPIEGEL+
</h3>
<p class="font-sansUI text-base text-black dark:text-shade-lightest leading-normal mb-24" data-logged-in-hidden>Sie haben bereits ein Digital-Abo? <a href="https://gruppenkonto.spiegel.de/authenticate?requestAccessToken=true&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" title="Zum Login" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-base leading-normal" data-sara-link="gruppenkonto" data-sara-cta="secondary:login">
Zum Login
</a>
</p>
<div class="flex flex-col max-w-640 mb-16">
<div :class="selectedOffer === 'first' ? 'bg-sec2-lightest dark:bg-sec2-darker' : 'bg-white dark:bg-dm-shade-darkest'" class="flex flex-col p-16 border-t dark:border-shade-dark">
<div class="flex justify-between items-center mb-16 text-primary-base dark:text-dm-primary-base">
<span class="sr-only">SPIEGEL plus</span><svg id="spon-spiegel-plus-paywall-mobile" class="fill-current" width="102" height="18" viewBox="0 0 102 18" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="spiegel-plus-mobile-ce44992e-d7aa-4432-a6ac-6e707d32d4b4">
        <g id="spiegel-plus-tablet-desktop-ce44992e-d7aa-4432-a6ac-6e707d32d4b4">
            <g id="group-ce44992e-d7aa-4432-a6ac-6e707d32d4b4">
                <path id="vector-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" d="M1.87 16.982A1.858 1.858 0 010 15.112v-3.85h3.346v2.914h3.67V9.534H.036V1.871C.036.828.863 0 1.906 0h6.585c1.043 0 1.87.828 1.87 1.87v3.167H7.017V2.842H3.418v3.922h6.98v8.347c0 1.043-.828 1.871-1.871 1.871H1.871z"/>
                <path id="vector_2-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" d="M11.909 16.982V14.14h1.331V2.842H11.91V0h9.93c1.044 0 1.871.828 1.871 1.87v6.333c0 1.044-.828 1.871-1.87 1.871h-5.218v4.066h1.296v2.842h-6.009zm8.455-14.14h-3.742v4.426H20.4V2.842h-.036z"/>
                <path id="vector_3-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" d="M24.97 16.982V14.14h1.33V2.842h-1.33V0h5.972v2.842h-1.296v11.334h1.296v2.842h-5.973v-.036z"/>
                <path id="vector_4-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" d="M32.345 16.982V14.14h1.331V2.842h-1.331V0H43.93v4.93h-3.238V2.841h-3.67v3.85h4.893v2.734h-4.893v4.714h3.67V11.26h3.238v5.721H32.345z"/>
                <path id="vector_5-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" d="M47.564 16.982a1.858 1.858 0 01-1.87-1.87V1.87C45.693.828 46.52 0 47.563 0h6.656c1.044 0 1.871.828 1.871 1.87v3.167h-3.346v-2.23h-3.67V14.14h3.67V9.894h-2.159v-2.77h5.541v9.858h-8.563z"/>
                <path id="vector_6-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" d="M57.746 16.982V14.14h1.331V2.842h-1.331V0h11.585v4.93h-3.238V2.841h-3.67v3.85h4.893v2.734h-4.893v4.714h3.67V11.26h3.238v5.721H57.746z"/>
                <path id="vector_7-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" d="M70.914 16.982V14.14h1.332V2.842h-1.332V0h6.08v2.842h-1.367v11.334h3.203V10.47h3.13v6.548H70.914v-.036z"/>
            </g>
            <g id="group_2-ce44992e-d7aa-4432-a6ac-6e707d32d4b4">
                <path id="subtract-ce44992e-d7aa-4432-a6ac-6e707d32d4b4" fill-rule="evenodd" clip-rule="evenodd" d="M85.018 0H102v16.982H85.018V0zm7.88 9.03v5.398h1.187V9.03h5.289V7.95h-5.29V2.555h-1.187V7.95h-5.253v1.08h5.253z"/>
            </g>
        </g>
    </g>
</svg>
<span class="inline-flex bg-white border border-black dark:border-shade-lightest font-sansUI h-24 ml-12 pt-4 px-6 rounded text-black text-xs whitespace-nowrap">
Nur für Neukunden
</span>
</div>
<div class="group relative inline-flex flex-row mb-16 font-bold">
<input type="radio" id="fieldset-first" name="subscription" value="first" class="peer appearance-none rounded-circle text-black shrink-0 w-24 h-24 bg-white dark:bg-shade-darkest border border-shade-base group-hover:border-black checked:border-black disabled:border-shade-lighter dark:border-shade-light dark:group-hover:border-shade-lightest dark:checked:border-shade-lightest dark:disabled:border-shade-dark cursor-pointer disabled:cursor-not-allowed" checked x-model="selectedOffer">
<span class="absolute left-0 top-0 pointer-events-none invisible peer-checked:visible w-24 h-24 flex items-center justify-center">
<span class="bg-black dark:bg-shade-lightest rounded-circle w-12 h-12"></span>
</span>
<label for="fieldset-first" class="font-sansUI pl-12 leading-normal text-base text-shade-darker group-hover:text-black peer-checked:text-black peer-disabled:text-shade-base dark:text-shade-lightest dark:group-hover:text-white dark:peer-checked:text-white dark:peer-disabled:text-shade-dark cursor-pointer peer-disabled:cursor-not-allowed">
€ 1,– für 4 Wochen
<span x-show="selectedOffer === 'first' && hasChangedOffer" x-cloak class="flex sm:flex-row text-s font-normal">
danach € 5,99 pro Woche
</span>
</label>
</div>
<div x-show="selectedOffer === 'first'">
<div class="flex flex-col font-sansUI text-s mb-16">
<div class="flex flex-row items-center">
<span class="text-positive"><svg id="spon-checkbox-f-m" class="stroke-current" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="m-checkbox-f-0b11e795-3e4a-43b4-a6b2-c15b45a8cb30">
        <path id="check-0b11e795-3e4a-43b4-a6b2-c15b45a8cb30" d="M11.333 4.667l-4.666 6-2-2.667" stroke-width="1.8" stroke-linecap="round"/>
    </g>
</svg>
</span>
<span class="leading-normal mb-6 ml-4">
Freier Zugriff auf alle S+-Artikel auf SPIEGEL.de und in der App
</span>
</div>
<div class="flex flex-row items-center">
<span class="text-positive"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<span class="leading-normal mb-6 ml-4">
Wöchentlich die digitale Ausgabe des SPIEGEL inkl. E-Paper (PDF), Digital-Archiv und S+-Newsletter
</span>
</div>
<div class="flex flex-row items-center">
<span class="text-positive"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<span class="leading-normal mb-6 ml-4">
Jederzeit kündigen
</span>
</div>
</div>
<div class="w-full inline-flex justify-end">
<a title="Jetzt abonnieren" class="inline-block bg-primary-base dark:bg-dm-primary-base border border-primary-base dark:border-dm-primary-base hover:border-primary-dark focus:border-primary-darker hover:bg-primary-dark focus:bg-primary-darker pl-16 pr-12 py-12 rounded" href="https://abo.spiegel.de/microsites/pl/probemonat1w4/?requestAccessToken=true&sara_icid=disp_upd_I8sSN2AGdq9MgyWnJfQzgnJKhG0kP8&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" data-area="paywall-purchase-button" data-target-button data-sara-cta="primary:subscription">
<span class="flex text-s text-white font-sansUI leading-normal font-bold">
<span class="relative bottom-px">
Jetzt abonnieren
</span>
<span class="flex leading-none items-center ml-8"><svg id="spon-chevron-right-s" class="stroke-current" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="s-chevron-right-1e6cfb5d-6f7b-467c-a410-be06f304d675">
        <path id="vector-1e6cfb5d-6f7b-467c-a410-be06f304d675" d="M4.333 2.667L7.667 6 4.333 9.333" stroke-linecap="round"/>
    </g>
</svg>
</span>
</span>
</a>
</div>
</div>
</div>
<div :class="selectedOffer === 'second' ? 'bg-sec2-lightest dark:bg-sec2-darker' : 'bg-white dark:bg-dm-shade-darkest'" class="flex flex-col p-16 border-t border-b dark:border-shade-dark">
<div class="flex justify-between items-center mb-16 text-primary-base dark:text-dm-primary-base">
<span class="sr-only">SPIEGEL plus</span><svg width="102" height="18"><use xlink:href="#spon-spiegel-plus-paywall-mobile"/></svg>
<span class="inline-flex bg-opacity-slight bg-positive border border-positive dark:text-white font-sansUI h-24 ml-12 pt-4 px-6 rounded text-black text-xs whitespace-nowrap">
52 Wochen 25 % sparen
</span>
</div>
<div class="group relative inline-flex flex-row mb-16 font-bold">
<input type="radio" id="fieldset-second" name="subscription" value="second" class="peer appearance-none rounded-circle text-black shrink-0 w-24 h-24 bg-white dark:bg-shade-darkest border border-shade-base group-hover:border-black checked:border-black disabled:border-shade-lighter dark:border-shade-light dark:group-hover:border-shade-lightest dark:checked:border-shade-lightest dark:disabled:border-shade-dark cursor-pointer disabled:cursor-not-allowed" x-model="selectedOffer">
<span class="absolute left-0 top-0 pointer-events-none invisible peer-checked:visible w-24 h-24 flex items-center justify-center">
<span class="bg-black dark:bg-shade-lightest rounded-circle w-12 h-12"></span>
</span>
<label for="fieldset-second" class="font-sansUI pl-12 leading-normal text-base text-shade-darker group-hover:text-black peer-checked:text-black peer-disabled:text-shade-base dark:text-shade-lightest dark:group-hover:text-white dark:peer-checked:text-white dark:peer-disabled:text-shade-dark cursor-pointer peer-disabled:cursor-not-allowed">
€ 4,49 pro Woche für 52 Wochen
<span x-show="selectedOffer === 'second' && hasChangedOffer" x-cloak class="flex sm:flex-row text-s font-normal">
danach € 5,99 pro Woche
</span>
</label>
</div>
<div x-cloak x-show="selectedOffer === 'second'">
<div class="flex flex-col font-sansUI text-s mb-16">
<div class="flex flex-row items-center">
<span class="text-positive"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<span class="leading-normal mb-6 ml-4">
Freier Zugriff auf alle S+-Artikel auf SPIEGEL.de und in der App
</span>
</div>
<div class="flex flex-row items-center">
<span class="text-positive"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<span class="leading-normal mb-6 ml-4">
Wöchentlich die digitale Ausgabe des SPIEGEL inkl. E-Paper (PDF), Digital-Archiv und S+-Newsletter
</span>
</div>
<div class="flex flex-row items-center">
<span class="text-positive"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<span class="leading-normal mb-6 ml-4">
52 Wochen rabattierte Laufzeit
</span>
</div>
</div>
<div class="w-full inline-flex justify-end">
<a title="Jetzt abonnieren" class="inline-block bg-primary-base dark:bg-dm-primary-base border border-primary-base dark:border-dm-primary-base hover:border-primary-dark focus:border-primary-darker hover:bg-primary-dark focus:bg-primary-darker pl-16 pr-12 py-12 rounded" href="https://abo.spiegel.de/microsites/pl/pl-52w-mbz/?requestAccessToken=true&sara_icid=disp_upd_9dPQc5lwWifK7SHLiamjOHe332kZL8&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" data-area="paywall-purchase-button" data-target-button data-sara-cta="primary:subscription">
<span class="flex text-s text-white font-sansUI leading-normal font-bold">
<span class="relative bottom-px">
Jetzt abonnieren
</span>
<span class="flex leading-none items-center ml-8"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-s"/></svg>
</span>
</span>
</a>
</div>
</div>
</div>
</div>
<p class="font-sansUI text-shade-dark dark:text-shade-light text-s lg:mb-24 md:mb-24 sm:mb-16">
Sie haben bereits ein Print-Abo?
<a href="https://abo.spiegel.de/digital-abos/digital-upgrade/?requestAccessToken=true&sara_icid=disp_upd_f279DHAYuLrsP2laVCcCcBat56FWum&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" title="Hier klicken" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-s leading-normal" data-sara-link="gruppenkonto" data-sara-cta="secondary:upgrade">
Hier rabattiert Digital-Zugang bestellen
</a>
</p>
</div>
</fieldset>
</div>
</div>
<div class="relative clear-both" data-area="paywall" data-target-id="article-paywall-primary-sale-app" data-not-app-hidden data-sara-component="{&#34;name&#34;:&#34;article-paywall-primary-sale&#34;,&#34;title&#34;:&#34;Default Paywall&#34;,&#34;type&#34;:&#34;paywall&#34;}" data-has-spmetered-hidden>
<div class="shadow-sm lg:mx-24 md:mx-24 sm:mx-16">
<div class="bg-primary-base dark:bg-dm-primary-base text-center">
<div class="lg:pl-12 md:pl-4 sm:px-16 inline-block lg:h-80 md:h-80 sm:h-64 sm:pt-4 sm:pb-8 inline-flex items-center flex-wrap lg:w-8/12 md:w-10/12 sm:w-12/12 text-white dark:text-shade-lightest">
<span class="font-sansUI font-bold mr-8 shrink-0 mt-4">
Weiterlesen mit
</span>
<span class="shrink-0 leading-none"><svg width="102" height="18"><use xlink:href="#spon-spiegel-plus-paywall-mobile"/></svg>
<span class="sr-only">SPIEGEL+</span>
</span>
</div>
</div>
<div class="bg-white dark:bg-dm-shade-darkest border-solid border-shade-lighter border" data-target-hide>
<div class="sm:px-16 lg:w-8/12 md:w-10/12 mx-auto lg:my-32 md:my-32 sm:my-24 lg:pl-8 md:pl-4 pb-8" data-area="paywall-text">
<h3 class="font-brandUI lg:text-2xl md:text-2xl sm:text-xl leading-tight font-extrabold mb-16 sm:mb-8">Mehr Perspektiven, mehr verstehen.</h3>
<p class="font-sansUI text-base leading-normal lg:mb-2 md:mb-2 sm:mb-16">
Freier Zugang zu allen Artikeln, Videos, Audioinhalten und Podcasts
</p>
<div class="flex sm:flex-col justify-center items-center my-24">
<ul class="lg:w-7/12 md:w-7/12 sm:w-full lg:mr-24 md:mr-24 mb-24">
<li class="flex items-center mb-12">
<span class="mr-12 w-32 h-32 rounded-circle border border-solid border-shade-dark flex items-center justify-center shrink-0"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<p class="text-base font-sansUI leading-normal text-black dark:text-shade-lightest">Alle Artikel auf SPIEGEL.de frei zugänglich</p>
</li>
<li class="flex items-center mb-12">
<span class="mr-12 w-32 h-32 rounded-circle border border-solid border-shade-dark flex items-center justify-center shrink-0"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<p class="text-base font-sansUI leading-normal text-black dark:text-shade-lightest">DER SPIEGEL als E-Paper und in der App</p>
</li>
<li class="flex items-center mb-12">
<span class="mr-12 w-32 h-32 rounded-circle border border-solid border-shade-dark flex items-center justify-center shrink-0"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
<p class="text-base font-sansUI leading-normal text-black dark:text-shade-lightest">Alle Artikel zum Anhören und exklusive Podcasts</p>
</li>
<li class="flex items-center" x-data="{isLoading: true,defaultPrice: '€ 24,99',get appProduct() {return $store.AppProducts.getProduct({subscription: 'Spplus',});},init() {if (this.appProduct && !this.appProduct.isReady){$sendMessage('GetFormattedPrice', this.appProduct);window.setTimeout(() => { this.isLoading = false; }, 3000);return;}this.isLoading = false;},get text() {if (this.isLoading) {return 'Preis wird geladen...';}return `Nur ${this.appProduct?.formattedPrice ? this.appProduct.formattedPrice : this.defaultPrice} pro Monat, jederzeit kündbar`;},}" x-effect="if (appProduct?.isReady) isLoading = false">
<span class="mr-12 w-32 h-32 rounded-circle border-solid border-shade-dark flex items-center justify-center shrink-0" :class="{'border': !isLoading,}">
<span class="w-18 h-18 rounded-circle border-2 border-shade-base dark:border-shade-light animate-spin" style="border-top-color:transparent;" x-show="isLoading"></span>
<span class="leading-none" x-show="!isLoading" x-cloak><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
</span>
<p class="text-base font-sansUI leading-normal text-black dark:text-shade-lightest" x-html="text">
Preis wird geladen...
</p>
</li>
</ul>
<figure class="relative lg:w-5/12 md:w-5/12 sm:w-8/12 sm:order-first sm:mb-16">
<img class="lazyload" data-src="https://abo.spiegel.de/media/04/4f/51/1741343977/sp-Devices.webp?ts=1741786003" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 420 360' width='420' height='360' %3E%3C/svg%3E" width="420" height="360">
</figure>
</div>
<div>
<button title="Jetzt kaufen" class="mb-16 leading-normal font-bold bg-primary-base dark:bg-dm-primary-base inline-block border border-primary-base dark:border-dm-primary-base hover:border-primary-dark focus:border-primary-darker disabled:border-shade-lighter hover:bg-primary-dark focus:bg-primary-darker disabled:bg-shade-lighter dark:disabled:bg-shade-darker disabled:text-shade-dark dark:disabled:text-shade-light disabled:cursor-not-allowed text-white dark:text-shade-lightest font-sansUI pl-16 pr-12 py-12 text-s rounded" x-data @click="if ($appUtils.isApp) {$appBridge.triggerInAppPurchase({ product: 'Spplus' });$cooldown(1000);}" data-area="paywall-purchase-button" data-target-button data-sara-click-el="button" data-sara-cta="primary:subscription">
<span class="flex">
<span class="relative bottom-px">Jetzt kaufen</span>
<span class="flex leading-none items-center ml-8"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</span>
</button>
<p class="text-base font-sansUI leading-normal text-shade-dark dark:text-shade-light" data-logged-in-hidden>
Sie haben bereits ein Digital-Abonnement?
<button title="Hier anmelden" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-base leading-normal" x-data @click="if ($appUtils.isApp) {$appBridge.triggerLogin();$cooldown(1000);}" data-sara-link="gruppenkonto" data-sara-cta="secondary:login">
Hier anmelden
</button>
</p>
</div>
<div class="mt-24" data-not-ios-hidden>
<button class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-base leading-normal" x-data @click="if ($appUtils.isApp) {$appBridge.triggerRestorePurchases();$cooldown(1000);}" data-area="paywall-restore-button" data-sara-cta="”secondary:restore”">
iTunes-Abo wiederherstellen
</button>
<p class="mt-16 font-sansUI text-base text-shade-dark dark:text-shade-light">
SPIEGEL+ wird über Ihren iTunes-Account abgewickelt und mit Kaufbestätigung bezahlt. 24 Stunden vor Ablauf verlängert sich das Abo automatisch um
einen Monat zum Preis von zurzeit € 24,99. In den Einstellungen Ihres iTunes-Accounts können Sie das Abo jederzeit kündigen. Um SPIEGEL+ außerhalb
dieser App zu nutzen, müssen Sie das Abo direkt nach dem Kauf mit einem SPIEGEL-ID-Konto verknüpfen. Mit dem Kauf akzeptieren Sie unsere
<a href="https://www.spiegel.de/nutzungsbedingungen" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-base leading-normal">Allgemeinen Geschäftsbedingungen</a> und <a href="https://www.spiegel.de/datenschutz-spiegel" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-base leading-normal">Datenschutzerklärung</a>.
</p>
</div>
</div>
</div>
</div>
</div>
<aside class="relative clear-both lg:mx-24 md:mx-24 sm:mx-16" x-data="{articleId: '5c889858-7313-4254-9f4a-dc0d3ab8587a',title: 'Beispielloses Gletscherschmelzen: Diese Eisriesen zerrinnen',isLoading: false,isDisabled: false,isReady: false,get credits() {return $store.User.meteredStatus?.credits ?? 0;},get hasCredits() {return this.credits > 0;},get nextRefresh() {return $store.User.meteredStatus?.nextRefresh ? $dateUtils.formatDate($store.User.meteredStatus.nextRefresh) : '';},get saraComponent() {if (!this.isReady) {return null;}return JSON.stringify({name: this.hasCredits ? 'article-meterwall' : 'article-paywall-secondary-upsell',title: this.hasCredits ? 'Default metered - Unlock wall' : 'Default metered exhausted - Spplus upsell',type: 'paywall',});},get targetId() {if (!this.isReady || this.hasCredits) {return null;}return $appUtils.isApp ? 'paywall-secondary-upsell-app' : 'article-paywall-secondary-upsell-web';},init() {if ($store.User.meteredStatus?.isReady) {this.isReady = true;} else {$subscribe('USER_METERED_STATUS_UPDATED',this.onUserMeteredStatusUpdated,this);}},onUserMeteredStatusUpdated() {this.isReady = true;},async unlockDocument() {this.enterPendingState();try {await $meteredService.unlockDocument(this.articleId, this.title);this.resetState();window.location.reload(true);} catch (error) {$notificationService.addNotification({type: 'NOTIFICATION_TYPE_FAILURE',headline: 'Artikel freischalten',description: 'Der Artikel konnte nicht freigeschaltet werden',});this.resetState();}},enterPendingState() {this.isLoading = true;this.isDisabled = true;},resetState() {this.isLoading = false;$cooldown(2000, 'isDisabled');}}" data-area="paywall" :data-sara-component="saraComponent" :data-target-id="targetId" data-has-spmetered-visible>
<div class="relative min-h-280 bg-white dark:bg-dm-shade-darkest" :class="{ 'hidden': isReady }">
<div class="absolute flex h-full items-center justify-center w-full">
<div class="absolute w-100 h-100 left-6/12 top-6/12 -ml-64 -mt-59 origin-60 overflow-hidden mask-gradient-to-b animate-spin">
<div class="w-120 h-120 rounded-circle shadow-loader"></div>
</div>
<span class="text-primary-base dark:text-dm-primary-base"><svg id="spon-loader" class="fill-current" width="40" height="66" viewBox="0 0 24 30" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path class="fill-current" d="M20 29.4V13H6.3V5.4h7.2V10H20V3.4C20 1.5 18.4 0 16.5 0h-13C1.6 0 0 1.6 0 3.5v15h13.5v9H6.3v-6.1H0v8C0 31.3 1.6 33 3.5 33h13c1.9-.2 3.5-1.7 3.5-3.6z"/>
</svg>
</span>
</div>
</div>
<template x-if="isReady">
<div class="border border-solid border-shade-lighter dark:border-shade-dark shadow-sm bg-white dark:bg-dm-shade-darkest lg:w-8/12 md:w-10/12 sm:w-full mx-auto lg:py-40 md:py-40 sm:py-24 lg:px-24 md:px-24 sm:px-16 clear-both">
<div class="flex justify-between items-center mb-16 text-primary-base dark:text-dm-primary-base">
<span class="sr-only">SPIEGEL plus</span>
<span class="sm:hidden"><svg width="102" height="18"><use xlink:href="#spon-spiegel-plus-paywall-mobile"/></svg>
</span>
<span class="lg:hidden md:hidden"><svg width="91" height="15"><use xlink:href="#spon-spiegel-plus-mobile"/></svg>
</span>
<a href="https://gruppenkonto.spiegel.de/meinkonto/abonnements/artikel.html" @click.prevent="if ($appUtils.isApp) {$publish('TRIGGER_ACCOUNT', {&#34;path&#34;:&#34;/meinkonto/uebersicht.html&#34;});$cooldown(1000);} else {window.location.href = $el.href;}" title="Zu meinen Artikeln" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-s leading-normal">
Zu meinen Artikeln
</a>
</div>
<template x-if="hasCredits">
<div>
<div class="font-sansUI text-base text-black dark:text-shade-lightest leading-normal lg:mb-24 md:mb-24 sm:mb-16">
<div class="font-bold mb-8">
<span x-text="credits"></span> von 4 Artikeln verfügbar
</div>
In Ihrem SPIEGEL+ Starter-Abo stehen Ihnen bis <span x-text="nextRefresh"></span> Uhr noch <span x-text="credits"></span> Artikel zur Verfügung. Wollen Sie diesen Artikel freischalten?
</div>
<button class="inline-block bg-primary-base dark:bg-dm-primary-base border border-primary-base dark:border-dm-primary-base hover:border-primary-dark focus:border-primary-darker hover:bg-primary-dark focus:bg-primary-darker disabled:bg-shade-lighter disabled:text-shade-dark disabled:border-sec2-lightest disabled:cursor-not-allowed pl-16 pr-12 py-12 rounded" @click="unlockDocument" :disabled="isDisabled" title="Artikel freischalten" data-area="paywall-purchase-button" data-target-button data-sara-cta="primary:subscription-unlock-article">
<span class="flex text-s text-white font-sansUI leading-normal font-bold">
<span class="relative bottom-px">
Artikel freischalten
</span>
<span x-show="!isLoading" class="flex leading-none items-center ml-8"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-s"/></svg>
</span>
<span class="rounded-circle w-16 h-16 border-2 border-white animate-spin ml-4" style="border-top-color:transparent;" x-show="isLoading" x-cloak></span>
</span>
</button>
</div>
</template>
<template x-if="credits <= 0">
<div>
<div class="font-sansUI text-base text-black dark:text-shade-lightest leading-normal lg:mb-24 md:mb-24 sm:mb-16">
<div class="font-bold mb-8">
<span x-text="credits"></span> von 4 Artikeln verfügbar
</div>
<span x-show="nextRefresh">
Die nächsten 4 freien Artikel stehen Ihnen am <span x-text="nextRefresh"></span> Uhr zur Verfügung. Trotzdem weiterlesen? Jetzt zum Premium-Abo upgraden!
</span>
</div>
<h3 class="dark:text-shade-lightest flex font-brandUI font-extrabold items-center leading-tight text-2xl mb-12 text-black">
Premium-Abo
<span class="bg-opacity-slight bg-positive dark:text-white font-normal font-sansUI leading-normal ml-12 px-8 py-4 rounded text-black text-xs ml-16">
Exklusiv für Sie!
</span>
</h3>
<div class="font-sansUI text-black dark:text-shade-lightest mb-16">
<div class="font-bold text-base leading-loose mb-4">
€ 5,99 pro Woche
</div>
<div class="text-s">
Vierwöchentlich abgerechnet und kündbar.
</div>
</div>
<ul class="font-sansUI text-black dark:text-shade-lightest text-s mb-24">
<li class="flex min-h-18 mb-4">
<span class="mr-6 relative top-px"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
Starter-Abonnent:innen sparen bis zur nächsten Abrechnung.
</li>
<li class="flex min-h-18 mb-4">
<span class="mr-6 relative top-px"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
Alle Artikel auf SPIEGEL.de und App lesen
</li>
<li class="flex min-h-18 mb-4">
<span class="mr-6 relative top-px"><svg width="16" height="16"><use xlink:href="#spon-checkbox-f-m"/></svg>
</span>
Wöchentlich die digitale Ausgabe des SPIEGEL inkl. E-Paper (PDF), Digital-Archiv und S+-Newsletter
</li>
</ul>
<a title="Jetzt upgraden" class="lg:inline-block md:inline-block sm:block bg-primary-base dark:bg-dm-primary-base border border-primary-base dark:border-dm-primary-base hover:border-primary-dark focus:border-primary-darker hover:bg-primary-dark focus:bg-primary-darker px-24 py-12 rounded" href="https://abo.spiegel.de/microsites/pl/pl-starter-upg?requestAccessToken=true&sara_icid=disp_upd_8EsZDc0PF3UAlCWCIIQZW6TM5d0f30&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" data-area="paywall-purchase-button" data-target-button data-sara-cta="primary:subscription">
<span class="flex sm:justify-center text-base text-white font-sansUI leading-normal font-bold">
<span class="relative bottom-px">
Jetzt upgraden
</span>
<span class="flex leading-none items-center ml-8"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-s"/></svg>
</span>
</span>
</a>
</div>
</template>
</div>
</template>
</aside>
</div>
</div>
</div>
</section>
</div>
<footer data-area="article-footer">
<div class="border-separator-b h-px clear-both lg:w-8/12 md:w-10/12 lg:mx-auto md:mx-auto sm:mx-16"></div>
<div class="flex justify-between items-start lg:w-8/12 md:w-10/12 lg:px-24 md:px-24 sm:px-16 lg:pb-32 md:pb-32 sm:pb-24 mt-24 mx-auto">
<div class="flex items-center">
<a href="https://www.spiegel.de/" class="flex mr-8 text-black dark:text-shade-lightest" aria-label="Zur Startseite"><svg id="spon-home-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M4.5 10.5v9h6v-3a1 1 0 011-1h1a1 1 0 011 1v3h6v-9l-7.5-7-7.5 7z" class="stroke-current" stroke-width="1.1"/>
</svg>
</a>
<a class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-s" href="https://www.spiegel.de/">
Startseite
</a>
</div>
<button x-data @click="$publish('FEEDBACK_LAYER_OPEN_LAYER');" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-s" title="Feedback">
Feedback
</button>
</div>
</footer></article>
</main>
</div>
</div>
</div>
<div class="sm:bg-shade-lightest sm:dark:bg-black md:bg-shade-lightest md:dark:bg-black">
<div class="relative z-10 lg:bg-shade-lightest lg:dark:bg-black dark:text-shade-lightest w-full lg:px-6 mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg">
<div class="h-px -mb-px"></div>
<aside data-sara-component="{&#34;name&#34;:&#34;article-end&#34;,&#34;title&#34;:&#34;Outbrain Feed&#34;,&#34;type&#34;:&#34;recommendation&#34;}" class="overflow-x-hidden" x-data="{isInitialized: false,consentDisabled: false,consentGloballyDisabled: false,outbrainId: '',partnerKeyOutbrain: '',partnerKeysOutbrain: {&#34;androidMobile&#34;:&#34;DESPI13CHC08M35BM5P1M5HEB&#34;,&#34;androidTablet&#34;:&#34;DESPI2ML0D4D4DNMCCE09O2IA&#34;,&#34;iosMobile&#34;:&#34;DESPI1K04H7B0LJHONLQMQI4A&#34;,&#34;iosTablet&#34;:&#34;DESPI139BHM11JGONGOC4CFEL&#34;,&#34;noAdsAccess&#34;:&#34;DESPI6NIEG0EPH2F086DGOIC6&#34;},src: 'https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a',guaranteed: false,type: 'article_paid',noAds: true,widgetIDs: {&#34;default&#34;:[{&#34;ads&#34;:true,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:true,&#34;id&#34;:&#34;AR_8&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;AR_8&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:false,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;AR_10&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;AR_11&#34;,&#34;type&#34;:&#34;article_paid&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:true,&#34;id&#34;:&#34;VR_8&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;VR_8&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:false,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;VR_10&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;web&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;VR_11&#34;,&#34;type&#34;:&#34;video_paid&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:true,&#34;id&#34;:&#34;MB_8&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_8&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:false,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_10&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_11&#34;,&#34;type&#34;:&#34;article_paid&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:true,&#34;id&#34;:&#34;MB_12&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_12&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:false,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_14&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;ios&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_15&#34;,&#34;type&#34;:&#34;video_paid&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:true,&#34;id&#34;:&#34;MB_18&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_18&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:false,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_20&#34;,&#34;type&#34;:&#34;article&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_21&#34;,&#34;type&#34;:&#34;article_paid&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:true,&#34;id&#34;:&#34;MB_22&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_23&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:false,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_24&#34;,&#34;type&#34;:&#34;video&#34;},{&#34;ads&#34;:true,&#34;device&#34;:&#34;android&#34;,&#34;guaranteed&#34;:false,&#34;id&#34;:&#34;MB_25&#34;,&#34;type&#34;:&#34;video_paid&#34;}],&#34;noAdsAccess&#34;:[{&#34;device&#34;:&#34;web&#34;,&#34;id&#34;:&#34;AR_10&#34;},{&#34;device&#34;:&#34;ios&#34;,&#34;id&#34;:&#34;MB_10&#34;},{&#34;device&#34;:&#34;android&#34;,&#34;id&#34;:&#34;MB_20&#34;}]},CONSENT_INIT_TIMEOUT: 2000,async init() {await $waitForConsent();if (!this.noAds & this.consentGloballyDisabled) {this.noAds = true;const consentForSpecificPurpose = await new Promise((resolve) => {setTimeout(() => resolve(false), this.CONSENT_INIT_TIMEOUT);$waitForConsent([$tcfv2Purposes.store_and_access_information_on_a_device]).then(() => resolve(true)).catch(() => resolve(false));});this.noAds = !consentForSpecificPurpose;}if (this.isInitialized) {return;}this.determinePartnerKey();this.determineOutbrainId();if (this.outbrainId) {this.setTrackingReducedVersion();this.isInitialized = true;}},determinePartnerKey() {if ($store.User.hasNoAdsAccess) {this.partnerKeyOutbrain = this.partnerKeysOutbrain['noAdsAccess'];return;}if (!$appUtils.isApp || !($appUtils.isAndroidApp || $appUtils.isIOSApp)) {return;}const device = $userAgentUtils.isTablet ? 'Tablet' : 'Mobile';this.partnerKeyOutbrain = this.partnerKeysOutbrain[`${$appUtils.appCode}${device}`];},determineOutbrainId() {const device = $appUtils.isApp ? $appUtils.appCode : 'web';const widgetsToFilter = $store.User.hasNoAdsAccess ? this.widgetIDs.noAdsAccess : this.widgetIDs.default;const widgetIds = Array.from(widgetsToFilter).filter((config) => {return ((typeof config.ads === 'undefined' || config.ads === !this.noAds)&& (typeof config.guaranteed === 'undefined' || config.guaranteed === this.guaranteed)&& (typeof config.type === 'undefined' || config.type === this.type)&& config.device === device) ? config.id : null;});this.outbrainId = (widgetIds[0] && widgetIds[0].id) ? widgetIds[0].id : null;},setTrackingReducedVersion() {if (!this.consentDisabled) return;const key = 'OB_ContextKeyValue';const value = 'notracking';if (!window[key]) {window[key] = value;}},}">
<template x-if="isInitialized && !$store.User.hasNoAdsAccess && !$appUtils.isApp">
<div class="OUTBRAIN" :data-src="src" :data-widget-id="outbrainId"></div>
</template>
<template x-if="isInitialized && !$store.User.hasNoAdsAccess && $appUtils.isApp">
<div class="OUTBRAIN" :data-src="src" :data-widget-id="outbrainId" :data-ob-installation-key="partnerKeyOutbrain" :data-ob-user-id="$appBridge.advertisingId ? $appBridge.advertisingId : 'null'" :data-ob-app-ver="$appUtils.appVersionName ? $appUtils.appVersionName : ''"></div>
</template>
<template x-if="isInitialized && $store.User.hasNoAdsAccess && !$appUtils.isApp">
<div class="OUTBRAIN" :data-ob-contenturl="src" :data-widget-id="outbrainId" :data-ob-installation-key="partnerKeyOutbrain"></div>
</template>
<template x-if="isInitialized && $store.User.hasNoAdsAccess && $appUtils.isApp">
<div class="OUTBRAIN" :data-ob-contenturl="src" :data-widget-id="outbrainId" :data-ob-installation-key="partnerKeyOutbrain" :data-ob-user-id="$appBridge.advertisingId ? $appBridge.advertisingId : 'null'" :data-ob-app-ver="$appUtils.appVersionName ? $appUtils.appVersionName : ''"></div>
</template>
<template x-if="isInitialized">
<script defer src="//widgets.outbrain.com/outbrain.js"></script>
</template>
</aside>
<section data-outbrain="TopReads"></section>
<div class="lg:h-8 md:h-8 sm:h-4"></div>
<div class="iqdcontainer md:advertisement-filled:overflow-hidden sm:advertisement-filled:overflow-hidden relative z-10 lg:advertisement-filled:py-8 md:advertisement-filled:py-8 sm:advertisement-filled:py-4" data-placement="pos_footer" data-device="mobile" data-advertisement="pos_footer mobile pos_footer:mobile lg md sm" data-cls="352"></div>
<div class="iqdcontainer md:advertisement-filled:overflow-hidden sm:advertisement-filled:overflow-hidden relative z-10 lg:advertisement-filled:py-8 md:advertisement-filled:py-8 sm:advertisement-filled:py-4" data-placement="pos_footer" data-device="desktop" data-advertisement="pos_footer desktop pos_footer:desktop lg md sm"></div>
<div class="lg:h-8 md:h-8 sm:h-4"></div>
<footer class="relative z-10" data-area="footer">
<div class="shadow bg-shade-darkest pt-24 lg:pb-40 md:pb-32 sm:py-24 sm:mb-4 md:mb-4" data-app-article-issue-context-hidden>
<div class="flex justify-between lg:px-24 md:px-24 sm:px-16">
<span class="font-normal grow">
<a href="https://www.spiegel.de/games/" title="SPIEGEL Games" class="text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base block" target="_self">
<span class="flex items-center font-sansUI font-bold text-base">
<span>SPIEGEL Games</span>
<span class="ml-8 leading-none mt-px"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</span>
</a>
</span>
<a href="https://www.spiegel.de/games/" class="inline-block border-b border-shade-light text-white dark:text-shade-lightest hover:border-white focus:border-transparent font-sansUI font-normal text-s" target="_self">
Alle Games
</a>
</div>
<div class="relative" x-data x-swiper="{roundLengths: true,slidesPerView: 'auto',watchOverflow: false,}" x-lazyload>
<div class="polygon-swiper-button-prev absolute top-0 left-0 bottom-0 z-10 flex items-stretch focus:outline-none select-none text-black lg:hover:cursor-pointer">
<button class="bg-white flex items-center justify-around bg-white dark:bg-dm-shade-darkest text-black dark:text-shade-lightest border border-shade-base dark:border-shade-light hover:border-black dark:hover:border-white focus:bg-shade-lightest dark:focus:bg-black focus:border-black dark:focus:border-white rounded-circle cursor-pointer flex my-auto md:hidden sm:hidden w-32 h-32 ml-16 z-10" tabindex="-1" aria-hidden="true"><svg id="spon-chevron-left-l" class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-chevron-left-999efa40-cdd2-4dc5-97db-83030405363d">
        <g id="l-chevron-right-999efa40-cdd2-4dc5-97db-83030405363d">
            <path id="vector-999efa40-cdd2-4dc5-97db-83030405363d" d="M15 6l-6 6 6 6" stroke-width="1.3" stroke-linecap="round"/>
        </g>
    </g>
</svg>
</button>
<span class="absolute bg-gradient-to-r h-full left-0 w-28 from-shade-darkest"></span>
</div>
<div class="polygon-swiper overflow-hidden">
<div class="polygon-swiper-wrapper flex flex-nowrap">
<ul class="polygon-swiper-slide flex shrink-0 lg:p-24 md:p-24 sm:p-16">
<li class="polygon-swiper-slide shrink-0 lg:mr-32 md:mr-32 sm:mr-24">
<a href="https://www.spiegel.de/games/wordle-auf-deutsch-kostenlos-online-spielen-a-cbfa309d-a8ad-4d7d-9234-28b09b945834" title="Wordle" target="_self" class="flex flex-row gap-x-8 items-center">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_wordle_24.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' %3E%3C/svg%3E" width="24" height="24" alt="Öffnen Sie das Spiel Wordle">
<span class="text-s text-white font-bold dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base">
Wordle
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-32 md:mr-32 sm:mr-24">
<a href="https://www.spiegel.de/games/wortsuche-auf-deutsch-kostenlos-online-spielen-a-ee74d451-8ba7-4971-9624-00b858fbe671" title="Wortsuche" target="_self" class="flex flex-row gap-x-8 items-center">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_wortsuche_24.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' %3E%3C/svg%3E" width="24" height="24" alt="Öffnen Sie das Spiel Wortsuche">
<span class="text-s text-white font-bold dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base">
Wortsuche
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-32 md:mr-32 sm:mr-24">
<a href="https://www.spiegel.de/games/paarsuche-auf-deutsch-kostenlos-online-spielen-a-381cc67b-8016-4a82-b6b8-9a7066db7f83" title="Paarsuche" target="_self" class="flex flex-row gap-x-8 items-center">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_paarsuche_24.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' %3E%3C/svg%3E" width="24" height="24" alt="Öffnen Sie das Spiel Paarsuche">
<span class="text-s text-white font-bold dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base">
Paarsuche
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-32 md:mr-32 sm:mr-24">
<a href="https://www.spiegel.de/games/wabenraetsel-kostenlos-online-spielen-a-ec8e3bfc-d76b-48ac-a230-8b315a566ad6" title="Wabenrätsel" target="_self" class="flex flex-row gap-x-8 items-center">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_wabenraetsel_24.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' %3E%3C/svg%3E" width="24" height="24" alt="Öffnen Sie das Spiel Wabenrätsel">
<span class="text-s text-white font-bold dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base">
Wabenrätsel
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0">
<a href="https://www.spiegel.de/games/taegliches-quiz-beim-spiegel-7-fragen-zum-allgemeinwissen-pro-tag-a-8a9692b2-4462-4192-942c-fd7809c7519c" title="Das tägliche Quiz" target="_self" class="flex flex-row gap-x-8 items-center">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_quizdestages_24.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' %3E%3C/svg%3E" width="24" height="24" alt="Öffnen Sie das Spiel Das tägliche Quiz">
<span class="text-s text-white font-bold dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base">
Das tägliche Quiz
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="polygon-swiper-button-next absolute top-0 right-0 bottom-0 z-10 flex items-stretch focus:outline-none select-none text-black lg:hover:cursor-pointer">
<span class="absolute bg-gradient-to-l h-full right-0 w-28 from-shade-darkest"></span>
<button class="bg-white flex items-center justify-around bg-white dark:bg-dm-shade-darkest text-black dark:text-shade-lightest border border-shade-base dark:border-shade-light hover:border-black dark:hover:border-white focus:bg-shade-lightest dark:focus:bg-black focus:border-black dark:focus:border-white rounded-circle cursor-pointer flex my-auto md:hidden sm:hidden w-32 h-32 mr-16 z-10" tabindex="-1" aria-hidden="true"><svg id="spon-chevron-right-l" class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-chevron-right-1932c43f-2428-4f74-b727-499efb0755ec">
        <path id="vector-1932c43f-2428-4f74-b727-499efb0755ec" d="M9 6l6 6-6 6" stroke-width="1.3" stroke-linecap="round"/>
    </g>
</svg>
</button>
</div>
</div>
<div class="flex justify-between lg:px-24 md:px-24 sm:px-16 lg:mb-40 md:mb-32 sm:mb-24 mt-8">
<span class="font-normal grow">
<a href="https://spiele.spiegel.de" title="Spiele" class="text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base block" target="_self">
<span class="flex items-center font-sansUI font-bold text-base">
<span>Kostenlose Online-Spiele</span>
<span class="ml-8 leading-none mt-px"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</span>
</a>
</span>
<a href="https://spiele.spiegel.de" class="inline-block border-b border-shade-light text-white dark:text-shade-lightest hover:border-white focus:border-transparent font-sansUI font-normal text-s" target="_self">
mehr Spiele
</a>
</div>
<div class="relative lg:mx-24 md:mx-24 sm:mx-16 font-sansUI lg:mt-32 md:mt-32 sm:mt-24 text-white dark:text-shade-lightest" x-data x-swiper="{roundLengths: true,slidesPerView: 'auto',watchOverflow: false,}" x-lazyload>
<div class="polygon-swiper-button-prev absolute top-0 bottom-0 left-0 z-10 flex items-stretch focus:outline-none select-none">
<span class="md:hidden sm:hidden bg-shade-darkest text-center pr-8 -ml-8 cursor-pointer pt-32"><svg width="24" height="24"><use xlink:href="#spon-chevron-left-l"/></svg>
</span>
<span class="bg-gradient-to-r from-shade-darkest w-24"></span>
</div>
<div class="polygon-swiper grow overflow-hidden">
<ul class="polygon-swiper-wrapper flex flex-nowrap relative font-sansUI text-s font-bold text-center">
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/kreuzwortraetsel/?utm_campaign=kreuzwortraetsel&utm_medium=footer_rondell&utm_source=spiegel_de" title="Kreuzworträtsel" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_kreuzwortraetsel_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Kreuzworträtsel">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Kreuzworträt&shy;sel
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/solitaer/?utm_campaign=solitaer&utm_medium=footer_rondell&utm_source=spiegel_de" title="Solitär" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_solitaer_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Solitär">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Solitär
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/sudoku/?utm_campaign=sudoku&utm_medium=footer_rondell&utm_source=spiegel_de" title="Sudoku" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_sudoku_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Sudoku">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Sudoku
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/mahjong/?utm_campaign=mahjong&utm_medium=footer_rondell&utm_source=spiegel_de" title="Mahjong" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_mahjong_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Mahjong">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Mahjong
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/bubble-shooter/?utm_campaign=bubble-shooter&utm_medium=footer_rondell&utm_source=spiegel_de" title="Bubble-Shooter" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_bubble-shooter_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Bubble-Shooter">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Bubble-Shooter
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/jackpot-spiele/?utm_campaign=jackpot-spiele&utm_medium=footer_rondell&utm_source=spiegel_de" title="Jackpot" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_jackpot_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Jackpot">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Jackpot
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/snake/?utm_campaign=snake&utm_medium=footer_rondell&utm_source=spiegel_de" title="Snake" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_snake_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Snake">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Snake
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/exchange/?utm_campaign=exchange&utm_medium=footer_rondell&utm_source=spiegel_de" title="Exchange" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_exchange_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Exchange">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Exchange
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/2048/?utm_campaign=2048&utm_medium=footer_rondell&utm_source=spiegel_de" title="2048" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_2048_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel 2048">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
2048
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/doppel/?utm_campaign=doppel&utm_medium=footer_rondell&utm_source=spiegel_de" title="Doppel" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_doppel_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Doppel">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Doppel
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/rushtower/?utm_campaign=rushtower&utm_medium=footer_rondell&utm_source=spiegel_de" title="Rushtower" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_rushtower_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Rushtower">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Rushtower
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/sudoken/?utm_campaign=sudoken&utm_medium=footer_rondell&utm_source=spiegel_de" title="Sudoken" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_sudoken_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Sudoken">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Sudoken
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/street/?utm_campaign=street&utm_medium=footer_rondell&utm_source=spiegel_de" title="Street" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_street_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Street">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Street
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/wortblitz/?utm_campaign=wortblitz&utm_medium=footer_rondell&utm_source=spiegel_de" title="Wortblitz" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_wortblitz_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Wortblitz">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Wortblitz
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/fibonacci/?utm_campaign=fibonacci&utm_medium=footer_rondell&utm_source=spiegel_de" title="Fibonacci" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_fibonacci_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Fibonacci">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Fibonacci
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/shooter/?utm_campaign=shooter&utm_medium=footer_rondell&utm_source=spiegel_de" title="Gumblast" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_gumblast_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Gumblast">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Gumblast
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/wimmelbild/?utm_campaign=wimmelbild&utm_medium=footer_rondell&utm_source=spiegel_de" title="Wimmelbild" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_wimmelbild_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Wimmelbild">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Wimmelbild
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 lg:mr-24 md:mr-24 sm:mr-16">
<a href="https://spiele.spiegel.de/skiracer/?utm_campaign=skiracer&utm_medium=footer_rondell&utm_source=spiegel_de" title="Skiracer" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_skiracer_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Skiracer">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Skiracer
</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0">
<a href="https://www.spiegel.de/netzwelt/spiele/trivial-pursuit-auf-spiegel-online-was-wissen-sie-wirklich-von-der-welt-a-1292479.html" title="Trivial Pursuit" target="_self" class="relative block min-h-full text-black dark:text-shade-lightest flex flex-col items-center">
<span class="block overflow-hidden mb-8 w-88 h-88">
<img class="lazyload mx-auto" data-src="https://cdn.prod.www.spiegel.de/public/spon/images/games-icons/pic_trivial-pursuit_88.svg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 88 88' width='88' height='88' %3E%3C/svg%3E" width="88" height="88" alt="Öffnen Sie das Spiel Trivial Pursuit">
</span>
<span class="text-center text-white dark:text-shade-lightest hover:text-shade-lighter focus:text-shade-base w-88">
Trivial Pursuit
</span>
</a>
</li>
</ul>
</div>
<div class="polygon-swiper-button-next absolute top-0 right-0 bottom-0 z-10 flex items-stretch focus:outline-none select-none">
<span class="bg-gradient-to-l from-shade-darkest w-24"></span>
<span class="md:hidden sm:hidden bg-shade-darkest text-center pl-8 -mr-8 cursor-pointer pt-32"><svg width="24" height="24"><use xlink:href="#spon-chevron-right-l"/></svg>
</span>
</div>
</div>
</div>
<div class="shadow bg-shade-darkest lg:py-32 md:py-32 sm:pt-24 sm:pb-4">
<div class="lg:px-24 md:px-24 sm:px-16 lg:mb-24 md:mb-24 sm:mb-16">
<div class="text-white dark:text-shade-lightest font-sansUI font-bold text-base lg:mb-32 md:mb-32 sm:mb-24">
Serviceangebote von SPIEGEL-Partnern
</div>
</div>
<nav role="navigation" data-area="services" data-app-article-issue-context-hidden>
<div class="flex sm:flex-col lg:mb-40 md:mb-40 sm:mx-16">
<div class="lg:w-4/12 md:w-4/12 lg:px-24 md:px-24">
<section x-data="{ expanded: $store.MediaQuery.breakpoint !== 'sm' }" x-subscribe.media_query_breakpoint_changed="expanded = $store.MediaQuery.breakpoint !== 'sm'" x-lazyload>
<h3 class="flex sm:flex-col-reverse lg:items-center md:items-center lg:mb-24 md:mb-24 lg:pointer-events-none md:pointer-events-none">
<button class="sm:flex sm:justify-between text-white dark:text-shade-lightest font-brandUI font-extrabold text-l leading-tight sm:pt-18 sm:pb-16 outline-focus" @click="expanded = !expanded" :aria-expanded="expanded" role="button">
Auto
<span class="pr-8 lg:hidden md:hidden" x-show="expanded"><svg id="spon-chevron-up-f-s" class="stroke-current" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="s-chevron-up-f-3ad07f2b-eb68-40b1-832a-c15f7cfed943">
        <g id="s-chevron-right-f-3ad07f2b-eb68-40b1-832a-c15f7cfed943">
            <g id="s-chevron-right-3ad07f2b-eb68-40b1-832a-c15f7cfed943">
                <path id="vector-3ad07f2b-eb68-40b1-832a-c15f7cfed943" d="M2.667 7.667L6 4.333l3.333 3.334" stroke-width="1.5" stroke-linecap="round"/>
            </g>
        </g>
    </g>
</svg>
</span>
<span class="pr-8 lg:hidden md:hidden" x-show="!expanded" x-cloak><svg id="spon-chevron-down-f-s" class="stroke-current" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="s-chevron-down-f-b033603c-73f1-4097-88bd-b9756627181d">
        <g id="s-chevron-right-f-b033603c-73f1-4097-88bd-b9756627181d">
            <g id="s-chevron-right-b033603c-73f1-4097-88bd-b9756627181d">
                <path id="vector-b033603c-73f1-4097-88bd-b9756627181d" d="M9.333 4.333L6 7.667 2.667 4.333" stroke-width="1.5" stroke-linecap="round"/>
            </g>
        </g>
    </g>
</svg>
</span>
</button>
<div class="grow border-separator-light h-px lg:ml-8 md:ml-8 lg:mt-2 md:mt-2"></div>
</h3>
<div class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded">
<ul class="sm:mb-24 font-sansUI font-normal sm:mt-8">
<li>
<a href="https://www.spiegel.de/auto/aktuell/bussgeldrechner-was-zu-schnelles-fahren-kostet-a-244772.html" target="_self" title="Bußgeldrechner" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Bußgeldrechner</a>
</li>
<li>
<a href="https://www.spiegel.de/auto/aktuell/firmenwagenrechner-geldwerten-vorteil-und-steuern-berechnen-a-519713.html" target="_self" title="Firmenwagenrechner" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Firmenwagenrechner</a>
</li>
</ul>
</div>
</section>
</div>
<div class="lg:w-4/12 md:w-4/12 lg:px-24 md:px-24">
<section x-data="{ expanded: $store.MediaQuery.breakpoint !== 'sm' }" x-subscribe.media_query_breakpoint_changed="expanded = $store.MediaQuery.breakpoint !== 'sm'" x-lazyload>
<h3 class="flex sm:flex-col-reverse lg:items-center md:items-center lg:mb-24 md:mb-24 lg:pointer-events-none md:pointer-events-none">
<button class="sm:flex sm:justify-between text-white dark:text-shade-lightest font-brandUI font-extrabold text-l leading-tight sm:pt-18 sm:pb-16 outline-focus" @click="expanded = !expanded" :aria-expanded="expanded" role="button">
Job
<span class="pr-8 lg:hidden md:hidden" x-show="expanded"><svg width="12" height="12"><use xlink:href="#spon-chevron-up-f-s"/></svg>
</span>
<span class="pr-8 lg:hidden md:hidden" x-show="!expanded" x-cloak><svg width="12" height="12"><use xlink:href="#spon-chevron-down-f-s"/></svg>
</span>
</button>
<div class="grow border-separator-light h-px lg:ml-8 md:ml-8 lg:mt-2 md:mt-2"></div>
</h3>
<div class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded">
<ul class="sm:mb-24 font-sansUI font-normal sm:mt-8">
<li>
<a href="https://www.spiegel.de/wirtschaft/service/brutto-netto-rechner-was-von-lohn-und-gehalt-uebrig-bleibt-a-223811.html" target="_self" title="Brutto-Netto-Rechner" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Brutto-Netto-Rechner</a>
</li>
<li>
<a href="https://www.spiegel.de/wirtschaft/service/kurzarbeitergeld-rechner-so-viel-geld-gibt-es-in-der-kurzarbeit-a-8d856701-4951-4e34-a500-c3ac8ffcc717" target="_self" title="Kurzarbeitergeld-Rechner" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Kurzarbeitergeld-Rechner</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/studienfaecher-erklaert/" target="_self" title="Studienfächer erklärt" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Studienfächer erklärt</a>
</li>
</ul>
</div>
</section>
</div>
<div class="lg:w-4/12 md:w-4/12 lg:px-24 md:px-24">
<section x-data="{ expanded: $store.MediaQuery.breakpoint !== 'sm' }" x-subscribe.media_query_breakpoint_changed="expanded = $store.MediaQuery.breakpoint !== 'sm'" x-lazyload>
<h3 class="flex sm:flex-col-reverse lg:items-center md:items-center lg:mb-24 md:mb-24 lg:pointer-events-none md:pointer-events-none">
<button class="sm:flex sm:justify-between text-white dark:text-shade-lightest font-brandUI font-extrabold text-l leading-tight sm:pt-18 sm:pb-16 outline-focus" @click="expanded = !expanded" :aria-expanded="expanded" role="button">
Finanzen
<span class="pr-8 lg:hidden md:hidden" x-show="expanded"><svg width="12" height="12"><use xlink:href="#spon-chevron-up-f-s"/></svg>
</span>
<span class="pr-8 lg:hidden md:hidden" x-show="!expanded" x-cloak><svg width="12" height="12"><use xlink:href="#spon-chevron-down-f-s"/></svg>
</span>
</button>
<div class="grow border-separator-light h-px lg:ml-8 md:ml-8 lg:mt-2 md:mt-2"></div>
</h3>
<div class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded">
<ul class="sm:mb-24 font-sansUI font-normal sm:mt-8">
<li>
<a href="https://www.spiegel.de/wirtschaft/service/gehaltsrechner-gehoeren-sie-zu-den-oberen-zehn-prozent-a-f5a19d00-84b3-407f-aff2-bce27e8088cf" target="_self" title="Gehaltsvergleich" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Gehaltsvergleich</a>
</li>
<li>
<a href="https://www.spiegel.de/wirtschaft/service/versicherung-check-fuer-haftpflicht-hausrat-berufsunfaehigkeit-a-960380.html" target="_self" title="Versicherungen" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Versicherungen</a>
</li>
<li>
<a href="https://boersen.manager-magazin.de/spon/devisen_uebersicht.htn#rechner" target="_self" title="Währungsrechner" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Währungsrechner</a>
</li>
</ul>
</div>
</section>
</div>
</div>
<div class="flex sm:flex-col lg:mb-56 md:mb-32 sm:mx-16">
<div class="w-full lg:px-24 md:px-24">
<section x-data="{ expanded: $store.MediaQuery.breakpoint !== 'sm' }" x-subscribe.media_query_breakpoint_changed="expanded = $store.MediaQuery.breakpoint !== 'sm'" x-lazyload>
<h3 class="flex sm:flex-col-reverse lg:items-center md:items-center lg:mb-24 md:mb-24 lg:pointer-events-none md:pointer-events-none">
<button class="sm:flex sm:justify-between text-white dark:text-shade-lightest font-brandUI font-extrabold text-l leading-tight sm:pt-18 sm:pb-16 outline-focus" @click="expanded = !expanded" :aria-expanded="expanded" role="button">
Freizeit
<span class="pr-8 lg:hidden md:hidden" x-show="expanded"><svg width="12" height="12"><use xlink:href="#spon-chevron-up-f-s"/></svg>
</span>
<span class="pr-8 lg:hidden md:hidden" x-show="!expanded" x-cloak><svg width="12" height="12"><use xlink:href="#spon-chevron-down-f-s"/></svg>
</span>
</button>
<div class="grow border-separator-light h-px lg:ml-8 md:ml-8 lg:mt-2 md:mt-2"></div>
</h3>
<div class="flex overflow-hidden sm:flex-col" x-show="expanded" :aria-hidden="!expanded">
<div class="lg:w-4/12 md:w-4/12">
<ul class="font-sansUI font-normal sm:mt-8">
<li>
<a href="https://www.amazon.de/stores/page/9A033B74-B98E-4CE4-BB30-C47BD542801B?_encoding=UTF8&camp=1638&creative=6742&linkCode=ur2&linkId=ddec9c715dda90b1e0d431bb3abc5d3c&tag=wwwspiegelde-21" target="_self" title="Bücher bestellen" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Bücher bestellen</a>
</li>
<li>
<a href="https://ad3.adfarm1.adition.com/redi?bid=10752058&kid=3485247&sid=4117394" target="_self" title="Eurojackpot" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Eurojackpot</a>
</li>
<li>
<a href="https://ad3.adfarm1.adition.com/redi?bid=10752059&kid=3485249&sid=4117394" target="_self" title="GlücksSpirale" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">GlücksSpirale</a>
</li>
</ul>
</div>
<div class="lg:w-4/12 md:w-4/12">
<ul class="font-sansUI font-normal">
<li>
<a href="https://ad3.adfarm1.adition.com/redi?bid=10752060&kid=3485248&sid=4117394" target="_self" title="LOTTO 6aus49" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">LOTTO 6aus49</a>
</li>
<li>
<a href="https://seniorenportal.spiegel.de/" target="_self" title="Seniorenportal" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Seniorenportal</a>
</li>
<li>
<a href="https://spiele.spiegel.de/?utm_campaign=startseite&utm_medium=footer_navigation&utm_source=spiegel_de" target="_self" title="Spiele" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Spiele</a>
</li>
</ul>
</div>
<div class="lg:w-4/12 md:w-4/12">
<ul class="font-sansUI font-normal sm:mb-24">
<li>
<a href="https://streaming-guide.spiegel.de/" target="_self" title="Streaming Guide" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Streaming Guide</a>
</li>
<li>
<a href="https://www.spiegel.de/panorama/taegliches-quiz-beim-spiegel-7-fragen-zum-allgemeinwissen-pro-tag-a-8a9692b2-4462-4192-942c-fd7809c7519c" target="_self" title="Das tägliche Quiz" class="block text-shade-light hover:text-shade-lightest focus:text-white text-s sm:pb-8 outline-focus">Das tägliche Quiz</a>
</li>
</ul>
</div>
</div>
</section>
</div>
</nav>
<div class="bg-black lg:py-40 md:py-32 sm:py-24 sm:mt-8" data-area="magazine-slider" data-app-article-issue-context-hidden>
<div class="text-white dark:text-shade-lightest font-brandUI font-extrabold text-l leading-tight lg:text-center md:text-center sm:text-left">
<div class="text-white dark:text-shade-lightest font-brandUI font-extrabold text-l leading-tight lg:text-center md:text-center sm:px-16">
Alle Magazine des SPIEGEL
</div>
<div class="relative lg:mx-24 md:mx-24 sm:mx-16 font-sansUI lg:mt-32 md:mt-32 sm:mt-24" x-data x-swiper="{roundLengths: true,slidesPerView: 'auto',watchOverflow: false,}" x-lazyload>
<div class="polygon-swiper-button-prev absolute top-0 bottom-0 left-0 z-10 flex items-stretch focus:outline-none select-none">
<span class="md:hidden sm:hidden bg-black text-center pr-8 -ml-8 cursor-pointer pt-80"><svg width="24" height="24"><use xlink:href="#spon-chevron-left-l"/></svg>
</span>
<span class="bg-gradient-to-r from-black w-24"></span>
</div>
<div class="polygon-swiper grow overflow-hidden">
<ul class="polygon-swiper-wrapper flex flex-nowrap relative font-sansUI text-s font-bold text-center">
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/print/index-2025.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="DER SPIEGEL" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 181' width='136' height='181' %3E%3C/svg%3E" data-src="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SP/-1/-1/136" data-srcset="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SP/-1/-1/136 1x, https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SP/-1/-1/272 2x" width="136" height="181" alt="Cover: DER SPIEGEL">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">DER SPIEGEL</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/spiegelgeschichte/index-2025.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="SPIEGEL GESCHICHTE" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 181' width='136' height='181' %3E%3C/svg%3E" data-src="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPGE/-1/-1/136" data-srcset="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPGE/-1/-1/136 1x, https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPGE/-1/-1/272 2x" width="136" height="181" alt="Cover: SPIEGEL GESCHICHTE">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">SPIEGEL GESCHICHTE</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/print/index-2025-54.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="SPIEGEL SPEZIAL" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 181' width='136' height='181' %3E%3C/svg%3E" data-src="https://cdn.prod.www.spiegel.de/images/0dce4bbb-f2c0-4f4f-a09a-e8ab2def5fd2_w136_r0.75_fpx50_fpy52.52.jpg" data-srcset="https://cdn.prod.www.spiegel.de/images/0dce4bbb-f2c0-4f4f-a09a-e8ab2def5fd2_w136_r0.75_fpx50_fpy52.52.jpg 1x, https://cdn.prod.www.spiegel.de/images/0dce4bbb-f2c0-4f4f-a09a-e8ab2def5fd2_w272_r0.75_fpx50_fpy52.52.jpg 2x" width="136" height="181" alt="Cover: SPIEGEL SPEZIAL">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">SPIEGEL SPEZIAL</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.amazon.de/dp/B0DS5CRSZ6?tag=spiegel1-21" target="_blank" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="SPIEGEL COACHING" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 181' width='136' height='181' %3E%3C/svg%3E" data-src="https://cdn.prod.www.spiegel.de/images/e37344a9-8126-4082-9c0f-d5167f3654f4_w136_r0.75_fpx50_fpy52.52.jpg" data-srcset="https://cdn.prod.www.spiegel.de/images/e37344a9-8126-4082-9c0f-d5167f3654f4_w136_r0.75_fpx50_fpy52.52.jpg 1x, https://cdn.prod.www.spiegel.de/images/e37344a9-8126-4082-9c0f-d5167f3654f4_w272_r0.75_fpx50_fpy52.52.jpg 2x" width="136" height="181" alt="Cover: SPIEGEL COACHING">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">SPIEGEL COACHING</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/deinspiegel/index-2025.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="DEIN SPIEGEL" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 175' width='136' height='175' %3E%3C/svg%3E" data-src="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/DEIN/-1/-1/136" data-srcset="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/DEIN/-1/-1/136 1x, https://cdn.magazin.spiegel.de/EpubDelivery/image/title/DEIN/-1/-1/272 2x" width="136" height="175" alt="Cover: DEIN SPIEGEL">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">DEIN SPIEGEL</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/spjc/index-2024-1.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="SPIEGEL CHRONIK" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 181' width='136' height='181' %3E%3C/svg%3E" data-src="https://cdn.prod.www.spiegel.de/images/03826a3e-1734-4bb8-85c6-82ff31da8d2d_w136_r0.75_fpx50_fpy60.jpg" data-srcset="https://cdn.prod.www.spiegel.de/images/03826a3e-1734-4bb8-85c6-82ff31da8d2d_w136_r0.75_fpx50_fpy60.jpg 1x, https://cdn.prod.www.spiegel.de/images/03826a3e-1734-4bb8-85c6-82ff31da8d2d_w272_r0.75_fpx50_fpy60.jpg 2x" width="136" height="181" alt="Cover: SPIEGEL CHRONIK">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">SPIEGEL CHRONIK</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/spsm/index-2024.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="S-Magazin" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 198' width='136' height='198' %3E%3C/svg%3E" data-src="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPSM/-1/-1/136" data-srcset="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPSM/-1/-1/136 1x, https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPSM/-1/-1/272 2x" width="136" height="198" alt="Cover: S-Magazin">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">S-Magazin</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/spbest/index-2024.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="SPIEGEL BESTSELLER" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 181' width='136' height='181' %3E%3C/svg%3E" data-src="https://cdn.prod.www.spiegel.de/images/de7bbbb9-21bc-416a-b0fe-740dfb047529_w136_r0.75_fpx44.98_fpy41.78.jpg" data-srcset="https://cdn.prod.www.spiegel.de/images/de7bbbb9-21bc-416a-b0fe-740dfb047529_w136_r0.75_fpx44.98_fpy41.78.jpg 1x, https://cdn.prod.www.spiegel.de/images/de7bbbb9-21bc-416a-b0fe-740dfb047529_w272_r0.75_fpx44.98_fpy41.78.jpg 2x" width="136" height="181" alt="Cover: SPIEGEL BESTSELLER">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">SPIEGEL BESTSELLER</span>
</a>
</li>
<li class="polygon-swiper-slide shrink-0 leading-normal sm:mr-16 md:mr-32 lg:mr-32">
<a href="https://www.spiegel.de/spiegel/spiegelwissen/index-2024.html" target="_self" class="block min-h-full text-black dark:text-shade-lightest lg:w-136 md:w-136 sm:w-120" title="SPIEGEL WISSEN" style="outline-offset: -3px;">
<span class="block lg:h-180 md:h-180 sm:h-160 mb-8">
<img class="block lazyload lg:max-h-180 md:max-h-180 sm:max-h-160 mx-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 136 181' width='136' height='181' %3E%3C/svg%3E" data-src="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPWI/-1/-1/136" data-srcset="https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPWI/-1/-1/136 1x, https://cdn.magazin.spiegel.de/EpubDelivery/image/title/SPWI/-1/-1/272 2x" width="136" height="181" alt="Cover: SPIEGEL WISSEN">
</span>
<span class="focus:text-shade-base hover:text-shade-lighter text-white dark:text-shade-lightest">SPIEGEL WISSEN</span>
</a>
</li>
</ul>
</div>
<div class="polygon-swiper-button-next absolute top-0 right-0 bottom-0 z-10 flex items-stretch focus:outline-none select-none">
<span class="bg-gradient-to-l from-black w-24"></span>
<span class="md:hidden sm:hidden bg-black text-center pl-8 -mr-8 cursor-pointer pt-80"><svg width="24" height="24"><use xlink:href="#spon-chevron-right-l"/></svg>
</span>
</div>
</div>
</div>
</div>
<nav role="navigation" class="lg:pt-40 md:pt-32 sm:pt-32 lg:px-24 md:px-24 sm:px-16" data-area="spiegel-group" data-app-article-issue-context-hidden>
<h2 class="text-white dark:text-shade-lightest font-brandUI font-extrabold text-l leading-tight md:text-center lg:text-center mb-16">
SPIEGEL Gruppe
</h2>
<ul class="font-normal font-sansUI lg:text-center md:text-center">
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://abo.spiegel.de/?b=SPOHFOOTER&utm_campaign=abbinder&utm_content=SPOHFOOTER&utm_medium=text&utm_source=spon" target="_blank" title="Abo" class="text-shade-light text-s hover:text-shade-lightest focus:text-white" data-app-hidden>Abo</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://gruppenkonto.spiegel.de/kuendigung.html" target="_blank" title="Abo kündigen" class="text-shade-light text-s hover:text-shade-lightest focus:text-white" data-app-hidden>Abo kündigen</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://www.amazon.de/stores/page/9A033B74-B98E-4CE4-BB30-C47BD542801B?_encoding=UTF8&camp=1638&creative=6742&linkCode=ur2&linkId=ddec9c715dda90b1e0d431bb3abc5d3c&tag=wwwspiegelde-21" target="_blank" title="Shop" class="text-shade-light text-s hover:text-shade-lightest focus:text-white">Shop</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://www.manager-magazin.de/" target="_blank" title="manager magazin" class="text-shade-light text-s hover:text-shade-lightest focus:text-white" data-app-hidden>manager magazin</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://www.manager-magazin.de/hbm/" target="_blank" title="Harvard Business manager" class="text-shade-light text-s hover:text-shade-lightest focus:text-white" data-app-hidden>Harvard Business manager</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://www.11freunde.de" target="_blank" title="11FREUNDE" class="text-shade-light text-s hover:text-shade-lightest focus:text-white" data-app-hidden>11FREUNDE</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://spiegel.media/" target="_blank" title="Werbung" class="text-shade-light text-s hover:text-shade-lightest focus:text-white">Werbung</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://www.spiegelgruppe.de/karriere/stellenboerse-in-der-spiegel-gruppe" target="_blank" title="Jobs" class="text-shade-light text-s hover:text-shade-lightest focus:text-white">Jobs</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://manufaktur.spiegel.de/" target="_blank" title="MANUFAKTUR" class="text-shade-light text-s hover:text-shade-lightest focus:text-white">MANUFAKTUR</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://akademie.spiegel.de/" target="_blank" title="SPIEGEL Akademie" class="text-shade-light text-s hover:text-shade-lightest focus:text-white">SPIEGEL Akademie</a>
</li>
<li class="inline-block pr-8 sm:pr-16 sm:pb-18">
<a href="https://ed.spiegel.de" target="_blank" title="SPIEGEL Ed" class="text-shade-light text-s hover:text-shade-lightest focus:text-white">SPIEGEL Ed</a>
</li>
</ul>
</nav>
<div class="border-separator-light h-px my-24 lg:mx-24 md:mx-24 sm:mx-16" data-app-article-issue-context-hidden data-is-first-child-hidden></div>
<nav role="navigation" class="lg:px-24 md:px-24 sm:px-16" data-area="more-links">
<ul class="lg:text-center md:text-center font-sansUI font-normal">
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegel.de/impressum" target="_self" title="Impressum" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Impressum</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegel.de/datenschutz-spiegel" target="_self" title="Datenschutz" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Datenschutz</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegel.de/nutzungsbedingungen" target="_self" title="Nutzungsbedingungen" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Nutzungsbedingungen</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegel.de/teilnahmebedingungen" target="_self" title="Teilnahmebedingungen" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Teilnahmebedingungen</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="#sp_privacy_manager" target="_self" title="Cookies & Tracking" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Cookies & Tracking</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegel.de/newsletter" target="_self" title="Newsletter" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Newsletter</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegel.de/kontakt" target="_self" title="Kontakt" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Kontakt</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegel.de/services/" target="_self" title="Hilfe & Service" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Hilfe & Service</a>
</li>
<li class="inline-block pr-16 sm:pb-18">
<a href="https://www.spiegelgruppe.de/syndication" target="_blank" title="Text- & Nutzungsrechte" class="text-s text-shade-light hover:text-shade-lightest focus:text-white">Text- & Nutzungsrechte</a>
</li>
</ul>
<ul class="flex lg:justify-center md:justify-center sm:justify-start lg:text-center md:text-center sm:flex-wrap lg:mt-12 md:mt-12" data-app-article-issue-context-hidden>
<li class="lg:px-12 md:px-12 sm:pr-24 sm:pb-18">
<a href="https://www.facebook.com/DerSpiegel/" target="_blank" title="Facebook" class="flex items-center text-s font-sansUI font-normal text-shade-light hover:text-shade-lightest focus:text-white"><svg width="24" height="24"><use xlink:href="#spon-facebook-l"/></svg>
<span class="ml-8 text-left">Facebook</span>
</a>
</li>
<li class="lg:px-12 md:px-12 sm:pr-24 sm:pb-18">
<a href="https://www.instagram.com/spiegelmagazin/" target="_blank" title="Instagram" class="flex items-center text-s font-sansUI font-normal text-shade-light hover:text-shade-lightest focus:text-white"><svg id="spon-instagram-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <rect x="9" y="9" width="6" height="6" rx="3" class="stroke-current"/>
    <rect x="4.5" y="4.5" width="15" height="15" rx="3.5" class="stroke-current"/>
    <rect x="15.5" y="6.5" width="2" height="2" rx="1" class="fill-current"/>
</svg>
<span class="ml-8 text-left">Instagram</span>
</a>
</li>
<li class="lg:px-12 md:px-12 sm:pr-24 sm:pb-18">
<a href="https://www.spiegel.de/backstage/bei-diesen-diensten-koennen-sie-dem-spiegel-folgen-a-a68cce85-8be8-4707-bd6e-0706090cbbbe" target="_self" title="Wo Sie uns noch folgen können" class="flex items-center text-s font-sansUI font-normal text-shade-light hover:text-shade-lightest focus:text-white"><svg id="spon-website-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <circle cx="12" cy="11.984" r="8.65" class="stroke-current" stroke-width=".7"/>
    <path class="stroke-current" stroke-width=".7" d="M3 11.634h18M12.069 2.984v18M17.05 11.984c0 2.433-.592 4.619-1.532 6.184-.943 1.573-2.198 2.466-3.518 2.466-1.32 0-2.575-.893-3.518-2.466-.94-1.565-1.532-3.75-1.532-6.184 0-2.432.592-4.618 1.532-6.184C9.425 4.228 10.68 3.334 12 3.334c1.32 0 2.575.894 3.518 2.466.94 1.566 1.532 3.752 1.532 6.184z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M19.163 17.434c-1.644-1.295-4.24-2.13-7.163-2.13-2.922 0-5.52.835-7.163 2.13.141.185.29.365.445.54a7.03 7.03 0 01.714-.489C7.5 16.584 9.62 16.003 12 16.003c2.38 0 4.501.58 6.004 1.482.26.156.498.32.714.488.155-.174.304-.354.445-.54zM12 7.684c-2.38 0-4.501-.58-6.004-1.481-.2-.12-.388-.245-.562-.374-.16.17-.314.348-.46.53C6.624 7.594 9.158 8.384 12 8.384c2.842 0 5.377-.79 7.026-2.025-.146-.182-.3-.36-.46-.53a7.227 7.227 0 01-.562.374C16.5 7.104 14.38 7.684 12 7.684z" class="fill-current"/>
</svg>
<span class="ml-8 text-left">
Wo Sie uns noch folgen können
</span>
</a>
</li>
</ul>
</nav>
<div style="height: var(--polygon-app-bottombar-height, 0px)"></div>
</div>
</footer>
</div>
</div>
<script>if (typeof(Event) === 'function') {window.dispatchEvent(new Event('POLYGON_DOM_FOOTER_READY'));}</script>
<div data-area="menu-drawer" x-cloak x-app-ignore aria-hidden="true" :aria-hidden="!isOpen" x-data="{isOpen: false,lastActiveElement: null,initialX: null,initialY: null,onTouchStart: (event) => {$data.initialX = event.touches[0].clientX;$data.initialY = event.touches[0].clientY;},onTouchMove: (event) => {if ($data.initialX === null || $data.initialY === null) {return;}const currentX = event.touches[0].clientX;const currentY = event.touches[0].clientY;const diffX = $data.initialX - currentX;const diffY = $data.initialY - currentY;const tolerance = 5;const yTolerance = (diffY > -Math.abs(tolerance)) && (diffY < Math.abs(tolerance));if (Math.abs(diffX) > Math.abs(diffY)) {$data.isOpen = !(diffX > 0 && yTolerance);}$data.initialX = null;$data.initialY = null;},}" x-subscribe.open_menu_drawer="isOpen = true;" @keyup.escape="if (!$event.defaultPrevented && isOpen) { $event.preventDefault(); isOpen = false; }" @touchstart.passive="onTouchStart($event)" @touchmove.passive="onTouchMove($event)">
<div class="z-overlay w-full h-full top-0 left-0 bg-shade-darkest dark:bg-shade-darker opacity-slight" :class="isOpen ? 'fixed' : ''" @click="isOpen = false">
</div>
<div class="fixed h-screen left-0 top-0 w-12 z-max" @touchstart.passive="onTouchStart($event)" @touchmove.passive="onTouchMove($event)">
</div>
<nav role="navigation" class="h-full bg-white dark:bg-dm-shade-darkest scrolling-touch py-24 fixed z-overlay top-0 left-0 overflow-y-scroll overflow-x-hidden lg:w-320 md:w-320 sm:w-10/12 sm:max-w-320 shadow" x-show="isOpen" x-transition:enter="transition-transform duration-300" x-transition:enter-start="-translate-x-320" x-transition:leave="transition-transform duration-300" x-transition:leave-end="-translate-x-320">
<a class="absolute opacity-none pointer-events-none" aria-hidden="true" tabindex="-1" x-effect="if (isOpen) { lastActiveElement = document.activeElement; $focus(); } else if (lastActiveElement) { $focus(lastActiveElement) }" role="none"></a>
<ul>
<li class="mb-24 mx-16" data-logged-in-hidden="true" data-app-hidden>
<a href="https://gruppenkonto.spiegel.de/authenticate?requestAccessToken=true&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" class="inline-flex items-center font-bold font-sansUI rounded bg-primary-base dark:bg-dm-primary-base text-white dark:text-shade-lightest hover:bg-primary-dark focus:bg-primary-darker px-24 min-h-46 w-full justify-center gap-12" title="Anmelden" data-sara-link="gruppenkonto" target="_self">
<span data-label class="text-base leading-18">Anmelden</span>
<span class="leading-none"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</a>
</li>
<li class="mb-24 mx-16" data-app-hidden>
<a href="https://abo.spiegel.de/?b=SPOHNAVABO&requestAccessToken=true&sara_icid=disp_upd_OW52zVhCrwBZY4SALRHeiHnQixLYzj&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" class="inline-flex items-center font-bold font-sansUI rounded
bg-white hover:border-black border border-shade-base text-black focus:border-black focus:bg-shade-lightest dark:bg-dm-shade-darkest dark:text-shade-lightest dark:focus:border-white dark:border-shade-light dark:hover:border-white dark:focus:bg-black px-24 min-h-46 w-full justify-center gap-12" title="Abonnement" target="_blank">
<span data-label class="text-base leading-18">Abonnement</span>
<span class="leading-none"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</a>
</li>
<li class="mb-32 mx-16">
<form action="https://www.spiegel.de/suche/" role="search" class="relative">
<div class="inline-flex flex-col w-full">
<div class="group relative flex flex-col">
<input id="search-menu-field" name="suchbegriff" placeholder="spiegel.de durchsuchen ..." x-ref="input" class="peer appearance-none rounded placeholder-shade-base dark:disabled:placeholder-shade-dark outline-focus disabled:cursor-not-allowed pl-12 pr-48 py-12 font-sansUI leading-normal text-black dark:text-shade-lightest text-base bg-white dark:bg-shade-darkest dark:disabled:bg-dm-shade-darkest read-only:bg-shade-lightest dark:read-only:bg-black border border-shade-base hover:border-black disabled:border-shade-lighter read-only:border-shade-lighter dark:read-only:border-shade-dark dark:border-shade-light dark:hover:border-shade-lightest dark:disabled:border-shade-dark autofill:transition-colors autofill:duration-max">
<span class="absolute top-0 bottom-0 right-0 pr-12 pointer-events-none flex items-center text-shade-darker dark:text-shade-lightest group-hover:text-shade-darkest dark:group-hover:text-shade-lightest peer-disabled:text-shade-base dark:peer-disabled:text-shade-dark" data-input-el="icon"><svg width="24" height="24"><use xlink:href="#spon-search-l"/></svg>
</span>
</div>
</div>
<button class="absolute top-0 right-0 bottom-0 w-48" title="Suche starten" data-sara-click-el="button">
<span class="sr-only">Suche starten</span>
</button>
</form>
</li>
<li>
<a href="https://www.spiegel.de/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Startseite">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Startseite</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/schlagzeilen/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Schlagzeilen">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Schlagzeilen</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/eklat-im-weissen-haus-zwischen-trump-und-selenskyj/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="US-Ukraine-Eklat">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">US-Ukraine-Eklat</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/nahostkonflikt/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Nahostkonflikt">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Nahostkonflikt</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/bundestagswahl-2025/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Bundestagswahl">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Bundestagswahl</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/ukraine_konflikt/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Ukrainekrieg">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Ukrainekrieg</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/newsletter" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Newsletter">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Newsletter</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/debatten/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Debatte">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Debatte</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/extra" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="SPIEGEL Extra">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">SPIEGEL Extra</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/games/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Games und Quiz">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Games und Quiz</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li class="mb-16 mt-32">
<a href="https://www.spiegel.de/plus/" class="bg-primary-base dark:bg-dm-primary-base focus:bg-primary-darker font-bold font-sansUI hover:bg-primary-dark inline-block leading-normal py-16 pl-16 pr-20 text-base text-white dark:text-shade-lightest w-full" target="_self" title="SPIEGEL+">
<span class="flex justify-between">
<span class="relative bottom-px">SPIEGEL+</span>
<span class="flex leading-none items-center ml-12"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</span>
</a>
</li>
<li class="mb-16 mt-32">
<a href="https://www.spiegel.de/magazine" class="bg-primary-base dark:bg-dm-primary-base focus:bg-primary-darker font-bold font-sansUI hover:bg-primary-dark inline-block leading-normal py-16 pl-16 pr-20 text-base text-white dark:text-shade-lightest w-full" target="_self" title="Magazine">
<span class="flex justify-between">
<span class="relative bottom-px">Magazine</span>
<span class="flex leading-none items-center ml-12"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/meinung/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Meinung">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Meinung</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/politik/deutschland/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Politik" target="_self">
<span class="block font-sansUI font-bold py-16">Politik</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg id="spon-chevron-up-f-m" class="stroke-current" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="m-chevron-up-f-7f672e01-ee4e-4db6-8586-0935c128be27">
        <g id="m-chevron-right-f-7f672e01-ee4e-4db6-8586-0935c128be27">
            <g id="m-chevron-right-7f672e01-ee4e-4db6-8586-0935c128be27">
                <path id="vector-7f672e01-ee4e-4db6-8586-0935c128be27" d="M4 10l4-4 4 4" stroke-width="1.8" stroke-linecap="round"/>
            </g>
        </g>
    </g>
</svg>
</span>
<span class="leading-none" x-show="!expanded"><svg id="spon-chevron-down-f-m" class="stroke-current" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="m-chevron-down-f-6fb55861-d921-4700-8849-a8af7469ef9e">
        <g id="m-chevron-right-f-6fb55861-d921-4700-8849-a8af7469ef9e">
            <g id="m-chevron-right-6fb55861-d921-4700-8849-a8af7469ef9e">
                <path id="vector-6fb55861-d921-4700-8849-a8af7469ef9e" d="M12 6l-4 4-4-4" stroke-width="1.8" stroke-linecap="round"/>
            </g>
        </g>
    </g>
</svg>
</span>
</span>
<span class="sr-only">Menü Politik aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/thema/bundesregierung/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Bundesregierung">
<span class="block font-sansUI font-normal py-12 px-32">Bundesregierung</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/thema/bundestag/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Bundestag">
<span class="block font-sansUI font-normal py-12 px-32">Bundestag</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/ausland/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Ausland" target="_self">
<span class="block font-sansUI font-bold py-16">Ausland</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Ausland aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/thema/usa/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="USA">
<span class="block font-sansUI font-normal py-12 px-32">USA</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/europa/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Europa">
<span class="block font-sansUI font-normal py-12 px-32">Europa</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/nahost/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Nahost">
<span class="block font-sansUI font-normal py-12 px-32">Nahost</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/globale_gesellschaft/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Globale Gesellschaft">
<span class="block font-sansUI font-normal py-12 px-32">Globale Gesellschaft</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/asien/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Asien">
<span class="block font-sansUI font-normal py-12 px-32">Asien</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/thema/afrika/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Afrika">
<span class="block font-sansUI font-normal py-12 px-32">Afrika</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/panorama/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Panorama" target="_self">
<span class="block font-sansUI font-bold py-16">Panorama</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Panorama aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/panorama/justiz/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Justiz & Kriminalität">
<span class="block font-sansUI font-normal py-12 px-32">Justiz & Kriminalität</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/panorama/leute/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Leute">
<span class="block font-sansUI font-normal py-12 px-32">Leute</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/panorama/gesellschaft/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Gesellschaft">
<span class="block font-sansUI font-normal py-12 px-32">Gesellschaft</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/panorama/bildung/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Bildung">
<span class="block font-sansUI font-normal py-12 px-32">Bildung</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/sport/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Sport" target="_self">
<span class="block font-sansUI font-bold py-16">Sport</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Sport aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://sportdaten.spiegel.de/fussball/bundesliga/ergebnisse-und-tabelle/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Ergebnisse & Tabellen">
<span class="block font-sansUI font-normal py-12 px-32">Ergebnisse & Tabellen</span>
</a>
</li>
<li>
<a href="https://sportdaten.spiegel.de/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Liveticker">
<span class="block font-sansUI font-normal py-12 px-32">Liveticker</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/sport/fussball/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Fußball">
<span class="block font-sansUI font-normal py-12 px-32">Fußball</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/fussball_bundesliga/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Bundesliga">
<span class="block font-sansUI font-normal py-12 px-32">Bundesliga</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/champions_league/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Champions League">
<span class="block font-sansUI font-normal py-12 px-32">Champions League</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/sport/formel1/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Formel 1">
<span class="block font-sansUI font-normal py-12 px-32">Formel 1</span>
</a>
</li>
<li>
<a href="https://sportdaten.spiegel.de/formel-1/kalender/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Formel 1 – Liveticker, Kalender, WM-Stand">
<span class="block font-sansUI font-normal py-12 px-32">Formel 1 – Liveticker, Kalender, WM-Stand</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/sport/wintersport/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Wintersport">
<span class="block font-sansUI font-normal py-12 px-32">Wintersport</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/wirtschaft/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Wirtschaft" target="_blank">
<span class="block font-sansUI font-bold py-16">Wirtschaft</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Wirtschaft aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://boersen.manager-magazin.de/spon/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="Börse">
<span class="block font-sansUI font-normal py-12 px-32">Börse</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wirtschaft/service/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Verbraucher & Service">
<span class="block font-sansUI font-normal py-12 px-32">Verbraucher & Service</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wirtschaft/service/das-abc-der-versicherungen-a-7cf4cd3d-218c-424a-9066-6a89b7b32639" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Versicherungen">
<span class="block font-sansUI font-normal py-12 px-32">Versicherungen</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wirtschaft/unternehmen/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Unternehmen & Märkte">
<span class="block font-sansUI font-normal py-12 px-32">Unternehmen & Märkte</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wirtschaft/soziales/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Staat & Soziales">
<span class="block font-sansUI font-normal py-12 px-32">Staat & Soziales</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/wirtschaft/service/brutto-netto-rechner-was-von-lohn-und-gehalt-uebrig-bleibt-a-223811.html" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Brutto-Netto-Rechner">
<span class="block font-sansUI font-normal py-12 px-32">Brutto-Netto-Rechner</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/wissenschaft/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-primary-base dark:text-dm-primary-base" title="Wissenschaft" target="_self">
<span class="block font-sansUI font-bold py-16">Wissenschaft</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Wissenschaft aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/thema/klimawandel/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Klimakrise">
<span class="block font-sansUI font-normal py-12 px-32">Klimakrise</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wissenschaft/mensch/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Mensch">
<span class="block font-sansUI font-normal py-12 px-32">Mensch</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wissenschaft/natur/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Natur">
<span class="block font-sansUI font-normal py-12 px-32">Natur</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wissenschaft/technik/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Technik">
<span class="block font-sansUI font-normal py-12 px-32">Technik</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/wissenschaft/weltall/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Weltall">
<span class="block font-sansUI font-normal py-12 px-32">Weltall</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/wissenschaft/medizin/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Medizin">
<span class="block font-sansUI font-normal py-12 px-32">Medizin</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/netzwelt/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Netzwelt" target="_self">
<span class="block font-sansUI font-bold py-16">Netzwelt</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Netzwelt aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/netzwelt/netzpolitik/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Netzpolitik">
<span class="block font-sansUI font-normal py-12 px-32">Netzpolitik</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/netzwelt/web/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Web">
<span class="block font-sansUI font-normal py-12 px-32">Web</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/netzwelt/gadgets/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Gadgets">
<span class="block font-sansUI font-normal py-12 px-32">Gadgets</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/netzwelt/games/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Games">
<span class="block font-sansUI font-normal py-12 px-32">Games</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/netzwelt/apps/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Apps">
<span class="block font-sansUI font-normal py-12 px-32">Apps</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/kultur/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Kultur" target="_self">
<span class="block font-sansUI font-bold py-16">Kultur</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Kultur aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/kultur/kino/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Kino">
<span class="block font-sansUI font-normal py-12 px-32">Kino</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/kultur/musik/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Musik">
<span class="block font-sansUI font-normal py-12 px-32">Musik</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/kultur/tv/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="TV">
<span class="block font-sansUI font-normal py-12 px-32">TV</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/kultur/literatur/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Literatur">
<span class="block font-sansUI font-normal py-12 px-32">Literatur</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/kultur/bestseller-buecher-belletristik-sachbuch-auf-spiegel-liste-a-458623.html" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="SPIEGEL-Bestseller">
<span class="block font-sansUI font-normal py-12 px-32">SPIEGEL-Bestseller</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/thema/leben/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Leben" target="_self">
<span class="block font-sansUI font-bold py-16">Leben</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Leben aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/reise/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Reise">
<span class="block font-sansUI font-normal py-12 px-32">Reise</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/stil/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Stil">
<span class="block font-sansUI font-normal py-12 px-32">Stil</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/gesundheit/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Gesundheit">
<span class="block font-sansUI font-normal py-12 px-32">Gesundheit</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/familie/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Familie">
<span class="block font-sansUI font-normal py-12 px-32">Familie</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/psychologie/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Psychologie">
<span class="block font-sansUI font-normal py-12 px-32">Psychologie</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/thema/spiegel_wissen_coaching/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="SPIEGEL Coaching">
<span class="block font-sansUI font-normal py-12 px-32">SPIEGEL Coaching</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li>
<a href="https://www.spiegel.de/thema/reporter/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Reporter">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Reporter</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/daten-und-visualisierungen/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Daten & Visualisierungen">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Daten & Visualisierungen</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/karriere/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Job & Karriere">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Job & Karriere</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/start/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Start">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Start</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/geschichte/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Geschichte" target="_self">
<span class="block font-sansUI font-bold py-16">Geschichte</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Geschichte aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/thema/zeitzeugen/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Zeitzeugen">
<span class="block font-sansUI font-normal py-12 px-32">Zeitzeugen</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/erster_weltkrieg/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Erster Weltkrieg">
<span class="block font-sansUI font-normal py-12 px-32">Erster Weltkrieg</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/zweiter_weltkrieg/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Zweiter Weltkrieg">
<span class="block font-sansUI font-normal py-12 px-32">Zweiter Weltkrieg</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/ddr/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="DDR">
<span class="block font-sansUI font-normal py-12 px-32">DDR</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/thema/film/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Film">
<span class="block font-sansUI font-normal py-12 px-32">Film</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/auto/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Mobilität" target="_self">
<span class="block font-sansUI font-bold py-16">Mobilität</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Mobilität aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/auto/fahrberichte/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Fahrberichte">
<span class="block font-sansUI font-normal py-12 px-32">Fahrberichte</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/auto/fahrkultur/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Fahrkultur">
<span class="block font-sansUI font-normal py-12 px-32">Fahrkultur</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li>
<a href="https://www.spiegel.de/international/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="SPIEGEL in English">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">SPIEGEL in English</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/deinspiegel/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="DEIN SPIEGEL">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">DEIN SPIEGEL</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/audio/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Audio">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Audio</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/video/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Video">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Video</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/spiegel-events/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="SPIEGEL-Events">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">SPIEGEL-Events</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/tests/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Tests" target="_self">
<span class="block font-sansUI font-bold py-16">Tests</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Tests aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/tests/elektronik/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Elektronik">
<span class="block font-sansUI font-normal py-12 px-32">Elektronik</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/tests/haushalt/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Haushalt">
<span class="block font-sansUI font-normal py-12 px-32">Haushalt</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/tests/fahrrad-zubehoer/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Fahrrad & Zubehör">
<span class="block font-sansUI font-normal py-12 px-32">Fahrrad & Zubehör</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/tests/kueche/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Küche">
<span class="block font-sansUI font-normal py-12 px-32">Küche</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/tests/camping/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Camping">
<span class="block font-sansUI font-normal py-12 px-32">Camping</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/tests/garten/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Garten">
<span class="block font-sansUI font-normal py-12 px-32">Garten</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/tests/auto-zubehoer/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Auto-Zubehör">
<span class="block font-sansUI font-normal py-12 px-32">Auto-Zubehör</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/tests/brettspiele/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Brettspiele">
<span class="block font-sansUI font-normal py-12 px-32">Brettspiele</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li>
<a href="https://www.spiegel.de/kultur/bestseller-buecher-belletristik-sachbuch-auf-spiegel-liste-a-458623.html" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Bestseller">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Bestseller</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/backstage/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Backstage">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Backstage</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/index-a/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Themen">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Themen</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/thema/abovorteile/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Vorteile mit S+">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Vorteile mit S+</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li class="bg-shade-lightest dark:bg-black mt-16" x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="block border-separator-b h-px"></span>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/thema/marktplatz/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Marktplatz">
<span class="flex items-center justify-between">
<span class="block font-sansUI font-bold py-16">Marktplatz</span>
<span class="block text-shade-dark dark:text-shade-light uppercase font-sansUI font-normal mr-16 text-xs">Anzeige</span>
</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus" @click="expanded = !expanded">
<span class="flex items-center py-16 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Marktplatz aufklappen</span>
</button>
</span>
<ul class="bg-shade-lightest dark:bg-black overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li class="pt-8 pb-20">
<a href="https://seniorenportal.spiegel.de/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Seniorenportal">
<span class="block font-sansUI font-normal py-12 px-32">Seniorenportal</span>
</a>
</li>
</ul>
</li>
<li class="bg-shade-lightest dark:bg-black" x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="block border-separator-b h-px"></span>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://ad3.adfarm1.adition.com/redi?bid=10752033&kid=3485173&sid=4117394" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Lotto">
<span class="flex items-center justify-between">
<span class="block font-sansUI font-bold py-16">Lotto</span>
<span class="block text-shade-dark dark:text-shade-light uppercase font-sansUI font-normal mr-16 text-xs">Anzeige</span>
</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus" @click="expanded = !expanded">
<span class="flex items-center py-16 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Lotto aufklappen</span>
</button>
</span>
<ul class="bg-shade-lightest dark:bg-black overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li class="pt-8">
<a href="https://ad3.adfarm1.adition.com/redi?bid=10752055&kid=3485174&sid=4117394" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Eurojackpot">
<span class="block font-sansUI font-normal py-12 px-32">Eurojackpot</span>
</a>
</li>
<li>
<a href="https://ad3.adfarm1.adition.com/redi?bid=10752057&kid=3485211&sid=4117394" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="LOTTO 6aus49">
<span class="block font-sansUI font-normal py-12 px-32">LOTTO 6aus49</span>
</a>
</li>
<li class="pb-20">
<a href="https://ad3.adfarm1.adition.com/redi?bid=10752056&kid=3485212&sid=4117394" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="GlücksSpirale">
<span class="block font-sansUI font-normal py-12 px-32">GlücksSpirale</span>
</a>
</li>
</ul>
</li>
<li class="bg-shade-lightest dark:bg-black" x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="block border-separator-b h-px"></span>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://streaming-guide.spiegel.de/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Streaming Guide">
<span class="flex items-center justify-between">
<span class="block font-sansUI font-bold py-16">Streaming Guide</span>
<span class="block text-shade-dark dark:text-shade-light uppercase font-sansUI font-normal mr-16 text-xs">Anzeige</span>
</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus" @click="expanded = !expanded">
<span class="flex items-center py-16 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Streaming Guide aufklappen</span>
</button>
</span>
<ul class="bg-shade-lightest dark:bg-black overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li class="pt-8">
<a href="https://streaming-guide.spiegel.de/streamingdienste/amazon-prime-video/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Amazon Prime Video">
<span class="block font-sansUI font-normal py-12 px-32">Amazon Prime Video</span>
</a>
</li>
<li>
<a href="https://streaming-guide.spiegel.de/streamingdienste/apple-tv-plus/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Apple TV +">
<span class="block font-sansUI font-normal py-12 px-32">Apple TV +</span>
</a>
</li>
<li>
<a href="https://streaming-guide.spiegel.de/streamingdienste/disney-plus/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Disney+">
<span class="block font-sansUI font-normal py-12 px-32">Disney+</span>
</a>
</li>
<li>
<a href="https://streaming-guide.spiegel.de/streamingdienste/magenta-tv/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="MagentaTV">
<span class="block font-sansUI font-normal py-12 px-32">MagentaTV</span>
</a>
</li>
<li>
<a href="https://streaming-guide.spiegel.de/streamingdienste/netflix/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Netflix">
<span class="block font-sansUI font-normal py-12 px-32">Netflix</span>
</a>
</li>
<li>
<a href="https://streaming-guide.spiegel.de/streamingdienste/paramount-plus/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Paramount+">
<span class="block font-sansUI font-normal py-12 px-32">Paramount+</span>
</a>
</li>
<li>
<a href="https://streaming-guide.spiegel.de/streamingdienste/joyn/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="JOYN">
<span class="block font-sansUI font-normal py-12 px-32">JOYN</span>
</a>
</li>
<li>
<a href="https://streaming-guide.spiegel.de/streamingdienste/wow/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="WOW">
<span class="block font-sansUI font-normal py-12 px-32">WOW</span>
</a>
</li>
<li class="pb-20">
<a href="https://streaming-guide.spiegel.de/streamingdienste/pluto-tv/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Pluto TV">
<span class="block font-sansUI font-normal py-12 px-32">Pluto TV</span>
</a>
</li>
</ul>
</li>
<li class="bg-shade-lightest dark:bg-black" x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="block border-separator-b h-px"></span>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://spiele.spiegel.de/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Spiele">
<span class="flex items-center justify-between">
<span class="block font-sansUI font-bold py-16">Spiele</span>
<span class="block text-shade-dark dark:text-shade-light uppercase font-sansUI font-normal mr-16 text-xs">Verlagsangebot</span>
</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus" @click="expanded = !expanded">
<span class="flex items-center py-16 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Spiele aufklappen</span>
</button>
</span>
<ul class="bg-shade-lightest dark:bg-black overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li class="pt-8">
<a href="https://www.spiegel.de/panorama/taegliches-quiz-beim-spiegel-7-fragen-zum-allgemeinwissen-pro-tag-a-8a9692b2-4462-4192-942c-fd7809c7519c" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Das tägliche Quiz">
<span class="block font-sansUI font-normal py-12 px-32">Das tägliche Quiz</span>
</a>
</li>
<li>
<a href="https://spiele.spiegel.de/kreuzwortraetsel/?utm_campaign=kreuzwortraetsel&utm_medium=navigation_link&utm_source=spiegel_de" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Kreuzworträtsel">
<span class="block font-sansUI font-normal py-12 px-32">Kreuzworträtsel</span>
</a>
</li>
<li>
<a href="https://spiele.spiegel.de/solitaer/?utm_campaign=solitaer&utm_medium=navigation_link&utm_source=spiegel_de" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Solitär">
<span class="block font-sansUI font-normal py-12 px-32">Solitär</span>
</a>
</li>
<li>
<a href="https://spiele.spiegel.de/sudoku/?utm_campaign=sudoku&utm_medium=navigation_link&utm_source=spiegel_de" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Sudoku">
<span class="block font-sansUI font-normal py-12 px-32">Sudoku</span>
</a>
</li>
<li>
<a href="https://spiele.spiegel.de/mahjong/?utm_campaign=mahjong&utm_medium=navigation_link&utm_source=spiegel_de" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Mahjong">
<span class="block font-sansUI font-normal py-12 px-32">Mahjong</span>
</a>
</li>
<li>
<a href="https://spiele.spiegel.de/snake/?utm_campaign=snake&utm_medium=navigation_link&utm_source=spiegel_de" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Snake">
<span class="block font-sansUI font-normal py-12 px-32">Snake</span>
</a>
</li>
<li class="pb-20">
<a href="https://spiele.spiegel.de/jackpot-spiele/?utm_campaign=jackpot&utm_medium=navigation_link&utm_source=spiegel_de" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Jackpot">
<span class="block font-sansUI font-normal py-12 px-32">Jackpot</span>
</a>
</li>
</ul>
</li>
<li class="bg-shade-lightest dark:bg-black mb-16" x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="block border-separator-b h-px"></span>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://kaufradar.spiegel.de/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Kaufradar">
<span class="flex items-center justify-between">
<span class="block font-sansUI font-bold py-16">Kaufradar</span>
<span class="block text-shade-dark dark:text-shade-light uppercase font-sansUI font-normal mr-16 text-xs">Anzeige</span>
</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus" @click="expanded = !expanded">
<span class="flex items-center py-16 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Kaufradar aufklappen</span>
</button>
</span>
<ul class="bg-shade-lightest dark:bg-black overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li class="pt-8">
<a href="https://kaufradar.spiegel.de/auto-fahrrad/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Auto & Fahrrad">
<span class="block font-sansUI font-normal py-12 px-32">Auto & Fahrrad</span>
</a>
</li>
<li>
<a href="https://kaufradar.spiegel.de/technik-elektronik/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Technik & Elektronik">
<span class="block font-sansUI font-normal py-12 px-32">Technik & Elektronik</span>
</a>
</li>
<li>
<a href="https://kaufradar.spiegel.de/finanzen-versicherungen/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Finanzen & Versicherungen">
<span class="block font-sansUI font-normal py-12 px-32">Finanzen & Versicherungen</span>
</a>
</li>
<li>
<a href="https://kaufradar.spiegel.de/leben/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Leben">
<span class="block font-sansUI font-normal py-12 px-32">Leben</span>
</a>
</li>
<li>
<a href="https://kaufradar.spiegel.de/freizeit-reise/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Freizeit & Reise">
<span class="block font-sansUI font-normal py-12 px-32">Freizeit & Reise</span>
</a>
</li>
<li>
<a href="https://kaufradar.spiegel.de/haus-garten/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Haus & Garten">
<span class="block font-sansUI font-normal py-12 px-32">Haus & Garten</span>
</a>
</li>
<li>
<a href="https://kaufradar.spiegel.de/energiesysteme/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Energiesysteme">
<span class="block font-sansUI font-normal py-12 px-32">Energiesysteme</span>
</a>
</li>
<li>
<a href="https://kaufradar.spiegel.de/haushalt-kueche/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Haushalt & Küche">
<span class="block font-sansUI font-normal py-12 px-32">Haushalt & Küche</span>
</a>
</li>
<li class="pb-20">
<a href="https://kaufradar.spiegel.de/tarife/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Tarife">
<span class="block font-sansUI font-normal py-12 px-32">Tarife</span>
</a>
</li>
</ul>
<span class="block border-separator-b h-px"></span>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/spiegel/print/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="SPIEGEL-Heft" target="_self">
<span class="block font-sansUI font-bold py-16">SPIEGEL-Heft</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü SPIEGEL-Heft aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/spiegel/print/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Heftarchiv">
<span class="block font-sansUI font-normal py-12 px-32">Heftarchiv</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.amazon.de/stores/page/9A033B74-B98E-4CE4-BB30-C47BD542801B?_encoding=UTF8&camp=1638&creative=6742&linkCode=ur2&linkId=ddec9c715dda90b1e0d431bb3abc5d3c&tag=spiegelverlag-21" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="Shop">
<span class="block font-sansUI font-normal py-12 px-32">Shop</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/magazine" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Alle Magazine" target="_self">
<span class="block font-sansUI font-bold py-16">Alle Magazine</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Alle Magazine aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/spiegel/spiegelwissen/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="SPIEGEL WISSEN">
<span class="block font-sansUI font-normal py-12 px-32">SPIEGEL WISSEN</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/spiegel/deinspiegel/" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="DEIN SPIEGEL">
<span class="block font-sansUI font-normal py-12 px-32">DEIN SPIEGEL</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/spiegel/spiegelgeschichte" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="SPIEGEL GESCHICHTE">
<span class="block font-sansUI font-normal py-12 px-32">SPIEGEL GESCHICHTE</span>
</a>
</li>
<li>
<a href="https://www.amazon.de/stores/page/5A51BB7A-F093-490A-A88B-0B8DAD2BD31F?_encoding=UTF8&camp=1638&creative=6742&linkCode=ur2&linkId=bebfea2a767e9b6fa4032067aac689c6&tag=wwwspiegelde-21" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="SPIEGEL EDITION">
<span class="block font-sansUI font-normal py-12 px-32">SPIEGEL EDITION</span>
</a>
</li>
<li>
<a href="https://www.amazon.de/dp/B084H7TJ2J?_encoding=UTF8&camp=1638&creative=6742&linkCode=ur2&linkId=2b0869ebe8a71aa295f61f936c59ae13&tag=wwwspiegelde-21" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="SPIEGEL LESEZEICHEN">
<span class="block font-sansUI font-normal py-12 px-32">SPIEGEL LESEZEICHEN</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.amazon.de/stores/page/7A4C6628-433D-4F60-9E2A-2559D87EBE96?_encoding=UTF8&camp=1638&creative=6742&ingress=3&linkCode=ur2&linkId=e7aab828241dc9c24162f8f4af873651&tag=spiegel200-21&visitId=6c8f0a76-9d4a-4e47-94ca-0f6231dcaf22" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="SPIEGEL COACHING">
<span class="block font-sansUI font-normal py-12 px-32">SPIEGEL COACHING</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li>
<a href="https://tv.spiegel.de" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_blank" title="SPIEGEL TV">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">SPIEGEL TV</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/dienste/besser-surfen-auf-spiegel-online-so-funktioniert-rss-a-1040321.html" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="RSS-Feed">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">RSS-Feed</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://gruppe.spiegel.de/spiegel-media" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="SPIEGEL Media" target="_blank">
<span class="block font-sansUI font-bold py-16">SPIEGEL Media</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü SPIEGEL Media aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://manufaktur.spiegel.de" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="MANUFAKTUR">
<span class="block font-sansUI font-normal py-12 px-32">MANUFAKTUR</span>
</a>
</li>
<li>
<a href="https://gruppe.spiegel.de/spiegel-media/bereiche/affiliate-und-integrations" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="Affiliate & Integrations">
<span class="block font-sansUI font-normal py-12 px-32">Affiliate & Integrations</span>
</a>
</li>
<li class="mb-20">
<a href="https://gruppe.spiegel.de/spiegel-media/bereiche/media-products" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_blank" title="Media Products">
<span class="block font-sansUI font-normal py-12 px-32">Media Products</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li>
<a href="https://ed.spiegel.de/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_blank" title="SPIEGEL Ed">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">SPIEGEL Ed</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<a href="https://akademie.spiegel.de/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_blank" title="SPIEGEL Akademie">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">SPIEGEL Akademie</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li x-data="{ expanded: false }" :aria-expanded="expanded" x-lazyload>
<span class="flex justify-between items-center pl-16 cursor-pointer">
<a href="https://www.spiegel.de/services/" class="grow text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" title="Services" target="_self">
<span class="block font-sansUI font-bold py-16">Services</span>
</a>
<span class="block border-separator-r h-24 w-px"></span>
<button class="text-shade-light dark:text-shade-dark text-base outline-focus hover:text-primary-dark focus:text-primary-darker active:text-primary-darker" @click="expanded = !expanded">
<span class="flex items-center py-18 px-20 h-56 w-56">
<span class="leading-none" x-show="expanded" x-cloak><svg width="16" height="16"><use xlink:href="#spon-chevron-up-f-m"/></svg>
</span>
<span class="leading-none" x-show="!expanded"><svg width="16" height="16"><use xlink:href="#spon-chevron-down-f-m"/></svg>
</span>
</span>
<span class="sr-only">Menü Services aufklappen</span>
</button>
</span>
<ul class="overflow-hidden" x-show="expanded" :aria-hidden="!expanded" x-cloak>
<li>
<a href="https://www.spiegel.de/auto/aktuell/bussgeldrechner-was-zu-schnelles-fahren-kostet-a-244772.html" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Bußgeldrechner">
<span class="block font-sansUI font-normal py-12 px-32">Bußgeldrechner</span>
</a>
</li>
<li>
<a href="https://www.spiegel.de/lebenundlernen/uni/studium-tipps-und-hilfe-fuer-uni-und-studentenleben-a-640620.html" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Uni-Tools">
<span class="block font-sansUI font-normal py-12 px-32">Uni-Tools</span>
</a>
</li>
<li>
<a href="https://boersen.manager-magazin.de/spon/devisen_uebersicht.htn#rechner" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Währungsrechner">
<span class="block font-sansUI font-normal py-12 px-32">Währungsrechner</span>
</a>
</li>
<li class="mb-20">
<a href="https://www.spiegel.de/wirtschaft/service/versicherung-check-fuer-haftpflicht-hausrat-berufsunfaehigkeit-a-960380.html" class="text-base hover:text-primary-dark focus:text-primary-darker active:text-primary-darker outline-focus text-black dark:text-shade-lightest" target="_self" title="Versicherungen">
<span class="block font-sansUI font-normal py-12 px-32">Versicherungen</span>
</a>
</li>
</ul>
</li>
<li>
<span class="block border-separator-b h-px"></span>
</li>
<li>
<a href="https://www.spiegel.de/nachrichtenarchiv/" class="group flex justify-between items-center pl-16 cursor-pointer text-base group-hover:text-primary-dark group-focus:text-primary-darker group-active:text-primary-darker text-black dark:text-shade-lightest" target="_self" title="Nachrichtenarchiv">
<span class="grow">
<span class="block font-sansUI font-bold py-16 group-active:text-primary-darker group-hover:text-primary-dark group-focus:text-primary-darker">Nachrichtenarchiv</span>
</span>
<span class="text-shade-light dark:text-shade-dark text-base group-hover:text-primary-dark group-active:text-primary-darker group-focus:text-primary-darker">
<span class="flex items-center py-18 px-20 leading-none"><svg width="16" height="16"><use xlink:href="#spon-chevron-right-f-m"/></svg>
</span>
</span>
</a>
</li>
<li class="my-16">
<span class="block border-separator-b h-px mx-16"></span>
</li>
<li class="pl-2">
<a href="https://www.facebook.com/DerSpiegel/" rel="nofollow" class="text-black dark:text-shade-lightest text-base hover:text-primary-dark focus:text-primary-darker" target="_blank" title="Facebook">
<span class="flex justify-start items-center py-16 pl-8 pr-16">
<span class="flex items-center"><svg width="24" height="24"><use xlink:href="#spon-facebook-l"/></svg>
</span>
<span class="block font-sansUI ml-16">Facebook</span>
</span>
</a>
</li>
<li class="pl-2">
<a href="https://www.instagram.com/spiegelmagazin/" rel="nofollow" class="text-black dark:text-shade-lightest text-base hover:text-primary-dark focus:text-primary-darker" target="_blank" title="Instagram">
<span class="flex justify-start items-center py-16 pl-8 pr-16">
<span class="flex items-center"><svg width="24" height="24"><use xlink:href="#spon-instagram-l"/></svg>
</span>
<span class="block font-sansUI ml-16">Instagram</span>
</span>
</a>
</li>
<li class="pl-2">
<a href="https://www.spiegel.de/backstage/bei-diesen-diensten-koennen-sie-dem-spiegel-folgen-a-a68cce85-8be8-4707-bd6e-0706090cbbbe" class="text-black dark:text-shade-lightest text-base hover:text-primary-dark focus:text-primary-darker" target="_self" title="Wo Sie uns noch folgen können">
<span class="flex justify-start items-center py-16 pl-8 pr-16">
<span class="flex items-center"><svg width="24" height="24"><use xlink:href="#spon-website-l"/></svg>
</span>
<span class="block font-sansUI ml-16">
Wo Sie uns noch folgen können
</span>
</span>
</a>
</li>
</ul>
</nav>
</div>
<template x-data="{isPlayerAttached: $store.WebAudio.isClipFromLocalStorage,onClipChanged() {this.isPlayerAttached = this.isPlayerAttached || !!$store.WebAudio.clip;}}" x-init="$watch('$store.WebAudio.clip', () => onClipChanged())" x-if="isPlayerAttached">
<div x-data="{isInitialized: false,isExpanded: false,get canOpen() {return this.isInitialized || $store.WebAudio.isClipFromLocalStorage;},get isOpen() {return !!$store.WebAudio.clip && this.canOpen;},}" x-init="$nextTick(() => isInitialized = true)" x-effect="document.documentElement.classList.toggle('audio-player-open', isOpen)" data-app-hidden data-area="audio-player">
<div class="fixed w-full bottom-0 sm:mb-8 md:mb-16 lg:mb-16 z-20 pointer-events-none" x-show="isOpen && !isExpanded" x-transition:enter="transition-transform duration-500 ease-out" x-transition:enter-start="translate-y-3/2" x-transition:leave="transition-transform duration-500 ease-out" x-transition:leave-end="translate-y-3/2">
<div class="justify-center">
<div class="relative z-20 w-full mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg sm:px-16 md:px-16 lg:px-24">
<div class="pointer-events-auto">
<div class="shadow-lg rounded-pill bg-sec2-lightest dark:bg-sec2-darker w-full z-max relative cursor-pointer" @click="isExpanded = true; $focus($refs.audioPlayerCollapse)">
<div class="flex items-center pl-8">
<button class="shrink-0 mr-12 outline-focus" title="Audio Player maximieren" x-ref="audioPlayerExpand">
<div class="relative" aria-hidden="true" data-sara-component="{&#34;name&#34;:&#34;image&#34;,&#34;title&#34;:&#34;&#34;,&#34;type&#34;:&#34;media&#34;}">
<img class="lazyload md:hidden lg:hidden rounded py-8" x-data="{onSrcChanged(newSrc) {if (newSrc) {$el.classList.remove('loaded');$el.classList.remove('entered');$el.removeAttribute('data-ll-status');$publish('LAZYLOADING_UPDATE');} else {$el.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36' width='36' height='36' %3E%3C/svg%3E`;}}}" x-effect="onSrcChanged($store.WebAudio.clip ? $store.WebAudio.clip.posterUrl : '')" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36' width='36' height='36' %3E%3C/svg%3E" :data-src="$store.WebAudio.clip ? $store.WebAudio.clip.posterUrl : ''" width="36" height="36" alt>
</div>
<div class="relative" aria-hidden="true" data-sara-component="{&#34;name&#34;:&#34;image&#34;,&#34;title&#34;:&#34;&#34;,&#34;type&#34;:&#34;media&#34;}">
<img class="lazyload sm:hidden rounded py-8" x-data="{onSrcChanged(newSrc) {if (newSrc) {$el.classList.remove('loaded');$el.classList.remove('entered');$el.removeAttribute('data-ll-status');$publish('LAZYLOADING_UPDATE');} else {$el.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40' width='40' height='40' %3E%3C/svg%3E`;}}}" x-effect="onSrcChanged($store.WebAudio.clip ? $store.WebAudio.clip.posterUrl : '')" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40' width='40' height='40' %3E%3C/svg%3E" :data-src="$store.WebAudio.clip ? $store.WebAudio.clip.posterUrl : ''" width="40" height="40" alt>
</div>
<span class="sr-only">Audio Player maximieren</span>
</button>
<div class="flex flex-col overflow-hidden font-sansUI sm:text-xs md:text-s lg:text-s text-left relative w-full py-8">
<div x-show="!$store.WebAudio.isRestored">
<div class="font-bold text-primary-base dark:text-dm-primary-base whitespace-nowrap" x-text="$store.WebAudio.clip ? $store.WebAudio.clip.kicker : ''"></div>
<div class="font-bold whitespace-nowrap" x-text="$store.WebAudio.clip ? $store.WebAudio.clip.headline : ''"></div>
</div>
<div x-show="$store.WebAudio.isRestored">
<div class="font-bold whitespace-nowrap tracking-wide">
Die Wiedergabe wurde unterbrochen.
</div>
<button class="underline whitespace-nowrap" title="Wiedergabe fortsetzen" @click.stop="$publish('AUDIO_PLAYER_RESUME')">
Wiedergabe fortsetzen?
</button>
</div>
<div class="absolute right-0 bottom-0 shrink-0 bg-gradient-to-l dark:from-sec2-darker from-sec2-lightest h-full w-16"></div>
</div>
<div class="flex items-center ml-18">
<button class="lg:px-12 md:px-12 sm:px-6 text-sec2-dark dark:text-shade-lighter hover:text-sec2-darker dark:hover:text-shade-lightest" :title="$store.WebAudio.isPlaying ? 'Wiedergabe pausieren' : 'Wiedergabe starten'" x-show="!$store.WebAudio.isLoading" @click.stop="$store.WebAudio.isPlaying ? $publish('AUDIO_PLAYER_PAUSE') : $publish('AUDIO_PLAYER_RESUME')" data-sara-click-el="button">
<span x-show="!$store.WebAudio.isPlaying" class="flex h-48 items-center"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-play-f-a52026dc-35ff-4797-828d-1417dcca3ac5">
        <g id="l-play-a52026dc-35ff-4797-828d-1417dcca3ac5">
            <path id="vector-a52026dc-35ff-4797-828d-1417dcca3ac5" d="M6 5.763a.75.75 0 011.11-.658l11.433 6.237a.75.75 0 010 1.316L7.109 18.895A.75.75 0 016 18.237V5.763z" class="fill-current"/>
        </g>
    </g>
</svg>
</span>
<span x-show="$store.WebAudio.isPlaying" class="flex h-48 items-center"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-pause-f-cb3c962f-8883-48d7-b443-052a82355b22">
        <rect id="rectangle-cb3c962f-8883-48d7-b443-052a82355b22" x="7" y="4" width="3" height="16" rx="1.5" class="fill-current"/>
        <rect id="rectangle_2-cb3c962f-8883-48d7-b443-052a82355b22" x="14" y="4" width="3" height="16" rx="1.5" class="fill-current"/>
    </g>
</svg>
</span>
<span class="sr-only" x-text="$store.WebAudio.isPlaying ? 'Wiedergabe pausieren' : 'Wiedergabe starten'"></span>
</button>
<div class="flex h-48 items-center lg:px-12 md:px-12 sm:px-6" x-show="$store.WebAudio.isLoading">
<span class="rounded-circle w-20 h-20 m-2 border-2 border-shade-base dark:border-shade-light animate-spin" style="border-top-color:transparent;"></span>
</div>
<button class="flex h-48 items-center lg:px-12 md:px-12 sm:px-6 text-sec2-dark dark:text-shade-lighter hover:text-sec2-darker dark:hover:text-shade-lightest" title="Wiedergabe beenden" @click.stop="$publish('AUDIO_PLAYER_CLEAR')" data-sara-click-el="button"><svg class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-close-e15b483a-cc16-4929-8ec4-8b2ec763d440">
        <path id="vector-e15b483a-cc16-4929-8ec4-8b2ec763d440" d="M18 18L6 6m12 0L6 18" stroke-width="1.3" stroke-linecap="round"/>
    </g>
</svg>
<span class="sr-only">Wiedergabe beenden</span>
</button>
</div>
</div>
<div class="absolute bottom-0 left-8 right-8">
<div class="absolute bottom-0 w-full bg-opacity-slight dark:bg-opacity-slight sm:h-2 md:h-4 lg:h-4 bg-sec2-dark dark:bg-sec2-lightest"></div>
<div class="absolute bottom-0 left-0 right-0 sm:h-2 md:h-4 lg:h-4 max-w-full bg-sec2-dark dark:bg-sec2-lightest" :style="{ width: ($store.WebAudio.currentTime / $store.WebAudio.duration * 100) + '%' }"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="fixed w-full bottom-0 sm:mb-8 md:mb-16 lg:mb-16 z-20 pointer-events-none" x-show="isOpen && isExpanded" x-transition:enter="transition-transform duration-500 ease-out" x-transition:enter-start="translate-y-3/2" x-transition:leave="transition-transform duration-500 ease-out" x-transition:leave-end="translate-y-3/2">
<div class="justify-center">
<div class="relative z-20 w-full mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg sm:px-16 md:px-16 lg:px-24">
<div class="pointer-events-auto">
<div class="shadow-lg rounded-pill bg-sec2-lightest dark:bg-sec2-darker lg:pb-16 md:pb-16 sm:pb-16 z-max">
<button class="text-right pt-16 pb-12 lg:pr-24 md:pr-24 sm:pr-16 w-full outline-focus text-sec2-dark dark:text-shade-lightest" title="Audio Player minimieren" @click="isExpanded = false; $focus($refs.audioPlayerExpand)" x-ref="audioPlayerCollapse"><svg class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-chevron-down-260c83cb-f8e3-4a9d-b6a3-cad36ecfbfdc">
        <g id="l-chevron-right-260c83cb-f8e3-4a9d-b6a3-cad36ecfbfdc">
            <path id="vector-260c83cb-f8e3-4a9d-b6a3-cad36ecfbfdc" d="M18 9l-6 6-6-6" stroke-width="1.3" stroke-linecap="round"/>
        </g>
    </g>
</svg>
<span class="sr-only">Audio Player minimieren</span>
</button>
<div class="flex items-center justify-between mb-24 sm:flex-col lg:px-24 md:px-24 sm:px-16">
<div class="w-full flex items-center sm:mb-16">
<div class="shrink-0 mr-16">
<div class="relative" aria-hidden="true" data-sara-component="{&#34;name&#34;:&#34;image&#34;,&#34;title&#34;:&#34;&#34;,&#34;type&#34;:&#34;media&#34;}">
<img class="lazyload rounded" x-data="{onSrcChanged(newSrc) {if (newSrc) {$el.classList.remove('loaded');$el.classList.remove('entered');$el.removeAttribute('data-ll-status');$publish('LAZYLOADING_UPDATE');} else {$el.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 72 72' width='72' height='72' %3E%3C/svg%3E`;}}}" x-effect="onSrcChanged($store.WebAudio.clip ? $store.WebAudio.clip.posterUrl : '')" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 72 72' width='72' height='72' %3E%3C/svg%3E" :data-src="$store.WebAudio.clip ? $store.WebAudio.clip.posterUrl : ''" width="72" height="72" alt>
</div>
</div>
<div class="flex flex-col font-bold font-sansUI">
<div class="text-s text-primary-base dark:text-dm-primary-base lg:mb-4 md:mb-4" x-text="$store.WebAudio.clip ? $store.WebAudio.clip.kicker : ''" x-show="$store.WebAudio.clip && $store.WebAudio.clip.kicker"></div>
<div class="text-base lg:mb-4 md:mb-4" x-text="$store.WebAudio.clip ? $store.WebAudio.clip.headline : ''"></div>
<div class="text-s font-normal opacity-distinct sm:hidden" x-text="$store.WebAudio.chapter ? $store.WebAudio.chapter.title : ''" x-show="$store.WebAudio.chapter && $store.WebAudio.chapter.title"></div>
</div>
</div>
<div class="flex shrink-0 items-center lg:justify-end md:justify-end sm:justify-between sm:w-full w-5/12">
<div class="sm:min-w-48 sm:w-full">
<button x-data="{playbackRates: [ 0.8, 0.9, 1, 1.1, 1.2, 1.5, 1.7, 2.0, 2.5 ],get nextPlaybackRate() {const index = this.playbackRates.findIndex((playbackRate) => playbackRate === $store.WebAudio.playbackRate);const nextIndex = (index + 1) % this.playbackRates.length;return this.playbackRates[nextIndex];}}" class="border font-bold font-sansUI h-24 px-6 rounded-oval text-xs border-sec2-dark dark:border-shade-lighter hover:border-sec2-darker dark:hover:border-shade-lightest text-sec2-dark dark:text-shade-lighter hover:text-sec2-darker dark:hover:text-shade-lightest" title="Wiedergabegeschwindigkeit ändern" @click="$publish('AUDIO_PLAYER_SET_PLAYBACK_RATE', nextPlaybackRate)" data-sara-click-el="button">
<span x-text="($store.WebAudio.playbackRate).toFixed(1) + 'x'"></span>
<span class="sr-only">Wiedergabegeschwindigkeit ändern</span>
</button>
</div>
<div class="flex shrink-0 items-stretch">
<button class="lg:px-12 md:px-12 sm:pr-12 lg:mx-12 md:mx-12 sm:mr-12 text-sec2-dark dark:text-shade-lighter hover:text-sec2-darker dark:hover:text-shade-lightest" title="15 Sekunden zurück" @click="$publish('AUDIO_PLAYER_SET_TIME', $store.WebAudio.currentTime - 15)" data-sara-click-el="button"><svg width="32" height="24" viewBox="0 0 32 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
<path d="M5.65 3.5C11.8333 3.5 12.8167 3.5 19 3.5C24.2467 3.5 28.5 7.75329 28.5 13C28.5 18.2467 24.2467 22.5 19 22.5H15" class="stroke-current" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.64507 2.93557L4.75612 1.08839C5.24106 0.664074 6 1.00846 6 1.65283V5.34717C6 5.99154 5.24106 6.33593 4.75612 5.91161L2.64507 4.06443C2.30357 3.76562 2.30357 3.23438 2.64507 2.93557Z" class="fill-current"/>
<path d="M10.1245 15.62V17H15.4165V15.62H13.7605V9.044H12.2725L10.0765 9.944L10.4845 11.156L12.0445 10.52V15.62H10.1245ZM16.309 13.508C16.597 13.46 17.449 13.424 18.001 13.424C19.441 13.424 20.137 13.736 20.137 14.66C20.137 15.452 19.693 15.86 18.901 15.86C18.073 15.86 17.689 15.476 17.773 14.684H16.045C15.781 16.364 16.633 17.156 18.757 17.156C20.917 17.156 21.901 16.124 21.901 14.528C21.901 12.788 20.797 12.14 18.685 12.14C18.433 12.14 18.157 12.152 17.905 12.164L18.037 10.544H21.349L21.481 9.044H16.597L16.309 13.508Z" class="fill-current"/>
</svg>
<span class="sr-only">15 Sekunden zurück</span>
</button>
<button class="shrink-0 w-48 h-48 rounded-circle px-12 bg-sec2-dark dark:bg-sec2-lightest hover:bg-sec2-darker dark:hover:bg-shade-lightest text-white dark:text-sec2-dark" :title="$store.WebAudio.isPlaying ? 'Wiedergabe pausieren' : 'Wiedergabe starten'" :disabled="$store.WebAudio.isLoading" @click="$store.WebAudio.isPlaying ? $publish('AUDIO_PLAYER_PAUSE') : $publish('AUDIO_PLAYER_RESUME')" data-sara-click-el="button">
<span x-show="!$store.WebAudio.isPlaying && !$store.WebAudio.isLoading" class="flex items-center justify-around"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-play-f-5da0be11-80cf-4ea4-8e84-5bfb7392b03a">
        <g id="l-play-5da0be11-80cf-4ea4-8e84-5bfb7392b03a">
            <path id="vector-5da0be11-80cf-4ea4-8e84-5bfb7392b03a" d="M6 5.763a.75.75 0 011.11-.658l11.433 6.237a.75.75 0 010 1.316L7.109 18.895A.75.75 0 016 18.237V5.763z" class="fill-current"/>
        </g>
    </g>
</svg>
</span>
<span x-show="$store.WebAudio.isPlaying && !$store.WebAudio.isLoading" class="flex items-center justify-around"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-pause-f-d1708d22-6d54-4bc4-b48b-b3b6dd657050">
        <rect id="rectangle-d1708d22-6d54-4bc4-b48b-b3b6dd657050" x="7" y="4" width="3" height="16" rx="1.5" class="fill-current"/>
        <rect id="rectangle_2-d1708d22-6d54-4bc4-b48b-b3b6dd657050" x="14" y="4" width="3" height="16" rx="1.5" class="fill-current"/>
    </g>
</svg>
</span>
<span x-show="$store.WebAudio.isLoading" class="flex rounded-circle w-20 h-20 m-2 border-2 border-white dark:border-sec2-dark animate-spin" style="border-top-color:transparent;"></span>
<span class="sr-only" x-text="$store.WebAudio.isPlaying ? 'Wiedergabe pausieren' : 'Wiedergabe starten'"></span>
</button>
<button class="lg:pr-12 pl-12 ml-12 text-sec2-dark dark:text-shade-lighter hover:text-sec2-darker dark:hover:text-shade-lightest" title="30 Sekunden vor" @click="$publish('AUDIO_PLAYER_SET_TIME', $store.WebAudio.currentTime + 30)" data-sara-click-el="button"><svg width="32" height="24" viewBox="0 0 32 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
<path d="M26.35 3.5C20.1667 3.5 19.1833 3.5 13 3.5C7.75329 3.5 3.5 7.75329 3.5 13C3.5 18.2467 7.75329 22.5 13 22.5H17" class="stroke-current" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M29.3549 2.93557L27.2439 1.08839C26.7589 0.664074 26 1.00846 26 1.65283V5.34717C26 5.99154 26.7589 6.33593 27.2439 5.91161L29.3549 4.06443C29.6964 3.76562 29.6964 3.23438 29.3549 2.93557Z" class="fill-current"/>
<path d="M11.9726 13.604C13.1366 13.604 13.4606 14.036 13.4606 14.732C13.4606 15.368 13.1006 15.86 12.1646 15.86C11.2766 15.86 10.8686 15.488 10.9406 14.672H9.20064C8.96064 16.376 9.83664 17.156 12.0686 17.156C14.2406 17.156 15.2246 16.184 15.2246 14.72C15.2246 13.532 14.5886 12.944 13.4966 12.8V12.776C14.3726 12.548 14.9846 11.888 14.9846 10.952C14.9846 9.716 14.2646 8.888 12.2246 8.888C10.3046 8.888 9.21264 9.68 9.28464 11.288H10.9886C10.9646 10.652 11.2526 10.172 12.1166 10.172C12.8606 10.172 13.2206 10.52 13.2206 11.204C13.2206 11.816 12.8726 12.26 11.9726 12.26H10.8806V13.604H11.9726ZM19.2417 17.156C21.1977 17.156 22.5057 15.968 22.5057 12.908C22.5057 9.98 21.4257 8.888 19.3737 8.888C17.4057 8.888 16.0977 10.064 16.0977 13.124C16.0977 16.052 17.1897 17.156 19.2417 17.156ZM19.2897 15.824C18.3657 15.824 17.8737 15.248 17.8737 13.04C17.8737 10.856 18.4017 10.22 19.3137 10.22C20.2377 10.22 20.7417 10.796 20.7417 12.992C20.7417 15.2 20.2017 15.824 19.2897 15.824Z" class="fill-current"/>
</svg>
<span class="sr-only">30 Sekunden vor</span>
</button>
<button x-data="{ lastVolume: $store.WebAudio.volume }" x-effect="this.lastVolume = $store.WebAudio.volume > 0 ? $store.WebAudio.volume : this.lastVolume" class="md:hidden sm:hidden px-12 text-sec2-dark dark:text-shade-lighter hover:text-sec2-darker dark:hover:text-shade-lightest" :title="$store.WebAudio.volume === 0 ? 'Stummschaltung aufheben' : 'Stummschalten'" @click="$store.WebAudio.volume = $store.WebAudio.volume === 0 ? this.lastVolume : 0" data-sara-click-el="button">
<span x-show="$store.WebAudio.volume !== 0"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
<path d="M17 16C18.1956 15.2016 19 13.7092 19 12C19 10.2908 18.1956 8.79844 17 8" class="stroke-current" stroke-width="1.3" stroke-linecap="round"/>
<path d="M15 13C15.2989 12.8004 15.5 12.4273 15.5 12C15.5 11.5727 15.2989 11.1996 15 11" class="stroke-current" stroke-width="1.3" stroke-linecap="round"/>
<path d="M19 18.5C20.8569 17.2025 22.5 14.7775 22.5 12C22.5 9.2225 20.8569 6.79746 19 5.5" class="stroke-current" stroke-width="1.3" stroke-linecap="round"/>
<path d="M2.65 8.75C2.65 8.69477 2.69477 8.65 2.75 8.65H5.73691C6.05481 8.65 6.36325 8.54181 6.61149 8.34322L11.2006 4.67191C11.2183 4.65773 11.2404 4.65 11.2631 4.65H12.25C12.3052 4.65 12.35 4.69477 12.35 4.75V19.25C12.35 19.3052 12.3052 19.35 12.25 19.35H11.2631C11.2404 19.35 11.2183 19.3423 11.2006 19.3281L6.61149 15.6568C6.36325 15.4582 6.05481 15.35 5.73691 15.35H2.75C2.69477 15.35 2.65 15.3052 2.65 15.25V8.75Z" class="stroke-current" stroke-width="1.3"/>
</svg>
<span class="sr-only">Stummschalten</span>
</span>
<span x-show="$store.WebAudio.volume === 0"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
<path d="M2.65 8.75C2.65 8.69477 2.69477 8.65 2.75 8.65H5.73691C6.05481 8.65 6.36325 8.54181 6.61149 8.34322L11.2006 4.67191C11.2183 4.65773 11.2404 4.65 11.2631 4.65H12.25C12.3052 4.65 12.35 4.69477 12.35 4.75V19.25C12.35 19.3052 12.3052 19.35 12.25 19.35H11.2631C11.2404 19.35 11.2183 19.3423 11.2006 19.3281L6.61149 15.6568C6.36325 15.4582 6.05481 15.35 5.73691 15.35H2.75C2.69477 15.35 2.65 15.3052 2.65 15.25V8.75Z" class="stroke-current" stroke-width="1.3"/>
<path d="M15.5 14.5L20.5 9.5" class="stroke-current" stroke-width="1.3" stroke-linecap="round"/>
<path d="M20.5 14.5L15.5 9.5" class="stroke-current" stroke-width="1.3" stroke-linecap="round"/>
</svg>
<span class="sr-only">Stummschaltung aufheben</span>
</span>
</button>
<div x-data="{
                get progress() {
                    return Math.min(($store.WebAudio.volume - 0) / 1 - 0, 1);
                }
            }" class="relative h-2 self-center bottom-px md:hidden sm:hidden w-64" :style="{ '--polygon-range-progress': progress }">
<input class="audio-player-range-thumb hover:cursor-pointer absolute w-full appearance-none h-2 bg-opacity-slight dark:bg-opacity-slight bg-no-repeat bg-gradient-to-r bg-sec2-dark dark:bg-sec2-lightest from-sec2-dark dark:from-sec2-lightest to-sec2-dark dark:to-sec2-lightest" type="range" x-model="$store.WebAudio.volume" :min="0" :max="1" :step="0.01" style="background-size: calc(100% * var(--polygon-range-progress)) 100%;" title="Lautstärke">
<span class="absolute left-0 bottom-0 top-0 my-auto rounded-pill w-12 h-12 pointer-events-none bg-sec2-dark dark:bg-sec2-lightest" style="left: calc(100% * var(--polygon-range-progress) - var(--polygon-range-progress) * 8px);"></span>
</div>
</div>
<div class="sm:min-w-48 sm:w-full">
</div>
</div>
</div>
<div class="lg:px-24 md:px-24 sm:px-16">
<div x-data="{
                get progress() {
                    return Math.min(($store.WebAudio.currentTime - 0) / $store.WebAudio.duration - 0, 1);
                }
            }" class="relative h-2 w-full mb-12" :style="{ '--polygon-range-progress': progress }">
<input class="audio-player-range-thumb hover:cursor-pointer absolute w-full appearance-none h-2 bg-opacity-slight dark:bg-opacity-slight bg-no-repeat bg-gradient-to-r bg-sec2-dark dark:bg-sec2-lightest from-sec2-dark dark:from-sec2-lightest to-sec2-dark dark:to-sec2-lightest" type="range" x-model="$store.WebAudio.currentTime" :min="0" :max="$store.WebAudio.duration" :step="1" style="background-size: calc(100% * var(--polygon-range-progress)) 100%;" title="Abspielposition" :disabled="$store.WebAudio.isLoading">
<template x-for="marker in $store.WebAudio.chapterPositions"><svg
                        width="4"
                        height="2"
                        class="absolute text-sec2-lightest dark:text-sec2-darker"
                        :style="{ 'left': `${ marker * 100 / $store.WebAudio.duration }%` }"
                        role="img"
                        aria-hidden="true"
                    >
                        <rect width="4" height="2" class="fill-current"/>
                    </svg>
</template>
<span class="absolute left-0 bottom-0 top-0 my-auto rounded-pill w-12 h-12 pointer-events-none bg-sec2-dark dark:bg-sec2-lightest" style="left: calc(100% * var(--polygon-range-progress) - var(--polygon-range-progress) * 8px);"></span>
</div>
<div class="relative flex justify-between font-sansUI text-s text-sec2-darker dark:text-shade-lightest mb-12">
<div x-text="$dateUtils.formatTime($store.WebAudio.currentTime)"></div>
<div class="absolute left-48 right-48 whitespace-nowrap overflow-hidden text-center text-black dark:text-shade-lightest opacity-distinct md:hidden lg:hidden" x-show="$store.WebAudio.chapter && $store.WebAudio.chapter.title">
<span x-text="$store.WebAudio.chapter ? $store.WebAudio.chapter.title : ''"></span>
<div class="absolute top-0 right-0 w-32 h-full bg-gradient-to-l from-sec2-lightest dark:from-sec2-darker"></div>
</div>
<div x-text="$dateUtils.formatTime($store.WebAudio.duration)"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</template>
<div x-data="{isOpen: false,returnFocusElement: null,type: '',get title() {return $settings?.translations?.loginLayer?.[this.type]?.title || '';},get imageSrc() {if (this.type) {return 'https://cdn.prod.www.spiegel.de/public/spon/images/modal/' + this.type + '-login_720.png';} else {return '';}},get imageSrcset() {if (this.type) {return ('https://cdn.prod.www.spiegel.de/public/spon/images/modal/' + this.type + '-login_460.png 460w, ' +'https://cdn.prod.www.spiegel.de/public/spon/images/modal/' + this.type + '-login_720.png 720w, ' +'https://cdn.prod.www.spiegel.de/public/spon/images/modal/' + this.type + '-login_920.png 920w, ' +'https://cdn.prod.www.spiegel.de/public/spon/images/modal/' + this.type + '-login_1440.png 1440w');} else {return '';}},get text() {return $settings?.translations?.loginLayer?.[this.type]?.text || '';},preventScrolling: true,id: '8c7bcb0a-57b3-4936-a8ad-e49f4be7e9e1',open() {if (this.isOpen) {return;}this.isOpen = true;this.returnFocusElement = window.document.activeElement;$focus($refs.closeButton);$publish('LOGIN_LAYER_OPENED');$publish('OVERLAY_OPENED', this);},close() {if (!this.isOpen) {return;}this.isOpen = false;$focus(this.returnFocusElement);this.returnFocusElement = null;this.type = '';$publish('LOGIN_LAYER_CLOSED');$publish('OVERLAY_CLOSED', this);},}" x-subscribe.login_layer_open_layer="const args = $payload[0];if (args.type) {type = args.type;open();}" x-subscribe.login_layer_close_layer="close()" @keydown.escape.capture.window="if ($event.defaultPrevented || !isOpen) {return;}$event.preventDefault();close();" x-cloak>
<template x-if="isOpen">
<div class="fixed left-0 top-0 h-full w-full z-overlay animate-fade-in" :data-area="`login-layer>${type}`">
<div class="bg-black opacity-distinct h-full w-full" @click.prevent="close();"></div>
<div class="absolute top-0 bottom-0 left-0 right-0 flex items-center mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg pointer-events-none lg:px-8" style="bottom: var(--polygon-app-bottombar-height, 0px)">
<div class="bg-white border border-shade-lighter dark:bg-dm-shade-darkest lg:mx-auto md:mx-auto sm:mx-16 lg:p-24 lg:w-8/12 md:p-24 md:w-10/12 rounded shadow sm:px-16 sm:pt-16 sm:pb-24 max-h-full overflow-x-hidden overflow-y-auto pointer-events-auto">
<div class="flex justify-between lg:mb-24 md:mb-24 sm:mb-16">
<div class="font-brandUI font-extrabold lg:text-2xl md:text-2xl sm:text-xl leading-tight lg:mr-24 md:mr-24 sm:mr-16 sm:pt-px" x-text="title"></div>
<button class="text-black dark:text-shade-lightest outline-focus cursor-pointer leading-none" data-sara-click-el="button" x-ref="closeButton" @click.prevent="close();"><svg class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-close-6a15c127-47d9-4b1a-9c09-ed7a06b59ba0">
        <path id="vector-6a15c127-47d9-4b1a-9c09-ed7a06b59ba0" d="M18 18L6 6m12 0L6 18" stroke-width="1.3" stroke-linecap="round"/>
    </g>
</svg>
<span class="sr-only">Dialog schließen</span>
</button>
</div>
<div class="mb-8">
<span class="block bg-transparent dark:bg-black">
<img aria-hidden="true" class="rounded" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 720 327' width='720' height='327' %3E%3C/svg%3E" :src="imageSrc" :srcset="imageSrcset" sizes="(max-width: 719px) 460px, 720px" width="720" height="327">
</span>
<div class="RichTextCredit font-sansUI text-s text-shade-light dark:text-shade-dark pt-4">
© Patrick Mariathasan / DER SPIEGEL
</div>
</div>
<div class="font-sansUI text-black dark:text-shade-lightest text-base mb-16" x-text="text"></div>
<a href="https://gruppenkonto.spiegel.de/authenticate?requestAccessToken=true&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" class="inline-flex items-center font-bold font-sansUI rounded bg-primary-base dark:bg-dm-primary-base text-white dark:text-shade-lightest hover:bg-primary-dark focus:bg-primary-darker px-16 min-h-44 gap-8" title="Anmelden oder Konto erstellen" data-consent-el="loginLink" data-sara-link="gruppenkonto" x-data @click.prevent="if ($appUtils.isApp) {$appBridge.triggerLogin({ targetUrl: 'https://www.spiegel.de/wissenschaft/gletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a' });} else {window.location.href = $el.href;}">
<span data-label class="text-s leading-18">Anmelden oder Konto erstellen</span>
<span class="leading-none"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</a>
</div>
</div>
</div>
</template>
</div>
<div x-data="{isOpen: false,returnFocusElement: null,preventScrolling: true,id: '29c8c871-303c-4336-a53c-300a66cbe779',open() {if (this.isOpen) {return;}this.isOpen = true;this.returnFocusElement = window.document.activeElement;$focus($refs.closeButton);$publish('FEEDBACK_LAYER_OPENED');$publish('OVERLAY_OPENED', this);},close() {if (!this.isOpen) {return;}this.isOpen = false;$focus(this.returnFocusElement);this.returnFocusElement = null;$publish('FEEDBACK_LAYER_CLOSED');$publish('OVERLAY_CLOSED', this);},}" x-subscribe.feedback_layer_open_layer="open()" x-subscribe.feedback_layer_close_layer="close()" @keydown.escape.capture.window="if ($event.defaultPrevented || !isOpen) {return;}$event.preventDefault();close();" x-cloak>
<template x-if="isOpen">
<div class="fixed left-0 top-0 h-full w-full z-overlay animate-fade-in" data-area="feedback-layer">
<div class="bg-black opacity-distinct h-full w-full" @click.prevent="close();"></div>
<div class="absolute top-0 bottom-0 left-0 right-0 flex items-center mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg pointer-events-none lg:px-8" style="bottom: var(--polygon-app-bottombar-height, 0px)">
<div class="bg-white border border-shade-lighter dark:bg-dm-shade-darkest lg:mx-auto md:mx-auto sm:mx-16 lg:p-24 lg:w-8/12 md:p-24 md:w-10/12 rounded shadow sm:p-16 max-h-full overflow-x-hidden overflow-y-auto pointer-events-auto">
<div class="flex justify-between lg:mb-24 md:mb-24 sm:mb-16">
<div class="font-brandUI font-extrabold lg:text-2xl md:text-2xl sm:text-xl leading-tight lg:mr-24 md:mr-24 sm:mr-16 sm:pt-px">
Helfen Sie uns, besser zu werden
</div>
<button class="text-black dark:text-shade-lightest outline-focus cursor-pointer leading-none" data-sara-click-el="button" x-ref="closeButton" @click.prevent="close();"><svg id="spon-close-l" class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-close-906317bd-84db-4584-8329-20c6063b364f">
        <path id="vector-906317bd-84db-4584-8329-20c6063b364f" d="M18 18L6 6m12 0L6 18" stroke-width="1.3" stroke-linecap="round"/>
    </g>
</svg>
<span class="sr-only">Dialog schließen</span>
</button>
</div>
<div class="mb-8">
<span class="block bg-transparent dark:bg-black">
<img aria-hidden="true" class="rounded" src="https://cdn.prod.www.spiegel.de/public/spon/images/modal/feedback_720.png" srcset="https://cdn.prod.www.spiegel.de/public/spon/images/modal/feedback_460.png 460w,https://cdn.prod.www.spiegel.de/public/spon/images/modal/feedback_920.png 920w,https://cdn.prod.www.spiegel.de/public/spon/images/modal/feedback_720.png 720w,https://cdn.prod.www.spiegel.de/public/spon/images/modal/feedback_1440.png 1440w" sizes="(max-width: 719px) 460px, 720px" width="720" height="328">
</span>
<div class="RichTextCredit font-sansUI text-s text-shade-light dark:text-shade-dark pt-4">
© Patrick Mariathasan / DER SPIEGEL
</div>
</div>
<div class="font-sansUI text-black dark:text-shade-lightest text-base mb-16">
Haben Sie einen Fehler im Text gefunden, auf den Sie uns hinweisen wollen? Oder gibt es ein technisches Problem? Melden Sie sich gern mit Ihrem Anliegen.
</div>
<div class="flex lg:flex-wrap md:flex-wrap sm:flex-col items-start">
<span class="lg:mr-16 md:mr-16 mb-16">
<a href="https://www.spiegel.de/kontakt?betreff=Diese+Eisriesen+zerrinnen&channel=Wissenschaft&id=5c889858-7313-4254-9f4a-dc0d3ab8587a&reason=Fehlerhinweis+an+die+Redaktion" class="inline-flex items-center font-bold font-sansUI rounded
bg-white hover:border-black border border-shade-base text-black focus:border-black focus:bg-shade-lightest dark:bg-dm-shade-darkest dark:text-shade-lightest dark:focus:border-white dark:border-shade-light dark:hover:border-white dark:focus:bg-black px-24 min-h-46 gap-12" title="Redaktionellen Fehler melden">
<span data-label class="text-base leading-18">Redaktionellen Fehler melden</span>
<span class="leading-none"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</a>
</span>
<span class="mb-16">
<a href="https://www.spiegel.de/kontakt?betreff=Diese+Eisriesen+zerrinnen&channel=Wissenschaft&id=5c889858-7313-4254-9f4a-dc0d3ab8587a&reason=Technische+Fragen+und+Probleme" class="inline-flex items-center font-bold font-sansUI rounded
bg-white hover:border-black border border-shade-base text-black focus:border-black focus:bg-shade-lightest dark:bg-dm-shade-darkest dark:text-shade-lightest dark:focus:border-white dark:border-shade-light dark:hover:border-white dark:focus:bg-black px-24 min-h-46 gap-12" title="Technisches Problem melden">
<span data-label class="text-base leading-18">Technisches Problem melden</span>
<span class="leading-none"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</a>
</span>
</div>
<div class="font-sansUI text-shade-dark dark:text-shade-light text-s">
<span>Sie haben weiteres inhaltliches Feedback oder eine Frage an uns?</span>
<a href="https://www.spiegel.de/kontakt?betreff=Diese+Eisriesen+zerrinnen&channel=Wissenschaft&id=5c889858-7313-4254-9f4a-dc0d3ab8587a" title="Zum Kontaktformular" target="_self" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-s leading-normal">
Zum Kontaktformular
</a>
</div>
</div>
</div>
</div>
</template>
</div>
<div class="fixed top-0 left-0 right-0 z-overlay" data-notification-el="container" data-notification-position="overlay"></div>
<div x-data="{isOpen: false,returnFocusElement: null,preventScrolling: true,id: '55616e39-5221-4075-92ca-5dd696fbc04e',open() {if (this.isOpen) {return;}this.isOpen = true;this.returnFocusElement = window.document.activeElement;$publish('OVERLAY_OPENED', this);},close() {if (!this.isOpen) {return;}this.isOpen = false;$focus(this.returnFocusElement);this.returnFocusElement = null;$publish('OVERLAY_CLOSED', this);}}" x-subscribe.user_capping_limit_exceeded="open()" x-subscribe.user_capping_limit_ok="close()" x-cloak>
<template x-if="isOpen">
<div class="fixed left-0 top-0 h-full w-full z-overlay animate-fade-in">
<div class="bg-black opacity-distinct h-full w-full"></div>
<div class="absolute top-0 bottom-0 left-0 right-0 flex items-center mx-auto sm:max-w-sm md:max-w-md lg:max-w-lg pointer-events-none lg:px-8" style="bottom: var(--polygon-app-bottombar-height, 0px)">
<div class="bg-white border border-shade-lighter dark:bg-dm-shade-darkest lg:mx-auto md:mx-auto sm:mx-16 lg:p-24 lg:w-8/12 md:p-24 md:w-10/12 rounded shadow sm:p-16 max-h-full overflow-x-hidden overflow-y-auto pointer-events-auto">
<div class="flex justify-between lg:mb-24 md:mb-24 sm:mb-16">
<div class="font-brandUI font-extrabold lg:text-2xl md:text-2xl sm:text-xl leading-tight lg:mr-24 md:mr-24 sm:mr-16 sm:pt-px">
Mehrfachnutzung erkannt
</div>
</div>
<div class="mb-16">
<span class="block bg-transparent dark:bg-black">
<img aria-hidden="true" class="rounded" src="https://cdn.prod.www.spiegel.de/public/spon/images/modal/user-capping_720.png" srcset="https://cdn.prod.www.spiegel.de/public/spon/images/modal/user-capping_460.png 460w,https://cdn.prod.www.spiegel.de/public/spon/images/modal/user-capping_920.png 920w,https://cdn.prod.www.spiegel.de/public/spon/images/modal/user-capping_720.png 720w,https://cdn.prod.www.spiegel.de/public/spon/images/modal/user-capping_1440.png 1440w" sizes="(max-width: 719px) 460px, 720px" width="720" height="327">
</span>
</div>
<div class="font-sansUI text-black dark:text-shade-lightest text-base lg:mb-24 md:mb-24 sm:mb-16">
<span class="block mb-8">Die gleichzeitige Nutzung von SPIEGEL+-Inhalten ist auf ein Gerät beschränkt.</span>
Sie können SPIEGEL+ auf diesem Gerät weiterlesen oder sich abmelden, um Ihr Abo auf einem anderen Gerät zu nutzen.
</div>
<span class="mr-24">
<button x-data @click="$publish('USER_CAPPING_ALLOW');" data-sara-click-el="button" class="inline-flex items-center font-bold font-sansUI rounded bg-primary-base dark:bg-dm-primary-base text-white dark:text-shade-lightest hover:bg-primary-dark focus:bg-primary-darker dark:disabled:bg-shade-darker dark:disabled:text-shade-base px-16 min-h-44 gap-8 disabled:cursor-not-allowed disabled:bg-shade-lighter disabled:text-shade-dark" title="Auf diesem Gerät weiterlesen">
<span data-label class="text-s leading-18">Auf diesem Gerät weiterlesen</span>
<span class="leading-none"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</button>
</span>
<a href="https://gruppenkonto.spiegel.de/abmelden.html?targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" class="inline-flex items-center font-bold font-sansUI rounded
bg-white hover:border-black border border-shade-base text-black focus:border-black focus:bg-shade-lightest dark:bg-dm-shade-darkest dark:text-shade-lightest dark:focus:border-white dark:border-shade-light dark:hover:border-white dark:focus:bg-black px-16 min-h-44 sm:mt-16 gap-8" title="Dieses Gerät abmelden" x-data @click.prevent="$appUtils.isApp ? $appBridge.triggerLogout() : window.location.href = $el.href" data-sara-link="gruppenkonto">
<span data-label class="text-s leading-18">Dieses Gerät abmelden</span>
<span class="leading-none"><svg width="12" height="12"><use xlink:href="#spon-chevron-right-f-s"/></svg>
</span>
</a>
<div class="font-sansUI text-shade-dark dark:text-shade-light text-s mt-16">
Sie möchten SPIEGEL+ auf mehreren Geräten zeitgleich nutzen?
<a href="https://abo.spiegel.de/microsites/pl/multiuser-angebote/?requestAccessToken=true&sara_icid=dirl_upd_LDczVK4trla4v4GQZqJpnQpQ7f6zoA&targetUrl=https%3A%2F%2Fwww.spiegel.de%2Fwissenschaft%2Fgletscher-diese-eisriesen-zerrinnen-a-5c889858-7313-4254-9f4a-dc0d3ab8587a" title="Zu unseren Angeboten" target="_self" class="border-b border-shade-light text-black dark:text-shade-lightest hover:border-black dark:hover:border-white focus:border-transparent font-normal font-sansUI text-s leading-normal">
Zu unseren Angeboten
</a>
</div>
</div>
</div>
</template>
</div>
<script defer x-data="{init() {if (window.adobe && window.adobe.target) {this.$publish('ADOBELAUNCH_SOURCE_READY');} else {$el.src = 'https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/launch-8a2e39fde471.min.js';}},}" @load="$publish('ADOBELAUNCH_SOURCE_READY')"></script>
<script>window.AdPositions = window.AdPositions || [];window.AdPositions.push({"id":"pos_header","sitetype":"desktop"});window.AdPositions.push({"id":"pos_header","sitetype":"mobile"});window.AdPositions.push({"cls":352,"id":"pos_footer","sitetype":"mobile"});window.AdPositions.push({"id":"pos_footer","sitetype":"desktop"});</script>
<script>var IQDComplete = {init: function () {return true;}};</script>
<script defer src="https://cdn.prod.www.spiegel.de/public/shared/generated/js/vendors.f1c4f8bff0ebc606b86f.js"></script>
<script defer src="https://cdn.prod.www.spiegel.de/public/shared/generated/js/index.f9ed19ce4e1f705b9cdd.js"></script>
<div class="hidden" data-el="footerSvgs"><svg id="spon-checkbox-f-l" class="stroke-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-checkbox-f-92303e48-c979-437e-b0c7-03cf8b7d720d">
        <g id="l-checkbox-f_2-92303e48-c979-437e-b0c7-03cf8b7d720d">
            <path id="check-92303e48-c979-437e-b0c7-03cf8b7d720d" d="M17 7l-7 9-3-4" stroke-width="2.2" stroke-linecap="round"/>
        </g>
    </g>
</svg><svg id="spon-warning-f-l" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="l-warning-f-a34bba5d-81df-4812-83f9-2f037aa22f8a">
        <path id="rectangle-3-a34bba5d-81df-4812-83f9-2f037aa22f8a" d="M10.345 6.633A1.5 1.5 0 0111.84 5h.322a1.5 1.5 0 011.494 1.633l-.566 6.37a1.093 1.093 0 01-2.178 0l-.566-6.37z" class="fill-current"/>
        <circle id="ellipse-3-a34bba5d-81df-4812-83f9-2f037aa22f8a" cx="12" cy="17.5" r="1.5" class="fill-current"/>
    </g>
</svg><svg id="spon-close-m" class="stroke-current" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <g id="m-close-08c1413e-f089-4fa8-8291-1e1e17760436">
        <path id="vector-08c1413e-f089-4fa8-8291-1e1e17760436" d="M12 12L4 4m8 0l-8 8" stroke-linecap="round"/>
    </g>
</svg>
</div>
<template id="prototype-notification-failure">
<div class="hidden bg-sec2-dark dark:bg-sec2-darker transition-opacity duration-100">
<div class="mx-auto lg:max-w-lg flex py-16 lg:px-24 md:px-24 sm:px-16">
<div class="flex items-center lg:ml-8 lg:mr-24 md:mr-24 sm:mr-16">
<span class="h-32 w-32 rounded-circle border border-white inline-flex items-center justify-center text-white dark:text-shade-lightest"><svg width="24" height="24"><use xlink:href="#spon-warning-f-l"/></svg>
</span>
</div>
<div class="grow flex flex-col justify-center font-sansUI text-white dark:text-shade-lightest lg:mr-24 md:mr-24 sm:mr-16">
<div class="text-base font-bold" data-notification-el="headline">
__proto_headline__
</div>
<div class="text-s mt-4 RichTextSystem RichTextSystem--inverted" data-notification-el="description">
__proto_description__
</div>
</div>
<div class="flex flex-col lg:mr-4">
<button class="text-white dark:text-shade-lightest block leading-none outline-focus" data-notification-el="closeIcon" data-sara-click-el="button"><svg width="16" height="16"><use xlink:href="#spon-close-m"/></svg>
<span class="sr-only">Hinweis schließen</span>
</button>
</div>
</div>
</div>
</template>
<template id="prototype-notification-success">
<div class="hidden bg-sec2-dark dark:bg-sec2-darker transition-opacity duration-100">
<div class="mx-auto lg:max-w-lg flex py-16 lg:px-24 md:px-24 sm:px-16">
<div class="flex items-center lg:ml-8 lg:mr-24 md:mr-24 sm:mr-16">
<span class="h-32 w-32 rounded-circle border border-white inline-flex items-center justify-center text-white dark:text-shade-lightest"><svg width="24" height="24"><use xlink:href="#spon-checkbox-f-l"/></svg>
</span>
</div>
<div class="grow flex flex-col justify-center font-sansUI text-white dark:text-shade-lightest lg:mr-24 md:mr-24 sm:mr-16">
<div class="text-base font-bold" data-notification-el="headline">
__proto_headline__
</div>
<div class="text-s mt-4 RichTextSystem RichTextSystem--inverted" data-notification-el="description">
__proto_description__
</div>
</div>
<div class="flex flex-col lg:mr-4">
<button class="text-white dark:text-shade-lightest block leading-none outline-focus" data-notification-el="closeIcon" data-sara-click-el="button"><svg width="16" height="16"><use xlink:href="#spon-close-m"/></svg>
<span class="sr-only">Hinweis schließen</span>
</button>
</div>
</div>
</div>
</template>
<script>if (typeof(Event) === 'function') {window.dispatchEvent(new Event('POLYGON_DOM_READY'));}</script>
</body>
</html>